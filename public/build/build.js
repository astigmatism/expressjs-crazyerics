!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.BrowserFS=t()}}(function(){var t;return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,n,r){!function(){function e(){}function r(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(this,arguments)}}function i(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}function o(t){return B(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function s(t,e){return o(t)?a(t,e):f(t,e)}function a(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function c(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function l(t){return c(Array(t),function(t,e){return e})}function u(t,e,n){return a(t,function(t,r,i){n=e(n,t,r,i)}),n}function f(t,e){a(P(t),function(n){e(t[n],n)})}function h(t){var e,n,r=-1;return o(t)?(e=t.length,function(){return r++,e>r?r:null}):(n=P(t),e=n.length,function(){return r++,e>r?n[r]:null})}function d(t,e){e=e||0;var n=-1,r=t.length;e&&(r-=e,r=0>r?0:r);for(var i=Array(r);++n<r;)i[n]=t[n+e];return i}function p(t){return function(e,n,r){return t(e,r)}}function y(t){return function(n,o,s){s=i(s||e),n=n||[];var a=h(n);if(0>=t)return s(null);var c=!1,l=0,u=!1;!function e(){if(c&&0>=l)return s(null);for(;t>l&&!u;){var i=a();if(null===i)return c=!0,void(0>=l&&s(null));l+=1,o(n[i],i,r(function(t){l-=1,t?(s(t),u=!0):e()}))}}()}}function g(t){return function(e,n,r){return t(D.eachOf,e,n,r)}}function m(t,e){return function(n,r,i){return e(y(t),n,r,i)}}function v(t){return function(e,n,r){return t(D.eachOfSeries,e,n,r)}}function w(t,n,r,o){o=i(o||e);var s=[];t(n,function(t,e,n){r(t,function(t,r){s[e]=r,n(t)})},function(t){o(t,s)})}function _(t){return m(t,w)}function b(t,e,n,r){var i=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e,r){n(t.value,function(e){e&&i.push(t),r()})},function(){r(c(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function S(t,e,n,r){var i=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e,r){n(t.value,function(e){e||i.push(t),r()})},function(){r(c(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function E(t,n,r,i){t(n,function(t,n,o){r(t,function(n){n?(i(t),i=e):o()})},function(){i()})}function k(t,n,r){r=r||e;var i=o(n)?[]:{};t(n,function(t,e,n){t(function(t){var r=d(arguments,1);r.length<=1&&(r=r[0]),i[e]=r,n(t)})},function(t){r(t,i)})}function I(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function x(t,n,i){function o(t,n,r,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");return t.started=!0,B(n)||(n=[n]),0===n.length&&t.idle()?D.setImmediate(function(){t.drain()}):(a(n,function(n){var o={data:n,callback:i||e};r?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),void D.setImmediate(t.process))}function s(t,e){return function(){l-=1;var n=arguments;a(e,function(t){t.callback.apply(t,n)}),t.tasks.length+l===0&&t.drain(),t.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var l=0,u={tasks:[],concurrency:n,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(t,e){o(u,t,!1,e)},kill:function(){u.drain=e,u.tasks=[]},unshift:function(t,e){o(u,t,!0,e)},process:function(){if(!u.paused&&l<u.concurrency&&u.tasks.length)for(;l<u.concurrency&&u.tasks.length;){var e=i?u.tasks.splice(0,i):u.tasks.splice(0,u.tasks.length),n=c(e,function(t){return t.data});0===u.tasks.length&&u.empty(),l+=1;var o=r(s(u,e));t(n,o)}},length:function(){return u.tasks.length},running:function(){return l},idle:function(){return u.tasks.length+l===0},pause:function(){u.paused=!0},resume:function(){if(u.paused!==!1){u.paused=!1;for(var t=Math.min(u.concurrency,u.tasks.length),e=1;t>=e;e++)D.setImmediate(u.process)}}};return u}function F(t){return function(e){var n=d(arguments,1);e.apply(null,n.concat([function(e){var n=d(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&a(n,function(e){console[t](e)}))}]))}}function C(t){return function(e,n,r){t(l(e),n,r)}}function T(t,e){function n(){var n=this,r=d(arguments),i=r.pop();return t(e,function(t,e,i){t.apply(n,r.concat([i]))},i)}if(arguments.length>2){var r=d(arguments,2);return n.apply(this,r)}return n}function O(t){return function(){var e=d(arguments),n=e.pop();e.push(function(){var t=arguments;r?D.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1}}var N,A,D={};N="object"==typeof window&&this===window?window:"object"==typeof global&&this===global?global:this,null!=N&&(A=N.async),D.noConflict=function(){return N.async=A,D};var L,R=Object.prototype.toString,B=Array.isArray||function(t){return"[object Array]"===R.call(t)},P=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};"function"==typeof setImmediate&&(L=setImmediate),"undefined"!=typeof process&&process.nextTick?(D.nextTick=process.nextTick,L?D.setImmediate=function(t){L(t)}:D.setImmediate=D.nextTick):L?(D.nextTick=function(t){L(t)},D.setImmediate=D.nextTick):(D.nextTick=function(t){setTimeout(t,0)},D.setImmediate=D.nextTick),D.forEach=D.each=function(t,e,n){return D.eachOf(t,p(e),n)},D.forEachSeries=D.eachSeries=function(t,e,n){return D.eachOfSeries(t,p(e),n)},D.forEachLimit=D.eachLimit=function(t,e,n,r){return y(e)(t,p(n),r)},D.forEachOf=D.eachOf=function(t,n,a){function c(t){t?a(t):(u+=1,u>=l&&a(null))}a=i(a||e),t=t||[];var l=o(t)?t.length:P(t).length,u=0;return l?void s(t,function(e,i){n(t[i],i,r(c))}):a(null)},D.forEachOfSeries=D.eachOfSeries=function(t,n,o){function s(){var e=!0;return null===c?o(null):(n(t[c],c,r(function(t){if(t)o(t);else{if(c=a(),null===c)return o(null);e?D.nextTick(s):s()}})),void(e=!1))}o=i(o||e),t=t||[];var a=h(t),c=a();s()},D.forEachOfLimit=D.eachOfLimit=function(t,e,n,r){y(e)(t,n,r)},D.map=g(w),D.mapSeries=v(w),D.mapLimit=function(t,e,n,r){return _(e)(t,n,r)},D.inject=D.foldl=D.reduce=function(t,e,n,r){D.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t||null,e)})},D.foldr=D.reduceRight=function(t,e,n,r){var i=c(t,function(t){return t}).reverse();D.reduce(i,e,n,r)},D.select=D.filter=g(b),D.selectSeries=D.filterSeries=v(b),D.reject=g(S),D.rejectSeries=v(S),D.detect=g(E),D.detectSeries=v(E),D.any=D.some=function(t,n,r){D.eachOf(t,function(t,i,o){n(t,function(t){t&&(r(!0),r=e),o()})},function(){r(!1)})},D.all=D.every=function(t,n,r){D.eachOf(t,function(t,i,o){n(t,function(t){t||(r(!1),r=e),o()})},function(){r(!0)})},D.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0}D.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){return t?n(t):void n(null,c(e.sort(r),function(t){return t.value}))})},D.auto=function(t,n){function r(t){h.unshift(t)}function o(t){for(var e=0;e<h.length;e+=1)if(h[e]===t)return void h.splice(e,1)}function s(){l--,a(h.slice(0),function(t){t()})}n=i(n||e);var c=P(t),l=c.length;if(!l)return n(null);var f={},h=[];r(function(){l||n(null,f)}),a(c,function(e){function i(t){var r=d(arguments,1);if(r.length<=1&&(r=r[0]),t){var i={};a(P(f),function(t){i[t]=f[t]}),i[e]=r,n(t,i)}else f[e]=r,D.setImmediate(s)}function c(){return u(y,function(t,e){return t&&f.hasOwnProperty(e)},!0)&&!f.hasOwnProperty(e)}function l(){c()&&(o(l),p[p.length-1](i,f))}for(var h,p=B(t[e])?t[e]:[t[e]],y=p.slice(0,Math.abs(p.length-1))||[],g=y.length;g--;){if(!(h=t[y[g]]))throw new Error("Has inexistant dependency");if(B(h)&&~h.indexOf(e))throw new Error("Has cyclic dependencies")}c()?p[p.length-1](i,f):r(l)})},D.retry=function(t,e,n){function r(r,i){function s(t,e){return function(n){t(function(t,r){n(!t||e,{err:t,result:r})},i)}}for(;t;)o.push(s(e,!(t-=1)));D.series(o,function(t,e){e=e[e.length-1],(r||n)(e.err,e.result)})}var i=5,o=[];return"function"==typeof t&&(n=e,e=t,t=i),t=parseInt(t,10)||i,n?r():r},D.waterfall=function(t,n){function r(t){return function(e){if(e)n.apply(null,arguments);else{var i=d(arguments,1),o=t.next();o?i.push(r(o)):i.push(n),O(t).apply(null,i)}}}if(n=i(n||e),!B(t)){var o=new Error("First argument to waterfall must be an array of functions");return n(o)}return t.length?void r(D.iterator(t))():n()},D.parallel=function(t,e){k(D.eachOf,t,e)},D.parallelLimit=function(t,e,n){k(y(e),t,n)},D.series=function(t,n){n=n||e;var r=o(t)?[]:{};D.eachOfSeries(t,function(t,e,n){t(function(t){var i=d(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(t){n(t,r)})},D.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},D.apply=function(t){var e=d(arguments,1);return function(){return t.apply(null,e.concat(d(arguments)))}},D.concat=g(I),D.concatSeries=v(I),D.whilst=function(t,e,n){t()?e(function(r){return r?n(r):void D.whilst(t,e,n)}):n(null)},D.doWhilst=function(t,e,n){t(function(r){if(r)return n(r);var i=d(arguments,1);e.apply(null,i)?D.doWhilst(t,e,n):n(null)})},D.until=function(t,e,n){t()?n(null):e(function(r){return r?n(r):void D.until(t,e,n)})},D.doUntil=function(t,e,n){t(function(r){if(r)return n(r);var i=d(arguments,1);e.apply(null,i)?n(null):D.doUntil(t,e,n)})},D.queue=function(t,e){var n=x(function(e,n){t(e[0],n)},e,1);return n},D.priorityQueue=function(t,n){function r(t,e){return t.priority-e.priority}function i(t,e,n){for(var r=-1,i=t.length-1;i>r;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function o(t,n,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");return t.started=!0,B(n)||(n=[n]),0===n.length?D.setImmediate(function(){t.drain()}):void a(n,function(n){var a={data:n,priority:o,callback:"function"==typeof s?s:e};t.tasks.splice(i(t.tasks,a,r)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),D.setImmediate(t.process)})}var s=D.queue(t,n);return s.push=function(t,e,n){o(s,t,e,n)},delete s.unshift,s},D.cargo=function(t,e){return x(t,1,e)},D.log=F("log"),D.dir=F("dir"),D.memoize=function(t,e){function n(){var n=d(arguments),o=n.pop(),s=e.apply(null,n);s in r?D.nextTick(function(){o.apply(null,r[s])}):s in i?i[s].push(o):(i[s]=[o],t.apply(null,n.concat([function(){r[s]=d(arguments);var t=i[s];delete i[s];for(var e=0,n=t.length;n>e;e++)t[e].apply(null,arguments)}])))}var r={},i={};return e=e||function(t){return t},n.memo=r,n.unmemoized=t,n},D.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},D.times=C(D.map),D.timesSeries=C(D.mapSeries),D.timesLimit=function(t,e,n,r){return D.mapLimit(l(t),e,n,r)},D.seq=function(){var t=arguments;return function(){var n=this,r=d(arguments),i=r.slice(-1)[0];"function"==typeof i?r.pop():i=e,D.reduce(t,r,function(t,e,r){e.apply(n,t.concat([function(){var t=arguments[0],e=d(arguments,1);r(t,e)}]))},function(t,e){i.apply(n,[t].concat(e))})}},D.compose=function(){return D.seq.apply(null,Array.prototype.reverse.call(arguments))},D.applyEach=function(){var t=d(arguments);return T.apply(null,[D.eachOf].concat(t))},D.applyEachSeries=function(){var t=d(arguments);return T.apply(null,[D.eachOfSeries].concat(t))},D.forever=function(t,n){function i(t){return t?o(t):void s(i)}var o=r(n||e),s=O(t);i()},D.ensureAsync=O,"undefined"!=typeof n&&n.exports?n.exports=D:"undefined"!=typeof t&&t.amd?t([],function(){return D}):N.async=D}()},{}],2:[function(e,n,r){!function(e){if("object"==typeof r&&"undefined"!=typeof n)n.exports=e();else if("function"==typeof t&&t.amd)t([],e);else{var i;i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,i.pako=e()}}(function(){return function t(n,r,i){function o(a,c){if(!r[a]){if(!n[a]){var l="function"==typeof e&&e;if(!c&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(t){var e=n[a][1][t];return o(e?e:t)},f,f.exports,t,n,r,i)}return r[a].exports}for(var s="function"==typeof e&&e,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+r),i);for(var o=0;r>o;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,s;for(r=0,e=0,n=t.length;n>e;e++)r+=t[e].length;for(s=new Uint8Array(r),i=0,e=0,n=t.length;n>e;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,n,r,i){for(var o=0;r>o;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],2:[function(t,e,n){"use strict";function r(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",r=0;e>r;r++)n+=String.fromCharCode(t[r]);return n}var i=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var a=new i.Buf8(256),c=0;256>c;c++)a[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;a[254]=a[254]=1,n.string2buf=function(t){var e,n,r,o,s,a=t.length,c=0;for(o=0;a>o;o++)n=t.charCodeAt(o),55296===(64512&n)&&a>o+1&&(r=t.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),c+=128>n?1:2048>n?2:65536>n?3:4;for(e=new i.Buf8(c),s=0,o=0;c>s;o++)n=t.charCodeAt(o),55296===(64512&n)&&a>o+1&&(r=t.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),128>n?e[s++]=n:2048>n?(e[s++]=192|n>>>6,e[s++]=128|63&n):65536>n?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},n.buf2binstring=function(t){return r(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;r>n;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,o,s,c=e||t.length,l=new Array(2*c);for(i=0,n=0;c>n;)if(o=t[n++],128>o)l[i++]=o;else if(s=a[o],s>4)l[i++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&c>n;)o=o<<6|63&t[n++],s--;s>1?l[i++]=65533:65536>o?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return r(l,i)},n.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128===(192&t[n]);)n--;return 0>n?e:0===n?e:n+a[t[n]]>e?n:e}},{"./common":1}],3:[function(t,e,n){"use strict";function r(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}e.exports=r},{}],4:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(t,e,n){"use strict";function r(){for(var t,e=[],n=0;256>n;n++){t=n;for(var r=0;8>r;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}function i(t,e,n,r){var i=o,s=r+n;t^=-1;for(var a=r;s>a;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}var o=r();e.exports=i},{}],6:[function(t,e,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},{}],7:[function(t,e,n){"use strict";var r=30,i=12;e.exports=function(t,e){var n,o,s,a,c,l,u,f,h,d,p,y,g,m,v,w,_,b,S,E,k,I,x,F,C;n=t.state,o=t.next_in,F=t.input,s=o+(t.avail_in-5),a=t.next_out,C=t.output,c=a-(e-t.avail_out),l=a+(t.avail_out-257),u=n.dmax,f=n.wsize,h=n.whave,d=n.wnext,p=n.window,y=n.hold,g=n.bits,m=n.lencode,v=n.distcode,w=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{15>g&&(y+=F[o++]<<g,g+=8,y+=F[o++]<<g,g+=8),b=m[y&w];e:for(;;){if(S=b>>>24,y>>>=S,g-=S,S=b>>>16&255,0===S)C[a++]=65535&b;else{if(!(16&S)){if(0===(64&S)){b=m[(65535&b)+(y&(1<<S)-1)];continue e}if(32&S){n.mode=i;break t}t.msg="invalid literal/length code",n.mode=r;break t}E=65535&b,S&=15,S&&(S>g&&(y+=F[o++]<<g,g+=8),E+=y&(1<<S)-1,y>>>=S,g-=S),15>g&&(y+=F[o++]<<g,g+=8,y+=F[o++]<<g,g+=8),b=v[y&_];n:for(;;){if(S=b>>>24,y>>>=S,g-=S,S=b>>>16&255,!(16&S)){if(0===(64&S)){b=v[(65535&b)+(y&(1<<S)-1)];continue n}t.msg="invalid distance code",n.mode=r;break t}if(k=65535&b,S&=15,S>g&&(y+=F[o++]<<g,g+=8,S>g&&(y+=F[o++]<<g,g+=8)),k+=y&(1<<S)-1,k>u){t.msg="invalid distance too far back",n.mode=r;break t}if(y>>>=S,g-=S,S=a-c,k>S){if(S=k-S,S>h&&n.sane){t.msg="invalid distance too far back",n.mode=r;break t}if(I=0,x=p,0===d){if(I+=f-S,E>S){E-=S;do C[a++]=p[I++];while(--S);I=a-k,x=C}}else if(S>d){if(I+=f+d-S,S-=d,E>S){E-=S;do C[a++]=p[I++];while(--S);if(I=0,E>d){S=d,E-=S;do C[a++]=p[I++];while(--S);I=a-k,x=C}}}else if(I+=d-S,E>S){E-=S;do C[a++]=p[I++];while(--S);I=a-k,x=C}for(;E>2;)C[a++]=x[I++],C[a++]=x[I++],C[a++]=x[I++],E-=3;E&&(C[a++]=x[I++],E>1&&(C[a++]=x[I++]))}else{I=a-k;do C[a++]=C[I++],C[a++]=C[I++],C[a++]=C[I++],E-=3;while(E>2);E&&(C[a++]=C[I++],E>1&&(C[a++]=C[I++]))}break}}break}}while(s>o&&l>a);E=g>>3,o-=E,g-=E<<3,y&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=s>o?5+(s-o):5-(o-s),t.avail_out=l>a?257+(l-a):257-(a-l),n.hold=y,n.bits=g}},{}],8:[function(t,e,n){"use strict";function r(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=B,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(pt),e.distcode=e.distdyn=new m.Buf32(yt),e.sane=1,e.back=-1,C):N}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):N}function a(t,e){var n,r;return t&&t.state?(r=t.state,0>e?(n=0,e=-e):(n=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?N:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,s(t))):N}function c(t,e){var n,r;return t?(r=new i,t.state=r,r.window=null,n=a(t,e),n!==C&&(t.state=null),n):N}function l(t){return c(t,mt)}function u(t){if(vt){var e;for(y=new m.Buf32(512),g=new m.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(b(E,t.lens,0,288,y,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;b(k,t.lens,0,32,g,0,t.work,{bits:5}),vt=!1}t.lencode=y,t.lenbits=9,t.distcode=g,t.distbits=5}function f(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new m.Buf8(o.wsize)),r>=o.wsize?(m.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),m.arraySet(o.window,e,n-r,i,o.wnext),r-=i,r?(m.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(t,e){var n,i,o,s,a,c,l,h,d,p,y,g,pt,yt,gt,mt,vt,wt,_t,bt,St,Et,kt,It,xt=0,Ft=new m.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return N;n=t.state,n.mode===X&&(n.mode=q),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,i=t.input,c=t.avail_in,h=n.hold,d=n.bits,p=c,y=l,Et=C;t:for(;;)switch(n.mode){case B:if(0===n.wrap){n.mode=q;break}for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(2&n.wrap&&35615===h){n.check=0,Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0),h=0,d=0,n.mode=P;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=ft;break}if((15&h)!==R){t.msg="unknown compression method",n.mode=ft;break}if(h>>>=4,d-=4,St=(15&h)+8,0===n.wbits)n.wbits=St;else if(St>n.wbits){t.msg="invalid window size",n.mode=ft;break}n.dmax=1<<St,t.adler=n.check=1,n.mode=512&h?V:X,h=0,d=0;break;case P:for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(n.flags=h,(255&n.flags)!==R){t.msg="unknown compression method",n.mode=ft;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=ft;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0)),h=0,d=0,n.mode=z;case z:for(;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.head&&(n.head.time=h),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,Ft[2]=h>>>16&255,Ft[3]=h>>>24&255,n.check=w(n.check,Ft,4,0)),h=0,d=0,n.mode=$;case $:for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0)),h=0,d=0,n.mode=U;case U:if(1024&n.flags){for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0)),h=0,d=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&(g=n.length,g>c&&(g=c),g&&(n.head&&(St=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),m.arraySet(n.head.extra,i,s,g,St)),512&n.flags&&(n.check=w(n.check,i,g,s)),c-=g,s+=g,n.length-=g),n.length))break t;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===c)break t;g=0;do St=i[s+g++],n.head&&St&&n.length<65536&&(n.head.name+=String.fromCharCode(St));while(St&&c>g);if(512&n.flags&&(n.check=w(n.check,i,g,s)),c-=g,s+=g,St)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=j;case j:if(4096&n.flags){if(0===c)break t;g=0;do St=i[s+g++],n.head&&St&&n.length<65536&&(n.head.comment+=String.fromCharCode(St));while(St&&c>g);if(512&n.flags&&(n.check=w(n.check,i,g,s)),c-=g,s+=g,St)break t}else n.head&&(n.head.comment=null);n.mode=Z;case Z:if(512&n.flags){for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(h!==(65535&n.check)){t.msg="header crc mismatch",n.mode=ft;break}h=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=X;break;case V:for(;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}t.adler=n.check=r(h),h=0,d=0,n.mode=W;case W:if(0===n.havedict)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=d,O;t.adler=n.check=1,n.mode=X;case X:if(e===x||e===F)break t;case q:if(n.last){h>>>=7&d,d-=7&d,n.mode=ct;break}for(;3>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}switch(n.last=1&h,h>>>=1,d-=1,3&h){case 0:n.mode=Y;break;case 1:if(u(n),n.mode=et,e===F){h>>>=2,d-=2;break t}break;case 2:n.mode=J;break;case 3:t.msg="invalid block type",n.mode=ft}h>>>=2,d-=2;break;case Y:for(h>>>=7&d,d-=7&d;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if((65535&h)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=ft;break}if(n.length=65535&h,h=0,d=0,n.mode=K,e===F)break t;case K:n.mode=G;case G:if(g=n.length){if(g>c&&(g=c),g>l&&(g=l),0===g)break t;m.arraySet(o,i,s,g,a),c-=g,s+=g,l-=g,a+=g,n.length-=g;break}n.mode=X;break;case J:for(;14>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(n.nlen=(31&h)+257,h>>>=5,d-=5,n.ndist=(31&h)+1,h>>>=5,d-=5,n.ncode=(15&h)+4,h>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=ft;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.ncode;){for(;3>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.lens[Ct[n.have++]]=7&h,h>>>=3,d-=3}for(;n.have<19;)n.lens[Ct[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,kt={bits:n.lenbits},Et=b(S,n.lens,0,19,n.lencode,0,n.work,kt),n.lenbits=kt.bits,Et){t.msg="invalid code lengths set",n.mode=ft;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.nlen+n.ndist;){for(;xt=n.lencode[h&(1<<n.lenbits)-1],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(16>vt)h>>>=gt,d-=gt,n.lens[n.have++]=vt;else{if(16===vt){for(It=gt+2;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(h>>>=gt,d-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=ft;break}St=n.lens[n.have-1],g=3+(3&h),h>>>=2,d-=2}else if(17===vt){for(It=gt+3;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=gt,d-=gt,St=0,g=3+(7&h),h>>>=3,d-=3}else{for(It=gt+7;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=gt,d-=gt,St=0,g=11+(127&h),h>>>=7,d-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=ft;break}for(;g--;)n.lens[n.have++]=St}}if(n.mode===ft)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=ft;break}if(n.lenbits=9,kt={bits:n.lenbits},Et=b(E,n.lens,0,n.nlen,n.lencode,0,n.work,kt),n.lenbits=kt.bits,Et){t.msg="invalid literal/lengths set",n.mode=ft;break}if(n.distbits=6,n.distcode=n.distdyn,kt={bits:n.distbits},Et=b(k,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,kt),n.distbits=kt.bits,Et){t.msg="invalid distances set",n.mode=ft;break}if(n.mode=et,e===F)break t;case et:n.mode=nt;case nt:if(c>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=d,_(t,y),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,i=t.input,c=t.avail_in,h=n.hold,d=n.bits,n.mode===X&&(n.back=-1);break}for(n.back=0;xt=n.lencode[h&(1<<n.lenbits)-1],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(mt&&0===(240&mt)){for(wt=gt,_t=mt,bt=vt;xt=n.lencode[bt+((h&(1<<wt+_t)-1)>>wt)],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=wt+gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=wt,d-=wt,n.back+=wt}if(h>>>=gt,d-=gt,n.back+=gt,n.length=vt,0===mt){n.mode=at;break}if(32&mt){n.back=-1,n.mode=X;break}if(64&mt){t.msg="invalid literal/length code",n.mode=ft;break}n.extra=15&mt,n.mode=rt;case rt:if(n.extra){for(It=n.extra;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=it;case it:for(;xt=n.distcode[h&(1<<n.distbits)-1],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(0===(240&mt)){for(wt=gt,_t=mt,bt=vt;xt=n.distcode[bt+((h&(1<<wt+_t)-1)>>wt)],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=wt+gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=wt,d-=wt,n.back+=wt}if(h>>>=gt,d-=gt,n.back+=gt,64&mt){t.msg="invalid distance code",n.mode=ft;break}n.offset=vt,n.extra=15&mt,n.mode=ot;case ot:if(n.extra){for(It=n.extra;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=ft;break}n.mode=st;case st:if(0===l)break t;if(g=y-l,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=ft;break}g>n.wnext?(g-=n.wnext,pt=n.wsize-g):pt=n.wnext-g,g>n.length&&(g=n.length),yt=n.window}else yt=o,pt=a-n.offset,g=n.length;g>l&&(g=l),l-=g,n.length-=g;do o[a++]=yt[pt++];while(--g);0===n.length&&(n.mode=nt);break;case at:if(0===l)break t;o[a++]=n.length,l--,n.mode=nt;break;case ct:if(n.wrap){for(;32>d;){if(0===c)break t;c--,h|=i[s++]<<d,d+=8}if(y-=l,t.total_out+=y,n.total+=y,y&&(t.adler=n.check=n.flags?w(n.check,o,y,a-y):v(n.check,o,y,a-y)),y=l,(n.flags?h:r(h))!==n.check){t.msg="incorrect data check",n.mode=ft;break}h=0,d=0}n.mode=lt;case lt:if(n.wrap&&n.flags){for(;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(h!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=ft;break}h=0,d=0}n.mode=ut;case ut:Et=T;break t;case ft:Et=A;break t;case ht:return D;case dt:default:return N}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=d,(n.wsize||y!==t.avail_out&&n.mode<ft&&(n.mode<ct||e!==I))&&f(t,t.output,t.next_out,y-t.avail_out)?(n.mode=ht,D):(p-=t.avail_in,y-=t.avail_out,t.total_in+=p,t.total_out+=y,n.total+=y,n.wrap&&y&&(t.adler=n.check=n.flags?w(n.check,o,y,t.next_out-y):v(n.check,o,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===X?128:0)+(n.mode===et||n.mode===K?256:0),(0===p&&0===y||e===I)&&Et===C&&(Et=L),Et)}function d(t){if(!t||!t.state)return N;var e=t.state;return e.window&&(e.window=null),t.state=null,C}function p(t,e){var n;return t&&t.state?(n=t.state,0===(2&n.wrap)?N:(n.head=e,e.done=!1,C)):N}var y,g,m=t("../utils/common"),v=t("./adler32"),w=t("./crc32"),_=t("./inffast"),b=t("./inftrees"),S=0,E=1,k=2,I=4,x=5,F=6,C=0,T=1,O=2,N=-2,A=-3,D=-4,L=-5,R=8,B=1,P=2,z=3,$=4,U=5,M=6,H=7,j=8,Z=9,V=10,W=11,X=12,q=13,Y=14,K=15,G=16,J=17,Q=18,tt=19,et=20,nt=21,rt=22,it=23,ot=24,st=25,at=26,ct=27,lt=28,ut=29,ft=30,ht=31,dt=32,pt=852,yt=592,gt=15,mt=gt,vt=!0;n.inflateReset=s,n.inflateReset2=a,n.inflateResetKeep=o,n.inflateInit=l,n.inflateInit2=c,n.inflate=h,n.inflateEnd=d,n.inflateGetHeader=p,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(t,e,n){"use strict";var r=t("../utils/common"),i=15,o=852,s=592,a=0,c=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,p,y,g,m,v){var w,_,b,S,E,k,I,x,F,C=v.bits,T=0,O=0,N=0,A=0,D=0,L=0,R=0,B=0,P=0,z=0,$=null,U=0,M=new r.Buf16(i+1),H=new r.Buf16(i+1),j=null,Z=0;for(T=0;i>=T;T++)M[T]=0;for(O=0;p>O;O++)M[e[n+O]]++;for(D=C,A=i;A>=1&&0===M[A];A--);if(D>A&&(D=A),0===A)return y[g++]=20971520,y[g++]=20971520,v.bits=1,0;for(N=1;A>N&&0===M[N];N++);for(N>D&&(D=N),B=1,T=1;i>=T;T++)if(B<<=1,B-=M[T],0>B)return-1;if(B>0&&(t===a||1!==A))return-1;for(H[1]=0,T=1;i>T;T++)H[T+1]=H[T]+M[T];for(O=0;p>O;O++)0!==e[n+O]&&(m[H[e[n+O]]++]=O);if(t===a?($=j=m,k=19):t===c?($=u,U-=257,j=f,Z-=257,k=256):($=h,j=d,k=-1),z=0,O=0,T=N,E=g,L=D,R=0,b=-1,P=1<<D,S=P-1,t===c&&P>o||t===l&&P>s)return 1;for(var V=0;;){V++,I=T-R,m[O]<k?(x=0,F=m[O]):m[O]>k?(x=j[Z+m[O]],F=$[U+m[O]]):(x=96,F=0),w=1<<T-R,_=1<<L,N=_;do _-=w,y[E+(z>>R)+_]=I<<24|x<<16|F|0;while(0!==_);for(w=1<<T-1;z&w;)w>>=1;if(0!==w?(z&=w-1,z+=w):z=0,O++,0===--M[T]){if(T===A)break;T=e[n+m[O]]}if(T>D&&(z&S)!==b){for(0===R&&(R=D),E+=N,L=T-R,B=1<<L;A>L+R&&(B-=M[L+R],!(0>=B));)L++,B<<=1;if(P+=1<<L,t===c&&P>o||t===l&&P>s)return 1;b=z&S,y[b]=D<<24|L<<16|E-g|0}}return 0!==z&&(y[E+z]=T-R<<24|64<<16|0),v.bits=D,0}},{"../utils/common":1}],10:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(t,e,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,
this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}],"/lib/inflate.js":[function(t,e,n){"use strict";function r(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}function i(t,e){return e=e||{},e.raw=!0,r(t,e)}var o=t("./zlib/inflate.js"),s=t("./utils/common"),a=t("./utils/strings"),c=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),h=Object.prototype.toString,d=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,e.windowBits);if(n!==c.Z_OK)throw new Error(l[n]);this.header=new f,o.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(t,e){var n,r,i,l,u,f=this.strm,d=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:e===!0?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?f.input=a.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(d),f.next_out=0,f.avail_out=d),n=o.inflate(f,c.Z_NO_FLUSH),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0===f.avail_out||n===c.Z_STREAM_END||0===f.avail_in&&(r===c.Z_FINISH||r===c.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=a.utf8border(f.output,f.next_out),l=f.next_out-i,u=a.buf2string(f.output,i),f.next_out=l,f.avail_out=d-l,l&&s.arraySet(f.output,f.output,i,l,0),this.onData(u)):this.onData(s.shrinkBuf(f.output,f.next_out)))}while(f.avail_in>0&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(r=c.Z_FINISH),r===c.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):r!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=d,n.inflate=r,n.inflateRaw=i,n.ungzip=r},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")})},{}],3:[function(t,e,n){function r(t,e){switch(void 0===e&&(e=t.toString()),t.name){case"NotFoundError":return new p(y.ENOENT,e);case"QuotaExceededError":return new p(y.ENOSPC,e);default:return new p(y.EIO,e)}}function i(t,e,n){return void 0===e&&(e=y.EIO),void 0===n&&(n=null),function(r){r.preventDefault(),t(new p(e,n))}}function o(t){var e=t.getBufferCore();e instanceof f.BufferCoreArrayBuffer||(t=new d(this._buffer.length),this._buffer.copy(t),e=t.getBufferCore());var n=e.getDataView();return n.buffer}var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},a=t("../core/buffer"),c=t("../core/browserfs"),l=t("../generic/key_value_filesystem"),u=t("../core/api_error"),f=t("../core/buffer_core_arraybuffer"),h=t("../core/global"),d=a.Buffer,p=u.ApiError,y=u.ErrorCode,g=h.indexedDB||h.mozIndexedDB||h.webkitIndexedDB||h.msIndexedDB,m=function(){function t(t,e){this.tx=t,this.store=e}return t.prototype.get=function(t,e){try{var n=this.store.get(t);n.onerror=i(e),n.onsuccess=function(t){var n=t.target.result;void 0===n?e(null,n):e(null,new d(n))}}catch(t){e(r(t))}},t}();n.IndexedDBROTransaction=m;var v=function(t){function e(e,n){t.call(this,e,n)}return s(e,t),e.prototype.put=function(t,e,n,s){try{var a,c=o(e);a=n?this.store.put(c,t):this.store.add(c,t),a.onerror=i(s),a.onsuccess=function(t){s(null,!0)}}catch(t){s(r(t))}},e.prototype.delete=function(t,e){try{var n=this.store.delete(t);n.onerror=i(e),n.onsuccess=function(t){e()}}catch(t){e(r(t))}},e.prototype.commit=function(t){setTimeout(t,0)},e.prototype.abort=function(t){var e;try{this.tx.abort()}catch(t){e=r(t)}finally{t(e)}},e}(m);n.IndexedDBRWTransaction=v;var w=function(){function t(t,e){var n=this;void 0===e&&(e="browserfs"),this.storeName=e;var r=g.open(this.storeName,1);r.onupgradeneeded=function(t){var e=t.target.result;e.objectStoreNames.contains(n.storeName)&&e.deleteObjectStore(n.storeName),e.createObjectStore(n.storeName)},r.onsuccess=function(e){n.db=e.target.result,t(null,n)},r.onerror=i(t,y.EACCES)}return t.prototype.name=function(){return"IndexedDB - "+this.storeName},t.prototype.clear=function(t){try{var e=this.db.transaction(this.storeName,"readwrite"),n=e.objectStore(this.storeName),o=n.clear();o.onsuccess=function(e){setTimeout(t,0)},o.onerror=i(t)}catch(e){t(r(e))}},t.prototype.beginTransaction=function(t){void 0===t&&(t="readonly");var e=this.db.transaction(this.storeName,t),n=e.objectStore(this.storeName);if("readwrite"===t)return new v(e,n);if("readonly"===t)return new m(e,n);throw new p(y.EINVAL,"Invalid transaction type.")},t}();n.IndexedDBStore=w;var _=function(t){function e(e,n){var r=this;t.call(this),new w(function(t,n){t?e(t):r.init(n,function(t){e(t,r)})},n)}return s(e,t),e.isAvailable=function(){try{return"undefined"!=typeof g&&null!==g.open("__browserfs_test__")}catch(t){return!1}},e}(l.AsyncKeyValueFileSystem);n.IndexedDBFileSystem=_,c.registerFileSystem("IndexedDB",_)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/global":24,"../generic/key_value_filesystem":35}],4:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("../core/file_system"),o=t("../generic/file_index"),s=t("../core/buffer"),a=t("../core/api_error"),c=t("../core/file_flag"),l=t("../generic/preload_file"),u=t("../core/browserfs"),f=t("../generic/xhr"),h=(s.Buffer,a.ApiError),d=a.ErrorCode,p=(c.FileFlag,c.ActionType),y=function(t){function e(e,n){void 0===n&&(n=""),t.call(this),null==e&&(e="index.json"),n.length>0&&"/"!==n.charAt(n.length-1)&&(n+="/"),this.prefix_url=n;var r=this._requestFileSync(e,"json");if(null==r)throw new Error("Unable to find listing at URL: "+e);this._index=o.FileIndex.from_listing(r)}return r(e,t),e.prototype.empty=function(){this._index.fileIterator(function(t){t.file_data=null})},e.prototype.getXhrPath=function(t){return"/"===t.charAt(0)&&(t=t.slice(1)),this.prefix_url+t},e.prototype._requestFileSizeAsync=function(t,e){f.getFileSizeAsync(this.getXhrPath(t),e)},e.prototype._requestFileSizeSync=function(t){return f.getFileSizeSync(this.getXhrPath(t))},e.prototype._requestFileAsync=function(t,e,n){f.asyncDownloadFile(this.getXhrPath(t),e,n)},e.prototype._requestFileSync=function(t,e){return f.syncDownloadFile(this.getXhrPath(t),e)},e.prototype.getName=function(){return"XmlHttpRequest"},e.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},e.prototype.diskSpace=function(t,e){e(0,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.preloadFile=function(t,e){var n=this._index.getInode(t);if(null===n)throw h.ENOENT(t);var r=n.getData();r.size=e.length,r.file_data=e},e.prototype.stat=function(t,e,n){var r=this._index.getInode(t);if(null===r)return n(h.ENOENT(t));var i;r.isFile()?(i=r.getData(),i.size<0?this._requestFileSizeAsync(t,function(t,e){return t?n(t):(i.size=e,void n(null,i.clone()))}):n(null,i.clone())):(i=r.getStats(),n(null,i))},e.prototype.statSync=function(t,e){var n=this._index.getInode(t);if(null===n)throw h.ENOENT(t);var r;return n.isFile()?(r=n.getData(),r.size<0&&(r.size=this._requestFileSizeSync(t))):r=n.getStats(),r},e.prototype.open=function(t,e,n,r){if(e.isWriteable())return r(new h(d.EPERM,t));var i=this,o=this._index.getInode(t);if(null===o)return r(h.ENOENT(t));if(o.isDir())return r(h.EISDIR(t));var s=o.getData();switch(e.pathExistsAction()){case p.THROW_EXCEPTION:case p.TRUNCATE_FILE:return r(h.EEXIST(t));case p.NOP:if(null!=s.file_data)return r(null,new l.NoSyncFile(i,t,e,s.clone(),s.file_data));this._requestFileAsync(t,"buffer",function(n,o){return n?r(n):(s.size=o.length,s.file_data=o,r(null,new l.NoSyncFile(i,t,e,s.clone(),o)))});break;default:return r(new h(d.EINVAL,"Invalid FileMode object."))}},e.prototype.openSync=function(t,e,n){if(e.isWriteable())throw new h(d.EPERM,t);var r=this._index.getInode(t);if(null===r)throw h.ENOENT(t);if(r.isDir())throw h.EISDIR(t);var i=r.getData();switch(e.pathExistsAction()){case p.THROW_EXCEPTION:case p.TRUNCATE_FILE:throw h.EEXIST(t);case p.NOP:if(null!=i.file_data)return new l.NoSyncFile(this,t,e,i.clone(),i.file_data);var o=this._requestFileSync(t,"buffer");return i.size=o.length,i.file_data=o,new l.NoSyncFile(this,t,e,i.clone(),o);default:throw new h(d.EINVAL,"Invalid FileMode object.")}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t))}catch(t){e(t)}},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw h.ENOENT(t);if(e.isFile())throw h.ENOTDIR(t);return e.getListing()},e.prototype.readFile=function(t,e,n,r){var i=r;this.open(t,n,420,function(t,n){if(t)return r(t);r=function(t,e){n.close(function(n){return null==t&&(t=n),i(t,e)})};var o=n,a=o.getBuffer();if(null===e)return a.length>0?r(t,a.sliceCopy()):r(t,new s.Buffer(0));try{r(null,a.toString(e))}catch(t){r(t)}})},e.prototype.readFileSync=function(t,e,n){var r=this.openSync(t,n,420);try{var i=r,o=i.getBuffer();return null===e?o.length>0?o.sliceCopy():new s.Buffer(0):o.toString(e)}finally{r.closeSync()}},e}(i.BaseFileSystem);n.XmlHttpRequest=y,u.registerFileSystem("XmlHttpRequest",y)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,"../generic/file_index":33,"../generic/preload_file":36,"../generic/xhr":37}],5:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("../core/file_system"),o=t("../core/file_flag"),s=t("../generic/preload_file"),a=t("../core/browserfs"),c=function(t){function e(e,n,r,i,o){t.call(this,e,n,r,i,o)}return r(e,t),e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},e.prototype.closeSync=function(){this.syncSync()},e}(s.PreloadFile),l=function(t){function e(e,n){if(t.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._sync=e,this._async=n,!e.supportsSynch())throw new Error("Expected synchronous storage.");if(n.supportsSynch())throw new Error("Expected asynchronous storage.")}return r(e,t),e.prototype.getName=function(){return"AsyncMirror"},e.isAvailable=function(){return!0},e.prototype._syncSync=function(t){this._sync.writeFileSync(t.getPath(),t.getBuffer(),null,o.FileFlag.getFileFlag("w"),t.getStats().mode),this.enqueueOp({apiMethod:"writeFile",arguments:[t.getPath(),t.getBuffer(),null,t.getFlag(),t.getStats().mode]})},e.prototype.initialize=function(t){var e=this;if(this._isInitialized)t();else{var n=function(t,n,r){"/"!==t&&e._sync.mkdirSync(t,n),e._async.readdir(t,function(e,n){function o(e){e?r(e):s<n.length?(i(t+"/"+n[s],o),s++):r()}if(e)r(e);else{var s=0;o()}})},r=function(t,n,r){e._async.readFile(t,null,o.FileFlag.getFileFlag("r"),function(i,s){if(i)r(i);else try{e._sync.writeFileSync(t,s,null,o.FileFlag.getFileFlag("w"),n)}catch(t){i=t}finally{r(i)}})},i=function(t,i){e._async.stat(t,!1,function(e,o){e?i(e):o.isDirectory()?n(t,o.mode,i):r(t,o.mode,i)})};n("/",0,function(n){n?t(n):(e._isInitialized=!0,t())})}},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},e.prototype.enqueueOp=function(t){var e=this;if(this._queue.push(t),!this._queueRunning){this._queueRunning=!0;var n=function(t){if(t&&console.error("WARNING: File system has desynchronized. Received following error: "+t+"\n$"),e._queue.length>0){var r=e._queue.shift(),i=r.arguments;i.push(n),e._async[r.apiMethod].apply(e._async,i)}else e._queueRunning=!1};n()}},e.prototype.renameSync=function(t,e){this._sync.renameSync(t,e),this.enqueueOp({apiMethod:"rename",arguments:[t,e]})},e.prototype.statSync=function(t,e){return this._sync.statSync(t,e)},e.prototype.openSync=function(t,e,n){var r=this._sync.openSync(t,e,n);return r.closeSync(),new c(this,t,e,this._sync.statSync(t,!1),this._sync.readFileSync(t,null,o.FileFlag.getFileFlag("r")))},e.prototype.unlinkSync=function(t){this._sync.unlinkSync(t),this.enqueueOp({apiMethod:"unlink",arguments:[t]})},e.prototype.rmdirSync=function(t){this._sync.rmdirSync(t),this.enqueueOp({apiMethod:"rmdir",arguments:[t]})},e.prototype.mkdirSync=function(t,e){this._sync.mkdirSync(t,e),this.enqueueOp({apiMethod:"mkdir",arguments:[t,e]})},e.prototype.readdirSync=function(t){return this._sync.readdirSync(t)},e.prototype.existsSync=function(t){return this._sync.existsSync(t)},e.prototype.chmodSync=function(t,e,n){this._sync.chmodSync(t,e,n),this.enqueueOp({apiMethod:"chmod",arguments:[t,e,n]})},e.prototype.chownSync=function(t,e,n,r){this._sync.chownSync(t,e,n,r),this.enqueueOp({apiMethod:"chown",arguments:[t,e,n,r]})},e.prototype.utimesSync=function(t,e,n){this._sync.utimesSync(t,e,n),this.enqueueOp({apiMethod:"utimes",arguments:[t,e,n]})},e}(i.SynchronousFileSystem);a.registerFileSystem("AsyncMirrorFS",l),e.exports=l},{"../core/browserfs":15,"../core/file_flag":22,"../core/file_system":23,"../generic/preload_file":36}],6:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("../generic/preload_file"),o=t("../core/file_system"),s=t("../core/node_fs_stats"),a=t("../core/buffer"),c=t("../core/api_error"),l=t("../core/node_path"),u=t("../core/browserfs"),f=t("../core/buffer_core_arraybuffer"),h=t("async"),d=a.Buffer,p=s.Stats,y=c.ApiError,g=c.ErrorCode,m=s.FileType,v=function(t){function e(e,n,r,i,o){t.call(this,e,n,r,i,o)}return r(e,t),e.prototype.sync=function(t){var e=this;if(this.isDirty()){var n=this.getBuffer(),r=n.getBufferCore();r instanceof f.BufferCoreArrayBuffer||(n=new d(n.length),this.getBuffer().copy(n),r=n.getBufferCore());var i=r.getDataView(),o=new DataView(i.buffer,i.byteOffset+n.getOffset(),n.length);this._fs._writeFileStrict(this.getPath(),o,function(n){n||e.resetDirty(),t(n)})}else t()},e.prototype.close=function(t){this.sync(t)},e}(i.PreloadFile);n.DropboxFile=v;var w=function(t){function e(e){t.call(this),this.client=e}return r(e,t),e.prototype.getName=function(){return"Dropbox"},e.isAvailable=function(){return"undefined"!=typeof Dropbox},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.empty=function(t){var e=this;this.client.readdir("/",function(n,r,i,o){if(n)t(e.convert(n));else{var s=function(t,n){e.client.remove(t.path,function(t,r){n(t?e.convert(t):t)})},a=function(n){n?t(e.convert(n)):t()};h.each(o,s,a)}})},e.prototype.rename=function(t,e,n){this.client.move(t,e,function(r,i){if(r){var o=r.response.error.indexOf(t)>-1?t:e;n(new y(g.ENOENT,o+" doesn't exist"))}else n()})},e.prototype.stat=function(t,e,n){var r=this;this.client.stat(t,function(e,i){if(!(e||null!=i&&i.isRemoved)){var o=new p(r._statType(i),i.size);return n(null,o)}n(new y(g.ENOENT,t+" doesn't exist"))})},e.prototype.open=function(t,e,n,r){var i=this;this.client.readFile(t,{arrayBuffer:!0},function(n,o,s,a){if(!n){var c;c=new d(null===o?0:o);var l=i._makeFile(t,e,s,c);return r(null,l)}if(e.isReadable())r(new y(g.ENOENT,t+" doesn't exist"));else switch(n.status){case 0:return console.error("No connection");case 404:var u=new ArrayBuffer(0);return i._writeFileStrict(t,u,function(n,o){if(n)r(n);else{var s=i._makeFile(t,e,o,new d(u));r(null,s)}});default:return console.log("Unhandled error: "+n)}})},e.prototype._writeFileStrict=function(t,e,n){var r=this,i=l.dirname(t);this.stat(i,!1,function(o,s){o?n(new y(g.ENOENT,"Can't create "+t+" because "+i+" doesn't exist")):r.client.writeFile(t,e,function(t,e){t?n(r.convert(t)):n(null,e)})})},e.prototype._statType=function(t){return t.isFile?m.FILE:m.DIRECTORY},e.prototype._makeFile=function(t,e,n,r){var i=this._statType(n),o=new p(i,n.size);return new v(this,t,e,o,r)},e.prototype._remove=function(t,e,n){var r=this;this.client.stat(t,function(i,o){i?e(new y(g.ENOENT,t+" doesn't exist")):o.isFile&&!n?e(new y(g.ENOTDIR,t+" is a file.")):!o.isFile&&n?e(new y(g.EISDIR,t+" is a directory.")):r.client.remove(t,function(n,r){e(n?new y(g.EIO,"Failed to remove "+t):null)})})},e.prototype.unlink=function(t,e){this._remove(t,e,!0)},e.prototype.rmdir=function(t,e){this._remove(t,e,!1)},e.prototype.mkdir=function(t,e,n){var r=this,i=l.dirname(t);this.client.stat(i,function(e,o){e?n(new y(g.ENOENT,"Can't create "+t+" because "+i+" doesn't exist")):r.client.mkdir(t,function(e,r){n(e?new y(g.EEXIST,t+" already exists"):null)})})},e.prototype.readdir=function(t,e){var n=this;this.client.readdir(t,function(t,r,i,o){return t?e(n.convert(t)):e(null,r)})},e.prototype.convert=function(t,e){switch(void 0===e&&(e=""),t.status){case 400:return new y(g.EINVAL,e);case 401:case 403:return new y(g.EIO,e);case 404:return new y(g.ENOENT,e);case 405:return new y(g.ENOTSUP,e);case 0:case 304:case 406:case 409:default:return new y(g.EIO,e)}},e}(o.BaseFileSystem);n.DropboxFileSystem=w,u.registerFileSystem("Dropbox",w)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],7:[function(t,e,n){function r(t,e,n,r){if("undefined"!=typeof navigator.webkitPersistentStorage)switch(t){case y.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(e,n,r);break;case y.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(e,n,r);break;default:r(null)}else y.webkitStorageInfo.requestQuota(t,e,n,r)}function i(t){return Array.prototype.slice.call(t||[],0)}var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},s=t("../generic/preload_file"),a=t("../core/file_system"),c=t("../core/api_error"),l=t("../core/file_flag"),u=t("../core/node_fs_stats"),f=t("../core/buffer"),h=t("../core/browserfs"),d=t("../core/buffer_core_arraybuffer"),p=t("../core/node_path"),y=t("../core/global"),g=t("async"),m=f.Buffer,v=u.Stats,w=u.FileType,_=c.ApiError,b=c.ErrorCode,S=l.ActionType,E=y.webkitRequestFileSystem||y.requestFileSystem||null,k=function(t){function e(e,n,r,i,o){t.call(this,e,n,r,i,o)}return o(e,t),e.prototype.sync=function(t){var e=this;if(this.isDirty()){var n={create:!1},r=this._fs,i=function(n){n.createWriter(function(n){var i=e.getBuffer(),o=i.getBufferCore();o instanceof d.BufferCoreArrayBuffer||(i=new m(i.length),e.getBuffer().copy(i),o=i.getBufferCore());var s=o.getDataView(),a=new DataView(s.buffer,s.byteOffset+i.getOffset(),i.length),c=new Blob([a]),l=c.size;n.onwriteend=function(){n.onwriteend=null,n.truncate(l),e.resetDirty(),t()},n.onerror=function(e){t(r.convert(e))},n.write(c)})},o=function(e){t(r.convert(e))};r.fs.root.getFile(this.getPath(),n,i,o)}else t()},e.prototype.close=function(t){this.sync(t)},e}(s.PreloadFile);n.HTML5FSFile=k;var I=function(t){function e(e,n){t.call(this),this.size=null!=e?e:5,this.type=null!=n?n:y.PERSISTENT;var r=1024,i=r*r;this.size*=i}return o(e,t),e.prototype.getName=function(){return"HTML5 FileSystem"},e.isAvailable=function(){return null!=E},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.convert=function(t,e){switch(void 0===e&&(e=""),t.name){case"QuotaExceededError":return new _(b.ENOSPC,e);case"NotFoundError":return new _(b.ENOENT,e);case"SecurityError":return new _(b.EACCES,e);case"InvalidModificationError":return new _(b.EPERM,e);case"SyntaxError":case"TypeMismatchError":return new _(b.EINVAL,e);default:return new _(b.EINVAL,e)}},e.prototype.convertErrorEvent=function(t,e){return void 0===e&&(e=""),new _(b.ENOENT,t.message+"; "+e)},e.prototype.allocate=function(t){var e=this;void 0===t&&(t=function(){});var n=function(n){e.fs=n,t()},i=function(n){t(e.convert(n))};this.type===y.PERSISTENT?r(this.type,this.size,function(t){E(e.type,t,n,i)},i):E(this.type,this.size,n,i)},e.prototype.empty=function(t){var e=this;this._readdir("/",function(n,r){if(n)console.error("Failed to empty FS"),t(n);else{var i=function(e){n?(console.error("Failed to empty FS"),t(n)):t()},o=function(t,n){var r=function(){n()},i=function(r){n(e.convert(r,t.fullPath))};t.isFile?t.remove(r,i):t.removeRecursively(r,i)};g.each(r,o,i)}})},e.prototype.rename=function(t,e,n){var r=this,i=2,o=0,s=this.fs.root,a=function(o){0===--i&&n(r.convert(o,"Failed to rename "+t+" to "+e+"."))},c=function(i){return 2===++o?void console.error("Something was identified as both a file and a directory. This should never happen."):t===e?n():void s.getDirectory(p.dirname(e),{},function(o){i.moveTo(o,p.basename(e),function(t){n()},function(o){i.isDirectory?r.unlink(e,function(i){i?a(o):r.rename(t,e,n)}):a(o)})},a)};s.getFile(t,{},c,a),s.getDirectory(t,{},c,a)},e.prototype.stat=function(t,e,n){var r=this,i={create:!1},o=function(t){var e=function(t){var e=new v(w.FILE,t.size);n(null,e)};t.file(e,a)},s=function(t){var e=4096,r=new v(w.DIRECTORY,e);n(null,r)},a=function(e){n(r.convert(e,t))},c=function(){r.fs.root.getDirectory(t,i,s,a)};this.fs.root.getFile(t,i,o,c)},e.prototype.open=function(t,e,n,r){var i=this,o={create:e.pathNotExistsAction()===S.CREATE_FILE,exclusive:e.isExclusive()},s=function(e){r(i.convertErrorEvent(e,t))},a=function(e){r(i.convert(e,t))},c=function(n){var o=function(n){var o=new FileReader;o.onloadend=function(s){var a=i._makeFile(t,e,n,o.result);r(null,a)},o.onerror=s,o.readAsArrayBuffer(n)};n.file(o,a)};this.fs.root.getFile(t,o,c,s)},e.prototype._statType=function(t){return t.isFile?w.FILE:w.DIRECTORY},e.prototype._makeFile=function(t,e,n,r){void 0===r&&(r=new ArrayBuffer(0));var i=new v(w.FILE,n.size),o=new m(r);return new k(this,t,e,i,o)},e.prototype._remove=function(t,e,n){var r=this,i=function(n){var i=function(){e()},o=function(n){e(r.convert(n,t))};n.remove(i,o)},o=function(n){e(r.convert(n,t))},s={create:!1};n?this.fs.root.getFile(t,s,i,o):this.fs.root.getDirectory(t,s,i,o)},e.prototype.unlink=function(t,e){this._remove(t,e,!0)},e.prototype.rmdir=function(t,e){this._remove(t,e,!1)},e.prototype.mkdir=function(t,e,n){var r=this,i={create:!0,exclusive:!0},o=function(t){n()},s=function(e){n(r.convert(e,t))};this.fs.root.getDirectory(t,i,o,s)},e.prototype._readdir=function(t,e){var n=this;this.fs.root.getDirectory(t,{create:!1},function(r){var o=r.createReader(),s=[],a=function(r){e(n.convert(r,t))},c=function(){o.readEntries(function(t){t.length?(s=s.concat(i(t)),c()):e(null,s)},a)};c()})},e.prototype.readdir=function(t,e){this._readdir(t,function(t,n){if(null!=t)return e(t);for(var r=[],i=0;i<n.length;i++)r.push(n[i].name);e(null,r)})},e}(a.BaseFileSystem);n.HTML5FS=I,h.registerFileSystem("HTML5FS",I)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/global":24,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],8:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("../generic/key_value_filesystem"),o=t("../core/browserfs"),s=function(){function t(){this.store={}}return t.prototype.name=function(){return"In-memory"},t.prototype.clear=function(){this.store={}},t.prototype.beginTransaction=function(t){return new i.SimpleSyncRWTransaction(this)},t.prototype.get=function(t){return this.store[t]},t.prototype.put=function(t,e,n){return!(!n&&this.store.hasOwnProperty(t))&&(this.store[t]=e,!0)},t.prototype.delete=function(t){delete this.store[t]},t}();n.InMemoryStore=s;var a=function(t){function e(){t.call(this,{store:new s})}return r(e,t),e}(i.SyncKeyValueFileSystem);n.InMemoryFileSystem=a,o.registerFileSystem("InMemory",a)},{"../core/browserfs":15,"../generic/key_value_filesystem":35}],9:[function(t,e,n){var r,i=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},o=t("../core/buffer"),s=t("../core/browserfs"),a=t("../generic/key_value_filesystem"),c=t("../core/api_error"),l=t("../core/global"),u=o.Buffer,f=c.ApiError,h=c.ErrorCode,d=!1;try{l.localStorage.setItem("__test__",String.fromCharCode(55296)),d=l.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(t){d=!1}r=d?"binary_string":"binary_string_ie";var p=function(){function t(){}return t.prototype.name=function(){return"LocalStorage"},t.prototype.clear=function(){l.localStorage.clear()},t.prototype.beginTransaction=function(t){return new a.SimpleSyncRWTransaction(this)},t.prototype.get=function(t){try{var e=l.localStorage.getItem(t);if(null!==e)return new u(e,r)}catch(t){}},t.prototype.put=function(t,e,n){try{return!(!n&&null!==l.localStorage.getItem(t))&&(l.localStorage.setItem(t,e.toString(r)),!0)}catch(t){throw new f(h.ENOSPC,"LocalStorage is full.")}},t.prototype.delete=function(t){try{l.localStorage.removeItem(t)}catch(e){throw new f(h.EIO,"Unable to delete key "+t+": "+e)}},t}();n.LocalStorageStore=p;var y=function(t){function e(){t.call(this,{store:new p})}return i(e,t),e.isAvailable=function(){return"undefined"!=typeof l.localStorage},e}(a.SyncKeyValueFileSystem);n.LocalStorageFileSystem=y,s.registerFileSystem("LocalStorage",y)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/global":24,"../generic/key_value_filesystem":35}],10:[function(t,e,n){function r(t,e,n){return e?function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[0],i=this._get_fs(r);e[0]=i.path;try{return i.fs[t].apply(i.fs,e)}catch(t){throw this.standardizeError(t,i.path,r),t}}:function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[0],i=this._get_fs(r);if(e[0]=i.path,"function"==typeof e[e.length-1]){var o=e[e.length-1],s=this;e[e.length-1]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];t.length>0&&t[0]instanceof a.ApiError&&s.standardizeError(t[0],i.path,r),o.apply(null,t)}}return i.fs[t].apply(i.fs,e)}}var i=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},o=t("../core/file_system"),s=t("./in_memory"),a=t("../core/api_error"),c=t("../core/node_fs"),l=t("../core/browserfs"),u=a.ApiError,f=a.ErrorCode,h=function(t){function e(){t.call(this),this.mntMap={},this.rootFs=new s.InMemoryFileSystem}return i(e,t),e.prototype.mount=function(t,e){if(this.mntMap[t])throw new u(f.EINVAL,"Mount point "+t+" is already taken.");this.rootFs.mkdirSync(t,511),this.mntMap[t]=e},e.prototype.umount=function(t){if(!this.mntMap[t])throw new u(f.EINVAL,"Mount point "+t+" is already unmounted.");delete this.mntMap[t],this.rootFs.rmdirSync(t)},e.prototype._get_fs=function(t){for(var e in this.mntMap){var n=this.mntMap[e];if(0===t.indexOf(e))return t=t.substr(e.length>1?e.length:0),""===t&&(t="/"),{fs:n,path:t}}return{fs:this.rootFs,path:t}},e.prototype.getName=function(){return"MountableFileSystem"},e.isAvailable=function(){return!0},e.prototype.diskSpace=function(t,e){e(0,0)},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.standardizeError=function(t,e,n){var r;return-1!==(r=t.message.indexOf(e))&&(t.message=t.message.substr(0,r)+n+t.message.substr(r+e.length)),t},e.prototype.rename=function(t,e,n){var r=this._get_fs(t),i=this._get_fs(e);if(r.fs===i.fs){var o=this;return r.fs.rename(r.path,i.path,function(s){s&&o.standardizeError(o.standardizeError(s,r.path,t),i.path,e),n(s)})}return c.readFile(t,function(r,i){return r?n(r):void c.writeFile(e,i,function(e){return e?n(e):void c.unlink(t,n)})})},e.prototype.renameSync=function(t,e){var n=this._get_fs(t),r=this._get_fs(e);if(n.fs===r.fs)try{return n.fs.renameSync(n.path,r.path)}catch(i){throw this.standardizeError(this.standardizeError(i,n.path,t),r.path,e),i}var i=c.readFileSync(t);return c.writeFileSync(e,i),c.unlinkSync(t)},e}(o.BaseFileSystem);n.MountableFileSystem=h;for(var d=[["readdir","exists","unlink","rmdir","readlink"],["stat","mkdir","realpath","truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]],p=0;p<d.length;p++)for(var y=d[p],g=0;g<y.length;g++){var m=y[g];h.prototype[m]=r(m,!1,p+1),h.prototype[m+"Sync"]=r(m+"Sync",!0,p+1)}l.registerFileSystem("MountableFileSystem",h)},{"../core/api_error":14,"../core/browserfs":15,"../core/file_system":23,"../core/node_fs":26,"./in_memory":8}],11:[function(t,e,n){function r(t){return 146|t}var i=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},o=t("../core/file_system"),s=t("../core/buffer"),a=t("../core/api_error"),c=t("../core/file_flag"),l=t("../generic/preload_file"),u=t("../core/browserfs"),f=t("../core/node_path"),h=a.ApiError,d=s.Buffer,p=a.ErrorCode,y="/.deletedFiles.log",g=function(t){function e(e,n,r,i,o){t.call(this,e,n,r,i,o)}return i(e,t),e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},e.prototype.closeSync=function(){this.syncSync()},e}(l.PreloadFile),m=function(t){function e(e,n){if(t.call(this),this._isInitialized=!1,this._deletedFiles={},this._deleteLog=null,this._writable=e,this._readable=n,this._writable.isReadOnly())throw new h(p.EINVAL,"Writable file system must be writable.");if(!this._writable.supportsSynch()||!this._readable.supportsSynch())throw new h(p.EINVAL,"OverlayFS currently only operates on synchronous file systems.")}return i(e,t),e.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},e.prototype.createParentDirectories=function(t){for(var e=this,n=f.dirname(t),r=[];!this._writable.existsSync(n);)r.push(n),n=f.dirname(n);r=r.reverse(),r.forEach(function(t){e._writable.mkdirSync(t,e.statSync(t,!1).mode)})},e.isAvailable=function(){return!0},e.prototype._syncSync=function(t){this.createParentDirectories(t.getPath()),this._writable.writeFileSync(t.getPath(),t.getBuffer(),null,c.FileFlag.getFileFlag("w"),t.getStats().mode)},e.prototype.getName=function(){return"OverlayFS"},e.prototype.initialize=function(t){var e=this;this._isInitialized?t():this._writable.readFile(y,"utf8",c.FileFlag.getFileFlag("r"),function(n,r){if(n){if(n.type!==p.ENOENT)return t(n)}else r.split("\n").forEach(function(t){e._deletedFiles[t.slice(1)]="d"===t.slice(0,1)});e._writable.open(y,c.FileFlag.getFileFlag("a"),420,function(n,r){n?t(n):(e._deleteLog=r,t())})})},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps();
},e.prototype.deletePath=function(t){this._deletedFiles[t]=!0;var e=new d("d"+t+"\n");this._deleteLog.writeSync(e,0,e.length,null),this._deleteLog.syncSync()},e.prototype.undeletePath=function(t){if(this._deletedFiles[t]){this._deletedFiles[t]=!1;var e=new d("u"+t);this._deleteLog.writeSync(e,0,e.length,null),this._deleteLog.syncSync()}},e.prototype.renameSync=function(t,e){var n=this,r=this.statSync(t,!1);if(r.isDirectory()){if(t===e)return;var i=511;if(this.existsSync(e)){var o=this.statSync(e,!1),i=o.mode;if(!o.isDirectory())throw new h(p.ENOTDIR,"Path "+e+" is a file.");if(this.readdirSync(e).length>0)throw new h(p.ENOTEMPTY,"Path "+e+" not empty.")}this._writable.existsSync(t)?this._writable.renameSync(t,e):this._writable.existsSync(e)||this._writable.mkdirSync(e,i),this._readable.existsSync(t)&&this._readable.readdirSync(t).forEach(function(r){n.renameSync(f.resolve(t,r),f.resolve(e,r))})}else{if(this.existsSync(e)&&this.statSync(e,!1).isDirectory())throw new h(p.EISDIR,"Path "+e+" is a directory.");this.writeFileSync(e,this.readFileSync(t,null,c.FileFlag.getFileFlag("r")),null,c.FileFlag.getFileFlag("w"),r.mode)}t!==e&&this.existsSync(t)&&this.unlinkSync(t)},e.prototype.statSync=function(t,e){try{return this._writable.statSync(t,e)}catch(i){if(this._deletedFiles[t])throw new h(p.ENOENT,"Path "+t+" does not exist.");var n=this._readable.statSync(t,e).clone();return n.mode=r(n.mode),n}},e.prototype.openSync=function(t,e,n){if(this.existsSync(t))switch(e.pathExistsAction()){case c.ActionType.TRUNCATE_FILE:return this.createParentDirectories(t),this._writable.openSync(t,e,n);case c.ActionType.NOP:if(this._writable.existsSync(t))return this._writable.openSync(t,e,n);var r=this._readable.statSync(t,!1).clone();return r.mode=n,new g(this,t,e,r,this._readable.readFileSync(t,null,c.FileFlag.getFileFlag("r")));default:throw new h(p.EEXIST,"Path "+t+" exists.")}else switch(e.pathNotExistsAction()){case c.ActionType.CREATE_FILE:return this.createParentDirectories(t),this._writable.openSync(t,e,n);default:throw new h(p.ENOENT,"Path "+t+" does not exist.")}},e.prototype.unlinkSync=function(t){if(!this.existsSync(t))throw new h(p.ENOENT,"Path "+t+" does not exist.");this._writable.existsSync(t)&&this._writable.unlinkSync(t),this.existsSync(t)&&this.deletePath(t)},e.prototype.rmdirSync=function(t){if(!this.existsSync(t))throw new h(p.ENOENT,"Path "+t+" does not exist.");if(this._writable.existsSync(t)&&this._writable.rmdirSync(t),this.existsSync(t)){if(this.readdirSync(t).length>0)throw new h(p.ENOTEMPTY,"Directory "+t+" is not empty.");this.deletePath(t)}},e.prototype.mkdirSync=function(t,e){if(this.existsSync(t))throw new h(p.EEXIST,"Path "+t+" already exists.");this.createParentDirectories(t),this._writable.mkdirSync(t,e)},e.prototype.readdirSync=function(t){var e=this,n=this.statSync(t,!1);if(!n.isDirectory())throw new h(p.ENOTDIR,"Path "+t+" is not a directory.");var r=[];try{r=r.concat(this._writable.readdirSync(t))}catch(t){}try{r=r.concat(this._readable.readdirSync(t))}catch(t){}var i={};return r.filter(function(n){var r=void 0===i[n]&&e._deletedFiles[t+"/"+n]!==!0;return i[n]=!0,r})},e.prototype.existsSync=function(t){return this._writable.existsSync(t)||this._readable.existsSync(t)&&this._deletedFiles[t]!==!0},e.prototype.chmodSync=function(t,e,n){var r=this;this.operateOnWritable(t,function(){r._writable.chmodSync(t,e,n)})},e.prototype.chownSync=function(t,e,n,r){var i=this;this.operateOnWritable(t,function(){i._writable.chownSync(t,e,n,r)})},e.prototype.utimesSync=function(t,e,n){var r=this;this.operateOnWritable(t,function(){r._writable.utimesSync(t,e,n)})},e.prototype.operateOnWritable=function(t,e){if(!this.existsSync(t))throw new h(p.ENOENT,"Path "+t+" does not exist.");this._writable.existsSync(t)||this.copyToWritable(t),e()},e.prototype.copyToWritable=function(t){var e=this.statSync(t,!1);e.isDirectory()?this._writable.mkdirSync(t,e.mode):this.writeFileSync(t,this._readable.readFileSync(t,null,c.FileFlag.getFileFlag("r")),null,c.FileFlag.getFileFlag("w"),this.statSync(t,!1).mode)},e}(o.SynchronousFileSystem);u.registerFileSystem("OverlayFS",m),e.exports=m},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,"../core/node_path":28,"../generic/preload_file":36}],12:[function(t,e,n){function r(t){return{type:f.ERROR,errorData:t.writeToBuffer().toArrayBuffer()}}function i(t){return y.ApiError.fromBuffer(new b(t.errorData))}function o(t){return{type:f.STATS,statsData:t.toBuffer().toArrayBuffer()}}function s(t){return v.Stats.fromBuffer(new b(t.statsData))}function a(t){return{type:f.FILEFLAG,flagStr:t.getFlagString()}}function c(t){return g.FileFlag.getFileFlag(t.flagStr)}function l(t){return{type:f.BUFFER,data:t.toArrayBuffer()}}function u(t){return new b(t.data)}var f,h=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},d=t("../core/file_system"),p=t("../core/buffer"),y=t("../core/api_error"),g=t("../core/file_flag"),m=t("../core/file"),v=t("../core/node_fs_stats"),w=t("../generic/preload_file"),_=t("../core/browserfs"),b=p.Buffer;!function(t){t[t.CB=0]="CB",t[t.FD=1]="FD",t[t.ERROR=2]="ERROR",t[t.STATS=3]="STATS",t[t.PROBE=4]="PROBE",t[t.FILEFLAG=5]="FILEFLAG",t[t.BUFFER=6]="BUFFER"}(f||(f={}));var S=function(){function t(){this._callbacks={},this._nextId=0}return t.prototype.toRemoteArg=function(t){var e=this._nextId++;return this._callbacks[e]=t,{type:f.CB,id:e}},t.prototype.toLocalArg=function(t){var e=this._callbacks[t];return delete this._callbacks[t],e},t}(),E=function(){function t(){this._fileDescriptors={},this._nextId=0}return t.prototype.toRemoteArg=function(t,e,n,r){var i,o,s=this._nextId++;this._fileDescriptors[s]=t,t.stat(function(a,c){a?r(a):(o=c.toBuffer().toArrayBuffer(),n.isReadable()?t.read(new b(c.size),0,c.size,0,function(t,a,c){t?r(t):(i=c.toArrayBuffer(),r(null,{type:f.FD,id:s,data:i,stat:o,path:e,flag:n.getFlagString()}))}):r(null,{type:f.FD,id:s,data:new ArrayBuffer(0),stat:o,path:e,flag:n.getFlagString()}))})},t.prototype._applyFdChanges=function(t,e){var n=this._fileDescriptors[t.id],r=new b(t.data),i=v.Stats.fromBuffer(new b(t.stat)),o=g.FileFlag.getFileFlag(t.flag);o.isWriteable()?n.write(r,0,r.length,o.isAppendable()?n.getPos():0,function(t){function s(){n.stat(function(t,r){t?e(t):r.mode!==i.mode?n.chmod(i.mode,function(t){e(t,n)}):e(t,n)})}t?e(t):o.isAppendable()?s():n.truncate(r.length,function(){s()})}):e(null,n)},t.prototype.applyFdAPIRequest=function(t,e){var n=this,r=t.args[0];this._applyFdChanges(r,function(i,o){i?e(i):o[t.method](function(i){"close"===t.method&&delete n._fileDescriptors[r.id],e(i)})})},t}(),k=function(t){function e(e,n,r,i,o,s){t.call(this,e,n,r,i,s),this._remoteFdId=o}return h(e,t),e.prototype.getRemoteFdId=function(){return this._remoteFdId},e.prototype.toRemoteArg=function(){return{type:f.FD,id:this._remoteFdId,data:this.getBuffer().toArrayBuffer(),stat:this.getStats().toBuffer().toArrayBuffer(),path:this.getPath(),flag:this.getFlag().getFlagString()}},e.prototype._syncClose=function(t,e){var n=this;this.isDirty()?this._fs.syncClose(t,this,function(t){t||n.resetDirty(),e(t)}):e()},e.prototype.sync=function(t){this._syncClose("sync",t)},e.prototype.close=function(t){this._syncClose("close",t)},e}(w.PreloadFile),I=function(t){function e(e){var n=this;t.call(this),this._callbackConverter=new S,this._isInitialized=!1,this._isReadOnly=!1,this._supportLinks=!1,this._supportProps=!1,this._outstandingRequests={},this._worker=e,this._worker.addEventListener("message",function(t){if(null!=t.data&&"object"==typeof t.data&&t.data.hasOwnProperty("browserfsMessage")&&t.data.browserfsMessage){var e,r=t.data,i=r.args,o=new Array(i.length);for(e=0;e<o.length;e++)o[e]=n._argRemote2Local(i[e]);n._callbackConverter.toLocalArg(r.cbId).apply(null,o)}})}return h(e,t),e.isAvailable=function(){return"undefined"!=typeof Worker},e.prototype.getName=function(){return"WorkerFS"},e.prototype._argRemote2Local=function(t){if(null==t)return t;switch(typeof t){case"object":if(null==t.type||"number"!=typeof t.type)return t;var e=t;switch(e.type){case f.ERROR:return i(e);case f.FD:var n=e;return new k(this,n.path,g.FileFlag.getFileFlag(n.flag),v.Stats.fromBuffer(new b(n.stat)),n.id,new b(n.data));case f.STATS:return s(e);case f.FILEFLAG:return c(e);case f.BUFFER:return u(e);default:return t}default:return t}},e.prototype._argLocal2Remote=function(t){if(null==t)return t;switch(typeof t){case"object":return t instanceof v.Stats?o(t):t instanceof y.ApiError?r(t):t instanceof k?t.toRemoteArg():t instanceof g.FileFlag?a(t):t instanceof b?l(t):t;case"function":return this._callbackConverter.toRemoteArg(t);default:return t}},e.prototype.initialize=function(t){var e=this;if(this._isInitialized)t();else{var n={browserfsMessage:!0,method:"probe",args:[this._callbackConverter.toRemoteArg(function(n){e._isInitialized=!0,e._isReadOnly=n.isReadOnly,e._supportLinks=n.supportsLinks,e._supportProps=n.supportsProps,t()})]};this._worker.postMessage(n)}},e.prototype.isReadOnly=function(){return this._isReadOnly},e.prototype.supportsSynch=function(){return!1},e.prototype.supportsLinks=function(){return this._supportLinks},e.prototype.supportsProps=function(){return this._supportProps},e.prototype._rpc=function(t,e){var n,r={browserfsMessage:!0,method:t,args:null},i=new Array(e.length);for(n=0;n<e.length;n++)i[n]=this._argLocal2Remote(e[n]);r.args=i,this._worker.postMessage(r)},e.prototype.rename=function(t,e,n){this._rpc("rename",arguments)},e.prototype.stat=function(t,e,n){this._rpc("stat",arguments)},e.prototype.open=function(t,e,n,r){this._rpc("open",arguments)},e.prototype.unlink=function(t,e){this._rpc("unlink",arguments)},e.prototype.rmdir=function(t,e){this._rpc("rmdir",arguments)},e.prototype.mkdir=function(t,e,n){this._rpc("mkdir",arguments)},e.prototype.readdir=function(t,e){this._rpc("readdir",arguments)},e.prototype.exists=function(t,e){this._rpc("exists",arguments)},e.prototype.realpath=function(t,e,n){this._rpc("realpath",arguments)},e.prototype.truncate=function(t,e,n){this._rpc("truncate",arguments)},e.prototype.readFile=function(t,e,n,r){this._rpc("readFile",arguments)},e.prototype.writeFile=function(t,e,n,r,i,o){this._rpc("writeFile",arguments)},e.prototype.appendFile=function(t,e,n,r,i,o){this._rpc("appendFile",arguments)},e.prototype.chmod=function(t,e,n,r){this._rpc("chmod",arguments)},e.prototype.chown=function(t,e,n,r,i){this._rpc("chown",arguments)},e.prototype.utimes=function(t,e,n,r){this._rpc("utimes",arguments)},e.prototype.link=function(t,e,n){this._rpc("link",arguments)},e.prototype.symlink=function(t,e,n,r){this._rpc("symlink",arguments)},e.prototype.readlink=function(t,e){this._rpc("readlink",arguments)},e.prototype.syncClose=function(t,e,n){this._worker.postMessage({browserfsMessage:!0,method:t,args:[e.toRemoteArg(),this._callbackConverter.toRemoteArg(n)]})},e.attachRemoteListener=function(t){function e(t,e,n){switch(typeof t){case"object":t instanceof v.Stats?n(null,o(t)):t instanceof y.ApiError?n(null,r(t)):t instanceof m.BaseFile?n(null,h.toRemoteArg(t,e[0],e[1],n)):t instanceof g.FileFlag?n(null,a(t)):t instanceof b?n(null,l(t)):n(null,t);break;default:n(null,t)}}function n(n,o){if(null==n)return n;switch(typeof n){case"object":if("number"!=typeof n.type)return n;var a=n;switch(a.type){case f.CB:var l=n.id;return function(){function n(e){c>0&&(c=-1,s={browserfsMessage:!0,cbId:l,args:[r(e)]},t.postMessage(s))}var i,s,a=new Array(arguments.length),c=arguments.length;for(i=0;i<arguments.length;i++)!function(r,i){e(i,o,function(e,i){a[r]=i,e?n(e):0===--c&&(s={browserfsMessage:!0,cbId:l,args:a},t.postMessage(s))})}(i,arguments[i]);0===arguments.length&&(s={browserfsMessage:!0,cbId:l,args:a},t.postMessage(s))};case f.ERROR:return i(a);case f.STATS:return s(a);case f.FILEFLAG:return c(a);case f.BUFFER:return u(a);default:return n}default:return n}}var h=new E,d=_.BFSRequire("fs");t.addEventListener("message",function(e){if(null!=e.data&&"object"==typeof e.data&&e.data.hasOwnProperty("browserfsMessage")&&e.data.browserfsMessage){var i,o=e.data,s=o.args,a=new Array(s.length);switch(o.method){case"close":case"sync":!function(){var e=s[1];h.applyFdAPIRequest(o,function(n){var i={browserfsMessage:!0,cbId:e.id,args:n?[r(n)]:[]};t.postMessage(i)})}();break;case"probe":!function(){var e=d.getRootFS(),n=s[0],r={browserfsMessage:!0,cbId:n.id,args:[{type:f.PROBE,isReadOnly:e.isReadOnly(),supportsLinks:e.supportsLinks(),supportsProps:e.supportsProps()}]};t.postMessage(r)}();break;default:for(i=0;i<s.length;i++)a[i]=n(s[i],a);var c=d.getRootFS();c[o.method].apply(c,a)}}})},e}(d.BaseFileSystem);n.WorkerFS=I,_.registerFileSystem("WorkerFS",I)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file":21,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/preload_file":36}],13:[function(t,e,n){function r(t,e){var n=31&e,r=(e>>5&15)-1,i=(e>>9)+1980,o=31&t,s=t>>5&63,a=t>>11;return new Date(i,r,n,a,s,o)}function i(t,e,n,r){return 0===r?"":t.toString(e?"utf8":"extended_ascii",n,n+r)}var o=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},s=t("../core/buffer"),a=t("../core/api_error"),c=t("../generic/file_index"),l=t("../core/browserfs"),u=t("../core/node_fs_stats"),f=t("../core/file_system"),h=t("../core/file_flag"),d=t("../core/buffer_core_arraybuffer"),p=t("../generic/preload_file"),y=t("zlib-inflate").inflateRaw,g=a.ApiError,m=a.ErrorCode,v=h.ActionType;!function(t){t[t.MSDOS=0]="MSDOS",t[t.AMIGA=1]="AMIGA",t[t.OPENVMS=2]="OPENVMS",t[t.UNIX=3]="UNIX",t[t.VM_CMS=4]="VM_CMS",t[t.ATARI_ST=5]="ATARI_ST",t[t.OS2_HPFS=6]="OS2_HPFS",t[t.MAC=7]="MAC",t[t.Z_SYSTEM=8]="Z_SYSTEM",t[t.CP_M=9]="CP_M",t[t.NTFS=10]="NTFS",t[t.MVS=11]="MVS",t[t.VSE=12]="VSE",t[t.ACORN_RISC=13]="ACORN_RISC",t[t.VFAT=14]="VFAT",t[t.ALT_MVS=15]="ALT_MVS",t[t.BEOS=16]="BEOS",t[t.TANDEM=17]="TANDEM",t[t.OS_400=18]="OS_400",t[t.OSX=19]="OSX"}(n.ExternalFileAttributeType||(n.ExternalFileAttributeType={})),n.ExternalFileAttributeType,!function(t){t[t.STORED=0]="STORED",t[t.SHRUNK=1]="SHRUNK",t[t.REDUCED_1=2]="REDUCED_1",t[t.REDUCED_2=3]="REDUCED_2",t[t.REDUCED_3=4]="REDUCED_3",t[t.REDUCED_4=5]="REDUCED_4",t[t.IMPLODE=6]="IMPLODE",t[t.DEFLATE=8]="DEFLATE",t[t.DEFLATE64=9]="DEFLATE64",t[t.TERSE_OLD=10]="TERSE_OLD",t[t.BZIP2=12]="BZIP2",t[t.LZMA=14]="LZMA",t[t.TERSE_NEW=18]="TERSE_NEW",t[t.LZ77=19]="LZ77",t[t.WAVPACK=97]="WAVPACK",t[t.PPMD=98]="PPMD"}(n.CompressionMethod||(n.CompressionMethod={}));var w=n.CompressionMethod,_=function(){function t(t){if(this.data=t,67324752!==t.readUInt32LE(0))throw new g(m.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0))}return t.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},t.prototype.flags=function(){return this.data.readUInt16LE(6)},t.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},t.prototype.lastModFileTime=function(){return r(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},t.prototype.crc32=function(){return this.data.readUInt32LE(14)},t.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},t.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},t.prototype.fileName=function(){return i(this.data,this.useUTF8(),30,this.fileNameLength())},t.prototype.extraField=function(){var t=30+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},t.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},t.prototype.useUTF8=function(){return 2048===(2048&this.flags())},t}();n.FileHeader=_;var b=function(){function t(t,e,n){this.header=t,this.record=e,this.data=n}return t.prototype.decompress=function(){var t=this.data,e=this.header.compressionMethod();switch(e){case w.DEFLATE:if(t.getBufferCore()instanceof d.BufferCoreArrayBuffer){var n=t.getBufferCore(),r=n.getDataView(),i=r.byteOffset+t.getOffset(),o=new Uint8Array(r.buffer).subarray(i,i+this.record.compressedSize()),a=y(o,{chunkSize:this.record.uncompressedSize()});return new s.Buffer(new d.BufferCoreArrayBuffer(a.buffer),a.byteOffset,a.byteOffset+a.length)}var c=t.slice(0,this.record.compressedSize());return new s.Buffer(y(c.toJSON().data,{chunkSize:this.record.uncompressedSize()}));case w.STORED:return t.sliceCopy(0,this.record.uncompressedSize());default:var l=w[e];throw l=l?l:"Unknown: "+e,new g(m.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+l)}},t}();n.FileData=b;var S=function(){function t(t){this.data=t}return t.prototype.crc32=function(){return this.data.readUInt32LE(0)},t.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},t.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)},t}();n.DataDescriptor=S;var E=function(){function t(t){if(this.data=t,134630224!==this.data.readUInt32LE(0))throw new g(m.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0))}return t.prototype.length=function(){return this.data.readUInt32LE(4)},t.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())},t}();n.ArchiveExtraDataRecord=E;var k=function(){function t(t){if(this.data=t,84233040!==this.data.readUInt32LE(0))throw new g(m.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0))}return t.prototype.size=function(){return this.data.readUInt16LE(4)},t.prototype.signatureData=function(){return this.data.slice(6,6+this.size())},t}();n.DigitalSignature=k;var I=function(){function t(t,e){if(this.zipData=t,this.data=e,33639248!==this.data.readUInt32LE(0))throw new g(m.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0))}return t.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},t.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},t.prototype.flag=function(){return this.data.readUInt16LE(8)},t.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},t.prototype.lastModFileTime=function(){return r(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},t.prototype.crc32=function(){return this.data.readUInt32LE(16)},t.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},t.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},t.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},t.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},t.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},t.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},t.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},t.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},t.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},t.prototype.fileName=function(){var t=i(this.data,this.useUTF8(),46,this.fileNameLength());return t.replace(/\\/g,"/")},t.prototype.extraField=function(){var t=44+this.fileNameLength();return this.data.slice(t,t+this.extraFieldLength())},t.prototype.fileComment=function(){var t=46+this.fileNameLength()+this.extraFieldLength();return i(this.data,this.useUTF8(),t,this.fileCommentLength())},t.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},t.prototype.isDirectory=function(){var t=this.fileName();return!!(16&this.externalAttributes())||"/"===t.charAt(t.length-1)},t.prototype.isFile=function(){return!this.isDirectory()},t.prototype.useUTF8=function(){return 2048===(2048&this.flag())},t.prototype.isEncrypted=function(){return 1===(1&this.flag())},t.prototype.getData=function(){var t=this.headerRelativeOffset(),e=new _(this.zipData.slice(t)),n=new b(e,this,this.zipData.slice(t+e.totalSize()));return n.decompress()},t.prototype.getStats=function(){return new u.Stats(u.FileType.FILE,this.uncompressedSize(),365,new Date,this.lastModFileTime())},t}();n.CentralDirectory=I;var x=function(){function t(t){if(this.data=t,101010256!==this.data.readUInt32LE(0))throw new g(m.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0))}return t.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},t.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},t.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},t.prototype.cdTotalEntryCount=function(){return this.data.readUInt16LE(10)},t.prototype.cdSize=function(){return this.data.readUInt32LE(12)},t.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},t.prototype.cdZipComment=function(){return i(this.data,!0,22,this.data.readUInt16LE(20))},t}();n.EndOfCentralDirectory=x;var F=function(t){function e(e,n){void 0===n&&(n=""),t.call(this),this.data=e,this.name=n,this._index=new c.FileIndex,this.populateIndex()}return o(e,t),e.prototype.getName=function(){return"ZipFS"+(""!==this.name?" "+this.name:"")},e.isAvailable=function(){return!0},e.prototype.diskSpace=function(t,e){e(this.data.length,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.statSync=function(t,e){var n=this._index.getInode(t);if(null===n)throw new g(m.ENOENT,""+t+" not found.");var r;return r=n.isFile()?n.getData().getStats():n.getStats()},e.prototype.openSync=function(t,e,n){if(e.isWriteable())throw new g(m.EPERM,t);var r=this._index.getInode(t);if(null===r)throw new g(m.ENOENT,""+t+" is not in the FileIndex.");if(r.isDir())throw new g(m.EISDIR,""+t+" is a directory.");var i=r.getData(),o=i.getStats();switch(e.pathExistsAction()){case v.THROW_EXCEPTION:case v.TRUNCATE_FILE:throw new g(m.EEXIST,""+t+" already exists.");case v.NOP:return new p.NoSyncFile(this,t,e,o,i.getData());default:throw new g(m.EINVAL,"Invalid FileMode object.")}return null},e.prototype.readdirSync=function(t){var e=this._index.getInode(t);if(null===e)throw new g(m.ENOENT,""+t+" not found.");if(e.isFile())throw new g(m.ENOTDIR,""+t+" is a file, not a directory.");return e.getListing()},e.prototype.readFileSync=function(t,e,n){var r=this.openSync(t,n,420);try{var i=r,o=i.getBuffer();return null===e?o.length>0?o.sliceCopy():new s.Buffer(0):o.toString(e)}finally{r.closeSync()}},e.prototype.getEOCD=function(){for(var t=22,e=Math.min(t+65535,this.data.length-1),n=t;e>n;n++)if(101010256===this.data.readUInt32LE(this.data.length-n))return new x(this.data.slice(this.data.length-n));throw new g(m.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.")},e.prototype.populateIndex=function(){var t=this.getEOCD();if(t.diskNumber()!==t.cdDiskNumber())throw new g(m.EINVAL,"ZipFS does not support spanned zip files.");var e=t.cdOffset();if(4294967295===e)throw new g(m.EINVAL,"ZipFS does not support Zip64.");for(var n=e+t.cdSize();n>e;){var r=new I(this.data,this.data.slice(e));e+=r.totalSize();var i=r.fileName();if("/"===i.charAt(0))throw new Error("WHY IS THIS ABSOLUTE");"/"===i.charAt(i.length-1)&&(i=i.substr(0,i.length-1)),r.isDirectory()?this._index.addPath("/"+i,new c.DirInode):this._index.addPath("/"+i,new c.FileInode(r))}},e}(f.SynchronousFileSystem);n.ZipFS=F,l.registerFileSystem("ZipFS",F)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/file_index":33,"../generic/preload_file":36,"zlib-inflate":2}],14:[function(t,e,n){var r=t("./buffer"),i=r.Buffer;!function(t){t[t.EPERM=0]="EPERM",t[t.ENOENT=1]="ENOENT",t[t.EIO=2]="EIO",t[t.EBADF=3]="EBADF",t[t.EACCES=4]="EACCES",t[t.EBUSY=5]="EBUSY",t[t.EEXIST=6]="EEXIST",t[t.ENOTDIR=7]="ENOTDIR",t[t.EISDIR=8]="EISDIR",t[t.EINVAL=9]="EINVAL",t[t.EFBIG=10]="EFBIG",t[t.ENOSPC=11]="ENOSPC",t[t.EROFS=12]="EROFS",t[t.ENOTEMPTY=13]="ENOTEMPTY",t[t.ENOTSUP=14]="ENOTSUP"}(n.ErrorCode||(n.ErrorCode={}));var o=n.ErrorCode,s={};s[o.EPERM]="Operation not permitted.",s[o.ENOENT]="No such file or directory.",s[o.EIO]="Input/output error.",s[o.EBADF]="Bad file descriptor.",s[o.EACCES]="Permission denied.",s[o.EBUSY]="Resource busy or locked.",s[o.EEXIST]="File exists.",s[o.ENOTDIR]="File is not a directory.",s[o.EISDIR]="File is a directory.",s[o.EINVAL]="Invalid argument.",s[o.EFBIG]="File is too big.",s[o.ENOSPC]="No space left on disk.",s[o.EROFS]="Cannot modify a read-only file system.",s[o.ENOTEMPTY]="Directory is not empty.",s[o.ENOTSUP]="Operation is not supported.";var a=function(){function t(t,e){this.type=t,this.code=o[t],null!=e?this.message=e:this.message=s[t]}return t.prototype.toString=function(){return this.code+": "+s[this.type]+" "+this.message},t.prototype.writeToBuffer=function(t,e){void 0===t&&(t=new i(this.bufferSize())),void 0===e&&(e=0),t.writeUInt8(this.type,e);var n=t.write(this.message,e+5);return t.writeUInt32LE(n,e+1),t},t.fromBuffer=function(e,n){return void 0===n&&(n=0),new t(e.readUInt8(n),e.toString("utf8",n+5,n+5+e.readUInt32LE(n+1)))},t.prototype.bufferSize=function(){return 5+i.byteLength(this.message)},t.FileError=function(e,n){return new t(e,n+": "+s[e])},t.ENOENT=function(t){return this.FileError(o.ENOENT,t)},t.EEXIST=function(t){return this.FileError(o.EEXIST,t)},t.EISDIR=function(t){return this.FileError(o.EISDIR,t)},t.ENOTDIR=function(t){return this.FileError(o.ENOTDIR,t)},t.EPERM=function(t){return this.FileError(o.EPERM,t)},t}();n.ApiError=a},{"./buffer":16}],15:[function(t,e,n){function r(t){t.Buffer=a.Buffer,t.process=u.process;var e=null!=t.require?t.require:null;t.require=function(t){var n=o(t);return null==n?e.apply(null,Array.prototype.slice.call(arguments,0)):n}}function i(t,e){n.FileSystem[t]=e}function o(t){switch(t){case"fs":return c;case"path":return l;case"buffer":return a;case"process":return u.process;default:return n.FileSystem[t]}}function s(t){return c._initialize(t)}var a=t("./buffer"),c=t("./node_fs"),l=t("./node_path"),u=t("./node_process");n.install=r,n.FileSystem={},n.registerFileSystem=i,n.BFSRequire=o,n.initialize=s},{"./buffer":16,"./node_fs":26,"./node_path":28,"./node_process":29}],16:[function(t,e,n){var r=t("./buffer_core"),i=t("./buffer_core_array"),o=t("./buffer_core_arraybuffer"),s=t("./buffer_core_imagedata"),a=t("./string_util"),c=[o.BufferCoreArrayBuffer,s.BufferCoreImageData,i.BufferCoreArray],l=function(){var t,e;for(t=0;t<c.length;t++)if(e=c[t],e.isAvailable())return e;throw new Error("This browser does not support any available BufferCore implementations.")}(),u=function(){function t(e,n,i){void 0===n&&(n="utf8"),this.offset=0;var s;if(!(this instanceof t))return new t(e,n);if(e instanceof r.BufferCoreCommon){this.data=e;var a="number"==typeof n?n:0,c="number"==typeof i?i:this.data.getLength();this.offset=a,this.length=c-a}else if("number"==typeof e){if(e!==e>>>0)throw new TypeError("Buffer size must be a uint32.");this.length=e,this.data=new l(e)}else if("undefined"!=typeof DataView&&e instanceof DataView)this.data=new o.BufferCoreArrayBuffer(e),this.length=e.byteLength;else if("undefined"!=typeof ArrayBuffer&&"number"==typeof e.byteLength)this.data=new o.BufferCoreArrayBuffer(e),this.length=e.byteLength;else if(e instanceof t){var u=e;this.data=new l(e.length),this.length=e.length,u.copy(this)}else if(Array.isArray(e)||null!=e&&"object"==typeof e&&"number"==typeof e[0]){for(this.data=new l(e.length),s=0;s<e.length;s++)this.data.writeUInt8(s,e[s]);this.length=e.length}else{if("string"!=typeof e)throw new Error("Invalid argument to Buffer constructor: "+e);this.length=t.byteLength(e,n),this.data=new l(this.length),this.write(e,0,this.length,n)}}return t.prototype.getBufferCore=function(){return this.data},t.prototype.getOffset=function(){return this.offset},t.prototype.set=function(t,e){return 0>e?this.writeInt8(e,t):this.writeUInt8(e,t)},t.prototype.get=function(t){return this.readUInt8(t)},t.prototype.write=function(e,n,r,i){if(void 0===n&&(n=0),void 0===r&&(r=this.length),void 0===i&&(i="utf8"),"string"==typeof n?(i=""+n,n=0,r=this.length):"string"==typeof r&&(i=""+r,r=this.length),n>=this.length)return 0;var o=a.FindUtil(i);return r=r+n>this.length?this.length-n:r,n+=this.offset,o.str2byte(e,0===n&&r===this.length?this:new t(this.data,n,r+n))},t.prototype.toString=function(e,n,r){if(void 0===e&&(e="utf8"),void 0===n&&(n=0),void 0===r&&(r=this.length),!(r>=n))throw new Error("Invalid start/end positions: "+n+" - "+r);if(n===r)return"";r>this.length&&(r=this.length);var i=a.FindUtil(e);return i.byte2str(0===n&&r===this.length?this:new t(this.data,n+this.offset,r+this.offset))},t.prototype.toJSON=function(){for(var t=this.length,e=new Array(t),n=0;t>n;n++)e[n]=this.readUInt8(n);return{type:"Buffer",data:e}},t.prototype.toArrayBuffer=function(){var e=this.getBufferCore();if(e instanceof o.BufferCoreArrayBuffer){var n=e.getDataView(),r=n.buffer;return 0===n.byteOffset&&n.byteLength===r.byteLength?r:r.slice(n.byteOffset,n.byteLength)}var r=new ArrayBuffer(this.length),i=new t(r);return this.copy(i,0,0,this.length),r},t.prototype.copy=function(t,e,n,r){if(void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=this.length),e=0>e?0:e,n=0>n?0:n,n>r)throw new RangeError("sourceEnd < sourceStart");if(r===n)return 0;if(e>=t.length)throw new RangeError("targetStart out of bounds");if(n>=this.length)throw new RangeError("sourceStart out of bounds");if(r>this.length)throw new RangeError("sourceEnd out of bounds");var i,o=Math.min(r-n,t.length-e,this.length-n);for(i=0;o-3>i;i+=4)t.writeInt32LE(this.readInt32LE(n+i),e+i);for(i=4294967292&o;o>i;i++)t.writeUInt8(this.readUInt8(n+i),e+i);return o},t.prototype.slice=function(e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.length),0>e&&(e+=this.length,0>e&&(e=0)),0>n&&(n+=this.length,0>n&&(n=0)),n>this.length&&(n=this.length),e>n&&(e=n),0>e||0>n||e>=this.length||n>this.length)throw new Error("Invalid slice indices.");return new t(this.data,e+this.offset,n+this.offset)},t.prototype.sliceCopy=function(e,n){if(void 0===e&&(e=0),void 0===n&&(n=this.length),0>e&&(e+=this.length,0>e&&(e=0)),0>n&&(n+=this.length,0>n&&(n=0)),n>this.length&&(n=this.length),e>n&&(e=n),0>e||0>n||e>=this.length||n>this.length)throw new Error("Invalid slice indices.");return new t(this.data.copy(e+this.offset,n+this.offset))},t.prototype.fill=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=typeof t;switch(r){case"string":t=255&t.charCodeAt(0);break;case"number":break;default:throw new Error("Invalid argument to fill.")}e+=this.offset,n+=this.offset,this.data.fill(t,e,n)},t.prototype.readUInt8=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readUInt8(t)},t.prototype.readUInt16LE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readUInt16LE(t)},t.prototype.readUInt16BE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readUInt16BE(t)},t.prototype.readUInt32LE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readUInt32LE(t)},t.prototype.readUInt32BE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readUInt32BE(t)},t.prototype.readInt8=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readInt8(t)},t.prototype.readInt16LE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readInt16LE(t)},t.prototype.readInt16BE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readInt16BE(t)},t.prototype.readInt32LE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readInt32LE(t)},t.prototype.readInt32BE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readInt32BE(t)},t.prototype.readFloatLE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readFloatLE(t)},t.prototype.readFloatBE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,
this.data.readFloatBE(t)},t.prototype.readDoubleLE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readDoubleLE(t)},t.prototype.readDoubleBE=function(t,e){return void 0===e&&(e=!1),t+=this.offset,this.data.readDoubleBE(t)},t.prototype.writeUInt8=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeUInt8(e,t)},t.prototype.writeUInt16LE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeUInt16LE(e,t)},t.prototype.writeUInt16BE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeUInt16BE(e,t)},t.prototype.writeUInt32LE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeUInt32LE(e,t)},t.prototype.writeUInt32BE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeUInt32BE(e,t)},t.prototype.writeInt8=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeInt8(e,t)},t.prototype.writeInt16LE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeInt16LE(e,t)},t.prototype.writeInt16BE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeInt16BE(e,t)},t.prototype.writeInt32LE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeInt32LE(e,t)},t.prototype.writeInt32BE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeInt32BE(e,t)},t.prototype.writeFloatLE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeFloatLE(e,t)},t.prototype.writeFloatBE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeFloatBE(e,t)},t.prototype.writeDoubleLE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeDoubleLE(e,t)},t.prototype.writeDoubleBE=function(t,e,n){void 0===n&&(n=!1),e+=this.offset,this.data.writeDoubleBE(e,t)},t.isEncoding=function(t){try{a.FindUtil(t)}catch(t){return!1}return!0},t.isBuffer=function(e){return e instanceof t},t.byteLength=function(t,e){void 0===e&&(e="utf8");var n=a.FindUtil(e);return n.byteLength(t)},t.concat=function(e,n){var r;if(0===e.length||0===n)return new t(0);if(1===e.length)return e[0];if(null==n){n=0;for(var i=0;i<e.length;i++)r=e[i],n+=r.length}for(var o=new t(n),s=0,a=0;a<e.length;a++)r=e[a],s+=r.copy(o,s);return o},t}();n.Buffer=u},{"./buffer_core":17,"./buffer_core_array":18,"./buffer_core_arraybuffer":19,"./buffer_core_imagedata":20,"./string_util":30}],17:[function(t,e,n){var r=Math.pow(2,128),i=-1*r,o=2139095040,s=-8388608,a=2143289344,c=function(){function t(){}return t.prototype.getLength=function(){throw new Error("BufferCore implementations should implement getLength.")},t.prototype.writeInt8=function(t,e){this.writeUInt8(t,255&e|(2147483648&e)>>>24)},t.prototype.writeInt16LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,e>>>8&255|(2147483648&e)>>>24)},t.prototype.writeInt16BE=function(t,e){this.writeUInt8(t+1,255&e),this.writeUInt8(t,e>>>8&255|(2147483648&e)>>>24)},t.prototype.writeInt32LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,e>>>8&255),this.writeUInt8(t+2,e>>>16&255),this.writeUInt8(t+3,e>>>24&255)},t.prototype.writeInt32BE=function(t,e){this.writeUInt8(t+3,255&e),this.writeUInt8(t+2,e>>>8&255),this.writeUInt8(t+1,e>>>16&255),this.writeUInt8(t,e>>>24&255)},t.prototype.writeUInt8=function(t,e){throw new Error("BufferCore implementations should implement writeUInt8.")},t.prototype.writeUInt16LE=function(t,e){this.writeUInt8(t,255&e),this.writeUInt8(t+1,e>>8&255)},t.prototype.writeUInt16BE=function(t,e){this.writeUInt8(t+1,255&e),this.writeUInt8(t,e>>8&255)},t.prototype.writeUInt32LE=function(t,e){this.writeInt32LE(t,0|e)},t.prototype.writeUInt32BE=function(t,e){this.writeInt32BE(t,0|e)},t.prototype.writeFloatLE=function(t,e){this.writeInt32LE(t,this.float2intbits(e))},t.prototype.writeFloatBE=function(t,e){this.writeInt32BE(t,this.float2intbits(e))},t.prototype.writeDoubleLE=function(t,e){var n=this.double2longbits(e);this.writeInt32LE(t,n[0]),this.writeInt32LE(t+4,n[1])},t.prototype.writeDoubleBE=function(t,e){var n=this.double2longbits(e);this.writeInt32BE(t+4,n[0]),this.writeInt32BE(t,n[1])},t.prototype.readInt8=function(t){var e=this.readUInt8(t);return 128&e?4294967168|e:e},t.prototype.readInt16LE=function(t){var e=this.readUInt16LE(t);return 32768&e?4294934528|e:e},t.prototype.readInt16BE=function(t){var e=this.readUInt16BE(t);return 32768&e?4294934528|e:e},t.prototype.readInt32LE=function(t){return 0|this.readUInt32LE(t)},t.prototype.readInt32BE=function(t){return 0|this.readUInt32BE(t)},t.prototype.readUInt8=function(t){throw new Error("BufferCore implementations should implement readUInt8.")},t.prototype.readUInt16LE=function(t){return this.readUInt8(t+1)<<8|this.readUInt8(t)},t.prototype.readUInt16BE=function(t){return this.readUInt8(t)<<8|this.readUInt8(t+1)},t.prototype.readUInt32LE=function(t){return(this.readUInt8(t+3)<<24|this.readUInt8(t+2)<<16|this.readUInt8(t+1)<<8|this.readUInt8(t))>>>0},t.prototype.readUInt32BE=function(t){return(this.readUInt8(t)<<24|this.readUInt8(t+1)<<16|this.readUInt8(t+2)<<8|this.readUInt8(t+3))>>>0},t.prototype.readFloatLE=function(t){return this.intbits2float(this.readInt32LE(t))},t.prototype.readFloatBE=function(t){return this.intbits2float(this.readInt32BE(t))},t.prototype.readDoubleLE=function(t){return this.longbits2double(this.readInt32LE(t+4),this.readInt32LE(t))},t.prototype.readDoubleBE=function(t){return this.longbits2double(this.readInt32BE(t),this.readInt32BE(t+4))},t.prototype.copy=function(t,e){throw new Error("BufferCore implementations should implement copy.")},t.prototype.fill=function(t,e,n){for(var r=e;n>r;r++)this.writeUInt8(r,t)},t.prototype.float2intbits=function(t){var e,n,r;return 0===t?0:t===Number.POSITIVE_INFINITY?o:t===Number.NEGATIVE_INFINITY?s:isNaN(t)?a:(r=0>t?1:0,t=Math.abs(t),1.1754942106924411e-38>=t&&t>=1.401298464324817e-45?(e=0,n=Math.round(t/Math.pow(2,-126)*Math.pow(2,23)),r<<31|e<<23|n):(e=Math.floor(Math.log(t)/Math.LN2),n=Math.round((t/Math.pow(2,e)-1)*Math.pow(2,23)),r<<31|e+127<<23|n))},t.prototype.double2longbits=function(t){var e,n,r,i;return 0===t?[0,0]:t===Number.POSITIVE_INFINITY?[0,2146435072]:t===Number.NEGATIVE_INFINITY?[0,-1048576]:isNaN(t)?[0,2146959360]:(i=0>t?1<<31:0,t=Math.abs(t),2.225073858507201e-308>=t&&t>=5e-324?(e=0,r=t/Math.pow(2,-1022)*Math.pow(2,52)):(e=Math.floor(Math.log(t)/Math.LN2),t<Math.pow(2,e)&&(e-=1),r=(t/Math.pow(2,e)-1)*Math.pow(2,52),e=e+1023<<20),n=r*Math.pow(2,-32)|0|i|e,[65535&r,n])},t.prototype.intbits2float=function(t){if(t===o)return Number.POSITIVE_INFINITY;if(t===s)return Number.NEGATIVE_INFINITY;var e,n=(2147483648&t)>>>31,a=(2139095040&t)>>>23,c=8388607&t;return e=0===a?Math.pow(-1,n)*c*Math.pow(2,-149):Math.pow(-1,n)*(1+c*Math.pow(2,-23))*Math.pow(2,a-127),(i>e||e>r)&&(e=NaN),e},t.prototype.longbits2double=function(t,e){var n=(2147483648&t)>>>31,r=(2146435072&t)>>>20,i=(1048575&t)*Math.pow(2,32)+e;return 0===r&&0===i?0:2047===r?0===i?1===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:NaN:0===r?Math.pow(-1,n)*i*Math.pow(2,-1074):Math.pow(-1,n)*(1+i*Math.pow(2,-52))*Math.pow(2,r-1023)},t}();n.BufferCoreCommon=c},{}],18:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("./buffer_core"),o=[4294967040,4294902015,4278255615,16777215],s=function(t){function e(e){t.call(this),this.length=e,this.buff=new Array(Math.ceil(e/4));for(var n=this.buff.length,r=0;n>r;r++)this.buff[r]=0}return r(e,t),e.isAvailable=function(){return!0},e.prototype.getLength=function(){return this.length},e.prototype.writeUInt8=function(t,e){e&=255;var n=t>>2,r=3&t;this.buff[n]=this.buff[n]&o[r],this.buff[n]=this.buff[n]|e<<(r<<3)},e.prototype.readUInt8=function(t){var e=t>>2,n=3&t;return this.buff[e]>>(n<<3)&255},e.prototype.copy=function(t,n){for(var r=new e(n-t),i=t;n>i;i++)r.writeUInt8(i-t,this.readUInt8(i));return r},e}(i.BufferCoreCommon);n.BufferCoreArray=s},{"./buffer_core":17}],19:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("./buffer_core"),o=function(t){function e(e){t.call(this),"number"==typeof e?this.buff=new DataView(new ArrayBuffer(e)):e instanceof DataView?this.buff=e:this.buff=new DataView(e),this.length=this.buff.byteLength}return r(e,t),e.isAvailable=function(){return"undefined"!=typeof DataView},e.prototype.getLength=function(){return this.length},e.prototype.writeInt8=function(t,e){this.buff.setInt8(t,e)},e.prototype.writeInt16LE=function(t,e){this.buff.setInt16(t,e,!0)},e.prototype.writeInt16BE=function(t,e){this.buff.setInt16(t,e,!1)},e.prototype.writeInt32LE=function(t,e){this.buff.setInt32(t,e,!0)},e.prototype.writeInt32BE=function(t,e){this.buff.setInt32(t,e,!1)},e.prototype.writeUInt8=function(t,e){this.buff.setUint8(t,e)},e.prototype.writeUInt16LE=function(t,e){this.buff.setUint16(t,e,!0)},e.prototype.writeUInt16BE=function(t,e){this.buff.setUint16(t,e,!1)},e.prototype.writeUInt32LE=function(t,e){this.buff.setUint32(t,e,!0)},e.prototype.writeUInt32BE=function(t,e){this.buff.setUint32(t,e,!1)},e.prototype.writeFloatLE=function(t,e){this.buff.setFloat32(t,e,!0)},e.prototype.writeFloatBE=function(t,e){this.buff.setFloat32(t,e,!1)},e.prototype.writeDoubleLE=function(t,e){this.buff.setFloat64(t,e,!0)},e.prototype.writeDoubleBE=function(t,e){this.buff.setFloat64(t,e,!1)},e.prototype.readInt8=function(t){return this.buff.getInt8(t)},e.prototype.readInt16LE=function(t){return this.buff.getInt16(t,!0)},e.prototype.readInt16BE=function(t){return this.buff.getInt16(t,!1)},e.prototype.readInt32LE=function(t){return this.buff.getInt32(t,!0)},e.prototype.readInt32BE=function(t){return this.buff.getInt32(t,!1)},e.prototype.readUInt8=function(t){return this.buff.getUint8(t)},e.prototype.readUInt16LE=function(t){return this.buff.getUint16(t,!0)},e.prototype.readUInt16BE=function(t){return this.buff.getUint16(t,!1)},e.prototype.readUInt32LE=function(t){return this.buff.getUint32(t,!0)},e.prototype.readUInt32BE=function(t){return this.buff.getUint32(t,!1)},e.prototype.readFloatLE=function(t){return this.buff.getFloat32(t,!0)},e.prototype.readFloatBE=function(t){return this.buff.getFloat32(t,!1)},e.prototype.readDoubleLE=function(t){return this.buff.getFloat64(t,!0)},e.prototype.readDoubleBE=function(t){return this.buff.getFloat64(t,!1)},e.prototype.copy=function(t,n){var r,i=this.buff.buffer;if(ArrayBuffer.prototype.slice)r=i.slice(t,n);else{var o=n-t;r=new ArrayBuffer(o);var s=new Uint8Array(r),a=new Uint8Array(i);s.set(a.subarray(t,n))}return new e(r)},e.prototype.fill=function(t,e,n){t&=255;var r,i=n-e,o=4*(i/4|0),s=t<<24|t<<16|t<<8|t;for(r=0;o>r;r+=4)this.writeInt32LE(r+e,s);for(r=o;i>r;r++)this.writeUInt8(r+e,t)},e.prototype.getDataView=function(){return this.buff},e}(i.BufferCoreCommon);n.BufferCoreArrayBuffer=o},{"./buffer_core":17}],20:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("./buffer_core"),o=function(t){function e(n){t.call(this),this.length=n,this.buff=e.getCanvasPixelArray(n)}return r(e,t),e.getCanvasPixelArray=function(t){var n=e.imageDataFactory;return void 0===n&&(e.imageDataFactory=n=document.createElement("canvas").getContext("2d")),0===t&&(t=1),n.createImageData(Math.ceil(t/4),1).data},e.isAvailable=function(){return"undefined"!=typeof CanvasPixelArray},e.prototype.getLength=function(){return this.length},e.prototype.writeUInt8=function(t,e){this.buff[t]=e},e.prototype.readUInt8=function(t){return this.buff[t]},e.prototype.copy=function(t,n){for(var r=new e(n-t),i=t;n>i;i++)r.writeUInt8(i-t,this.buff[i]);return r},e}(i.BufferCoreCommon);n.BufferCoreImageData=o},{"./buffer_core":17}],21:[function(t,e,n){var r=t("./api_error"),i=r.ApiError,o=r.ErrorCode,s=function(){function t(){}return t.prototype.sync=function(t){t(new i(o.ENOTSUP))},t.prototype.syncSync=function(){throw new i(o.ENOTSUP)},t.prototype.datasync=function(t){this.sync(t)},t.prototype.datasyncSync=function(){return this.syncSync()},t.prototype.chown=function(t,e,n){n(new i(o.ENOTSUP))},t.prototype.chownSync=function(t,e){throw new i(o.ENOTSUP)},t.prototype.chmod=function(t,e){e(new i(o.ENOTSUP))},t.prototype.chmodSync=function(t){throw new i(o.ENOTSUP)},t.prototype.utimes=function(t,e,n){n(new i(o.ENOTSUP))},t.prototype.utimesSync=function(t,e){throw new i(o.ENOTSUP)},t}();n.BaseFile=s},{"./api_error":14}],22:[function(t,e,n){var r=t("./api_error");!function(t){t[t.NOP=0]="NOP",t[t.THROW_EXCEPTION=1]="THROW_EXCEPTION",t[t.TRUNCATE_FILE=2]="TRUNCATE_FILE",t[t.CREATE_FILE=3]="CREATE_FILE"}(n.ActionType||(n.ActionType={}));var i=n.ActionType,o=function(){function t(e){if(this.flagStr=e,t.validFlagStrs.indexOf(e)<0)throw new r.ApiError(r.ErrorCode.EINVAL,"Invalid flag: "+e)}return t.getFileFlag=function(e){return t.flagCache.hasOwnProperty(e)?t.flagCache[e]:t.flagCache[e]=new t(e)},t.prototype.getFlagString=function(){return this.flagStr},t.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},t.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},t.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},t.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},t.prototype.isSynchronous=function(){return-1!==this.flagStr.indexOf("s")},t.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},t.prototype.pathExistsAction=function(){return this.isExclusive()?i.THROW_EXCEPTION:this.isTruncating()?i.TRUNCATE_FILE:i.NOP},t.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?i.CREATE_FILE:i.THROW_EXCEPTION},t.flagCache={},t.validFlagStrs=["r","r+","rs","rs+","w","wx","w+","wx+","a","ax","a+","ax+"],t}();n.FileFlag=o},{"./api_error":14}],23:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("./api_error"),o=t("./file_flag"),s=t("./node_path"),a=t("./buffer"),c=i.ApiError,l=i.ErrorCode,u=a.Buffer,f=o.ActionType,h=function(){function t(){}return t.prototype.supportsLinks=function(){return!1},t.prototype.diskSpace=function(t,e){e(0,0)},t.prototype.openFile=function(t,e,n){throw new c(l.ENOTSUP)},t.prototype.createFile=function(t,e,n,r){throw new c(l.ENOTSUP)},t.prototype.open=function(t,e,n,r){var i=this,o=function(o,a){if(o)switch(e.pathNotExistsAction()){case f.CREATE_FILE:return i.stat(s.dirname(t),!1,function(o,a){o?r(o):a.isDirectory()?i.createFile(t,e,n,r):r(new c(l.ENOTDIR,s.dirname(t)+" is not a directory."))});case f.THROW_EXCEPTION:return r(new c(l.ENOENT,""+t+" doesn't exist."));default:return r(new c(l.EINVAL,"Invalid FileFlag object."))}else{if(a.isDirectory())return r(new c(l.EISDIR,t+" is a directory."));switch(e.pathExistsAction()){case f.THROW_EXCEPTION:return r(new c(l.EEXIST,t+" already exists."));case f.TRUNCATE_FILE:return i.openFile(t,e,function(t,e){t?r(t):e.truncate(0,function(){e.sync(function(){r(null,e)})})});case f.NOP:return i.openFile(t,e,r);default:return r(new c(l.EINVAL,"Invalid FileFlag object."))}}};this.stat(t,!1,o)},t.prototype.rename=function(t,e,n){n(new c(l.ENOTSUP))},t.prototype.renameSync=function(t,e){throw new c(l.ENOTSUP)},t.prototype.stat=function(t,e,n){n(new c(l.ENOTSUP))},t.prototype.statSync=function(t,e){throw new c(l.ENOTSUP)},t.prototype.openFileSync=function(t,e){throw new c(l.ENOTSUP)},t.prototype.createFileSync=function(t,e,n){throw new c(l.ENOTSUP)},t.prototype.openSync=function(t,e,n){var r;try{r=this.statSync(t,!1)}catch(r){switch(e.pathNotExistsAction()){case f.CREATE_FILE:var i=this.statSync(s.dirname(t),!1);if(!i.isDirectory())throw new c(l.ENOTDIR,s.dirname(t)+" is not a directory.");return this.createFileSync(t,e,n);case f.THROW_EXCEPTION:throw new c(l.ENOENT,""+t+" doesn't exist.");default:throw new c(l.EINVAL,"Invalid FileFlag object.")}}if(r.isDirectory())throw new c(l.EISDIR,t+" is a directory.");switch(e.pathExistsAction()){case f.THROW_EXCEPTION:throw new c(l.EEXIST,t+" already exists.");case f.TRUNCATE_FILE:return this.unlinkSync(t),this.createFileSync(t,e,r.mode);case f.NOP:return this.openFileSync(t,e);default:throw new c(l.EINVAL,"Invalid FileFlag object.")}},t.prototype.unlink=function(t,e){e(new c(l.ENOTSUP))},t.prototype.unlinkSync=function(t){throw new c(l.ENOTSUP)},t.prototype.rmdir=function(t,e){e(new c(l.ENOTSUP))},t.prototype.rmdirSync=function(t){throw new c(l.ENOTSUP)},t.prototype.mkdir=function(t,e,n){n(new c(l.ENOTSUP))},t.prototype.mkdirSync=function(t,e){throw new c(l.ENOTSUP)},t.prototype.readdir=function(t,e){e(new c(l.ENOTSUP))},t.prototype.readdirSync=function(t){throw new c(l.ENOTSUP)},t.prototype.exists=function(t,e){this.stat(t,null,function(t){e(null==t)})},t.prototype.existsSync=function(t){try{return this.statSync(t,!0),!0}catch(t){return!1}},t.prototype.realpath=function(t,e,n){if(this.supportsLinks())for(var r=t.split(s.sep),i=0;i<r.length;i++){var o=r.slice(0,i+1);r[i]=s.join.apply(null,o)}else this.exists(t,function(e){e?n(null,t):n(new c(l.ENOENT,"File "+t+" not found."))})},t.prototype.realpathSync=function(t,e){if(!this.supportsLinks()){if(this.existsSync(t))return t;throw new c(l.ENOENT,"File "+t+" not found.")}for(var n=t.split(s.sep),r=0;r<n.length;r++){var i=n.slice(0,r+1);n[r]=s.join.apply(null,i)}},t.prototype.truncate=function(t,e,n){this.open(t,o.FileFlag.getFileFlag("r+"),420,function(t,r){return t?n(t):void r.truncate(e,function(t){r.close(function(e){n(t||e)})})})},t.prototype.truncateSync=function(t,e){var n=this.openSync(t,o.FileFlag.getFileFlag("r+"),420);try{n.truncateSync(e)}catch(t){throw t}finally{n.closeSync()}},t.prototype.readFile=function(t,e,n,r){var i=r;this.open(t,n,420,function(t,n){return t?r(t):(r=function(t,e){n.close(function(n){return null==t&&(t=n),i(t,e)})},void n.stat(function(t,i){if(null!=t)return r(t);var o=new u(i.size);n.read(o,0,i.size,0,function(t){if(null!=t)return r(t);if(null===e)return r(t,o);try{r(null,o.toString(e))}catch(t){r(t)}})}))})},t.prototype.readFileSync=function(t,e,n){var r=this.openSync(t,n,420);try{var i=r.statSync(),o=new u(i.size);return r.readSync(o,0,i.size,0),r.closeSync(),null===e?o:o.toString(e)}finally{r.closeSync()}},t.prototype.writeFile=function(t,e,n,r,i,o){var s=o;this.open(t,r,420,function(t,r){if(null!=t)return o(t);o=function(t){r.close(function(e){s(null!=t?t:e)})};try{"string"==typeof e&&(e=new u(e,n))}catch(t){return o(t)}r.write(e,0,e.length,0,o)})},t.prototype.writeFileSync=function(t,e,n,r,i){var o=this.openSync(t,r,i);try{"string"==typeof e&&(e=new u(e,n)),o.writeSync(e,0,e.length,0)}finally{o.closeSync()}},t.prototype.appendFile=function(t,e,n,r,i,o){var s=o;this.open(t,r,i,function(t,r){return null!=t?o(t):(o=function(t){r.close(function(e){s(null!=t?t:e)})},"string"==typeof e&&(e=new u(e,n)),void r.write(e,0,e.length,null,o))})},t.prototype.appendFileSync=function(t,e,n,r,i){var o=this.openSync(t,r,i);try{"string"==typeof e&&(e=new u(e,n)),o.writeSync(e,0,e.length,null)}finally{o.closeSync()}},t.prototype.chmod=function(t,e,n,r){r(new c(l.ENOTSUP))},t.prototype.chmodSync=function(t,e,n){throw new c(l.ENOTSUP)},t.prototype.chown=function(t,e,n,r,i){i(new c(l.ENOTSUP))},t.prototype.chownSync=function(t,e,n,r){throw new c(l.ENOTSUP)},t.prototype.utimes=function(t,e,n,r){r(new c(l.ENOTSUP))},t.prototype.utimesSync=function(t,e,n){throw new c(l.ENOTSUP)},t.prototype.link=function(t,e,n){n(new c(l.ENOTSUP))},t.prototype.linkSync=function(t,e){throw new c(l.ENOTSUP)},t.prototype.symlink=function(t,e,n,r){r(new c(l.ENOTSUP))},t.prototype.symlinkSync=function(t,e,n){throw new c(l.ENOTSUP)},t.prototype.readlink=function(t,e){e(new c(l.ENOTSUP))},t.prototype.readlinkSync=function(t){throw new c(l.ENOTSUP)},t}();n.BaseFileSystem=h;var d=function(t){function e(){t.apply(this,arguments)}return r(e,t),e.prototype.supportsSynch=function(){return!0},e.prototype.rename=function(t,e,n){try{this.renameSync(t,e),n()}catch(t){n(t)}},e.prototype.stat=function(t,e,n){try{n(null,this.statSync(t,e))}catch(t){n(t)}},e.prototype.open=function(t,e,n,r){try{r(null,this.openSync(t,e,n))}catch(t){r(t)}},e.prototype.unlink=function(t,e){try{this.unlinkSync(t),e()}catch(t){e(t)}},e.prototype.rmdir=function(t,e){try{this.rmdirSync(t),e()}catch(t){e(t)}},e.prototype.mkdir=function(t,e,n){try{this.mkdirSync(t,e),n()}catch(t){n(t)}},e.prototype.readdir=function(t,e){try{e(null,this.readdirSync(t))}catch(t){e(t)}},e.prototype.chmod=function(t,e,n,r){try{this.chmodSync(t,e,n),r()}catch(t){r(t)}},e.prototype.chown=function(t,e,n,r,i){try{this.chownSync(t,e,n,r),i()}catch(t){i(t)}},e.prototype.utimes=function(t,e,n,r){try{this.utimesSync(t,e,n),r()}catch(t){r(t)}},e.prototype.link=function(t,e,n){try{this.linkSync(t,e),n()}catch(t){n(t)}},e.prototype.symlink=function(t,e,n,r){try{this.symlinkSync(t,e,n),r()}catch(t){r(t)}},e.prototype.readlink=function(t,e){try{e(null,this.readlinkSync(t))}catch(t){e(t)}},e}(h);n.SynchronousFileSystem=d},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],24:[function(t,e,n){var r;r="undefined"!=typeof window?window:"undefined"!=typeof self?self:global,e.exports=r},{}],25:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("./buffer"),o=t("./api_error"),s=i.Buffer,a=o.ApiError,c=o.ErrorCode,l=function(){function t(t,e,n){this.data=t,this.encoding=e,this.cb=n,this.size="string"!=typeof t?t.length:s.byteLength(t,null!=e?e:void 0),"string"!=typeof this.data&&(this.data=this.data.sliceCopy())}return t.prototype.getData=function(t){return null==t?"string"==typeof this.data?new s(this.data,null!=this.encoding?this.encoding:void 0):this.data:"string"==typeof this.data?t===this.encoding?this.data:new s(this.data,null!=this.encoding?this.encoding:void 0).toString(t):this.data.toString(t)},t}(),u=function(){function t(){this._listeners={},this.maxListeners=10}return t.prototype.addListener=function(t,e){return"undefined"==typeof this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].push(e)>this.maxListeners&&process.stdout.write("Warning: Event "+t+" has more than "+this.maxListeners+" listeners.\n"),this.emit("newListener",t,e),this},t.prototype.on=function(t,e){return this.addListener(t,e)},t.prototype.once=function(t,e){var n=!1,r=function(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))};return this.addListener(t,r)},t.prototype._emitRemoveListener=function(t,e){var n;if(this._listeners.removeListener&&this._listeners.removeListener.length>0)for(n=0;n<e.length;n++)this.emit("removeListener",t,e[n])},t.prototype.removeListener=function(t,e){var n=this._listeners[t];if("undefined"!=typeof n){var r=n.indexOf(e);r>-1&&n.splice(r,1)}return this.emit("removeListener",t,e),this},t.prototype.removeAllListeners=function(t){var e,n,r;if("undefined"!=typeof t)e=this._listeners[t],this._listeners[t]=[],this._emitRemoveListener(t,e);else for(n=Object.keys(this._listeners),r=0;r<n.length;r++)this.removeAllListeners(n[r]);return this},t.prototype.setMaxListeners=function(t){this.maxListeners=t},t.prototype.listeners=function(t){return"undefined"==typeof this._listeners[t]&&(this._listeners[t]=[]),this._listeners[t].slice(0)},t.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this._listeners[t],i=!1;if("undefined"!=typeof r){var o;for(o=0;o<r.length;o++)i=!0,r[o].apply(this,e)}return i},t}();n.AbstractEventEmitter=u;var f=function(t){function e(e,n){t.call(this),this.writable=e,this.readable=n,this.encoding=null,this.flowing=!1,this.buffer=[],this.endEvent=null,this.ended=!1,this.drained=!0}return r(e,t),e.prototype.addListener=function(e,n){var r=t.prototype.addListener.call(this,e,n),i=this;return"data"!==e||this.flowing?"readable"===e&&this.buffer.length>0&&setTimeout(function(){i.emit("readable")},0):this.resume(),r},e.prototype._processArgs=function(t,e,n){return"string"==typeof e?new l(t,e,n):new l(t,null,e)},e.prototype._processEvents=function(){var t=0===this.buffer.length;this.drained!==t&&this.drained&&this.emit("readable"),this.flowing&&0!==this.buffer.length&&this.emit("data",this.read()),this.drained=0===this.buffer.length},e.prototype.emitEvent=function(t,e){this.emit(t,e.getData(this.encoding)),e.cb&&e.cb()},e.prototype.write=function(t,e,n){if(this.ended)throw new a(c.EPERM,"Cannot write to an ended stream.");var r=this._processArgs(t,e,n);return this._push(r),this.flowing},e.prototype.end=function(t,e,n){if(this.ended)throw new a(c.EPERM,"Stream is already closed.");var r=this._processArgs(t,e,n);this.ended=!0,this.endEvent=r,this._processEvents()},e.prototype.read=function(t){var e,n,r,i,o=[],a=[],c=0,u=0,f="number"!=typeof t;for(f&&(t=4294967295),u=0;u<this.buffer.length&&t>c;u++)n=this.buffer[u],o.push(n.getData()),n.cb&&a.push(n.cb),c+=n.size,e=n.cb;if(!f&&t>c)return null;if(this.buffer=this.buffer.slice(o.length),i=c>t?t:c,r=s.concat(o),c>t&&(e&&a.pop(),this._push(new l(r.slice(t),null,e))),a.length>0&&setTimeout(function(){var t;for(t=0;t<a.length;t++)a[t]()},0),this.ended&&0===this.buffer.length&&null!==this.endEvent){var h=this.endEvent,d=this;this.endEvent=null,setTimeout(function(){d.emitEvent("end",h)},0)}return 0===o.length?(this.emit("_read"),null):null===this.encoding?r.slice(0,i):r.toString(this.encoding,0,i)},e.prototype.setEncoding=function(t){this.encoding=t},e.prototype.pause=function(){this.flowing=!1},e.prototype.resume=function(){this.flowing=!0,this._processEvents()},e.prototype.pipe=function(t,e){throw new a(c.EPERM,"Unimplemented.")},e.prototype.unpipe=function(t){},e.prototype.unshift=function(t){if(this.ended)throw new a(c.EPERM,"Stream has ended.");this.buffer.unshift(new l(t,this.encoding)),this._processEvents()},e.prototype._push=function(t){this.buffer.push(t),this._processEvents()},e.prototype.wrap=function(t){throw new a(c.EPERM,"Unimplemented.")},e}(u);n.AbstractDuplexStream=f},{"./api_error":14,"./buffer":16}],26:[function(t,e,n){function r(t,e){if("function"!=typeof t)throw new d(p.EINVAL,"Callback must be a function.");switch("undefined"==typeof __numWaiting&&(__numWaiting=0),__numWaiting++,e){case 1:return function(e){setImmediate(function(){return __numWaiting--,t(e)})};case 2:return function(e,n){setImmediate(function(){return __numWaiting--,t(e,n)})};case 3:return function(e,n,r){setImmediate(function(){return __numWaiting--,t(e,n,r)})};default:throw new Error("Invalid invocation of wrapCb.")}}function i(t){if("function"!=typeof t.write)throw new d(p.EBADF,"Invalid file descriptor.")}function o(t,e){switch(typeof t){case"number":return t;case"string":var n=parseInt(t,8);if(NaN!==n)return n;default:return e}}function s(t){if(t.indexOf("\0")>=0)throw new d(p.EINVAL,"Path must be a string without null bytes.");if(""===t)throw new d(p.EINVAL,"Path must not be empty.");return h.resolve(t)}function a(t,e,n,r){switch(typeof t){case"object":return{encoding:"undefined"!=typeof t.encoding?t.encoding:e,flag:"undefined"!=typeof t.flag?t.flag:n,mode:o(t.mode,r)};case"string":return{encoding:t,flag:n,mode:r};default:return{encoding:e,flag:n,mode:r}}}function c(){}var l=t("./api_error"),u=t("./file_flag"),f=t("./buffer"),h=t("./node_path"),d=l.ApiError,p=l.ErrorCode,y=u.FileFlag,g=f.Buffer,m=function(){function t(){}return t._initialize=function(e){if(!e.constructor.isAvailable())throw new d(p.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return t.root=e},t._toUnixTimestamp=function(t){if("number"==typeof t)return t;if(t instanceof Date)return t.getTime()/1e3;throw new Error("Cannot parse time: "+t)},t.getRootFS=function(){return t.root?t.root:null},t.rename=function(e,n,i){void 0===i&&(i=c);var o=r(i,1);try{t.root.rename(s(e),s(n),o)}catch(t){o(t)}},t.renameSync=function(e,n){t.root.renameSync(s(e),s(n))},t.exists=function(e,n){void 0===n&&(n=c);var i=r(n,1);try{return t.root.exists(s(e),i)}catch(t){return i(!1)}},t.existsSync=function(e){try{return t.root.existsSync(s(e))}catch(t){return!1}},t.stat=function(e,n){void 0===n&&(n=c);var i=r(n,2);try{return t.root.stat(s(e),!1,i)}catch(t){return i(t,null)}},t.statSync=function(e){return t.root.statSync(s(e),!1)},t.lstat=function(e,n){void 0===n&&(n=c);var i=r(n,2);try{return t.root.stat(s(e),!0,i)}catch(t){return i(t,null)}},t.lstatSync=function(e){return t.root.statSync(s(e),!0)},t.truncate=function(e,n,i){void 0===n&&(n=0),void 0===i&&(i=c);var o=0;"function"==typeof n?i=n:"number"==typeof n&&(o=n);var a=r(i,1);try{if(0>o)throw new d(p.EINVAL);return t.root.truncate(s(e),o,a)}catch(t){return a(t)}},t.truncateSync=function(e,n){if(void 0===n&&(n=0),0>n)throw new d(p.EINVAL);return t.root.truncateSync(s(e),n)},t.unlink=function(e,n){void 0===n&&(n=c);var i=r(n,1);try{return t.root.unlink(s(e),i)}catch(t){return i(t)}},t.unlinkSync=function(e){return t.root.unlinkSync(s(e))},t.open=function(e,n,i,a){void 0===a&&(a=c);var l=o(i,420);a="function"==typeof i?i:a;var u=r(a,2);try{return t.root.open(s(e),y.getFileFlag(n),l,u)}catch(t){return u(t,null)}},t.openSync=function(e,n,r){return void 0===r&&(r=420),t.root.openSync(s(e),y.getFileFlag(n),r)},t.readFile=function(e,n,i){void 0===n&&(n={}),void 0===i&&(i=c);var o=a(n,null,"r",null);i="function"==typeof n?n:i;var l=r(i,2);try{var u=y.getFileFlag(o.flag);return u.isReadable()?t.root.readFile(s(e),o.encoding,u,l):l(new d(p.EINVAL,"Flag passed to readFile must allow for reading."))}catch(t){return l(t,null)}},t.readFileSync=function(e,n){void 0===n&&(n={});var r=a(n,null,"r",null),i=y.getFileFlag(r.flag);if(!i.isReadable())throw new d(p.EINVAL,"Flag passed to readFile must allow for reading.");return t.root.readFileSync(s(e),r.encoding,i)},t.writeFile=function(e,n,i,o){void 0===i&&(i={}),void 0===o&&(o=c);var l=a(i,"utf8","w",420);o="function"==typeof i?i:o;var u=r(o,1);try{var f=y.getFileFlag(l.flag);return f.isWriteable()?t.root.writeFile(s(e),n,l.encoding,f,l.mode,u):u(new d(p.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(t){return u(t)}},t.writeFileSync=function(e,n,r){var i=a(r,"utf8","w",420),o=y.getFileFlag(i.flag);if(!o.isWriteable())throw new d(p.EINVAL,"Flag passed to writeFile must allow for writing.");return t.root.writeFileSync(s(e),n,i.encoding,o,i.mode)},t.appendFile=function(e,n,i,o){void 0===o&&(o=c);var l=a(i,"utf8","a",420);o="function"==typeof i?i:o;var u=r(o,1);try{var f=y.getFileFlag(l.flag);if(!f.isAppendable())return u(new d(p.EINVAL,"Flag passed to appendFile must allow for appending."));t.root.appendFile(s(e),n,l.encoding,f,l.mode,u)}catch(t){u(t)}},t.appendFileSync=function(e,n,r){var i=a(r,"utf8","a",420),o=y.getFileFlag(i.flag);if(!o.isAppendable())throw new d(p.EINVAL,"Flag passed to appendFile must allow for appending.");return t.root.appendFileSync(s(e),n,i.encoding,o,i.mode)},t.fstat=function(t,e){void 0===e&&(e=c);var n=r(e,2);try{i(t),t.stat(n)}catch(t){n(t)}},t.fstatSync=function(t){return i(t),t.statSync()},t.close=function(t,e){void 0===e&&(e=c);var n=r(e,1);try{i(t),t.close(n)}catch(t){n(t)}},t.closeSync=function(t){return i(t),t.closeSync()},t.ftruncate=function(t,e,n){void 0===n&&(n=c);var o="number"==typeof e?e:0;n="function"==typeof e?e:n;var s=r(n,1);try{if(i(t),0>o)throw new d(p.EINVAL);t.truncate(o,s)}catch(t){s(t)}},t.ftruncateSync=function(t,e){return void 0===e&&(e=0),i(t),t.truncateSync(e)},t.fsync=function(t,e){void 0===e&&(e=c);var n=r(e,1);try{i(t),t.sync(n)}catch(t){n(t)}},t.fsyncSync=function(t){return i(t),t.syncSync()},t.fdatasync=function(t,e){void 0===e&&(e=c);var n=r(e,1);try{i(t),t.datasync(n)}catch(t){n(t)}},t.fdatasyncSync=function(t){i(t),t.datasyncSync()},t.write=function(t,e,n,o,s,a){void 0===a&&(a=c);var l,u,f,h=null;if("string"==typeof e){var y="utf8";switch(typeof n){case"function":a=n;break;case"number":h=n,y="string"==typeof o?o:"utf8",
a="function"==typeof s?s:a;break;default:return(a="function"==typeof o?o:"function"==typeof s?s:a)(new d(p.EINVAL,"Invalid arguments."))}l=new g(e,y),u=0,f=l.length}else l=e,u=n,f=o,h="number"==typeof s?s:null,a="function"==typeof s?s:a;var m=r(a,3);try{i(t),null==h&&(h=t.getPos()),t.write(l,u,f,h,m)}catch(t){m(t)}},t.writeSync=function(t,e,n,r,o){var s,a,c,l=0;if("string"==typeof e){c="number"==typeof n?n:null;var u="string"==typeof r?r:"utf8";l=0,s=new g(e,u),a=s.length}else s=e,l=n,a=r,c="number"==typeof o?o:null;return i(t),null==c&&(c=t.getPos()),t.writeSync(s,l,a,c)},t.read=function(t,e,n,o,s,a){void 0===a&&(a=c);var l,u,f,h,d;if("number"==typeof e){f=e,l=n;var p=o;a="function"==typeof s?s:a,u=0,h=new g(f),d=r(function(t,e,n){return t?a(t):void a(t,n.toString(p),e)},3)}else h=e,u=n,f=o,l=s,d=r(a,3);try{i(t),null==l&&(l=t.getPos()),t.read(h,u,f,l,d)}catch(t){d(t)}},t.readSync=function(t,e,n,r,o){var s,a,c,l,u=!1;if("number"==typeof e){c=e,l=n;var f=r;a=0,s=new g(c),u=!0}else s=e,a=n,c=r,l=o;i(t),null==l&&(l=t.getPos());var h=t.readSync(s,a,c,l);return u?[s.toString(f),h]:h},t.fchown=function(t,e,n,o){void 0===o&&(o=c);var s=r(o,1);try{i(t),t.chown(e,n,s)}catch(t){s(t)}},t.fchownSync=function(t,e,n){return i(t),t.chownSync(e,n)},t.fchmod=function(t,e,n){void 0===n&&(n=c);var o=r(n,1);try{e="string"==typeof e?parseInt(e,8):e,i(t),t.chmod(e,o)}catch(t){o(t)}},t.fchmodSync=function(t,e){return e="string"==typeof e?parseInt(e,8):e,i(t),t.chmodSync(e)},t.futimes=function(t,e,n,o){void 0===o&&(o=c);var s=r(o,1);try{i(t),"number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof n&&(n=new Date(1e3*n)),t.utimes(e,n,s)}catch(t){s(t)}},t.futimesSync=function(t,e,n){return i(t),"number"==typeof e&&(e=new Date(1e3*e)),"number"==typeof n&&(n=new Date(1e3*n)),t.utimesSync(e,n)},t.rmdir=function(e,n){void 0===n&&(n=c);var i=r(n,1);try{e=s(e),t.root.rmdir(e,i)}catch(t){i(t)}},t.rmdirSync=function(e){return e=s(e),t.root.rmdirSync(e)},t.mkdir=function(e,n,i){void 0===i&&(i=c),"function"==typeof n&&(i=n,n=511);var o=r(i,1);try{e=s(e),t.root.mkdir(e,n,o)}catch(t){o(t)}},t.mkdirSync=function(e,n){return void 0===n&&(n=511),n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.mkdirSync(e,n)},t.readdir=function(e,n){void 0===n&&(n=c);var i=r(n,2);try{e=s(e),t.root.readdir(e,i)}catch(t){i(t)}},t.readdirSync=function(e){return e=s(e),t.root.readdirSync(e)},t.link=function(e,n,i){void 0===i&&(i=c);var o=r(i,1);try{e=s(e),n=s(n),t.root.link(e,n,o)}catch(t){o(t)}},t.linkSync=function(e,n){return e=s(e),n=s(n),t.root.linkSync(e,n)},t.symlink=function(e,n,i,o){void 0===o&&(o=c);var a="string"==typeof i?i:"file";o="function"==typeof i?i:o;var l=r(o,1);try{if("file"!==a&&"dir"!==a)return l(new d(p.EINVAL,"Invalid type: "+a));e=s(e),n=s(n),t.root.symlink(e,n,a,l)}catch(t){l(t)}},t.symlinkSync=function(e,n,r){if(null==r)r="file";else if("file"!==r&&"dir"!==r)throw new d(p.EINVAL,"Invalid type: "+r);return e=s(e),n=s(n),t.root.symlinkSync(e,n,r)},t.readlink=function(e,n){void 0===n&&(n=c);var i=r(n,2);try{e=s(e),t.root.readlink(e,i)}catch(t){i(t)}},t.readlinkSync=function(e){return e=s(e),t.root.readlinkSync(e)},t.chown=function(e,n,i,o){void 0===o&&(o=c);var a=r(o,1);try{e=s(e),t.root.chown(e,!1,n,i,a)}catch(t){a(t)}},t.chownSync=function(e,n,r){e=s(e),t.root.chownSync(e,!1,n,r)},t.lchown=function(e,n,i,o){void 0===o&&(o=c);var a=r(o,1);try{e=s(e),t.root.chown(e,!0,n,i,a)}catch(t){a(t)}},t.lchownSync=function(e,n,r){return e=s(e),t.root.chownSync(e,!0,n,r)},t.chmod=function(e,n,i){void 0===i&&(i=c);var o=r(i,1);try{n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.chmod(e,!1,n,o)}catch(t){o(t)}},t.chmodSync=function(e,n){return n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.chmodSync(e,!1,n)},t.lchmod=function(e,n,i){void 0===i&&(i=c);var o=r(i,1);try{n="string"==typeof n?parseInt(n,8):n,e=s(e),t.root.chmod(e,!0,n,o)}catch(t){o(t)}},t.lchmodSync=function(e,n){return e=s(e),n="string"==typeof n?parseInt(n,8):n,t.root.chmodSync(e,!0,n)},t.utimes=function(e,n,i,o){void 0===o&&(o=c);var a=r(o,1);try{e=s(e),"number"==typeof n&&(n=new Date(1e3*n)),"number"==typeof i&&(i=new Date(1e3*i)),t.root.utimes(e,n,i,a)}catch(t){a(t)}},t.utimesSync=function(e,n,r){return e=s(e),"number"==typeof n&&(n=new Date(1e3*n)),"number"==typeof r&&(r=new Date(1e3*r)),t.root.utimesSync(e,n,r)},t.realpath=function(e,n,i){void 0===i&&(i=c);var o="object"==typeof n?n:{};i="function"==typeof n?n:c;var a=r(i,2);try{e=s(e),t.root.realpath(e,o,a)}catch(t){a(t)}},t.realpathSync=function(e,n){return void 0===n&&(n={}),e=s(e),t.root.realpathSync(e,n)},t.root=null,t}();e.exports=m},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],27:[function(t,e,n){var r=t("./buffer"),i=r.Buffer;!function(t){t[t.FILE=32768]="FILE",t[t.DIRECTORY=16384]="DIRECTORY",t[t.SYMLINK=40960]="SYMLINK"}(n.FileType||(n.FileType={}));var o=n.FileType,s=function(){function t(t,e,n,r,i,s){if(void 0===r&&(r=new Date),void 0===i&&(i=new Date),void 0===s&&(s=new Date),this.size=e,this.mode=n,this.atime=r,this.mtime=i,this.ctime=s,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,null==this.mode)switch(t){case o.FILE:this.mode=420;break;case o.DIRECTORY:default:this.mode=511}this.blocks=Math.ceil(e/512),this.mode<4096&&(this.mode|=t)}return t.prototype.toBuffer=function(){var t=new i(32);return t.writeUInt32LE(this.size,0),t.writeUInt32LE(this.mode,4),t.writeDoubleLE(this.atime.getTime(),8),t.writeDoubleLE(this.mtime.getTime(),16),t.writeDoubleLE(this.ctime.getTime(),24),t},t.fromBuffer=function(e){var n=e.readUInt32LE(0),r=e.readUInt32LE(4),i=e.readDoubleLE(8),o=e.readDoubleLE(16),s=e.readDoubleLE(24);return new t(61440&r,n,4095&r,new Date(i),new Date(o),new Date(s))},t.prototype.clone=function(){return new t(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},t.prototype.isFile=function(){return(61440&this.mode)===o.FILE},t.prototype.isDirectory=function(){return(61440&this.mode)===o.DIRECTORY},t.prototype.isSymbolicLink=function(){return(61440&this.mode)===o.SYMLINK},t.prototype.chmod=function(t){this.mode=61440&this.mode|t},t.prototype.isSocket=function(){return!1},t.prototype.isBlockDevice=function(){return!1},t.prototype.isCharacterDevice=function(){return!1},t.prototype.isFIFO=function(){return!1},t}();n.Stats=s},{"./buffer":16}],28:[function(t,e,n){var r=t("./node_process"),i=r.process,o=function(){function t(){}return t.normalize=function(e){""===e&&(e=".");var n=e.charAt(0)===t.sep;e=t._removeDuplicateSeps(e);for(var r=e.split(t.sep),i=[],o=0;o<r.length;o++){var s=r[o];"."!==s&&(".."===s&&(n||!n&&i.length>0&&".."!==i[0])?i.pop():i.push(s))}if(!n&&i.length<2)switch(i.length){case 1:""===i[0]&&i.unshift(".");break;default:i.push(".")}return e=i.join(t.sep),n&&e.charAt(0)!==t.sep&&(e=t.sep+e),e},t.join=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];for(var r=[],i=0;i<e.length;i++){var o=e[i];if("string"!=typeof o)throw new TypeError("Invalid argument type to path.join: "+typeof o);""!==o&&r.push(o)}return t.normalize(r.join(t.sep))},t.resolve=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];for(var r=[],o=0;o<e.length;o++){var s=e[o];if("string"!=typeof s)throw new TypeError("Invalid argument type to path.join: "+typeof s);""!==s&&(s.charAt(0)===t.sep&&(r=[]),r.push(s))}var a=t.normalize(r.join(t.sep));if(a.length>1&&a.charAt(a.length-1)===t.sep)return a.substr(0,a.length-1);if(a.charAt(0)!==t.sep){"."!==a.charAt(0)||1!==a.length&&a.charAt(1)!==t.sep||(a=1===a.length?"":a.substr(2));var c=i.cwd();a=""!==a?this.normalize(c+("/"!==c?t.sep:"")+a):c}return a},t.relative=function(e,n){var r;e=t.resolve(e),n=t.resolve(n);var i=e.split(t.sep),o=n.split(t.sep);o.shift(),i.shift();var s=0,a=[];for(r=0;r<i.length;r++){var c=i[r];if(c!==o[r]){s=i.length-r;break}}a=o.slice(r),1===i.length&&""===i[0]&&(s=0),s>i.length&&(s=i.length);var l="";for(r=0;s>r;r++)l+="../";return l+=a.join(t.sep),l.length>1&&l.charAt(l.length-1)===t.sep&&(l=l.substr(0,l.length-1)),l},t.dirname=function(e){e=t._removeDuplicateSeps(e);var n=e.charAt(0)===t.sep,r=e.split(t.sep);return""===r.pop()&&r.length>0&&r.pop(),r.length>1||1===r.length&&!n?r.join(t.sep):n?t.sep:"."},t.basename=function(e,n){if(void 0===n&&(n=""),""===e)return e;e=t.normalize(e);var r=e.split(t.sep),i=r[r.length-1];if(""===i&&r.length>1)return r[r.length-2];if(n.length>0){var o=i.substr(i.length-n.length);if(o===n)return i.substr(0,i.length-n.length)}return i},t.extname=function(e){e=t.normalize(e);var n=e.split(t.sep);if(e=n.pop(),""===e&&n.length>0&&(e=n.pop()),".."===e)return"";var r=e.lastIndexOf(".");return-1===r||0===r?"":e.substr(r)},t.isAbsolute=function(e){return e.length>0&&e.charAt(0)===t.sep},t._makeLong=function(t){return t},t._removeDuplicateSeps=function(t){return t=t.replace(this._replaceRegex,this.sep)},t.sep="/",t._replaceRegex=new RegExp("//+","g"),t.delimiter=":",t}();e.exports=o},{"./node_process":29}],29:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("./node_eventemitter"),o=null,s=function(t){function e(){t.call(this,!0,!0),this.isRaw=!1,this.columns=80,this.rows=120,this.isTTY=!0}return r(e,t),e.prototype.setReadMode=function(t){this.isRaw!==t&&(this.isRaw=t,this.emit("modeChange"))},e.prototype.changeColumns=function(t){t!==this.columns&&(this.columns=t,this.emit("resize"))},e.prototype.changeRows=function(t){t!==this.rows&&(this.rows=t,this.emit("resize"))},e.isatty=function(t){return t instanceof e},e}(i.AbstractDuplexStream);n.TTY=s;var a=function(){function e(){this.startTime=Date.now(),this._cwd="/",this.platform="browser",this.argv=[],this.stdout=new s,this.stderr=new s,this.stdin=new s}return e.prototype.chdir=function(e){null===o&&(o=t("./node_path")),this._cwd=o.resolve(e)},e.prototype.cwd=function(){return this._cwd},e.prototype.uptime=function(){return(Date.now()-this.startTime)/1e3|0},e}();n.Process=a,n.process=new a},{"./node_eventemitter":25,"./node_path":28}],30:[function(t,e,n){function r(t){switch(t=function(){switch(typeof t){case"object":return""+t;case"string":return t;default:throw new Error("Invalid encoding argument specified")}}(),t=t.toLowerCase()){case"utf8":case"utf-8":return i;case"ascii":return o;case"binary":return a;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l;case"hex":return u;case"base64":return c;case"binary_string":return f;case"binary_string_ie":return h;case"extended_ascii":return s;default:throw new Error("Unknown encoding: "+t)}}n.FindUtil=r;var i=function(){function t(){}return t.str2byte=function(t,e){for(var n=e.length,r=0,i=0,o=n,s=0;r<t.length&&o>i;){var a=t.charCodeAt(r++),c=t.charCodeAt(r);if(a>=55296&&56319>=a&&c>=56320&&57343>=c){if(i+3>=o)break;s++;var l=(1023&a|1024)<<10|1023&c;e.writeUInt8(l>>18|240,i++),e.writeUInt8(l>>12&63|128,i++),e.writeUInt8(l>>6&63|128,i++),e.writeUInt8(63&l|128,i++),r++}else if(128>a)e.writeUInt8(a,i++),s++;else if(2048>a){if(i+1>=o)break;s++,e.writeUInt8(a>>6|192,i++),e.writeUInt8(63&a|128,i++)}else if(65536>a){if(i+2>=o)break;s++,e.writeUInt8(a>>12|224,i++),e.writeUInt8(a>>6&63|128,i++),e.writeUInt8(63&a|128,i++)}}return i},t.byte2str=function(t){for(var e=[],n=0;n<t.length;){var r=t.readUInt8(n++);if(128>r)e.push(String.fromCharCode(r));else{if(192>r)throw new Error("Found incomplete part of character in string.");if(224>r)e.push(String.fromCharCode((31&r)<<6|63&t.readUInt8(n++)));else if(240>r)e.push(String.fromCharCode((15&r)<<12|(63&t.readUInt8(n++))<<6|63&t.readUInt8(n++)));else{if(!(248>r))throw new Error("Unable to represent UTF-8 string as UTF-16 JavaScript string.");var i=t.readUInt8(n+2);e.push(String.fromCharCode(1023&((7&r)<<8|(63&t.readUInt8(n++))<<2|(63&t.readUInt8(n++))>>4)|55296)),e.push(String.fromCharCode((15&i)<<6|63&t.readUInt8(n++)|56320))}}}return e.join("")},t.byteLength=function(t){var e=encodeURIComponent(t).match(/%[89ABab]/g);return t.length+(e?e.length:0)},t}();n.UTF8=i;var o=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(t.charCodeAt(r)%256,r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(127&t.readUInt8(n));return e.join("")},t.byteLength=function(t){return t.length},t}();n.ASCII=o;var s=function(){function t(){}return t.str2byte=function(e,n){for(var r=e.length>n.length?n.length:e.length,i=0;r>i;i++){var o=e.charCodeAt(i);if(o>127){var s=t.extendedChars.indexOf(e.charAt(i));s>-1&&(o=s+128)}n.writeUInt8(o,i)}return r},t.byte2str=function(e){for(var n=new Array(e.length),r=0;r<e.length;r++){var i=e.readUInt8(r);i>127?n[r]=t.extendedChars[i-128]:n[r]=String.fromCharCode(i)}return n.join("")},t.byteLength=function(t){return t.length},t.extendedChars=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","_","_","_","","","","","","","","","+","+","","","+","+","-","-","+","-","+","","","+","+","-","-","","-","+","","","","","","","i","","","","+","+","_","_","","","_","","","","","","","","","","","","","","","","","","","_","","","","","","","","","","","","_"," "],t}();n.ExtendedASCII=s;var a=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(255&t.charCodeAt(r),r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(255&t.readUInt8(n));return e.join("")},t.byteLength=function(t){return t.length},t}();n.BINARY=a;var c=function(){function t(){}return t.byte2str=function(e){for(var n="",r=0;r<e.length;){var i=e.readUInt8(r++),o=r<e.length?e.readUInt8(r++):NaN,s=r<e.length?e.readUInt8(r++):NaN,a=i>>2,c=(3&i)<<4|o>>4,l=(15&o)<<2|s>>6,u=63&s;isNaN(o)?l=u=64:isNaN(s)&&(u=64),n=n+t.num2b64[a]+t.num2b64[c]+t.num2b64[l]+t.num2b64[u]}return n},t.str2byte=function(e,n){var r=n.length,i="",o=0;e=e.replace(/[^A-Za-z0-9\+\/\=\-\_]/g,"");for(var s=0;o<e.length;){var a=t.b642num[e.charAt(o++)],c=t.b642num[e.charAt(o++)],l=t.b642num[e.charAt(o++)],u=t.b642num[e.charAt(o++)],f=a<<2|c>>4,h=(15&c)<<4|l>>2,d=(3&l)<<6|u;if(n.writeUInt8(f,s++),s===r)break;if(64!==l&&(i+=n.writeUInt8(h,s++)),s===r)break;if(64!==u&&(i+=n.writeUInt8(d,s++)),s===r)break}return s},t.byteLength=function(t){return Math.floor(6*t.replace(/[^A-Za-z0-9\+\/\-\_]/g,"").length/8)},t.b64chars=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/","="],t.num2b64=function(){for(var e=new Array(t.b64chars.length),n=0;n<t.b64chars.length;n++){var r=t.b64chars[n];e[n]=r}return e}(),t.b642num=function(){for(var e={},n=0;n<t.b64chars.length;n++){var r=t.b64chars[n];e[r]=n}return e["-"]=62,e._=63,e}(),t}();n.BASE64=c;var l=function(){function t(){}return t.str2byte=function(t,e){var n=t.length;2*n>e.length&&(n=e.length%2===1?(e.length-1)/2:e.length/2);for(var r=0;n>r;r++)e.writeUInt16LE(t.charCodeAt(r),2*r);return 2*n},t.byte2str=function(t){if(t.length%2!==0)throw new Error("Invalid UCS2 byte array.");for(var e=new Array(t.length/2),n=0;n<t.length;n+=2)e[n/2]=String.fromCharCode(t.readUInt8(n)|t.readUInt8(n+1)<<8);return e.join("")},t.byteLength=function(t){return 2*t.length},t}();n.UCS2=l;var u=function(){function t(){}return t.str2byte=function(t,e){if(t.length%2===1)throw new Error("Invalid hex string");var n=t.length>>1;n>e.length&&(n=e.length);for(var r=0;n>r;r++){var i=this.hex2num[t.charAt(r<<1)],o=this.hex2num[t.charAt((r<<1)+1)];e.writeUInt8(i<<4|o,r)}return n},t.byte2str=function(t){for(var e=t.length,n=new Array(e<<1),r=0,i=0;e>i;i++){var o=15&t.readUInt8(i),s=t.readUInt8(i)>>4;n[r++]=this.num2hex[s],n[r++]=this.num2hex[o]}return n.join("")},t.byteLength=function(t){return t.length>>1},t.HEXCHARS="0123456789abcdef",t.num2hex=function(){for(var e=new Array(t.HEXCHARS.length),n=0;n<t.HEXCHARS.length;n++){var r=t.HEXCHARS[n];e[n]=r}return e}(),t.hex2num=function(){var e,n,r={};for(e=0;e<t.HEXCHARS.length;e++)n=t.HEXCHARS[e],r[n]=e;var i="ABCDEF";for(e=0;e<i.length;e++)n=i[e],r[n]=e+10;return r}(),t}();n.HEX=u;var f=function(){function t(){}return t.str2byte=function(e,n){if(0===e.length)return 0;var r=t.byteLength(e);r>n.length&&(r=n.length);var i=0,o=0,s=o+r,a=e.charCodeAt(i++);0!==a&&(n.writeUInt8(255&a,0),o=1);for(var c=o;s>c;c+=2){var l=e.charCodeAt(i++);s-c===1&&n.writeUInt8(l>>8,c),s-c>=2&&n.writeUInt16BE(l,c)}return r},t.byte2str=function(t){var e=t.length;if(0===e)return"";for(var n=new Array((e>>1)+1),r=0,i=0;i<n.length;i++)0===i?e%2===1?n[i]=String.fromCharCode(256|t.readUInt8(r++)):n[i]=String.fromCharCode(0):n[i]=String.fromCharCode(t.readUInt8(r++)<<8|t.readUInt8(r++));return n.join("")},t.byteLength=function(t){if(0===t.length)return 0;var e=t.charCodeAt(0),n=t.length-1<<1;return 0!==e&&n++,n},t}();n.BINSTR=f;var h=function(){function t(){}return t.str2byte=function(t,e){for(var n=t.length>e.length?e.length:t.length,r=0;n>r;r++)e.writeUInt8(t.charCodeAt(r)-32,r);return n},t.byte2str=function(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t.readUInt8(n)+32);return e.join("")},t.byteLength=function(t){return t.length},t}();n.BINSTRIE=h},{}],31:[function(t,e,n){n.isIE="undefined"!=typeof navigator&&(null!=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||-1!==navigator.userAgent.indexOf("Trident")),n.isWebWorker="undefined"==typeof window},{}],32:[function(t,e,n){var r=t("../core/browserfs"),i=t("../core/node_fs"),o=t("../core/buffer"),s=t("../core/buffer_core_arraybuffer"),a=o.Buffer,c=s.BufferCoreArrayBuffer,l=function(){function t(t){this.fs=t,this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()}return t.prototype.open=function(t){var e=this.fs.realPath(t.node),n=this.FS;try{n.isFile(t.node.mode)&&(t.nfd=i.openSync(e,this.fs.flagsToPermissionString(t.flags)))}catch(t){if(!t.code)throw t;throw new n.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.close=function(t){var e=this.FS;try{e.isFile(t.node.mode)&&t.nfd&&i.closeSync(t.nfd)}catch(t){if(!t.code)throw t;throw new e.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.read=function(t,e,n,r,o){var s,l=new c(e.buffer),u=new a(l,e.byteOffset+n,e.byteOffset+n+r);try{s=i.readSync(t.nfd,u,0,r,o)}catch(t){throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return s},t.prototype.write=function(t,e,n,r,o){var s,l=new c(e.buffer),u=new a(l,e.byteOffset+n,e.byteOffset+n+r);try{s=i.writeSync(t.nfd,u,0,r,o)}catch(t){throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return s},t.prototype.llseek=function(t,e,n){var r=e;if(1===n)r+=t.position;else if(2===n&&this.FS.isFile(t.node.mode))try{var o=i.fstatSync(t.nfd);r+=o.size}catch(t){throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}if(0>r)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return t.position=r,r},t}(),u=function(){function t(t){this.fs=t,this.FS=t.getFS(),this.PATH=t.getPATH(),this.ERRNO_CODES=t.getERRNO_CODES()}return t.prototype.getattr=function(t){var e,n=this.fs.realPath(t);try{e=i.lstatSync(n)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return{dev:e.dev,ino:e.ino,mode:e.mode,nlink:e.nlink,uid:e.uid,gid:e.gid,rdev:e.rdev,size:e.size,atime:e.atime,mtime:e.mtime,ctime:e.ctime,blksize:e.blksize,blocks:e.blocks}},t.prototype.setattr=function(t,e){var n=this.fs.realPath(t);try{if(void 0!==e.mode&&(i.chmodSync(n,e.mode),t.mode=e.mode),void 0!==e.timestamp){var r=new Date(e.timestamp);i.utimesSync(n,r,r)}}catch(t){if(!t.code)throw t;if("ENOTSUP"!==t.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}if(void 0!==e.size)try{i.truncateSync(n,e.size)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.lookup=function(t,e){var n=this.PATH.join2(this.fs.realPath(t),e),r=this.fs.getMode(n);return this.fs.createNode(t,e,r)},t.prototype.mknod=function(t,e,n,r){var o=this.fs.createNode(t,e,n,r),s=this.fs.realPath(o);try{this.FS.isDir(o.mode)?i.mkdirSync(s,o.mode):i.writeFileSync(s,"",{mode:o.mode})}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return o},t.prototype.rename=function(t,e,n){var r=this.fs.realPath(t),o=this.PATH.join2(this.fs.realPath(e),n);try{i.renameSync(r,o)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.unlink=function(t,e){var n=this.PATH.join2(this.fs.realPath(t),e);try{i.unlinkSync(n)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.rmdir=function(t,e){var n=this.PATH.join2(this.fs.realPath(t),e);try{i.rmdirSync(n)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.readdir=function(t){var e=this.fs.realPath(t);try{return i.readdirSync(e)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.symlink=function(t,e,n){var r=this.PATH.join2(this.fs.realPath(t),e);try{i.symlinkSync(n,r)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},t.prototype.readlink=function(t){var e=this.fs.realPath(t);try{return i.readlinkSync(e)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}},t}(),f=function(){function t(t,e,n){if(void 0===t&&(t=self.FS),void 0===e&&(e=self.PATH),void 0===n&&(n=self.ERRNO_CODES),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},"undefined"==typeof r)throw new Error("BrowserFS is not loaded. Please load it before this library.");this.FS=t,this.PATH=e,this.ERRNO_CODES=n,this.node_ops=new u(this),this.stream_ops=new l(this)}return t.prototype.mount=function(t){return this.createNode(null,"/",this.getMode(t.opts.root),0)},t.prototype.createNode=function(t,e,n,r){var i=this.FS;if(!i.isDir(n)&&!i.isFile(n)&&!i.isLink(n))throw new i.ErrnoError(this.ERRNO_CODES.EINVAL);var o=i.createNode(t,e,n);return o.node_ops=this.node_ops,o.stream_ops=this.stream_ops,o},t.prototype.getMode=function(t){var e;try{e=i.lstatSync(t)}catch(t){if(!t.code)throw t;throw new this.FS.ErrnoError(this.ERRNO_CODES[t.code])}return e.mode},t.prototype.realPath=function(t){for(var e=[];t.parent!==t;)e.push(t.name),t=t.parent;return e.push(t.mount.opts.root),e.reverse(),this.PATH.join.apply(null,e)},t.prototype.flagsToPermissionString=function(t){return t in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[t]:t},t.prototype.getFS=function(){return this.FS},t.prototype.getPATH=function(){return this.PATH},t.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES},t}();n.BFSEmscriptenFS=f,r.EmscriptenFS=f},{"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/node_fs":26}],33:[function(t,e,n){var r=t("../core/node_fs_stats"),i=t("../core/node_path"),o=r.Stats,s=function(){function t(){this._index={},this.addPath("/",new c)}return t.prototype._split_path=function(t){var e=i.dirname(t),n=t.substr(e.length+("/"===e?0:1));return[e,n]},t.prototype.fileIterator=function(t){for(var e in this._index)for(var n=this._index[e],r=n.getListing(),i=0;i<r.length;i++){var o=n.getItem(r[i]);o.isFile()&&t(o.getData())}},t.prototype.addPath=function(t,e){if(null==e)throw new Error("Inode must be specified");if("/"!==t[0])throw new Error("Path must be absolute, got: "+t);if(this._index.hasOwnProperty(t))return this._index[t]===e;var n=this._split_path(t),r=n[0],i=n[1],o=this._index[r];return!(void 0===o&&"/"!==t&&(o=new c,!this.addPath(r,o))||"/"!==t&&!o.addItem(i,e))&&(e.isFile()||(this._index[t]=e),!0)},t.prototype.removePath=function(t){var e=this._split_path(t),n=e[0],r=e[1],i=this._index[n];if(void 0===i)return null;var o=i.remItem(r);if(null===o)return null;if(!o.isFile()){for(var s=o,a=s.getListing(),c=0;c<a.length;c++)this.removePath(t+"/"+a[c]);"/"!==t&&delete this._index[t]}return o},t.prototype.ls=function(t){var e=this._index[t];return void 0===e?null:e.getListing()},t.prototype.getInode=function(t){var e=this._split_path(t),n=e[0],r=e[1],i=this._index[n];return void 0===i?null:n===t?i:i.getItem(r)},t.from_listing=function(e){var n=new t,i=new c;n._index["/"]=i;for(var s=[["",e,i]];s.length>0;){var l,u=s.pop(),f=u[0],h=u[1],d=u[2];for(var p in h){var y=h[p],g=""+f+"/"+p;null!=y?(n._index[g]=l=new c,s.push([g,y,l])):l=new a(new o(r.FileType.FILE,-1,365)),null!=d&&(d._ls[p]=l)}}return n},t}();n.FileIndex=s;var a=function(){function t(t){this.data=t}return t.prototype.isFile=function(){return!0},t.prototype.isDir=function(){return!1},t.prototype.getData=function(){return this.data},t.prototype.setData=function(t){this.data=t},t}();n.FileInode=a;var c=function(){function t(){this._ls={}}return t.prototype.isFile=function(){return!1},t.prototype.isDir=function(){return!0},t.prototype.getStats=function(){return new o(r.FileType.DIRECTORY,4096,365)},t.prototype.getListing=function(){return Object.keys(this._ls)},t.prototype.getItem=function(t){var e;return null!=(e=this._ls[t])?e:null},t.prototype.addItem=function(t,e){return!(t in this._ls)&&(this._ls[t]=e,!0)},t.prototype.remItem=function(t){var e=this._ls[t];return void 0===e?null:(delete this._ls[t],e)},t}();n.DirInode=c},{"../core/node_fs_stats":27,"../core/node_path":28}],34:[function(t,e,n){var r=t("../core/node_fs_stats"),i=t("../core/buffer"),o=function(){function t(t,e,n,r,i,o){this.id=t,this.size=e,this.mode=n,this.atime=r,this.mtime=i,this.ctime=o}return t.prototype.toStats=function(){return new r.Stats((61440&this.mode)===r.FileType.DIRECTORY?r.FileType.DIRECTORY:r.FileType.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},t.prototype.getSize=function(){return 30+this.id.length},t.prototype.toBuffer=function(t){return void 0===t&&(t=new i.Buffer(this.getSize())),t.writeUInt32LE(this.size,0),t.writeUInt16LE(this.mode,4),t.writeDoubleLE(this.atime,6),t.writeDoubleLE(this.mtime,14),t.writeDoubleLE(this.ctime,22),t.write(this.id,30,this.id.length,"ascii"),t},t.prototype.update=function(t){var e=!1;this.size!==t.size&&(this.size=t.size,e=!0),this.mode!==t.mode&&(this.mode=t.mode,e=!0);var n=t.atime.getTime();this.atime!==n&&(this.atime=n,e=!0);var r=t.mtime.getTime();this.mtime!==r&&(this.mtime=r,e=!0);var i=t.ctime.getTime();return this.ctime!==i&&(this.ctime=i,e=!0),e},t.fromBuffer=function(e){if(void 0===e)throw new Error("NO");return new t(e.toString("ascii",30),e.readUInt32LE(0),e.readUInt16LE(4),e.readDoubleLE(6),e.readDoubleLE(14),e.readDoubleLE(22))},t.prototype.isFile=function(){return(61440&this.mode)===r.FileType.FILE},t.prototype.isDirectory=function(){return(61440&this.mode)===r.FileType.DIRECTORY},t}();e.exports=o},{"../core/buffer":16,"../core/node_fs_stats":27}],35:[function(t,e,n){function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,n="x"==t?e:3&e|8;return n.toString(16)})}function i(t,e){return!t||(e(t),!1)}function o(t,e,n){return!t||(e.abort(function(){n(t)}),!1)}var s=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},a=t("../core/file_system"),c=t("../core/api_error"),l=t("../core/node_fs_stats"),u=t("../core/node_path"),f=t("../generic/inode"),h=t("../core/buffer"),d=t("../generic/preload_file"),p="/",y=c.ApiError,g=h.Buffer,m=function(){function t(t){this.store=t,this.originalData={},this.modifiedKeys=[]}return t.prototype.stashOldValue=function(t,e){this.originalData.hasOwnProperty(t)||(this.originalData[t]=e)},t.prototype.markModified=function(t){-1===this.modifiedKeys.indexOf(t)&&(this.modifiedKeys.push(t),this.originalData.hasOwnProperty(t)||(this.originalData[t]=this.store.get(t)))},t.prototype.get=function(t){var e=this.store.get(t);return this.stashOldValue(t,e),e},t.prototype.put=function(t,e,n){return this.markModified(t),this.store.put(t,e,n)},t.prototype.delete=function(t){this.markModified(t),this.store.delete(t)},t.prototype.commit=function(){},t.prototype.abort=function(){var t,e,n;for(t=0;t<this.modifiedKeys.length;t++)e=this.modifiedKeys[t],n=this.originalData[e],null===n?this.store.delete(e):this.store.put(e,n,!0)},t}();n.SimpleSyncRWTransaction=m;var v=function(t){function e(e,n,r,i,o){t.call(this,e,n,r,i,o)}return s(e,t),e.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},e.prototype.closeSync=function(){this.syncSync()},e}(d.PreloadFile);n.SyncKeyValueFile=v;var w=function(t){function e(e){t.call(this),this.store=e.store,this.makeRootDirectory()}return s(e,t),e.isAvailable=function(){return!0},e.prototype.getName=function(){return this.store.name()},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.makeRootDirectory=function(){var t=this.store.beginTransaction("readwrite");if(void 0===t.get(p)){var e=(new Date).getTime(),n=new f(r(),4096,511|l.FileType.DIRECTORY,e,e,e);t.put(n.id,new g("{}"),!1),t.put(p,n.toBuffer(),!1),t.commit()}},e.prototype._findINode=function(t,e,n){var r=this,i=function(i){var o=r.getDirListing(t,e,i);if(o[n])return o[n];throw y.ENOENT(u.resolve(e,n))};return"/"===e?""===n?p:i(this.getINode(t,e,p)):i(this.getINode(t,e+u.sep+n,this._findINode(t,u.dirname(e),u.basename(e))))},e.prototype.findINode=function(t,e){return this.getINode(t,e,this._findINode(t,u.dirname(e),u.basename(e)))},e.prototype.getINode=function(t,e,n){var r=t.get(n);if(void 0===r)throw y.ENOENT(e);return f.fromBuffer(r)},e.prototype.getDirListing=function(t,e,n){if(!n.isDirectory())throw y.ENOTDIR(e);var r=t.get(n.id);if(void 0===r)throw y.ENOENT(e);return JSON.parse(r.toString())},e.prototype.addNewNode=function(t,e){for(var n,i=0;5>i;)try{return n=r(),t.put(n,e,!1),n}catch(t){}throw new y(c.ErrorCode.EIO,"Unable to commit data to key-value store.")},e.prototype.commitNewFile=function(t,e,n,r,i){var o=u.dirname(e),s=u.basename(e),a=this.findINode(t,o),c=this.getDirListing(t,o,a),l=(new Date).getTime();if("/"===e)throw y.EEXIST(e);if(c[s])throw y.EEXIST(e);try{var h=this.addNewNode(t,i),d=new f(h,i.length,r|n,l,l,l),p=this.addNewNode(t,d.toBuffer());c[s]=p,t.put(a.id,new g(JSON.stringify(c)),!0)}catch(e){throw t.abort(),e}return t.commit(),d},e.prototype.empty=function(){this.store.clear(),this.makeRootDirectory()},e.prototype.renameSync=function(t,e){var n=this.store.beginTransaction("readwrite"),r=u.dirname(t),i=u.basename(t),o=u.dirname(e),s=u.basename(e),a=this.findINode(n,r),l=this.getDirListing(n,r,a);if(!l[i])throw y.ENOENT(t);var f=l[i];if(delete l[i],0===(o+"/").indexOf(t+"/"))throw new y(c.ErrorCode.EBUSY,r);var h,d;if(o===r?(h=a,d=l):(h=this.findINode(n,o),d=this.getDirListing(n,o,h)),d[s]){var p=this.getINode(n,e,d[s]);if(!p.isFile())throw y.EPERM(e);try{n.delete(p.id),n.delete(d[s])}catch(t){throw n.abort(),t}}d[s]=f;try{n.put(a.id,new g(JSON.stringify(l)),!0),n.put(h.id,new g(JSON.stringify(d)),!0)}catch(t){throw n.abort(),t}n.commit()},e.prototype.statSync=function(t,e){return this.findINode(this.store.beginTransaction("readonly"),t).toStats()},e.prototype.createFileSync=function(t,e,n){var r=this.store.beginTransaction("readwrite"),i=new g(0),o=this.commitNewFile(r,t,l.FileType.FILE,n,i);return new v(this,t,e,o.toStats(),i)},e.prototype.openFileSync=function(t,e){var n=this.store.beginTransaction("readonly"),r=this.findINode(n,t),i=n.get(r.id);
if(void 0===i)throw y.ENOENT(t);return new v(this,t,e,r.toStats(),i)},e.prototype.removeEntry=function(t,e){var n=this.store.beginTransaction("readwrite"),r=u.dirname(t),i=this.findINode(n,r),o=this.getDirListing(n,r,i),s=u.basename(t);if(!o[s])throw y.ENOENT(t);var a=o[s];delete o[s];var c=this.getINode(n,t,a);if(!e&&c.isDirectory())throw y.EISDIR(t);if(e&&!c.isDirectory())throw y.ENOTDIR(t);try{n.delete(c.id),n.delete(a),n.put(i.id,new g(JSON.stringify(o)),!0)}catch(t){throw n.abort(),t}n.commit()},e.prototype.unlinkSync=function(t){this.removeEntry(t,!1)},e.prototype.rmdirSync=function(t){this.removeEntry(t,!0)},e.prototype.mkdirSync=function(t,e){var n=this.store.beginTransaction("readwrite"),r=new g("{}");this.commitNewFile(n,t,l.FileType.DIRECTORY,e,r)},e.prototype.readdirSync=function(t){var e=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(e,t,this.findINode(e,t)))},e.prototype._syncSync=function(t,e,n){var r=this.store.beginTransaction("readwrite"),i=this._findINode(r,u.dirname(t),u.basename(t)),o=this.getINode(r,t,i),s=o.update(n);try{r.put(o.id,e,!0),s&&r.put(i,o.toBuffer(),!0)}catch(t){throw r.abort(),t}r.commit()},e}(a.SynchronousFileSystem);n.SyncKeyValueFileSystem=w;var _=function(t){function e(e,n,r,i,o){t.call(this,e,n,r,i,o)}return s(e,t),e.prototype.sync=function(t){var e=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(n){n||e.resetDirty(),t(n)}):t()},e.prototype.close=function(t){this.sync(t)},e}(d.PreloadFile);n.AsyncKeyValueFile=_;var b=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.init=function(t,e){this.store=t,this.makeRootDirectory(e)},e.isAvailable=function(){return!0},e.prototype.getName=function(){return this.store.name()},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!1},e.prototype.makeRootDirectory=function(t){var e=this.store.beginTransaction("readwrite");e.get(p,function(n,i){if(n||void 0===i){var s=(new Date).getTime(),a=new f(r(),4096,511|l.FileType.DIRECTORY,s,s,s);e.put(a.id,new g("{}"),!1,function(n){o(n,e,t)&&e.put(p,a.toBuffer(),!1,function(n){n?e.abort(function(){t(n)}):e.commit(t)})})}else e.commit(t)})},e.prototype._findINode=function(t,e,n,r){var o=this,s=function(t,i,o){t?r(t):o[n]?r(null,o[n]):r(y.ENOENT(u.resolve(e,n)))};"/"===e?""===n?r(null,p):this.getINode(t,e,p,function(n,a){i(n,r)&&o.getDirListing(t,e,a,function(t,e){s(t,a,e)})}):this.findINodeAndDirListing(t,e,s)},e.prototype.findINode=function(t,e,n){var r=this;this._findINode(t,u.dirname(e),u.basename(e),function(o,s){i(o,n)&&r.getINode(t,e,s,n)})},e.prototype.getINode=function(t,e,n,r){t.get(n,function(t,n){i(t,r)&&(void 0===n?r(y.ENOENT(e)):r(null,f.fromBuffer(n)))})},e.prototype.getDirListing=function(t,e,n,r){n.isDirectory()?t.get(n.id,function(t,n){if(i(t,r))try{r(null,JSON.parse(n.toString()))}catch(t){r(y.ENOENT(e))}}):r(y.ENOTDIR(e))},e.prototype.findINodeAndDirListing=function(t,e,n){var r=this;this.findINode(t,e,function(o,s){i(o,n)&&r.getDirListing(t,e,s,function(t,e){i(t,n)&&n(null,s,e)})})},e.prototype.addNewNode=function(t,e,n){var i,o=0,s=function(){5===++o?n(new y(c.ErrorCode.EIO,"Unable to commit data to key-value store.")):(i=r(),t.put(i,e,!1,function(t,e){t||!e?s():n(null,i)}))};s()},e.prototype.commitNewFile=function(t,e,n,r,i,s){var a=this,c=u.dirname(e),l=u.basename(e),h=(new Date).getTime();return"/"===e?s(y.EEXIST(e)):void this.findINodeAndDirListing(t,c,function(c,u,d){o(c,t,s)&&(d[l]?t.abort(function(){s(y.EEXIST(e))}):a.addNewNode(t,i,function(e,c){if(o(e,t,s)){var p=new f(c,i.length,r|n,h,h,h);a.addNewNode(t,p.toBuffer(),function(e,n){o(e,t,s)&&(d[l]=n,t.put(u.id,new g(JSON.stringify(d)),!0,function(e){o(e,t,s)&&t.commit(function(e){o(e,t,s)&&s(null,p)})}))})}}))})},e.prototype.empty=function(t){var e=this;this.store.clear(function(n){i(n,t)&&e.makeRootDirectory(t)})},e.prototype.rename=function(t,e,n){var r=this,i=this.store.beginTransaction("readwrite"),s=u.dirname(t),a=u.basename(t),l=u.dirname(e),f=u.basename(e),h={},d={},p=!1;if(0===(l+"/").indexOf(t+"/"))return n(new y(c.ErrorCode.EBUSY,s));var m=function(){if(!p&&d.hasOwnProperty(s)&&d.hasOwnProperty(l)){var c=d[s],u=h[s],m=d[l],v=h[l];if(c[a]){var w=c[a];delete c[a];var _=function(){m[f]=w,i.put(u.id,new g(JSON.stringify(c)),!0,function(t){o(t,i,n)&&(s===l?i.commit(n):i.put(v.id,new g(JSON.stringify(m)),!0,function(t){o(t,i,n)&&i.commit(n)}))})};m[f]?r.getINode(i,e,m[f],function(t,r){o(t,i,n)&&(r.isFile()?i.delete(r.id,function(t){o(t,i,n)&&i.delete(m[f],function(t){o(t,i,n)&&_()})}):i.abort(function(t){n(y.EPERM(e))}))}):_()}else n(y.ENOENT(t))}},v=function(t){r.findINodeAndDirListing(i,t,function(e,r,o){e?p||(p=!0,i.abort(function(){n(e)})):(h[t]=r,d[t]=o,m())})};v(s),s!==l&&v(l)},e.prototype.stat=function(t,e,n){var r=this.store.beginTransaction("readonly");this.findINode(r,t,function(t,e){i(t,n)&&n(null,e.toStats())})},e.prototype.createFile=function(t,e,n,r){var o=this,s=this.store.beginTransaction("readwrite"),a=new g(0);this.commitNewFile(s,t,l.FileType.FILE,n,a,function(n,s){i(n,r)&&r(null,new _(o,t,e,s.toStats(),a))})},e.prototype.openFile=function(t,e,n){var r=this,o=this.store.beginTransaction("readonly");this.findINode(o,t,function(s,a){i(s,n)&&o.get(a.id,function(o,s){i(o,n)&&(void 0===s?n(y.ENOENT(t)):n(null,new _(r,t,e,a.toStats(),s)))})})},e.prototype.removeEntry=function(t,e,n){var r=this,i=this.store.beginTransaction("readwrite"),s=u.dirname(t),a=u.basename(t);this.findINodeAndDirListing(i,s,function(s,c,l){if(o(s,i,n))if(l[a]){var u=l[a];delete l[a],r.getINode(i,t,u,function(r,s){o(r,i,n)&&(!e&&s.isDirectory()?i.abort(function(){n(y.EISDIR(t))}):e&&!s.isDirectory()?i.abort(function(){n(y.ENOTDIR(t))}):i.delete(s.id,function(t){o(t,i,n)&&i.delete(u,function(t){o(t,i,n)&&i.put(c.id,new g(JSON.stringify(l)),!0,function(t){o(t,i,n)&&i.commit(n)})})}))})}else i.abort(function(){n(y.ENOENT(t))})})},e.prototype.unlink=function(t,e){this.removeEntry(t,!1,e)},e.prototype.rmdir=function(t,e){this.removeEntry(t,!0,e)},e.prototype.mkdir=function(t,e,n){var r=this.store.beginTransaction("readwrite"),i=new g("{}");this.commitNewFile(r,t,l.FileType.DIRECTORY,e,i,n)},e.prototype.readdir=function(t,e){var n=this,r=this.store.beginTransaction("readonly");this.findINode(r,t,function(o,s){i(o,e)&&n.getDirListing(r,t,s,function(t,n){i(t,e)&&e(null,Object.keys(n))})})},e.prototype._sync=function(t,e,n,r){var i=this,s=this.store.beginTransaction("readwrite");this._findINode(s,u.dirname(t),u.basename(t),function(a,c){o(a,s,r)&&i.getINode(s,t,c,function(t,i){if(o(t,s,r)){var a=i.update(n);s.put(i.id,e,!0,function(t){o(t,s,r)&&(a?s.put(c,i.toBuffer(),!0,function(t){o(t,s,r)&&s.commit(r)}):s.commit(r))})}})})},e}(a.BaseFileSystem);n.AsyncKeyValueFileSystem=b},{"../core/api_error":14,"../core/buffer":16,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/inode":34,"../generic/preload_file":36}],36:[function(t,e,n){var r=this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},i=t("../core/file"),o=t("../core/buffer"),s=t("../core/api_error"),a=t("../core/node_fs"),c=s.ApiError,l=s.ErrorCode,u=o.Buffer,f=function(t){function e(e,n,r,i,o){if(t.call(this),this._pos=0,this._dirty=!1,this._fs=e,this._path=n,this._flag=r,this._stat=i,null!=o?this._buffer=o:this._buffer=new u(0),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw new Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.")}return r(e,t),e.prototype.isDirty=function(){return this._dirty},e.prototype.resetDirty=function(){this._dirty=!1},e.prototype.getBuffer=function(){return this._buffer},e.prototype.getStats=function(){return this._stat},e.prototype.getFlag=function(){return this._flag},e.prototype.getPath=function(){return this._path},e.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},e.prototype.advancePos=function(t){return this._pos+=t},e.prototype.setPos=function(t){return this._pos=t},e.prototype.sync=function(t){try{this.syncSync(),t()}catch(e){t(e)}},e.prototype.syncSync=function(){throw new c(l.ENOTSUP)},e.prototype.close=function(t){try{this.closeSync(),t()}catch(e){t(e)}},e.prototype.closeSync=function(){throw new c(l.ENOTSUP)},e.prototype.stat=function(t){try{t(null,this._stat.clone())}catch(e){t(e)}},e.prototype.statSync=function(){return this._stat.clone()},e.prototype.truncate=function(t,e){try{this.truncateSync(t),this._flag.isSynchronous()&&!a.getRootFS().supportsSynch()&&this.sync(e),e()}catch(t){return e(t)}},e.prototype.truncateSync=function(t){if(this._dirty=!0,!this._flag.isWriteable())throw new c(l.EPERM,"File not opened with a writeable mode.");if(this._stat.mtime=new Date,t>this._buffer.length){var e=new u(t-this._buffer.length);return e.fill(0),this.writeSync(e,0,e.length,this._buffer.length),void(this._flag.isSynchronous()&&a.getRootFS().supportsSynch()&&this.syncSync())}this._stat.size=t;var n=new u(t);this._buffer.copy(n,0,0,t),this._buffer=n,this._flag.isSynchronous()&&a.getRootFS().supportsSynch()&&this.syncSync()},e.prototype.write=function(t,e,n,r,i){try{i(null,this.writeSync(t,e,n,r),t)}catch(t){i(t)}},e.prototype.writeSync=function(t,e,n,r){if(this._dirty=!0,null==r&&(r=this.getPos()),!this._flag.isWriteable())throw new c(l.EPERM,"File not opened with a writeable mode.");var i=r+n;if(i>this._stat.size&&(this._stat.size=i,i>this._buffer.length)){var o=new u(i);this._buffer.copy(o),this._buffer=o}var s=t.copy(this._buffer,r,e,e+n);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),s):(this.setPos(r+s),s)},e.prototype.read=function(t,e,n,r,i){try{i(null,this.readSync(t,e,n,r),t)}catch(t){i(t)}},e.prototype.readSync=function(t,e,n,r){if(!this._flag.isReadable())throw new c(l.EPERM,"File not opened with a readable mode.");null==r&&(r=this.getPos());var i=r+n;i>this._stat.size&&(n=this._stat.size-r);var o=this._buffer.copy(t,e,r,r+n);return this._stat.atime=new Date,this._pos=r+n,o},e.prototype.chmod=function(t,e){try{this.chmodSync(t),e()}catch(t){e(t)}},e.prototype.chmodSync=function(t){if(!this._fs.supportsProps())throw new c(l.ENOTSUP);this._dirty=!0,this._stat.chmod(t),this.syncSync()},e}(i.BaseFile);n.PreloadFile=f;var h=function(t){function e(e,n,r,i,o){t.call(this,e,n,r,i,o)}return r(e,t),e.prototype.sync=function(t){t()},e.prototype.syncSync=function(){},e.prototype.close=function(t){t()},e.prototype.closeSync=function(){},e}(f);n.NoSyncFile=h},{"../core/api_error":14,"../core/buffer":16,"../core/file":21,"../core/node_fs":26}],37:[function(t,e,n){function r(t){for(var e=IEBinaryToArray_ByteStr(t),n=IEBinaryToArray_ByteStr_Last(t),r=e.replace(/[\s\S]/g,function(t){var e=t.charCodeAt(0);return String.fromCharCode(255&e,e>>8)})+n,i=new Array(r.length),o=0;o<r.length;o++)i[o]=r.charCodeAt(o);return i}function i(t,e,n,i){switch(n){case"buffer":case"json":break;default:return i(new g(m.EINVAL,"Invalid download type: "+n))}var o=new XMLHttpRequest;o.open("GET",e,t),o.setRequestHeader("Accept-Charset","x-user-defined"),o.onreadystatechange=function(t){var e;if(4===o.readyState){if(200!==o.status)return i(new g(o.status,"XHR error."));switch(n){case"buffer":return e=r(o.responseBody),i(null,new v(e));case"json":return i(null,JSON.parse(o.responseText))}}},o.send()}function o(t,e,n){i(!0,t,e,n)}function s(t,e){var n;return i(!1,t,e,function(t,e){if(t)throw t;n=e}),n}function a(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0);var i=!0;switch(e){case"buffer":r.responseType="arraybuffer";break;case"json":try{r.responseType="json",i="json"===r.responseType}catch(t){i=!1}break;default:return n(new g(m.EINVAL,"Invalid download type: "+e))}r.onreadystatechange=function(t){if(4===r.readyState){if(200!==r.status)return n(new g(r.status,"XHR error."));switch(e){case"buffer":return n(null,new v(r.response?r.response:0));case"json":return i?n(null,r.response):n(null,JSON.parse(r.responseText))}}},r.send()}function c(t,e){var n=new XMLHttpRequest;n.open("GET",t,!1);var r=null,i=null;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.onreadystatechange=function(t){if(4===n.readyState){if(200!==n.status)return void(i=new g(n.status,"XHR error."));switch(e){case"buffer":var o=n.responseText;r=new v(o.length);for(var s=0;s<o.length;s++)r.writeUInt8(o.charCodeAt(s),s);return;case"json":return void(r=JSON.parse(n.responseText))}}},n.send(),i)throw i;return r}function l(t,e){var n=new XMLHttpRequest;switch(n.open("GET",t,!1),e){case"buffer":n.responseType="arraybuffer";break;case"json":break;default:throw new g(m.EINVAL,"Invalid download type: "+e)}var r,i;if(n.onreadystatechange=function(t){if(4===n.readyState)if(200===n.status)switch(e){case"buffer":r=new v(n.response);break;case"json":r=JSON.parse(n.response)}else i=new g(n.status,"XHR error.")},n.send(),i)throw i;return r}function u(t,e,n){var r=new XMLHttpRequest;r.open("HEAD",e,t),r.onreadystatechange=function(t){if(4===r.readyState){if(200!=r.status)return n(new g(r.status,"XHR HEAD error."));try{return n(null,parseInt(r.getResponseHeader("Content-Length"),10))}catch(t){return n(new g(m.EIO,"XHR HEAD error: Could not read content-length."))}}},r.send()}function f(t){var e;return u(!1,t,function(t,n){if(t)throw t;e=n}),e}function h(t,e){u(!0,t,e)}var d=t("../core/util"),p=t("../core/buffer"),y=t("../core/api_error"),g=y.ApiError,m=y.ErrorCode,v=p.Buffer;n.asyncDownloadFile=d.isIE&&"undefined"==typeof Blob?o:a,n.syncDownloadFile=d.isIE&&"undefined"==typeof Blob?s:d.isIE&&"undefined"!=typeof Blob?l:c,n.getFileSizeSync=f,n.getFileSizeAsync=h},{"../core/api_error":14,"../core/buffer":16,"../core/util":31}],38:[function(t,e,n){var r=t("./core/global");if(Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,s,a=[];for(o in i)t.call(i,o)&&a.push(o);if(e)for(s=0;r>s;s++)t.call(i,n[s])&&a.push(n[s]);return a}}()),"b"!=="ab".substr(-1)&&(String.prototype.substr=function(t){return function(e,n){return 0>e&&(e=this.length+e),t.call(this,e,n)}}(String.prototype.substr)),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0;n<this.length;++n)n in this&&t.call(e,this[n],n,this)}),"undefined"==typeof setImmediate){var i=r,o=[],s="zero-timeout-message",a=function(){if("undefined"!=typeof i.importScripts||!i.postMessage)return!1;var t=!0,e=i.onmessage;return i.onmessage=function(){t=!1},i.postMessage("","*"),i.onmessage=e,t};if(a()){i.setImmediate=function(t){o.push(t),i.postMessage(s,"*")};var c=function(t){if(t.source===self&&t.data===s&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,o.length>0)){var e=o.shift();return e()}};i.addEventListener?i.addEventListener("message",c,!0):i.attachEvent("onmessage",c)}else if(i.MessageChannel){var l=new i.MessageChannel;l.port1.onmessage=function(t){return o.length>0?o.shift()():void 0},i.setImmediate=function(t){o.push(t),l.port2.postMessage("")}}else i.setImmediate=function(t){return setTimeout(t,0)}}Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){if(void 0===e&&(e=0),!this)throw new TypeError;var n=this.length;if(0===n||r>=n)return-1;var r=e;0>r&&(r=n+r);for(var i=r;n>i;i++)if(this[i]===t)return i;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;for(n=0,r=this.length;r>n;++n)n in this&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,i;if(null==this)throw new TypeError(" this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(e&&(n=e),r=new Array(s),i=0;s>i;){var a,c;i in o&&(a=o[i],c=t.call(n,a,i,o),r[i]=c),i++}return r}),"undefined"!=typeof document&&void 0===window.chrome&&document.write("<!-- IEBinaryToArray_ByteStr -->\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n Dim lastIndex\r\n lastIndex = LenB(Binary)\r\n if lastIndex mod 2 Then\r\n IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n Else\r\n IEBinaryToArray_ByteStr_Last = \"\"\r\n End If\r\nEnd Function\r\n</script>\r\n"),t("./generic/emscripten_fs"),t("./backend/IndexedDB"),t("./backend/XmlHttpRequest"),t("./backend/async_mirror"),t("./backend/dropbox"),t("./backend/html5fs"),t("./backend/in_memory"),t("./backend/localStorage"),t("./backend/mountable_file_system"),t("./backend/overlay"),t("./backend/workerfs"),t("./backend/zipfs"),e.exports=t("./core/browserfs")},{"./backend/IndexedDB":3,"./backend/XmlHttpRequest":4,"./backend/async_mirror":5,"./backend/dropbox":6,"./backend/html5fs":7,"./backend/in_memory":8,"./backend/localStorage":9,"./backend/mountable_file_system":10,"./backend/overlay":11,"./backend/workerfs":12,"./backend/zipfs":13,"./core/browserfs":15,"./core/global":24,"./generic/emscripten_fs":32}]},{},[38])(38)});var Crazyerics=function(){var t=this;$(document).ready(function(){var e=Crazyerics.prototype._decompress.json(c20);t._config=e.configdata,t.PlayerData.init(e.playerdata);var n=t.PlayerData.get("openonload")||{};"system"in n&&"title"in n&&"file"in n&&t._bootstrap(n.system,n.title,n.file),t._buildRecentlyPlayed(t.PlayerData.get("playhistory"));var r=[];for(var i in t._config.systemdetails)t._config.systemdetails[i].id=i,r.push(t._config.systemdetails[i]);r.sort(function(t,e){return t.shortname>e.shortname?1:t.shortname<e.shortname?-1:0});for(var o=r.length,s=0;s<o;s++)$("#searchform select").append('<option value="'+r[s].id+'">'+r[s].shortname+"</option>");$(".dial").knob(),$("#searchform select").selectOrDie({customID:"selectordie",customClass:"tooltip",onChange:function(){var e=$(this).val();t.replaceSuggestions("/suggest/"+e+"/200",!0,!0),"all"===e?$("#alphabar").hide():$("#alphabar").show()}}),$("#searchform input").autoComplete({minChars:3,cache:!1,delay:300,source:function(e,n){var r=$("#searchform select").val();$.getJSON("/search/"+r+"/"+e,function(e){n(t._decompress.json(e))})},renderItem:function(e,n){var r=$('<div class="autocomplete-suggestion" data-title="'+e[0]+'" data-file="'+e[1]+'" data-system="'+e[2]+'" data-searchscore="'+e[3]+'"></div>');return r.append(t._getBoxFront(e[2],e[0],50)),r.append("<div>"+e[0]+"</div>"),$("<div/>").append(r).html()},onSelect:function(e,n,r){t._bootstrap(r.data("system"),r.data("title"),r.data("file"))}}),$("#emulatorwrapperoverlay").on("click",function(){$("#emulator").focus(),$("#emulatorcontrolswrapper").removeClass()}).hover(function(t){t.stopPropagation()},function(t){t.stopPropagation()}),$("#emulatorcontrolswrapper").on("mousedown mouseup click",function(t){t.preventDefault(),$("#emulator").focus()}),$("#emulatorwrapper").hover(function(t){$("#emulatorcontrolswrapper").removeClass()},function(t){$("#emulatorcontrolswrapper").addClass("closed")}),$("#gamedetailswrapper").hover(function(t){$("#gamecontrolslist").removeClass()},function(t){$("#gamecontrolslist").addClass("closed")}),$("#emulatorcontrolswrapper li.fullscreen").click(function(){t._simulateEmulatorKeypress(70)}),$("#emulatorcontrolswrapper li.savestate").click(function(){t._simulateEmulatorKeypress(49)}),$("#emulatorcontrolswrapper li.loadstate").click(function(){t._simulateEmulatorKeypress(52)}),$("#emulatorcontrolswrapper li.mute").click(function(){t._simulateEmulatorKeypress(77)}),$("#emulatorcontrolswrapper li.decrementslot").click(function(){t._simulateEmulatorKeypress(50)}),$("#emulatorcontrolswrapper li.incrementslot").click(function(){t._simulateEmulatorKeypress(51)}),$("#emulatorcontrolswrapper li.fastforward").click(function(){t._simulateEmulatorKeypress(32)}),$("#emulatorcontrolswrapper li.pause").click(function(){t._simulateEmulatorKeypress(80)}),$("#emulatorcontrolswrapper li.reset").click(function(){t._simulateEmulatorKeypress(72)}),$("#emulatorcontrolswrapper li.rewind").click(function(){t._simulateEmulatorKeypress(82,5e3)}),$(window).scroll(function(){$(window).scrollTop()+$(window).height()==$(document).height()&&t._loadMoreSuggestionsOnBottom&&t.replaceSuggestions(t._loadMoreSuggestionsOnBottom,!1,!0)}),$("#suggestionswrapper a").each(function(e,n){$(n).on("click",function(e){var r=$("#searchform select").val(),i=$(n).text();t.replaceSuggestions("/suggest/browse/"+r+"?term="+i,!0,!1)})}),t.Sliders.init(),t.replaceSuggestions("/suggest/all/150",!0,!0),t._toolTips()})};Crazyerics.prototype._config={},Crazyerics.prototype._Module=null,Crazyerics.prototype._FS=null,Crazyerics.prototype._ModuleLoading=!1,Crazyerics.prototype._pauseOverride=!1,Crazyerics.prototype._activeFile=null,Crazyerics.prototype._loadMoreSuggestionsOnBottom=null,Crazyerics.prototype._activeStateSlot=0,Crazyerics.prototype._saveStateDeffers={},Crazyerics.prototype._keypresslocked=!1,Crazyerics.prototype._fileWriteDelay=500,Crazyerics.prototype._tips=["Back out of that mistake you made by holding the R key to rewind the game","Press the Space key to fast forward through those boring story scenes","If your browser supports it, you can go fullscreen by pressing the F key","You can save your progress by pressing the 1 key, return to it anytime with the 4 key","We'll store all of your save states as long as you return within two weeks","Pause your game with the P key","Select a system filter to generate a new list of suggested games","To search for more obsurace or forgeign titles, select a system filter first","Take a screenshot with the T key. Missed that moment? Rewind with R and capture again!","Screenshots are deleted when you leave or refresh the page. Download your favorites to keep them!"],Crazyerics.prototype._fileWriteTimers={},Crazyerics.prototype._playhistory={},Crazyerics.prototype._macroToShaderMenu=[[112,100],40,40,40,88,88,40,40,40,37,37,37,38,88,88,90,90,38,38,38,112],Crazyerics.prototype.PlayerData={_data:{},init:function(t){this._data=t},get:function(t){return this._data.hasOwnProperty(t)?this._data[t]:null},getShader:function(t){return this._data.shaders&&this._data.shaders.hasOwnProperty(t)?this._data.shaders[t]:null},setShader:function(t,e){this._data.shaders&&(this._data.shaders[t]=e)}},Crazyerics.prototype.StateManager={_data:{},init:function(t){this._data=t},getSavedSlots:function(){return Object.keys(this._data)},getScreenshot:function(t){if(this._data[t]&&this._data[t].hasOwnProperty("screenshot")){var e=crazyerics._decompress.bytearray(this._data[t].screenshot),n=crazyerics._buildScreenshot(system,e,180);return n}return null},getDate:function(t){if(this._data[t]&&this._data[t].hasOwnProperty("time")){var e=new Date(this._data[t].time),n=$.format.date(e,"ddd MM-dd-yyyy h:mma");return n}return null},getState:function(t){return this._data[t]&&this._data[t].hasOwnProperty("state")?crazyerics._decompress.bytearray(this._data[t].state):null},saveStateToServer:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],a=t[5],c=crazyerics._compress.bytearray(e),l=crazyerics._compress.json({state:a,screenshot:c});$.ajax({url:"/states/save?key="+encodeURIComponent(n)+"&slot="+s,data:l,processData:!1,contentType:"text/plain",type:"POST",complete:function(t){var e={};e[s]={time:Date.now(),screenshot:c},crazyerics._addToPlayHistory(n,r,i,o,null,e)}})}},Crazyerics.prototype.Sliders={_animating:!1,_animationRate:250,init:function(){this._bind()},_bind:function(){var t=this;$("#gamecontrolslist li").on("mousedown mouseup click",function(t){t.preventDefault(),$("#emulator").focus()}).on("mouseup",function(e){t.open($(this).attr("class"))})},open:function(t,e){if(!this._animating){var n=this;e=e||!1,this._animating=!0,$("#gamecontrolslist li").each(function(r,i){var o=$("#"+$(this).attr("class"));if($(i).hasClass(t)){var s=function(){setTimeout(function(){n._toggle(i,o,function(){n._animating=!1})},n._animationRate)};$(o).hasClass("closed")?($(o).removeClass("closed"),s()):e?n._animating=!1:($(o).addClass("closed"),s())}else $(o).hasClass("closed")||($(o).addClass("closed"),n._toggle(i,o))})}},closeall:function(){var t=this;this.open(""),setTimeout(function(){t._animating=!1},t._animationRate)},_toggle:function(t,e,n){var r=this;n=n||null,$(e).animate({width:"toggle",padding:"toggle"},r._animationRate,function(){n&&n()}),0==$(t).attr("data-click-state")?($(t).attr("data-click-state",1),$(t).find("img").animateRotate(0,90,r._animationRate)):($(t).attr("data-click-state",0),$(t).find("img").animateRotate(90,0,r._animationRate))}},Crazyerics.prototype.replaceSuggestions=function(t,e,n){var r=this;r._loadMoreSuggestionsOnBottom=n?t:null,$(".dial").val(0).trigger("change"),e&&($("#suggestionswrapper").hide(),$("#loading").removeClass("close")),$.getJSON(t,function(t){t=r._decompress.json(t),e&&$("#suggestionswrapper li").remove();for(var n=$("#suggestionswrapper ul"),i=0;i<t.length;++i){var o=r._buildGameLink(t[i].system,t[i].title,t[i].file,120);$(n[i%n.length]).append(o.li)}$("#suggestionswrapper").waitForImages().progress(function(e,n,r){var i=parseInt(e/t.length*100,10);$(".dial").val(i).trigger("change"),e===n-1&&($("#suggestionswrapper").slideDown(),$("#loading").addClass("close"))}),r._toolTips()})},Crazyerics.prototype._bootstrap=function(t,e,n,r,i,o){var s=this,a=s._compress.gamekey(t,e,n);s._ModuleLoading||(s._ModuleLoading=!0,s._pauseOverride=!1,$("#gamedetailsboxfront img").addClass("close"),$("#gamedetailswrapper").fadeOut(),$("#startmessage").slideUp(1e3),$("#pregamebackground").show().animate({height:600}),$("#emulatorwrapper").hide(),$("#gamedetailsbackground").animate({height:0}),$("#systemshaderseletorwrapper").addClass("close"),$("#savedstateseletorwrapper").addClass("close"),$("#gameloadingname").text(e),$("#gameloadingoverlaycontentimage").empty(),$("#gameloadingoverlay").fadeIn(1e3),setTimeout(function(){s._cleanupEmulator(),s.Sliders.closeall(),s._ModuleLoading=!1;var r=$.Deferred(),c=$.Deferred(),l=$.Deferred(),u=$.Deferred(),f=$.Deferred();$("#emulatorcanvas").append('<canvas tabindex="0" id="emulator" oncontextmenu="event.preventDefault()"></canvas>'),$("#systemshaderseletorwrapper span").text(s._config.systemdetails[t].shortname),s._showShaderSelect(t,i,function(i){s._ModuleLoading=!0;var h=s._getBoxFront(t,e,170);h.addClass("tada"),h.load(function(){$(this).fadeIn(200)}),$("#gameloadingoverlaycontentimage").append(h),$("#gameloadingoverlaycontent").show().removeClass();var d=setInterval(function(){$("#tip").fadeOut(500,function(){var t=Crazyerics.prototype._tips[Math.floor(Math.random()*Crazyerics.prototype._tips.length)];$("#gameloadingoverlay").is(":animated")||$("#tip").empty().append("Tip: "+t).fadeIn(500)})},5e3);s._loademulator(t,r),s._loadEmulatorSupport(t,c),s._loadGame(a,t,e,n,l),s._loadShader(i.shader,f),s._loadGameDetails(a,t,e,n,{savePreference:i.savePreference,shader:i.shader},u),$.when(r,c,l,u,f).done(function(r,i,c,l,u){var f=r[0],h=r[1],p=r[2],y=i&&i[1]?i[1]:null,g=(c[0],c[1]);l=s._decompress.json(l);var m=(l.states,l.files,l.info);s.StateManager.init(l.states);var v=u&&u[1]?u[1]:null;if(s._Module=f,s._FS=h,s.emulatorframe=p,s._activeStateSlot=0,$("#emulatorcontrolswrapper").show(),m){var w=m.ReleaseDate?m.ReleaseDate.match(/(\d{4})/):[];$("#gametitlecaption").text((m.Publisher?m.Publisher:"")+(w.length>0?", "+w[0]:""))}s._setupEmulatorEventListener(t,e,n),s._buildFileSystem(f,t,n,g,v,y),f.emulatorFileWritten=function(r,i){s._emulatorFileWriteListener(a,t,e,n,r,i)},setTimeout(function(){$("#gameloadingoverlaycontent").addClass("close"),$("#tips").stop().hide(),clearInterval(d),s._ModuleLoading=!1,s._showStateSelect(t,e,n,function(n){s._ModuleLoading=!0,f.callMain(f.arguments),o&&o();var r=function(){s._buildGameContent(t,e,function(){});var n=$("#maincolumn").width()/f.canvas.width*f.canvas.height+20;$("#pregamebackground").animate({height:n},function(){$("#emulatorwrapper").show(),$("#gameloadingoverlay").fadeOut(1e3,function(){$("#gameloadingoverlaycontent").addClass("close"),setTimeout(function(){s._ModuleLoading=!1,$("#emulatorcontrolswrapper").addClass("closed"),s.Sliders.open("controlsslider")},1e3)}),$("#emulator").blur(function(t){s._pauseOverride||(f.pauseMainLoop(),$("#emulatorwrapperoverlay").fadeIn())}).focus(function(){f.resumeMainLoop(),$("#emulatorwrapperoverlay").hide()}).focus()})};n?s._asyncLoop(parseInt(n,10),function(t){s._simulateEmulatorKeypress(51,10,function(){t.next()})},function(){s._simulateEmulatorKeypress(52),r()}):r()})},3e3)})})},1e3))},Crazyerics.prototype._showShaderSelect=function(t,e,n){var r=this;if($("#shaderselectlist").empty(),"undefined"!=typeof e)return $("#systemshaderseletorwrapper").hide().addClass("close"),void n({shader:e,savePreference:!1});var i=r.PlayerData.getShader(t);if(i)return void n({shader:i,savePreference:!1});var o=r._config.recommendedshaders[t],s=(r._config.shaders,0);for($("#shaderselectlist").append($('<li class="zoom" data-shader=""><h3>No Processing</h3><img class="tada" src="'+r._config.assetpath+"/images/shaders/"+t+'/pixels.png" /></li>').on("click",function(t){c($(this).attr("data-shader"))})),s;s<o.length;++s){var a=o[s];$("#shaderselectlist").append($('<li class="zoom" data-shader="'+a.shader+'"><h3>'+a.title+'</h3><img src="'+r._config.assetpath+"/images/shaders/"+t+"/"+s+'.png" /></li>').on("click",function(t){c($(this).attr("data-shader"))}))}var c=function(e){$("#systemshaderseletorwrapper").addClass("close");var i=!1;$("#systemshaderseletorwrapper input").prop("checked")&&(i=!0,r.PlayerData.setShader(t,e)),setTimeout(function(){$("#systemshaderseletorwrapper").hide(),n({shader:e,savePreference:i})},250)};$("#systemshaderseletorwrapper").show().removeClass()},Crazyerics.prototype._showStateSelect=function(t,e,n,r){var i=this,o=this.StateManager.getSavedSlots();if(0===o.length)return void r();$("#stateselectlist").empty(),$("#savedstateselectorlistwrapper").scrollTop(0),$("#savedstateseletorwrapper h3").off().on("mouseup",function(){r(null),$("#savedstateseletorwrapper").addClass("close")});for(var s=o.length;s--;)!function(t){var e=i.StateManager.getDate(t),n=i.StateManager.getScreenshot(t),o=$('<li class="zoom tooltip"></li>').on("mouseup",function(){r(t),$("#savedstateseletorwrapper").addClass("close")});e&&parseInt(t,10)>-1&&o.attr("title","Slot "+t+": "+e),$(o).prepend(n),$("#stateselectlist").prepend(o)}(o[s]);i._toolTips(),$("#savedstateseletorwrapper").show().removeClass()},Crazyerics.prototype._buildGameContent=function(t,e,n){var r=this._getBoxFront(t,e,170),i=document.createElement("img");i.addEventListener("load",function(){$("#gamedetailsboxfront").empty().append(r),$("#gametitle").empty().hide().append(e),$("#gamedetailsboxfront img").addClass("close"),$("#gamedetailsbackground").animate({height:250},1e3,function(){$("#gamedetailswrapper").fadeIn(1e3,function(){$("#gamedetailsboxfront img").removeClass(),$("#controlsslider").empty(),$.get("/layout/controls/"+t,function(t){$("#controlsslider").append(t)}),n()}),$("#gametitle").bigText({textAlign:"left",horizontalAlign:"left"})})},!0),r.load(function(){i.setAttribute("src",r.attr("src"))})},Crazyerics.prototype._cleanupEmulator=function(){var t=this;if($(document).unbind("fullscreenchange"),$(document).unbind("mozfullscreenchange"),$(document).unbind("webkitfullscreenchange"),$(document).unbind("pointerlockchange"),$(document).unbind("mozpointerlockchange"),$(document).unbind("webkitpointerlockchange"),
t._FS&&(t._FS=null),t._Module){try{t._Module.exit()}catch(t){}t._Module=null}t.emulatorframe&&(t.emulatorframe.remove(),t.emulatorframe=null),$("#emulator").remove()},Crazyerics.prototype._simulateEmulatorKeypress=function(t,e,n){var r=this;if(e=e||10,!r._keypresslocked){var i=function(t){};if(this._Module&&this._Module.RI&&this._Module.RI.eventHandler){i=this._Module.RI.eventHandler,r._keypresslocked=!0;var o;o=$.Event("keydown"),o.keyCode=t,o.which=t,i(o),setTimeout(function(){o=$.Event("keyup"),o.keyCode=t,o.which=t,i(o),setTimeout(function(){r._keypresslocked=!1,n&&n()},100)},e)}else this._Module&&this._Module.JSEvents&&this._Module.JSEvents.crazyericsKeyEventHandler&&(i=this._Module.JSEvents.crazyericsKeyEventHandler,kp=function(t,e){var n=document.createEvent("KeyboardEvent");Object.defineProperty(n,"keyCode",{get:function(){return this.keyCodeVal}}),Object.defineProperty(n,"which",{get:function(){return this.keyCodeVal}}),n.initKeyboardEvent?n.initKeyboardEvent(e,!0,!0,document.defaultView,!1,!1,!1,!1,t,t):n.initKeyEvent(e,!0,!0,document.defaultView,!1,!1,!1,!1,t,0),n.keyCodeVal=t,n.keyCode!==t&&alert("keyCode mismatch "+n.keyCode+"("+n.which+")"),i(n),$("#emulator").focus()},kp(t,"keydown"),setTimeout(function(){kp(t,"keyup")},e));$("#emulator").focus()}},Crazyerics.prototype._runKeyboardMacro=function(t,e){var n=this;if(!$.isArray(t)||0===t.length)return void(e&&e());var r=t[0],i=0;$.isArray(r)&&(r=r[0],r[1]&&(i=r[1])),n._simulateEmulatorKeypress(r,1,function(){n._runKeyboardMacro(t.slice(1),e)})},Crazyerics.prototype._setupEmulatorEventListener=function(t,e,n){var r=this;if(this._Module&&this._Module.RI&&this._Module.RI.eventHandler){var i=this._Module.RI.eventHandler;this._Module.RI.eventHandler=function(t){r._emulatorEventListnener(t,"keyup",i)}}this._Module&&this._Module.JSEvents&&(this._Module.JSEvents.crazyericsEventListener=function(t){r._emulatorEventListnener(t,"keydown")})},Crazyerics.prototype._emulatorEventListnener=function(t,e,n){var r=this;switch(t.type){case e:var i=t.keyCode;switch(i){case 70:r._Module.requestFullScreen(!0,!0),$("#emulator").focus();break;case 49:r._saveStateDeffers.state=$.Deferred(),r._saveStateDeffers.screen=$.Deferred();var o=setTimeout(function(){r._saveStateDeffers={}},1e3);$.when(r._saveStateDeffers.state,r._saveStateDeffers.screen).done(function(t,e){clearTimeout(o),r._saveStateDeffers={},r.StateManager.saveStateToServer(t,e)}),r._simulateEmulatorKeypress(84);break;case 50:r._activeStateSlot--,r._activeStateSlot<0&&(r._activeStateSlot=0);break;case 51:r._activeStateSlot++}}n&&n(t)},Crazyerics.prototype._loademulator=function(t,e){var n=$("<iframe/>",{src:"/load/emulator/"+t,style:"display:none",load:function(){var t=this.contentWindow.FS,r=this.contentWindow.Module;r.monitorRunDependencies=function(i){0===i&&e.resolve(r,t,n)},0===r.totalDependencies&&e.resolve(r,t,n)}});$("body").append(n)},Crazyerics.prototype._loadGame=function(t,e,n,r,i){var o=this,s=o._config.rompath+"/"+e+"/"+o._config.systemdetails[e].romcdnversion+"/",c=o._config.flattenedromfiles;if(c){var l=o._compress.string(n+r);s+=encodeURIComponent(encodeURIComponent(l))+".json"}else s+=n+"/"+r;a=function(t){i.resolve(null,t)},jsonpDelegate=function(t){var e;try{var n=o._decompress.string(t);e=pako.inflate(n)}catch(t){return void i.resolve(t)}i.resolve(null,e)},$.ajax({url:s,type:"GET",dataType:"jsonp"})},Crazyerics.prototype._loadShader=function(t,e){var n=this,r=n._config.assetpath+"/shaders";return t?(r+="/"+t+".json",b=function(t){e.resolve(null,t)},void $.ajax({url:r,type:"GET",dataType:"jsonp"})):void e.resolve()},Crazyerics.prototype._loadEmulatorSupport=function(t,e){var n=this,r=n._config.assetpath+"/emulatorsupport/"+t+".json";switch(t){case"segacd":break;default:return void e.resolve()}c=function(t){e.resolve(null,t)},$.ajax({url:r,type:"GET",dataType:"jsonp"})},Crazyerics.prototype._loadGameDetails=function(t,e,n,r,i,o){var s=this;$.post("/load/game",{key:encodeURIComponent(t),shader:i.shader,savePreference:i.savePreference},function(i){s._addToPlayHistory(t,e,n,r),o.resolve(i)})},Crazyerics.prototype._buildFileSystem=function(t,e,n,r,i,o){var s=this;t.FS_createFolder("/","games",!0,!0);for(var a in r){for(var c=s._decompress.string(a),l=r[a],u=[],f=0,h=0;h<l.length;++h){var d=s._decompress.string(l[h]),p=pako.inflate(d);f+=p.length,u[h]=p}for(var y=new Uint8Array(f),g=0,h=0;h<u.length;++h)y.set(new Uint8Array(u[h]),g),g+=u[h].length;t.FS_createDataFile("/games",c,y,!0,!0)}if(t.arguments=["-v","-f","/games/"+n],o&&(o=s._decompress.json(o),o&&s._FS))for(var m in o){var v=s._decompress.bytearray(o[m]);try{s._FS.createDataFile("/",m,v,!0,!0)}catch(t){}}t.FS_createFolder("/","shaders",!0,!0);var w=null;if(i){var i=s._decompress.json(i);if(i&&s._FS)for(var _ in i){var v=s._decompress.bytearray(i[_]);try{s._FS.createDataFile("/shaders",_,v,!0,!0)}catch(t){}_.match(/\.glslp$/g)&&(w=_)}}try{t.FS_createFolder("/","etc",!0,!0)}catch(t){}try{t.FS_createFolder("/","home",!0,!0)}catch(t){}try{t.FS_createFolder("/home","web_user",!0,!0)}catch(t){}try{t.FS_createFolder("/home/web_user/","retroarch",!0,!0)}catch(t){}try{t.FS_createFolder("/home/web_user/retroarch","userdata",!0,!0)}catch(t){}if(s._config.retroarch){var b=s._config.retroarch;if(s._config.systemdetails[e]&&s._config.systemdetails[e].retroarch)for(var S in s._config.systemdetails[e].retroarch)b[S]=s._config.systemdetails[e].retroarch[S];w&&(b.video_shader="/shaders/"+w);var E="";for(var S in b)E+=S+" = "+b[S]+"\n";t.FS_createDataFile("/home/web_user/retroarch/userdata","retroarch.cfg",E,!0,!0),t.FS_createDataFile("/etc","retroarch.cfg",E,!0,!0)}t.FS_createFolder("/","screenshots",!0,!0),t.FS_createFolder("/","states",!0,!0);for(var k=this.StateManager.getSavedSlots(),h=k.length;h--;){var I=n.replace(new RegExp(".[a-z0-9]{1,3}$","gi"),""),x="/"+I+".state"+(0==k[h]?"":k[h]),F=this.StateManager.getState(k[h]);t.FS_createDataFile("/states",x,F,!0,!0)}},Crazyerics.prototype._emulatorFileWritten=function(t,e,n,r,i,o){var s=this,a=i.match(/\.state(\d*)$/),c=i.match(/\.bmp$|\.png$/);if(a){var l=""===a[1]?0:a[1],u=s._compress.bytearray(o);return void(s._saveStateDeffers.hasOwnProperty("state")&&s._saveStateDeffers.state.resolve(t,e,n,r,l,u))}if(c){var f=new Uint8Array(o);if(s._saveStateDeffers.hasOwnProperty("screen"))return void s._saveStateDeffers.screen.resolve(f);$("p.screenshothelper").remove();var h=$("#screenshotsslider div.slidercontainer").width()/3,d=s._buildScreenshot(e,f,h);$(d).addClass("close").load(function(){$(this).removeClass("close")});var p=$('<a class="screenshotthumb" href="'+d.src+'" download="'+n+"-"+i+'"></a>');p.append(d).insertAfter("#screenshotsslider p"),s.Sliders.open("screenshotsslider",!0)}},Crazyerics.prototype._buildScreenshot=function(t,e,n){var r=this,i=1,o=new Blob([e],{type:"image/bmp"});r._config.retroarch&&r._config.retroarch[t]&&(i=r._config.retroarch[t].match(/video_aspect_ratio = (\d+\.+\d+)/),$.isArray(i)&&i.length>1&&(i=parseFloat(i[1])));var s=window.URL||window.webkitURL,a=s.createObjectURL(o),c=new Image(n,n/i);return c.src=a,c},Crazyerics.prototype._emulatorFileWriteListener=function(t,e,n,r,i,o){var s=this;s._fileWriteTimers.hasOwnProperty(i)&&clearTimeout(s._fileWriteTimers[i]),s._fileWriteTimers[i]=setTimeout(function(){delete s._fileWriteTimers[i],s._emulatorFileWritten(t,e,n,r,i,o)},s._fileWriteDelay)},Crazyerics.prototype._buildRecentlyPlayed=function(t,e){for(var n in t)this._addToPlayHistory(n,t[n].system,t[n].title,t[n].file,t[n].played,t[n].slots);$.isEmptyObject(t)?$("#startfirst").animate({height:"toggle",opacity:"toggle"},500):$("#startplayed").animate({height:"toggle",opacity:"toggle"},500)},Crazyerics.prototype._addToPlayHistory=function(t,e,n,r,i,o){var s=this;if(t in s._playhistory)return s._playhistory[t].played=Date.now(),void s._toolTips();var a=s._buildGameLink(e,n,r,120,!0);a.li.addClass("close"),a.img.load(function(){a.li.removeClass("close")}),a.remove.addClass("tooltip").attr("title","Remove this game and all saved progress").on("click",function(){a.li.addClass("slideup"),$.ajax({url:"/states/delete?key="+encodeURIComponent(t),type:"DELETE",complete:function(){setTimeout(function(){a.li.remove()},500)}})}),s._playhistory[t]={system:e,title:n,file:r,played:i||Date.now(),slots:o||{}};for(var c=$("#recentplayedwrapper ul"),l=c[0],u=0,f=0;f<c.length;++f)$(c[f]).children().length<$(l).children().length&&(l=c[f],u=f);$(l).append(a.li),$("#recentplayedwrapper").show(),s._toolTips()},Crazyerics.prototype._buildGameLink=function(t,e,n,r,i){var o=this;i=i||!1;var s=$('<li class="gamelink"></li>'),a=o._getBoxFront(t,e,r);a.addClass("tooltip close"),a.attr("title",e),a.load(function(){$(this).removeClass("close").on("mousedown",function(){o._pauseOverride=!0}).on("mouseup",function(){o._bootstrap(t,e,n),window.scrollTo(0,0)})});var c=$('<div class="box zoom"></div>');c.append(a),a.error(function(n){$(this).parent().append('<div class="boxlabel boxlabel-'+t+'"><p>'+e+"</p></div>")}),s.append(c);var l=null;return i&&(l=$('<div class="remove"></div>'),c.append(l).on("mouseover",function(){$(l).show()}).on("mouseout",function(){$(l).hide()})),{li:s,img:a,remove:l}},Crazyerics.prototype._getBoxFront=function(t,e,n){var r=this;return r._config.flattenedboxfiles&&(e=encodeURIComponent(encodeURIComponent(r._compress.string(e)))),$("<img onerror=\"this.src='"+r._config.assetpath+"/images/blanks/"+t+"_"+n+'.png\'" src="'+r._config.boxpath+"/"+t+"/"+r._config.systemdetails[t].boxcdnversion+"/"+e+"/"+n+'.jpg" />')},Crazyerics.prototype._toolTips=function(){$(".tooltip").tooltipster({theme:"tooltipster-shadow",animation:"grow",delay:100})},Crazyerics.prototype._generateLink=function(t,e,n){return this._compress.string(encodeURI(t+"/"+e+"/"+n))},Crazyerics.prototype._compress={bytearray:function(t){var e=pako.deflate(t,{to:"string"});return btoa(e)},json:function(t){var e=JSON.stringify(t),n=pako.deflate(e,{to:"string"}),r=btoa(n);return r},string:function(t){var e=pako.deflate(t,{to:"string"}),n=btoa(e);return n},gamekey:function(t,e,n){return this.json({system:t,title:e,file:n})}},Crazyerics.prototype._decompress={bytearray:function(t){var e=new Uint8Array(atob(t).split("").map(function(t){return t.charCodeAt(0)}));return pako.inflate(e)},json:function(t){var e=atob(t),n=pako.inflate(e,{to:"string"}),r=JSON.parse(n);return r},string:function(t){var e=atob(t),n=pako.inflate(e,{to:"string"});return n}},$.fn.animateRotate=function(t,e,n,r,i){var o=$.speed(n,r,i),s=o.step;return this.each(function(n,r){o.complete=$.proxy(o.complete,r),o.step=function(t){if($.style(r,"transform","rotate("+t+"deg)"),s)return s.apply(r,arguments)},$({deg:t}).animate({deg:e},o)})},Crazyerics.prototype._asyncLoop=function(t,e,n){var r=0,i=!1,o={next:function(){i||(r<t?(r++,e(o)):(i=!0,n()))},iteration:function(){return r-1},break:function(){i=!0,n()}};return o.next(),o},Crazyerics.prototype.downloadAllScreens=function(){var t=500,e=t;$(".screenshotthumb").each(function(n){var r=this;setTimeout(function(){$(r)[0].click()},t),e+=t})};var crazyerics=new Crazyerics,jsonpDelegate,b,c;!function(t){t.fn.autoComplete=function(e){var n=t.extend({},t.fn.autoComplete.defaults,e);return"string"==typeof e?(this.each(function(){var n=t(this);"destroy"==e&&(t(window).off("resize.autocomplete",n.updateSC),n.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"),n.data("autocomplete")?n.attr("autocomplete",n.data("autocomplete")):n.removeAttr("autocomplete"),t(n.data("sc")).remove(),n.removeData("sc").removeData("autocomplete"))}),this):this.each(function(){function e(t){var e=r.val();if(r.cache[e]=t,t.length&&e.length>=n.minChars){for(var i="",o=0;o<t.length;o++)i+=n.renderItem(t[o],e);r.sc.html(i),r.updateSC(0)}else r.sc.hide()}var r=t(this);r.sc=t('<div class="autocomplete-suggestions '+n.menuClass+'"></div>'),r.data("sc",r.sc).data("autocomplete",r.attr("autocomplete")),r.attr("autocomplete","off"),r.cache={},r.last_val="",r.updateSC=function(e,n){if(r.sc.css({top:r.offset().top+r.outerHeight(),left:r.offset().left,width:r.outerWidth()}),!e&&(r.sc.show(),r.sc.maxHeight||(r.sc.maxHeight=parseInt(r.sc.css("max-height"))),r.sc.suggestionHeight||(r.sc.suggestionHeight=t(".autocomplete-suggestion",r.sc).first().outerHeight()),r.sc.suggestionHeight))if(n){var i=r.sc.scrollTop(),o=n.offset().top-r.sc.offset().top;o+r.sc.suggestionHeight-r.sc.maxHeight>0?r.sc.scrollTop(o+r.sc.suggestionHeight+i-r.sc.maxHeight):0>o&&r.sc.scrollTop(o+i)}else r.sc.scrollTop(0)},t(window).on("resize.autocomplete",r.updateSC),r.sc.appendTo("body"),r.sc.on("mouseleave",".autocomplete-suggestion",function(){t(".autocomplete-suggestion.selected").removeClass("selected")}),r.sc.on("mouseenter",".autocomplete-suggestion",function(){t(".autocomplete-suggestion.selected").removeClass("selected"),t(this).addClass("selected")}),r.sc.on("mousedown",".autocomplete-suggestion",function(e){var i=t(this),o=i.data("val");(o||i.hasClass("autocomplete-suggestion"))&&(r.val(o),n.onSelect(e,o,i),r.sc.hide())}),r.on("blur.autocomplete",function(){try{over_sb=t(".autocomplete-suggestions:hover").length}catch(t){over_sb=0}over_sb?r.is(":focus")||setTimeout(function(){r.focus()},20):(r.last_val=r.val(),r.sc.hide(),setTimeout(function(){r.sc.hide()},350))}),n.minChars||r.on("focus.autocomplete",function(){r.last_val="\n",r.trigger("keyup.autocomplete")}),r.on("keydown.autocomplete",function(e){if((40==e.which||38==e.which)&&r.sc.html()){var i,o=t(".autocomplete-suggestion.selected",r.sc);return o.length?(i=40==e.which?o.next(".autocomplete-suggestion"):o.prev(".autocomplete-suggestion"),i.length?(o.removeClass("selected"),r.val(i.addClass("selected").data("val"))):(o.removeClass("selected"),r.val(r.last_val),i=0)):(i=40==e.which?t(".autocomplete-suggestion",r.sc).first():t(".autocomplete-suggestion",r.sc).last(),r.val(i.addClass("selected").data("val"))),r.updateSC(0,i),!1}if(27==e.which)r.val(r.last_val).sc.hide();else if(13==e.which||9==e.which){var o=t(".autocomplete-suggestion.selected",r.sc);o.length&&r.sc.is(":visible")&&(n.onSelect(e,o.data("val"),o),setTimeout(function(){r.sc.hide()},20))}}),r.on("keyup.autocomplete",function(i){if(!~t.inArray(i.which,[13,27,35,36,37,38,39,40])){var o=r.val();if(o.length>=n.minChars){if(o!=r.last_val){if(r.last_val=o,clearTimeout(r.timer),n.cache){if(o in r.cache)return void e(r.cache[o]);for(var s=1;s<o.length-n.minChars;s++){var a=o.slice(0,o.length-s);if(a in r.cache&&!r.cache[a].length)return void e([])}}r.timer=setTimeout(function(){n.source(o,e)},n.delay)}}else r.last_val=o,r.sc.hide()}})})},t.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(t,e){var n=new RegExp("("+e.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+t+'">'+t.replace(n,"<b>$1</b>")+"</div>"},onSelect:function(t,e,n){}}}(jQuery),function(t){"use strict";var e={rotateText:null,fontSizeFactor:.8,maximumFontSize:null,limitingDimension:"both",horizontalAlign:"center",verticalAlign:"center",textAlign:"center",whiteSpace:"nowrap"};t.fn.bigText=function(n){return this.each(function(){n=t.extend({},e,n);var r=t(this),i=r.parent();r.css("visibility","hidden"),r.css({display:"inline-block",clear:"both",float:"left","font-size":1e3*n.fontSizeFactor+"px","line-height":"1000px","white-space":n.whiteSpace,"text-align":n.textAlign,position:"relative",padding:0,margin:0,left:"50%",top:"50%"});var o={left:parseInt(i.css("padding-left")),top:parseInt(i.css("padding-top")),right:parseInt(i.css("padding-right")),bottom:parseInt(i.css("padding-bottom"))},s={width:r.outerWidth(),height:r.outerHeight()},a={};if(null!==n.rotateText){if("number"!=typeof n.rotateText)throw"bigText error: rotateText value must be a number";var c="rotate("+n.rotateText+"deg)";a={"-webkit-transform":c,"-ms-transform":c,"-moz-transform":c,"-o-transform":c,transform:c},r.css(a);var l=Math.abs(Math.sin(n.rotateText*Math.PI/180)),u=Math.abs(Math.cos(n.rotateText*Math.PI/180));s.width=r.outerWidth()*u+r.outerHeight()*l,s.height=r.outerWidth()*l+r.outerHeight()*u}var f,h=(i.innerWidth()-o.left-o.right)/s.width,d=(i.innerHeight()-o.top-o.bottom)/s.height;"width"===n.limitingDimension.toLowerCase()?(f=Math.floor(1e3*h),i.height(f)):"height"===n.limitingDimension.toLowerCase()?f=Math.floor(1e3*d):h<d?f=Math.floor(1e3*h):h>=d&&(f=Math.floor(1e3*d));var p=f*n.fontSizeFactor;null!==n.maximumFontSize&&p>n.maximumFontSize&&(p=n.maximumFontSize,f=p/n.fontSizeFactor),r.css({"font-size":Math.floor(p)+"px","line-height":Math.ceil(f)+"px","margin-bottom":"0px","margin-right":"0px"}),"height"===n.limitingDimension.toLowerCase()&&i.width(r.width()+4+"px");var y={};switch(n.verticalAlign.toLowerCase()){case"top":y.top="0%";break;case"bottom":y.top="100%",y["margin-top"]=Math.floor(-r.innerHeight())+"px";break;default:y["margin-top"]=Math.floor(-r.innerHeight()/2)+"px"}switch(n.horizontalAlign.toLowerCase()){case"left":y.left="0%";break;case"right":y.left="100%",y["margin-left"]=Math.floor(-r.innerWidth())+"px";break;default:y["margin-left"]=Math.floor(-r.innerWidth()/2)+"px"}r.css(y),r.css("visibility","visible")})}}(jQuery);var DateFormat={};!function(t){var e=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],o={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},s=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/;t.format=function(){function t(t){return e[parseInt(t,10)]||t}function a(t){return n[parseInt(t,10)]||t}function c(t){var e=parseInt(t,10)-1;return r[e]||t}function l(t){var e=parseInt(t,10)-1;return i[e]||t}function u(t){return o[t]||t}function f(t){var e,n,r,i,o,s=t,a="";return-1!==s.indexOf(".")&&(i=s.split("."),s=i[0],a=i[i.length-1]),o=s.split(":"),3===o.length?(e=o[0],n=o[1],r=o[2].replace(/\s.+/,"").replace(/[a-z]/gi,""),s=s.replace(/\s.+/,"").replace(/[a-z]/gi,""),{time:s,hour:e,minute:n,second:r,millis:a}):{time:"",hour:"",minute:"",second:"",millis:""}}function h(t,e){for(var n=e-String(t).length,r=0;n>r;r++)t="0"+t;return t}return{parseDate:function(t){var e,n,r={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==typeof t)return this.parseDate(new Date(t));if("function"==typeof t.getFullYear)r.year=String(t.getFullYear()),r.month=String(t.getMonth()+1),r.dayOfMonth=String(t.getDate()),r.time=f(t.toTimeString()+"."+t.getMilliseconds());else if(-1!=t.search(s))e=t.split(/[T\+-]/),r.year=e[0],r.month=e[1],r.dayOfMonth=e[2],r.time=f(e[3].split(".")[0]);else switch(e=t.split(" "),6===e.length&&isNaN(e[5])&&(e[e.length]="()"),e.length){case 6:r.year=e[5],r.month=u(e[1]),r.dayOfMonth=e[2],r.time=f(e[3]);break;case 2:n=e[0].split("-"),r.year=n[0],r.month=n[1],r.dayOfMonth=n[2],r.time=f(e[1]);break;case 7:case 9:case 10:r.year=e[3],r.month=u(e[1]),r.dayOfMonth=e[2],r.time=f(e[4]);break;case 1:n=e[0].split(""),r.year=n[0]+n[1]+n[2]+n[3],r.month=n[5]+n[6],r.dayOfMonth=n[8]+n[9],r.time=f(n[13]+n[14]+n[15]+n[16]+n[17]+n[18]+n[19]+n[20]);break;default:return null}return r.date=r.time?new Date(r.year,r.month-1,r.dayOfMonth,r.time.hour,r.time.minute,r.time.second,r.time.millis):new Date(r.year,r.month-1,r.dayOfMonth),r.dayOfWeek=String(r.date.getDay()),r},date:function(e,n){try{var r=this.parseDate(e);if(null===r)return e;for(var i,o=r.year,s=r.month,u=r.dayOfMonth,f=r.dayOfWeek,d=r.time,p="",y="",g="",m=!1,v=0;v<n.length;v++){var w=n.charAt(v),_=n.charAt(v+1);if(m)"'"==w?(y+=""===p?"'":p,p="",m=!1):p+=w;else switch(p+=w,g="",p){case"ddd":y+=t(f),p="";break;case"dd":if("d"===_)break;y+=h(u,2),p="";break;case"d":if("d"===_)break;y+=parseInt(u,10),p="";break;case"D":u=1==u||21==u||31==u?parseInt(u,10)+"st":2==u||22==u?parseInt(u,10)+"nd":3==u||23==u?parseInt(u,10)+"rd":parseInt(u,10)+"th",y+=u,p="";break;case"MMMM":y+=l(s),p="";break;case"MMM":if("M"===_)break;y+=c(s),p="";break;case"MM":if("M"===_)break;y+=h(s,2),p="";break;case"M":if("M"===_)break;y+=parseInt(s,10),p="";break;case"y":case"yyy":if("y"===_)break;y+=p,p="";break;case"yy":if("y"===_)break;y+=String(o).slice(-2),p="";break;case"yyyy":y+=o,p="";break;case"HH":y+=h(d.hour,2),p="";break;case"H":if("H"===_)break;y+=parseInt(d.hour,10),p="";break;case"hh":i=0===parseInt(d.hour,10)?12:d.hour<13?d.hour:d.hour-12,y+=h(i,2),p="";break;case"h":if("h"===_)break;i=0===parseInt(d.hour,10)?12:d.hour<13?d.hour:d.hour-12,y+=parseInt(i,10),p="";break;case"mm":y+=h(d.minute,2),p="";break;case"m":if("m"===_)break;y+=d.minute,p="";break;case"ss":y+=h(d.second.substring(0,2),2),p="";break;case"s":if("s"===_)break;y+=d.second,p="";break;case"S":case"SS":if("S"===_)break;y+=p,p="";break;case"SSS":var b="000"+d.millis.substring(0,3);y+=b.substring(b.length-3),p="";break;case"a":y+=d.hour>=12?"PM":"AM",p="";break;case"p":y+=d.hour>=12?"p.m.":"a.m.",p="";break;case"E":y+=a(f),p="";break;case"'":p="",m=!0;break;default:y+=w,p=""}}return y+=g}catch(t){return console&&console.log&&console.log(t),e}},prettyDate:function(t){var e,n,r;return("string"==typeof t||"number"==typeof t)&&(e=new Date(t)),"object"==typeof t&&(e=new Date(t.toString())),n=((new Date).getTime()-e.getTime())/1e3,r=Math.floor(n/86400),isNaN(r)||0>r?void 0:60>n?"just now":120>n?"1 minute ago":3600>n?Math.floor(n/60)+" minutes ago":7200>n?"1 hour ago":86400>n?Math.floor(n/3600)+" hours ago":1===r?"Yesterday":7>r?r+" days ago":31>r?Math.ceil(r/7)+" weeks ago":r>=31?"more than 5 weeks ago":void 0},toBrowserTimeZone:function(t,e){return this.date(new Date(t),e||"MM/dd/yyyy HH:mm:ss")}}}()}(DateFormat),function(t){t.format=DateFormat.format}(jQuery),function(t){"object"==typeof exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var e={},n=Math.max,r=Math.min;e.c={},e.c.d=t(document),e.c.t=function(t){return t.originalEvent.touches.length-1},e.o=function(){var n=this;this.o=null,this.$=null,this.i=null,this.g=null,this.v=null,this.cv=null,this.x=0,this.y=0,this.w=0,this.h=0,this.$c=null,this.c=null,this.t=0,this.isInit=!1,this.fgColor=null,this.pColor=null,this.dH=null,this.cH=null,this.eH=null,this.rH=null,this.scale=1,this.relative=!1,this.relativeWidth=!1,this.relativeHeight=!1,this.$div=null,this.run=function(){var e=function(t,e){var r;for(r in e)n.o[r]=e[r];n._carve().init(),n._configure()._draw()};if(!this.$.data("kontroled")){if(this.$.data("kontroled",!0),this.extend(),this.o=t.extend({min:void 0!==this.$.data("min")?this.$.data("min"):0,max:void 0!==this.$.data("max")?this.$.data("max"):100,stopper:!0,readOnly:this.$.data("readonly")||"readonly"===this.$.attr("readonly"),cursor:this.$.data("cursor")===!0&&30||this.$.data("cursor")||0,thickness:this.$.data("thickness")&&Math.max(Math.min(this.$.data("thickness"),1),.01)||.35,lineCap:this.$.data("linecap")||"butt",width:this.$.data("width")||200,height:this.$.data("height")||200,displayInput:null==this.$.data("displayinput")||this.$.data("displayinput"),displayPrevious:this.$.data("displayprevious"),fgColor:this.$.data("fgcolor")||"#87CEEB",inputColor:this.$.data("inputcolor"),font:this.$.data("font")||"Arial",fontWeight:this.$.data("font-weight")||"bold",inline:!1,step:this.$.data("step")||1,rotation:this.$.data("rotation"),draw:null,change:null,cancel:null,release:null,format:function(t){return t},parse:function(t){return parseFloat(t)}},this.o),this.o.flip="anticlockwise"===this.o.rotation||"acw"===this.o.rotation,this.o.inputColor||(this.o.inputColor=this.o.fgColor),this.$.is("fieldset")?(this.v={},this.i=this.$.find("input"),this.i.each(function(e){var r=t(this);n.i[e]=r,n.v[e]=n.o.parse(r.val()),r.bind("change blur",function(){var t={};t[e]=r.val(),n.val(n._validate(t))})}),this.$.find("legend").remove()):(this.i=this.$,this.v=this.o.parse(this.$.val()),""===this.v&&(this.v=this.o.min),this.$.bind("change blur",function(){n.val(n._validate(n.o.parse(n.$.val())))})),!this.o.displayInput&&this.$.hide(),this.$c=t(document.createElement("canvas")).attr({width:this.o.width,height:this.o.height}),this.$div=t('<div style="'+(this.o.inline?"display:inline;":"")+"width:"+this.o.width+"px;height:"+this.o.height+'px;"></div>'),this.$.wrap(this.$div).before(this.$c),this.$div=this.$.parent(),"undefined"!=typeof G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.$c[0]),this.c=this.$c[0].getContext?this.$c[0].getContext("2d"):null,!this.c)throw{name:"CanvasNotSupportedException",message:"Canvas not supported. Please use excanvas on IE8.0.",toString:function(){return this.name+": "+this.message}};return this.scale=(window.devicePixelRatio||1)/(this.c.webkitBackingStorePixelRatio||this.c.mozBackingStorePixelRatio||this.c.msBackingStorePixelRatio||this.c.oBackingStorePixelRatio||this.c.backingStorePixelRatio||1),this.relativeWidth=this.o.width%1!==0&&this.o.width.indexOf("%"),this.relativeHeight=this.o.height%1!==0&&this.o.height.indexOf("%"),this.relative=this.relativeWidth||this.relativeHeight,this._carve(),this.v instanceof Object?(this.cv={},this.copy(this.v,this.cv)):this.cv=this.v,this.$.bind("configure",e).parent().bind("configure",e),this._listen()._configure()._xy().init(),this.isInit=!0,this.$.val(this.o.format(this.v)),this._draw(),this}},this._carve=function(){if(this.relative){var t=this.relativeWidth?this.$div.parent().width()*parseInt(this.o.width)/100:this.$div.parent().width(),e=this.relativeHeight?this.$div.parent().height()*parseInt(this.o.height)/100:this.$div.parent().height();this.w=this.h=Math.min(t,e)}else this.w=this.o.width,this.h=this.o.height;return this.$div.css({width:this.w+"px",height:this.h+"px"}),this.$c.attr({width:this.w,height:this.h}),1!==this.scale&&(this.$c[0].width=this.$c[0].width*this.scale,this.$c[0].height=this.$c[0].height*this.scale,this.$c.width(this.w),this.$c.height(this.h)),this},this._draw=function(){var t=!0;n.g=n.c,n.clear(),n.dH&&(t=n.dH()),t!==!1&&n.draw()},this._touch=function(t){var r=function(t){var e=n.xy2val(t.originalEvent.touches[n.t].pageX,t.originalEvent.touches[n.t].pageY);e!=n.cv&&(n.cH&&n.cH(e)===!1||(n.change(n._validate(e)),n._draw()))};return this.t=e.c.t(t),r(t),e.c.d.bind("touchmove.k",r).bind("touchend.k",function(){e.c.d.unbind("touchmove.k touchend.k"),n.val(n.cv)}),this},this._mouse=function(t){var r=function(t){var e=n.xy2val(t.pageX,t.pageY);e!=n.cv&&(n.cH&&n.cH(e)===!1||(n.change(n._validate(e)),n._draw()))};return r(t),e.c.d.bind("mousemove.k",r).bind("keyup.k",function(t){if(27===t.keyCode){if(e.c.d.unbind("mouseup.k mousemove.k keyup.k"),n.eH&&n.eH()===!1)return;n.cancel()}}).bind("mouseup.k",function(t){e.c.d.unbind("mousemove.k mouseup.k keyup.k"),n.val(n.cv)}),this},this._xy=function(){var t=this.$c.offset();return this.x=t.left,this.y=t.top,this},this._listen=function(){return this.o.readOnly?this.$.attr("readonly","readonly"):(this.$c.bind("mousedown",function(t){t.preventDefault(),n._xy()._mouse(t)}).bind("touchstart",function(t){t.preventDefault(),n._xy()._touch(t)}),this.listen()),this.relative&&t(window).resize(function(){n._carve().init(),n._draw()}),this},this._configure=function(){return this.o.draw&&(this.dH=this.o.draw),this.o.change&&(this.cH=this.o.change),this.o.cancel&&(this.eH=this.o.cancel),this.o.release&&(this.rH=this.o.release),this.o.displayPrevious?(this.pColor=this.h2rgba(this.o.fgColor,"0.4"),this.fgColor=this.h2rgba(this.o.fgColor,"0.6")):this.fgColor=this.o.fgColor,this},this._clear=function(){this.$c[0].width=this.$c[0].width},this._validate=function(t){var e=~~((t<0?-.5:.5)+t/this.o.step)*this.o.step;return Math.round(100*e)/100},this.listen=function(){},this.extend=function(){},this.init=function(){},this.change=function(t){},this.val=function(t){},this.xy2val=function(t,e){},this.draw=function(){},this.clear=function(){this._clear()},this.h2rgba=function(t,e){var n;return t=t.substring(1,7),n=[parseInt(t.substring(0,2),16),parseInt(t.substring(2,4),16),parseInt(t.substring(4,6),16)],"rgba("+n[0]+","+n[1]+","+n[2]+","+e+")"},this.copy=function(t,e){for(var n in t)e[n]=t[n]}},e.Dial=function(){e.o.call(this),this.startAngle=null,this.xy=null,this.radius=null,this.lineWidth=null,this.cursorExt=null,this.w2=null,this.PI2=2*Math.PI,this.extend=function(){this.o=t.extend({bgColor:this.$.data("bgcolor")||"#EEEEEE",angleOffset:this.$.data("angleoffset")||0,angleArc:this.$.data("anglearc")||360,inline:!0},this.o)},this.val=function(t,e){return null==t?this.v:(t=this.o.parse(t),void(e!==!1&&t!=this.v&&this.rH&&this.rH(t)===!1||(this.cv=this.o.stopper?n(r(t,this.o.max),this.o.min):t,this.v=this.cv,this.$.val(this.o.format(this.v)),this._draw())))},this.xy2val=function(t,e){var i,o;return i=Math.atan2(t-(this.x+this.w2),-(e-this.y-this.w2))-this.angleOffset,this.o.flip&&(i=this.angleArc-i-this.PI2),this.angleArc!=this.PI2&&i<0&&i>-.5?i=0:i<0&&(i+=this.PI2),o=i*(this.o.max-this.o.min)/this.angleArc+this.o.min,this.o.stopper&&(o=n(r(o,this.o.max),this.o.min)),o},this.listen=function(){var e,i,o,s,a=this,c=function(t){t.preventDefault();var o=t.originalEvent,s=o.detail||o.wheelDeltaX,c=o.detail||o.wheelDeltaY,l=a._validate(a.o.parse(a.$.val()))+(s>0||c>0?a.o.step:s<0||c<0?-a.o.step:0);l=n(r(l,a.o.max),a.o.min),a.val(l,!1),a.rH&&(clearTimeout(e),e=setTimeout(function(){a.rH(l),e=null},100),i||(i=setTimeout(function(){e&&a.rH(l),i=null},200)))},l=1,u={37:-a.o.step,38:a.o.step,39:a.o.step,40:-a.o.step};this.$.bind("keydown",function(e){var i=e.keyCode;if(i>=96&&i<=105&&(i=e.keyCode=i-48),o=parseInt(String.fromCharCode(i)),isNaN(o)&&(13!==i&&8!==i&&9!==i&&189!==i&&(190!==i||a.$.val().match(/\./))&&e.preventDefault(),t.inArray(i,[37,38,39,40])>-1)){e.preventDefault();var c=a.o.parse(a.$.val())+u[i]*l;a.o.stopper&&(c=n(r(c,a.o.max),a.o.min)),a.change(a._validate(c)),a._draw(),s=window.setTimeout(function(){l*=2},30)}}).bind("keyup",function(t){isNaN(o)?s&&(window.clearTimeout(s),s=null,l=1,a.val(a.$.val())):a.$.val()>a.o.max&&a.$.val(a.o.max)||a.$.val()<a.o.min&&a.$.val(a.o.min)}),this.$c.bind("mousewheel DOMMouseScroll",c),this.$.bind("mousewheel DOMMouseScroll",c)},this.init=function(){(this.v<this.o.min||this.v>this.o.max)&&(this.v=this.o.min),this.$.val(this.v),this.w2=this.w/2,this.cursorExt=this.o.cursor/100,this.xy=this.w2*this.scale,this.lineWidth=this.xy*this.o.thickness,this.lineCap=this.o.lineCap,this.radius=this.xy-this.lineWidth/2,this.o.angleOffset&&(this.o.angleOffset=isNaN(this.o.angleOffset)?0:this.o.angleOffset),this.o.angleArc&&(this.o.angleArc=isNaN(this.o.angleArc)?this.PI2:this.o.angleArc),this.angleOffset=this.o.angleOffset*Math.PI/180,this.angleArc=this.o.angleArc*Math.PI/180,this.startAngle=1.5*Math.PI+this.angleOffset,this.endAngle=1.5*Math.PI+this.angleOffset+this.angleArc;var t=n(String(Math.abs(this.o.max)).length,String(Math.abs(this.o.min)).length,2)+2;this.o.displayInput&&this.i.css({width:(this.w/2+4>>0)+"px",height:(this.w/3>>0)+"px",position:"absolute","vertical-align":"middle","margin-top":(this.w/3>>0)+"px","margin-left":"-"+(3*this.w/4+2>>0)+"px",border:0,background:"none",font:this.o.fontWeight+" "+(this.w/t>>0)+"px "+this.o.font,"text-align":"center",color:this.o.inputColor||this.o.fgColor,padding:"0px","-webkit-appearance":"none"})||this.i.css({width:"0px",visibility:"hidden"})},this.change=function(t){this.cv=t,this.$.val(this.o.format(t))},this.angle=function(t){return(t-this.o.min)*this.angleArc/(this.o.max-this.o.min)},this.arc=function(t){var e,n;return t=this.angle(t),this.o.flip?(e=this.endAngle+1e-5,n=e-t-1e-5):(e=this.startAngle-1e-5,n=e+t+1e-5),this.o.cursor&&(e=n-this.cursorExt)&&(n+=this.cursorExt),{s:e,e:n,d:this.o.flip&&!this.o.cursor}},this.draw=function(){var t,e=this.g,n=this.arc(this.cv),r=1;e.lineWidth=this.lineWidth,e.lineCap=this.lineCap,"none"!==this.o.bgColor&&(e.beginPath(),e.strokeStyle=this.o.bgColor,e.arc(this.xy,this.xy,this.radius,this.endAngle-1e-5,this.startAngle+1e-5,!0),
e.stroke()),this.o.displayPrevious&&(t=this.arc(this.v),e.beginPath(),e.strokeStyle=this.pColor,e.arc(this.xy,this.xy,this.radius,t.s,t.e,t.d),e.stroke(),r=this.cv==this.v),e.beginPath(),e.strokeStyle=r?this.o.fgColor:this.fgColor,e.arc(this.xy,this.xy,this.radius,n.s,n.e,n.d),e.stroke()},this.cancel=function(){this.val(this.v)}},t.fn.dial=t.fn.knob=function(n){return this.each(function(){var r=new e.Dial;r.o=n,r.$=t(this),r.run()}).parent()}}),function(t,e,n){function r(e,n){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=t(e),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=t.extend({},c,n),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function i(e,n){var r=!0;return t.each(e,function(t,i){if("undefined"==typeof n[t]||e[t]!==n[t])return r=!1,!1}),r}function o(){return!u&&l}function s(){var t=n.body||n.documentElement,e=t.style,r="transition";if("string"==typeof e[r])return!0;v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof e[v[i]+r])return!0;return!1}var a="tooltipster",c={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(t,e){},functionBefore:function(t,e){e()},functionReady:function(t,e){},functionAfter:function(t){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(t){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};r.prototype={_init:function(){var e=this;if(n.querySelector){var r=null;void 0===e.$el.data("tooltipster-initialTitle")&&(r=e.$el.attr("title"),void 0===r&&(r=null),e.$el.data("tooltipster-initialTitle",r)),null!==e.options.content?e._content_set(e.options.content):e._content_set(r);var i=e.options.functionInit.call(e.$el,e.$el,e.Content);"undefined"!=typeof i&&e._content_set(i),e.$el.removeAttr("title").addClass("tooltipstered"),!l&&e.options.iconDesktop||l&&e.options.iconTouch?("string"==typeof e.options.icon?(e.$elProxy=t('<span class="'+e.options.iconTheme+'"></span>'),e.$elProxy.text(e.options.icon)):e.options.iconCloning?e.$elProxy=e.options.icon.clone(!0):e.$elProxy=e.options.icon,e.$elProxy.insertAfter(e.$el)):e.$elProxy=e.$el,"hover"==e.options.trigger?(e.$elProxy.on("mouseenter."+e.namespace,function(){o()&&!e.options.touchDevices||(e.mouseIsOverProxy=!0,e._show())}).on("mouseleave."+e.namespace,function(){o()&&!e.options.touchDevices||(e.mouseIsOverProxy=!1)}),l&&e.options.touchDevices&&e.$elProxy.on("touchstart."+e.namespace,function(){e._showNow()})):"click"==e.options.trigger&&e.$elProxy.on("click."+e.namespace,function(){o()&&!e.options.touchDevices||e._show()})}},_show:function(){var t=this;"shown"!=t.Status&&"appearing"!=t.Status&&(t.options.delay?t.timerShow=setTimeout(function(){("click"==t.options.trigger||"hover"==t.options.trigger&&t.mouseIsOverProxy)&&t._showNow()},t.options.delay):t._showNow())},_showNow:function(n){var r=this;r.options.functionBefore.call(r.$el,r.$el,function(){if(r.enabled&&null!==r.Content){n&&r.callbacks.show.push(n),r.callbacks.hide=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null,r.options.onlyOne&&t(".tooltipstered").not(r.$el).each(function(e,n){var r=t(n),i=r.data("tooltipster-ns");t.each(i,function(t,e){var n=r.data(e),i=n.status(),o=n.option("autoClose");"hidden"!==i&&"disappearing"!==i&&o&&n.hide()})});var i=function(){r.Status="shown",t.each(r.callbacks.show,function(t,e){e.call(r.$el)}),r.callbacks.show=[]};if("hidden"!==r.Status){var o=0;"disappearing"===r.Status?(r.Status="appearing",s()?(r.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+r.options.animation+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.stop().fadeIn(i)):"shown"===r.Status&&i()}else{r.Status="appearing";var o=r.options.speed;r.bodyOverflowX=t("body").css("overflow-x"),t("body").css("overflow-x","hidden");var a="tooltipster-"+r.options.animation,c="-webkit-transition-duration: "+r.options.speed+"ms; -webkit-animation-duration: "+r.options.speed+"ms; -moz-transition-duration: "+r.options.speed+"ms; -moz-animation-duration: "+r.options.speed+"ms; -o-transition-duration: "+r.options.speed+"ms; -o-animation-duration: "+r.options.speed+"ms; -ms-transition-duration: "+r.options.speed+"ms; -ms-animation-duration: "+r.options.speed+"ms; transition-duration: "+r.options.speed+"ms; animation-duration: "+r.options.speed+"ms;",u=r.options.minWidth?"min-width:"+Math.round(r.options.minWidth)+"px;":"",f=r.options.maxWidth?"max-width:"+Math.round(r.options.maxWidth)+"px;":"",h=r.options.interactive?"pointer-events: auto;":"";if(r.$tooltip=t('<div class="tooltipster-base '+r.options.theme+'" style="'+u+" "+f+" "+h+" "+c+'"><div class="tooltipster-content"></div></div>'),s()&&r.$tooltip.addClass(a),r._content_insert(),r.$tooltip.appendTo("body"),r.reposition(),r.options.functionReady.call(r.$el,r.$el,r.$tooltip),s()?(r.$tooltip.addClass(a+"-show"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(i)):r.$tooltip.css("display","none").fadeIn(r.options.speed,i),r._interval_set(),t(e).on("scroll."+r.namespace+" resize."+r.namespace,function(){r.reposition()}),r.options.autoClose)if(t("body").off("."+r.namespace),"hover"==r.options.trigger){if(l&&setTimeout(function(){t("body").on("touchstart."+r.namespace,function(){r.hide()})},0),r.options.interactive){l&&r.$tooltip.on("touchstart."+r.namespace,function(t){t.stopPropagation()});var d=null;r.$elProxy.add(r.$tooltip).on("mouseleave."+r.namespace+"-autoClose",function(){clearTimeout(d),d=setTimeout(function(){r.hide()},r.options.interactiveTolerance)}).on("mouseenter."+r.namespace+"-autoClose",function(){clearTimeout(d)})}else r.$elProxy.on("mouseleave."+r.namespace+"-autoClose",function(){r.hide()});r.options.hideOnClick&&r.$elProxy.on("click."+r.namespace+"-autoClose",function(){r.hide()})}else"click"==r.options.trigger&&(setTimeout(function(){t("body").on("click."+r.namespace+" touchstart."+r.namespace,function(){r.hide()})},0),r.options.interactive&&r.$tooltip.on("click."+r.namespace+" touchstart."+r.namespace,function(t){t.stopPropagation()}))}r.options.timer>0&&(r.timerHide=setTimeout(function(){r.timerHide=null,r.hide()},r.options.timer+o))}})},_interval_set:function(){var e=this;e.checkInterval=setInterval(function(){if(0===t("body").find(e.$el).length||0===t("body").find(e.$elProxy).length||"hidden"==e.Status||0===t("body").find(e.$tooltip).length)"shown"!=e.Status&&"appearing"!=e.Status||e.hide(),e._interval_cancel();else if(e.options.positionTracker){var n=e._repositionInfo(e.$elProxy),r=!1;i(n.dimension,e.elProxyPosition.dimension)&&("fixed"===e.$elProxy.css("position")?i(n.position,e.elProxyPosition.position)&&(r=!0):i(n.offset,e.elProxyPosition.offset)&&(r=!0)),r||(e.reposition(),e.options.positionTrackerCallback.call(e,e.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(t){"object"==typeof t&&null!==t&&this.options.contentCloning&&(t=t.clone(!0)),this.Content=t},_content_insert:function(){var t=this,e=this.$tooltip.find(".tooltipster-content");"string"!=typeof t.Content||t.options.contentAsHTML?e.empty().append(t.Content):e.text(t.Content)},_update:function(t){var e=this;e._content_set(t),null!==e.Content?"hidden"!==e.Status&&(e._content_insert(),e.reposition(),e.options.updateAnimation&&(s()?(e.$tooltip.css({width:"","-webkit-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+e.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=e.Status&&(e.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==e.Status&&e.$tooltip.css({"-webkit-transition":e.options.speed+"ms","-moz-transition":e.options.speed+"ms","-o-transition":e.options.speed+"ms","-ms-transition":e.options.speed+"ms",transition:e.options.speed+"ms"})},e.options.speed))},e.options.speed)):e.$tooltip.fadeTo(e.options.speed,.5,function(){"hidden"!=e.Status&&e.$tooltip.fadeTo(e.options.speed,1)}))):e.hide()},_repositionInfo:function(t){return{dimension:{height:t.outerHeight(!1),width:t.outerWidth(!1)},offset:t.offset(),position:{left:parseInt(t.css("left")),top:parseInt(t.css("top"))}}},hide:function(n){var r=this;n&&r.callbacks.hide.push(n),r.callbacks.show=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null;var i=function(){t.each(r.callbacks.hide,function(t,e){e.call(r.$el)}),r.callbacks.hide=[]};if("shown"==r.Status||"appearing"==r.Status){r.Status="disappearing";var o=function(){r.Status="hidden","object"==typeof r.Content&&null!==r.Content&&r.Content.detach(),r.$tooltip.remove(),r.$tooltip=null,t(e).off("."+r.namespace),t("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX),t("body").off("."+r.namespace),r.$elProxy.off("."+r.namespace+"-autoClose"),r.options.functionAfter.call(r.$el,r.$el),i()};s()?(r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(o)):r.$tooltip.stop().fadeOut(r.options.speed,o)}else"hidden"==r.Status&&i();return r},show:function(t){return this._showNow(t),this},update:function(t){return this.content(t)},content:function(t){return"undefined"==typeof t?this.Content:(this._update(t),this)},reposition:function(){function n(){var n=t(e).scrollLeft();C-n<0&&(o=C-n,C=n),C+c-n>s&&(o=C-(s+n-c),C=s+n-c)}function r(n,r){a.offset.top-t(e).scrollTop()-l-N-12<0&&r.indexOf("top")>-1&&(D=n),a.offset.top+a.dimension.height+l+12+N>t(e).scrollTop()+t(e).height()&&r.indexOf("bottom")>-1&&(D=n,O=a.offset.top-l-N-12)}var i=this;if(0!==t("body").find(i.$tooltip).length){i.$tooltip.css("width",""),i.elProxyPosition=i._repositionInfo(i.$elProxy);var o=null,s=t(e).width(),a=i.elProxyPosition,c=i.$tooltip.outerWidth(!1),l=(i.$tooltip.innerWidth()+1,i.$tooltip.outerHeight(!1));if(i.$elProxy.is("area")){var u=i.$elProxy.attr("shape"),f=i.$elProxy.parent().attr("name"),h=t('img[usemap="#'+f+'"]'),d=h.offset().left,p=h.offset().top,y=void 0!==i.$elProxy.attr("coords")?i.$elProxy.attr("coords").split(","):void 0;if("circle"==u){var g=parseInt(y[0]),m=parseInt(y[1]),v=parseInt(y[2]);a.dimension.height=2*v,a.dimension.width=2*v,a.offset.top=p+m-v,a.offset.left=d+g-v}else if("rect"==u){var g=parseInt(y[0]),m=parseInt(y[1]),w=parseInt(y[2]),_=parseInt(y[3]);a.dimension.height=_-m,a.dimension.width=w-g,a.offset.top=p+m,a.offset.left=d+g}else if("poly"==u){for(var b=0,S=0,E=0,k=0,I="even",x=0;x<y.length;x++){var F=parseInt(y[x]);"even"==I?(F>E&&(E=F,0===x&&(b=E)),F<b&&(b=F),I="odd"):(F>k&&(k=F,1==x&&(S=k)),F<S&&(S=F),I="even")}a.dimension.height=k-S,a.dimension.width=E-b,a.offset.top=p+S,a.offset.left=d+b}else a.dimension.height=h.outerHeight(!1),a.dimension.width=h.outerWidth(!1),a.offset.top=p,a.offset.left=d}var C=0,T=0,O=0,N=parseInt(i.options.offsetY),A=parseInt(i.options.offsetX),D=i.options.position;if("top"==D){var L=a.offset.left+c-(a.offset.left+a.dimension.width);C=a.offset.left+A-L/2,O=a.offset.top-l-N-12,n(),r("bottom","top")}if("top-left"==D&&(C=a.offset.left+A,O=a.offset.top-l-N-12,n(),r("bottom-left","top-left")),"top-right"==D&&(C=a.offset.left+a.dimension.width+A-c,O=a.offset.top-l-N-12,n(),r("bottom-right","top-right")),"bottom"==D){var L=a.offset.left+c-(a.offset.left+a.dimension.width);C=a.offset.left-L/2+A,O=a.offset.top+a.dimension.height+N+12,n(),r("top","bottom")}if("bottom-left"==D&&(C=a.offset.left+A,O=a.offset.top+a.dimension.height+N+12,n(),r("top-left","bottom-left")),"bottom-right"==D&&(C=a.offset.left+a.dimension.width+A-c,O=a.offset.top+a.dimension.height+N+12,n(),r("top-right","bottom-right")),"left"==D){C=a.offset.left-A-c-12,T=a.offset.left+A+a.dimension.width+12;var R=a.offset.top+l-(a.offset.top+a.dimension.height);if(O=a.offset.top-R/2-N,C<0&&T+c>s){var B=2*parseFloat(i.$tooltip.css("border-width")),P=c+C-B;i.$tooltip.css("width",P+"px"),l=i.$tooltip.outerHeight(!1),C=a.offset.left-A-P-12-B,R=a.offset.top+l-(a.offset.top+a.dimension.height),O=a.offset.top-R/2-N}else C<0&&(C=a.offset.left+A+a.dimension.width+12,o="left")}if("right"==D){C=a.offset.left+A+a.dimension.width+12,T=a.offset.left-A-c-12;var R=a.offset.top+l-(a.offset.top+a.dimension.height);if(O=a.offset.top-R/2-N,C+c>s&&T<0){var B=2*parseFloat(i.$tooltip.css("border-width")),P=s-C-B;i.$tooltip.css("width",P+"px"),l=i.$tooltip.outerHeight(!1),R=a.offset.top+l-(a.offset.top+a.dimension.height),O=a.offset.top-R/2-N}else C+c>s&&(C=a.offset.left-A-c-12,o="right")}if(i.options.arrow){var z="tooltipster-arrow-"+D;if(i.options.arrowColor.length<1)var $=i.$tooltip.css("background-color");else var $=i.options.arrowColor;if(o?"left"==o?(z="tooltipster-arrow-right",o=""):"right"==o?(z="tooltipster-arrow-left",o=""):o="left:"+Math.round(o)+"px;":o="","top"==D||"top-left"==D||"top-right"==D)var U=parseFloat(i.$tooltip.css("border-bottom-width")),M=i.$tooltip.css("border-bottom-color");else if("bottom"==D||"bottom-left"==D||"bottom-right"==D)var U=parseFloat(i.$tooltip.css("border-top-width")),M=i.$tooltip.css("border-top-color");else if("left"==D)var U=parseFloat(i.$tooltip.css("border-right-width")),M=i.$tooltip.css("border-right-color");else if("right"==D)var U=parseFloat(i.$tooltip.css("border-left-width")),M=i.$tooltip.css("border-left-color");else var U=parseFloat(i.$tooltip.css("border-bottom-width")),M=i.$tooltip.css("border-bottom-color");U>1&&U++;var H="";if(0!==U){var j="",Z="border-color: "+M+";";z.indexOf("bottom")!==-1?j="margin-top: -"+Math.round(U)+"px;":z.indexOf("top")!==-1?j="margin-bottom: -"+Math.round(U)+"px;":z.indexOf("left")!==-1?j="margin-right: -"+Math.round(U)+"px;":z.indexOf("right")!==-1&&(j="margin-left: -"+Math.round(U)+"px;"),H='<span class="tooltipster-arrow-border" style="'+j+" "+Z+';"></span>'}i.$tooltip.find(".tooltipster-arrow").remove();var V='<div class="'+z+' tooltipster-arrow" style="'+o+'">'+H+'<span style="border-color:'+$+';"></span></div>';i.$tooltip.append(V)}i.$tooltip.css({top:Math.round(O)+"px",left:Math.round(C)+"px"})}return i},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var e=this;e.hide(),e.$el[0]!==e.$elProxy[0]&&e.$elProxy.remove(),e.$el.removeData(e.namespace).off("."+e.namespace);var n=e.$el.data("tooltipster-ns");if(1===n.length){var r=null;"previous"===e.options.restoration?r=e.$el.data("tooltipster-initialTitle"):"current"===e.options.restoration&&(r="string"==typeof e.Content?e.Content:t("<div></div>").append(e.Content).html()),r&&e.$el.attr("title",r),e.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else n=t.grep(n,function(t,n){return t!==e.namespace}),e.$el.data("tooltipster-ns",n);return e},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(t,e){return"undefined"==typeof e?this.options[t]:(this.options[t]=e,this)},status:function(){return this.Status}},t.fn[a]=function(){var e=arguments;if(0===this.length){if("string"==typeof e[0]){var n=!0;switch(e[0]){case"setDefaults":t.extend(c,e[1]);break;default:n=!1}return!!n||this}return this}if("string"==typeof e[0]){var i="#*$~&";return this.each(function(){var n=t(this).data("tooltipster-ns"),r=n?t(this).data(n[0]):null;if(!r)throw new Error("You called Tooltipster's \""+e[0]+'" method on an uninitialized element');if("function"!=typeof r[e[0]])throw new Error('Unknown method .tooltipster("'+e[0]+'")');var o=r[e[0]](e[1],e[2]);if(o!==r)return i=o,!1}),"#*$~&"!==i?i:this}var o=[],s=e[0]&&"undefined"!=typeof e[0].multiple,a=s&&e[0].multiple||!s&&c.multiple,l=e[0]&&"undefined"!=typeof e[0].debug,u=l&&e[0].debug||!l&&c.debug;return this.each(function(){var n=!1,i=t(this).data("tooltipster-ns"),s=null;i?a?n=!0:u&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):n=!0,n&&(s=new r(this,e[0]),i||(i=[]),i.push(s.namespace),t(this).data("tooltipster-ns",i),t(this).data(s.namespace,s)),o.push(s)}),a?o:this};var l=!!("ontouchstart"in e),u=!1;t("body").one("mousemove",function(){u=!0})}(jQuery,window,document),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){var e="waitForImages";t.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},t.expr[":"]["has-src"]=function(e){return t(e).is('img[src][src!=""]')},t.expr[":"].uncached=function(e){return!!t(e).is(":has-src")&&!e.complete},t.fn.waitForImages=function(){var n,r,i,o=0,s=0,a=t.Deferred();if(t.isPlainObject(arguments[0])?(i=arguments[0].waitForAll,r=arguments[0].each,n=arguments[0].finished):1===arguments.length&&"boolean"===t.type(arguments[0])?i=arguments[0]:(n=arguments[0],r=arguments[1],i=arguments[2]),n=n||t.noop,r=r||t.noop,i=!!i,!t.isFunction(n)||!t.isFunction(r))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var c=t(this),l=[],u=t.waitForImages.hasImageProperties||[],f=t.waitForImages.hasImageAttributes||[],h=/url\(\s*(['"]?)(.*?)\1\s*\)/g;i?c.find("*").addBack().each(function(){var e=t(this);e.is("img:has-src")&&l.push({src:e.attr("src"),element:e[0]}),t.each(u,function(t,n){var r,i=e.css(n);if(!i)return!0;for(;r=h.exec(i);)l.push({src:r[2],element:e[0]})}),t.each(f,function(n,r){var i,o=e.attr(r);return!o||(i=o.split(","),void t.each(i,function(n,r){r=t.trim(r).split(" ")[0],l.push({src:r,element:e[0]})}))})}):c.find("img:has-src").each(function(){l.push({src:this.src,element:this})}),o=l.length,s=0,0===o&&(n.call(c[0]),a.resolveWith(c[0])),t.each(l,function(i,l){var u=new Image,f="load."+e+" error."+e;t(u).one(f,function e(i){var u=[s,o,"load"==i.type];return s++,r.apply(l.element,u),a.notifyWith(l.element,u),t(this).off(f,e),s==o?(n.call(c[0]),a.resolveWith(c[0]),!1):void 0}),u.src=l.src})}),a.promise()}}),!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pako=t()}}(function(){return function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return i(n?n:t)},u,u.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";function r(t,e){var n=new _(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}function i(t,e){return e=e||{},e.raw=!0,r(t,e)}function o(t,e){return e=e||{},e.gzip=!0,r(t,e)}var s=t("./zlib/deflate.js"),a=t("./utils/common"),c=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),f=Object.prototype.toString,h=0,d=4,p=0,y=1,g=2,m=-1,v=0,w=8,_=function(t){this.options=a.assign({level:m,method:w,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==p)throw new Error(l[n]);e.header&&s.deflateSetHeader(this.strm,e.header)};_.prototype.push=function(t,e){var n,r,i=this.strm,o=this.options.chunkSize;if(this.ended)return!1;r=e===~~e?e:e===!0?d:h,"string"==typeof t?i.input=c.string2buf(t):"[object ArrayBuffer]"===f.call(t)?i.input=new Uint8Array(t):i.input=t,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(o),i.next_out=0,i.avail_out=o),n=s.deflate(i,r),n!==y&&n!==p)return this.onEnd(n),this.ended=!0,!1;(0===i.avail_out||0===i.avail_in&&(r===d||r===g))&&this.onData("string"===this.options.to?c.buf2binstring(a.shrinkBuf(i.output,i.next_out)):a.shrinkBuf(i.output,i.next_out))}while((i.avail_in>0||0===i.avail_out)&&n!==y);return r===d?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===p):r!==g||(this.onEnd(p),i.avail_out=0,!0)},_.prototype.onData=function(t){this.chunks.push(t)},_.prototype.onEnd=function(t){t===p&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=_,n.deflate=r,n.deflateRaw=i,n.gzip=o},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate.js":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,n){"use strict";function r(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg;return n.result}function i(t,e){return e=e||{},e.raw=!0,r(t,e)}var o=t("./zlib/inflate.js"),s=t("./utils/common"),a=t("./utils/strings"),c=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),f=t("./zlib/gzheader"),h=Object.prototype.toString,d=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,e.windowBits);if(n!==c.Z_OK)throw new Error(l[n]);this.header=new f,o.inflateGetHeader(this.strm,this.header)};d.prototype.push=function(t,e){var n,r,i,l,u,f=this.strm,d=this.options.chunkSize,p=!1;if(this.ended)return!1;r=e===~~e?e:e===!0?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?f.input=a.binstring2buf(t):"[object ArrayBuffer]"===h.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new s.Buf8(d),f.next_out=0,f.avail_out=d),n=o.inflate(f,c.Z_NO_FLUSH),n===c.Z_BUF_ERROR&&p===!0&&(n=c.Z_OK,p=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0===f.avail_out||n===c.Z_STREAM_END||0===f.avail_in&&(r===c.Z_FINISH||r===c.Z_SYNC_FLUSH))&&("string"===this.options.to?(i=a.utf8border(f.output,f.next_out),l=f.next_out-i,u=a.buf2string(f.output,i),f.next_out=l,f.avail_out=d-l,l&&s.arraySet(f.output,f.output,i,l,0),this.onData(u)):this.onData(s.shrinkBuf(f.output,f.next_out))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(r=c.Z_FINISH),r===c.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):r!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),f.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=d,n.inflate=r,n.inflateRaw=i,n.ungzip=r},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate.js":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+r),i);for(var o=0;r>o;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,s;for(r=0,e=0,n=t.length;n>e;e++)r+=t[e].length;for(s=new Uint8Array(r),i=0,e=0,n=t.length;n>e;e++)o=t[e],s.set(o,i),i+=o.length;return s}},o={arraySet:function(t,e,n,r,i){for(var o=0;r>o;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],4:[function(t,e,n){"use strict";function r(t,e){if(65537>e&&(t.subarray&&s||!t.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",r=0;e>r;r++)n+=String.fromCharCode(t[r]);return n}var i=t("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var a=new i.Buf8(256),c=0;256>c;c++)a[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;a[254]=a[254]=1,n.string2buf=function(t){var e,n,r,o,s,a=t.length,c=0;for(o=0;a>o;o++)n=t.charCodeAt(o),55296===(64512&n)&&a>o+1&&(r=t.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),c+=128>n?1:2048>n?2:65536>n?3:4;for(e=new i.Buf8(c),s=0,o=0;c>s;o++)n=t.charCodeAt(o),55296===(64512&n)&&a>o+1&&(r=t.charCodeAt(o+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),o++)),128>n?e[s++]=n:2048>n?(e[s++]=192|n>>>6,e[s++]=128|63&n):65536>n?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e},n.buf2binstring=function(t){return r(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;r>n;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,o,s,c=e||t.length,l=new Array(2*c);for(i=0,n=0;c>n;)if(o=t[n++],128>o)l[i++]=o;else if(s=a[o],s>4)l[i++]=65533,n+=s-1;else{for(o&=2===s?31:3===s?15:7;s>1&&c>n;)o=o<<6|63&t[n++],s--;s>1?l[i++]=65533:65536>o?l[i++]=o:(o-=65536,l[i++]=55296|o>>10&1023,l[i++]=56320|1023&o)}return r(l,i)},n.utf8border=function(t,e){var n;for(e=e||t.length,e>t.length&&(e=t.length),n=e-1;n>=0&&128===(192&t[n]);)n--;return 0>n?e:0===n?e:n+a[t[n]]>e?n:e}},{"./common":3}],5:[function(t,e,n){"use strict";function r(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){s=n>2e3?2e3:n,n-=s;do i=i+e[r++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}e.exports=r},{}],6:[function(t,e,n){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,n){"use strict";function r(){for(var t,e=[],n=0;256>n;n++){t=n;for(var r=0;8>r;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}function i(t,e,n,r){var i=o,s=r+n;t^=-1;for(var a=r;s>a;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}var o=r();e.exports=i},{}],8:[function(t,e,n){"use strict";function r(t,e){return t.msg=A[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(C.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function a(t,e){T._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function c(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function u(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,C.arraySet(e,t.input,t.next_in,i,n),1===t.state.wrap?t.adler=O(t.adler,e,i,n):2===t.state.wrap&&(t.adler=N(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var n,r,i=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-lt?t.strstart-(t.w_size-lt):0,l=t.window,u=t.w_mask,f=t.prev,h=t.strstart+ct,d=l[o+s-1],p=l[o+s];t.prev_length>=t.good_match&&(i>>=2),a>t.lookahead&&(a=t.lookahead);do if(n=e,l[n+s]===p&&l[n+s-1]===d&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do;while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&h>o);if(r=ct-(h-o),o=h-ct,r>s){if(t.match_start=e,s=r,r>=a)break;d=l[o+s-1],p=l[o+s]}}while((e=f[e&u])>c&&0!==--i);return s<=t.lookahead?s:t.lookahead}function h(t){var e,n,r,i,o,s=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-lt)){C.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,n=t.hash_size,e=n;do r=t.head[--e],t.head[e]=r>=s?r-s:0;while(--n);n=s,e=n;do r=t.prev[--e],t.prev[e]=r>=s?r-s:0;while(--n);i+=s}if(0===t.strm.avail_in)break;if(n=u(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=at)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+at-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<at)););}while(t.lookahead<lt&&0!==t.strm.avail_in)}function d(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&e===D)return vt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,a(t,!1),0===t.strm.avail_out))return vt;if(t.strstart-t.block_start>=t.w_size-lt&&(a(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===B?(a(t,!0),0===t.strm.avail_out?_t:bt):t.strstart>t.block_start&&(a(t,!1),0===t.strm.avail_out)?vt:vt}function p(t,e){for(var n,r;;){if(t.lookahead<lt){if(h(t),t.lookahead<lt&&e===D)return vt;if(0===t.lookahead)break}if(n=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-lt&&(t.match_length=f(t,n)),t.match_length>=at)if(r=T._tr_tally(t,t.strstart-t.match_start,t.match_length-at),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=at){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=T._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(a(t,!1),0===t.strm.avail_out))return vt}return t.insert=t.strstart<at-1?t.strstart:at-1,e===B?(a(t,!0),0===t.strm.avail_out?_t:bt):t.last_lit&&(a(t,!1),
0===t.strm.avail_out)?vt:wt}function y(t,e){for(var n,r,i;;){if(t.lookahead<lt){if(h(t),t.lookahead<lt&&e===D)return vt;if(0===t.lookahead)break}if(n=0,t.lookahead>=at&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=at-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-lt&&(t.match_length=f(t,n),t.match_length<=5&&(t.strategy===Z||t.match_length===at&&t.strstart-t.match_start>4096)&&(t.match_length=at-1)),t.prev_length>=at&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-at,r=T._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-at),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+at-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=at-1,t.strstart++,r&&(a(t,!1),0===t.strm.avail_out))return vt}else if(t.match_available){if(r=T._tr_tally(t,0,t.window[t.strstart-1]),r&&a(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return vt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=T._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<at-1?t.strstart:at-1,e===B?(a(t,!0),0===t.strm.avail_out?_t:bt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?vt:wt}function g(t,e){for(var n,r,i,o,s=t.window;;){if(t.lookahead<=ct){if(h(t),t.lookahead<=ct&&e===D)return vt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=at&&t.strstart>0&&(i=t.strstart-1,r=s[i],r===s[++i]&&r===s[++i]&&r===s[++i])){o=t.strstart+ct;do;while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&o>i);t.match_length=ct-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=at?(n=T._tr_tally(t,1,t.match_length-at),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=T._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(a(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===B?(a(t,!0),0===t.strm.avail_out?_t:bt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?vt:wt}function m(t,e){for(var n;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(e===D)return vt;break}if(t.match_length=0,n=T._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(a(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===B?(a(t,!0),0===t.strm.avail_out?_t:bt):t.last_lit&&(a(t,!1),0===t.strm.avail_out)?vt:wt}function v(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=F[t.level].max_lazy,t.good_match=F[t.level].good_length,t.nice_match=F[t.level].nice_length,t.max_chain_length=F[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=at-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new C.Buf16(2*ot),this.dyn_dtree=new C.Buf16(2*(2*rt+1)),this.bl_tree=new C.Buf16(2*(2*it+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new C.Buf16(st+1),this.heap=new C.Buf16(2*nt+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new C.Buf16(2*nt+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function _(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Y,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ft:gt,t.adler=2===e.wrap?0:1,e.last_flush=D,T._tr_init(e),z):r(t,U)}function b(t){var e=_(t);return e===z&&v(t.state),e}function S(t,e){return t&&t.state?2!==t.state.wrap?U:(t.state.gzhead=e,z):U}function E(t,e,n,i,o,s){if(!t)return U;var a=1;if(e===j&&(e=6),0>i?(a=0,i=-i):i>15&&(a=2,i-=16),1>o||o>G||n!==K||8>i||i>15||0>e||e>9||0>s||s>X)return r(t,U);8===i&&(i=9);var c=new w;return t.state=c,c.strm=t,c.wrap=a,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+at-1)/at),c.window=new C.Buf8(2*c.w_size),c.head=new C.Buf16(c.hash_size),c.prev=new C.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new C.Buf8(c.pending_buf_size),c.d_buf=c.lit_bufsize>>1,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=s,c.method=n,b(t)}function k(t,e){return E(t,e,K,J,Q,q)}function I(t,e){var n,a,u,f;if(!t||!t.state||e>P||0>e)return t?r(t,U):U;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===mt&&e!==B)return r(t,0===t.avail_out?H:U);if(a.strm=t,n=a.last_flush,a.last_flush=e,a.status===ft)if(2===a.wrap)t.adler=0,c(a,31),c(a,139),c(a,8),a.gzhead?(c(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),c(a,255&a.gzhead.time),c(a,a.gzhead.time>>8&255),c(a,a.gzhead.time>>16&255),c(a,a.gzhead.time>>24&255),c(a,9===a.level?2:a.strategy>=V||a.level<2?4:0),c(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(c(a,255&a.gzhead.extra.length),c(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=N(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=ht):(c(a,0),c(a,0),c(a,0),c(a,0),c(a,0),c(a,9===a.level?2:a.strategy>=V||a.level<2?4:0),c(a,St),a.status=gt);else{var h=K+(a.w_bits-8<<4)<<8,d=-1;d=a.strategy>=V||a.level<2?0:a.level<6?1:6===a.level?2:3,h|=d<<6,0!==a.strstart&&(h|=ut),h+=31-h%31,a.status=gt,l(a,h),0!==a.strstart&&(l(a,t.adler>>>16),l(a,65535&t.adler)),t.adler=1}if(a.status===ht)if(a.gzhead.extra){for(u=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>u&&(t.adler=N(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending!==a.pending_buf_size));)c(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>u&&(t.adler=N(t.adler,a.pending_buf,a.pending-u,u)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=dt)}else a.status=dt;if(a.status===dt)if(a.gzhead.name){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(t.adler=N(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,c(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>u&&(t.adler=N(t.adler,a.pending_buf,a.pending-u,u)),0===f&&(a.gzindex=0,a.status=pt)}else a.status=pt;if(a.status===pt)if(a.gzhead.comment){u=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>u&&(t.adler=N(t.adler,a.pending_buf,a.pending-u,u)),s(t),u=a.pending,a.pending===a.pending_buf_size)){f=1;break}f=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,c(a,f)}while(0!==f);a.gzhead.hcrc&&a.pending>u&&(t.adler=N(t.adler,a.pending_buf,a.pending-u,u)),0===f&&(a.status=yt)}else a.status=yt;if(a.status===yt&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&s(t),a.pending+2<=a.pending_buf_size&&(c(a,255&t.adler),c(a,t.adler>>8&255),t.adler=0,a.status=gt)):a.status=gt),0!==a.pending){if(s(t),0===t.avail_out)return a.last_flush=-1,z}else if(0===t.avail_in&&i(e)<=i(n)&&e!==B)return r(t,H);if(a.status===mt&&0!==t.avail_in)return r(t,H);if(0!==t.avail_in||0!==a.lookahead||e!==D&&a.status!==mt){var p=a.strategy===V?m(a,e):a.strategy===W?g(a,e):F[a.level].func(a,e);if((p===_t||p===bt)&&(a.status=mt),p===vt||p===_t)return 0===t.avail_out&&(a.last_flush=-1),z;if(p===wt&&(e===L?T._tr_align(a):e!==P&&(T._tr_stored_block(a,0,0,!1),e===R&&(o(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),s(t),0===t.avail_out))return a.last_flush=-1,z}return e!==B?z:a.wrap<=0?$:(2===a.wrap?(c(a,255&t.adler),c(a,t.adler>>8&255),c(a,t.adler>>16&255),c(a,t.adler>>24&255),c(a,255&t.total_in),c(a,t.total_in>>8&255),c(a,t.total_in>>16&255),c(a,t.total_in>>24&255)):(l(a,t.adler>>>16),l(a,65535&t.adler)),s(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?z:$)}function x(t){var e;return t&&t.state?(e=t.state.status,e!==ft&&e!==ht&&e!==dt&&e!==pt&&e!==yt&&e!==gt&&e!==mt?r(t,U):(t.state=null,e===gt?r(t,M):z)):U}var F,C=t("../utils/common"),T=t("./trees"),O=t("./adler32"),N=t("./crc32"),A=t("./messages"),D=0,L=1,R=3,B=4,P=5,z=0,$=1,U=-2,M=-3,H=-5,j=-1,Z=1,V=2,W=3,X=4,q=0,Y=2,K=8,G=9,J=15,Q=8,tt=29,et=256,nt=et+1+tt,rt=30,it=19,ot=2*nt+1,st=15,at=3,ct=258,lt=ct+at+1,ut=32,ft=42,ht=69,dt=73,pt=91,yt=103,gt=113,mt=666,vt=1,wt=2,_t=3,bt=4,St=3,Et=function(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i};F=[new Et(0,0,0,0,d),new Et(4,4,8,4,p),new Et(4,5,16,8,p),new Et(4,6,32,32,p),new Et(4,4,16,16,y),new Et(8,16,32,32,y),new Et(8,16,128,128,y),new Et(8,32,128,256,y),new Et(32,128,258,1024,y),new Et(32,258,258,4096,y)],n.deflateInit=k,n.deflateInit2=E,n.deflateReset=b,n.deflateResetKeep=_,n.deflateSetHeader=S,n.deflate=I,n.deflateEnd=x,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,n){"use strict";function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=r},{}],10:[function(t,e,n){"use strict";var r=30,i=12;e.exports=function(t,e){var n,o,s,a,c,l,u,f,h,d,p,y,g,m,v,w,_,b,S,E,k,I,x,F,C;n=t.state,o=t.next_in,F=t.input,s=o+(t.avail_in-5),a=t.next_out,C=t.output,c=a-(e-t.avail_out),l=a+(t.avail_out-257),u=n.dmax,f=n.wsize,h=n.whave,d=n.wnext,p=n.window,y=n.hold,g=n.bits,m=n.lencode,v=n.distcode,w=(1<<n.lenbits)-1,_=(1<<n.distbits)-1;t:do{15>g&&(y+=F[o++]<<g,g+=8,y+=F[o++]<<g,g+=8),b=m[y&w];e:for(;;){if(S=b>>>24,y>>>=S,g-=S,S=b>>>16&255,0===S)C[a++]=65535&b;else{if(!(16&S)){if(0===(64&S)){b=m[(65535&b)+(y&(1<<S)-1)];continue e}if(32&S){n.mode=i;break t}t.msg="invalid literal/length code",n.mode=r;break t}E=65535&b,S&=15,S&&(S>g&&(y+=F[o++]<<g,g+=8),E+=y&(1<<S)-1,y>>>=S,g-=S),15>g&&(y+=F[o++]<<g,g+=8,y+=F[o++]<<g,g+=8),b=v[y&_];n:for(;;){if(S=b>>>24,y>>>=S,g-=S,S=b>>>16&255,!(16&S)){if(0===(64&S)){b=v[(65535&b)+(y&(1<<S)-1)];continue n}t.msg="invalid distance code",n.mode=r;break t}if(k=65535&b,S&=15,S>g&&(y+=F[o++]<<g,g+=8,S>g&&(y+=F[o++]<<g,g+=8)),k+=y&(1<<S)-1,k>u){t.msg="invalid distance too far back",n.mode=r;break t}if(y>>>=S,g-=S,S=a-c,k>S){if(S=k-S,S>h&&n.sane){t.msg="invalid distance too far back",n.mode=r;break t}if(I=0,x=p,0===d){if(I+=f-S,E>S){E-=S;do C[a++]=p[I++];while(--S);I=a-k,x=C}}else if(S>d){if(I+=f+d-S,S-=d,E>S){E-=S;do C[a++]=p[I++];while(--S);if(I=0,E>d){S=d,E-=S;do C[a++]=p[I++];while(--S);I=a-k,x=C}}}else if(I+=d-S,E>S){E-=S;do C[a++]=p[I++];while(--S);I=a-k,x=C}for(;E>2;)C[a++]=x[I++],C[a++]=x[I++],C[a++]=x[I++],E-=3;E&&(C[a++]=x[I++],E>1&&(C[a++]=x[I++]))}else{I=a-k;do C[a++]=C[I++],C[a++]=C[I++],C[a++]=C[I++],E-=3;while(E>2);E&&(C[a++]=C[I++],E>1&&(C[a++]=C[I++]))}break}}break}}while(s>o&&l>a);E=g>>3,o-=E,g-=E<<3,y&=(1<<g)-1,t.next_in=o,t.next_out=a,t.avail_in=s>o?5+(s-o):5-(o-s),t.avail_out=l>a?257+(l-a):257-(a-l),n.hold=y,n.bits=g}},{}],11:[function(t,e,n){"use strict";function r(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new m.Buf16(320),this.work=new m.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=B,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new m.Buf32(pt),e.distcode=e.distdyn=new m.Buf32(yt),e.sane=1,e.back=-1,C):N}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):N}function a(t,e){var n,r;return t&&t.state?(r=t.state,0>e?(n=0,e=-e):(n=(e>>4)+1,48>e&&(e&=15)),e&&(8>e||e>15)?N:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,s(t))):N}function c(t,e){var n,r;return t?(r=new i,t.state=r,r.window=null,n=a(t,e),n!==C&&(t.state=null),n):N}function l(t){return c(t,mt)}function u(t){if(vt){var e;for(y=new m.Buf32(512),g=new m.Buf32(32),e=0;144>e;)t.lens[e++]=8;for(;256>e;)t.lens[e++]=9;for(;280>e;)t.lens[e++]=7;for(;288>e;)t.lens[e++]=8;for(b(E,t.lens,0,288,y,0,t.work,{bits:9}),e=0;32>e;)t.lens[e++]=5;b(k,t.lens,0,32,g,0,t.work,{bits:5}),vt=!1}t.lencode=y,t.lenbits=9,t.distcode=g,t.distbits=5}function f(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new m.Buf8(o.wsize)),r>=o.wsize?(m.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),m.arraySet(o.window,e,n-r,i,o.wnext),r-=i,r?(m.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(t,e){var n,i,o,s,a,c,l,h,d,p,y,g,pt,yt,gt,mt,vt,wt,_t,bt,St,Et,kt,It,xt=0,Ft=new m.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return N;n=t.state,n.mode===X&&(n.mode=q),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,i=t.input,c=t.avail_in,h=n.hold,d=n.bits,p=c,y=l,Et=C;t:for(;;)switch(n.mode){case B:if(0===n.wrap){n.mode=q;break}for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(2&n.wrap&&35615===h){n.check=0,Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0),h=0,d=0,n.mode=P;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=ft;break}if((15&h)!==R){t.msg="unknown compression method",n.mode=ft;break}if(h>>>=4,d-=4,St=(15&h)+8,0===n.wbits)n.wbits=St;else if(St>n.wbits){t.msg="invalid window size",n.mode=ft;break}n.dmax=1<<St,t.adler=n.check=1,n.mode=512&h?V:X,h=0,d=0;break;case P:for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(n.flags=h,(255&n.flags)!==R){t.msg="unknown compression method",n.mode=ft;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=ft;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0)),h=0,d=0,n.mode=z;case z:for(;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.head&&(n.head.time=h),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,Ft[2]=h>>>16&255,Ft[3]=h>>>24&255,n.check=w(n.check,Ft,4,0)),h=0,d=0,n.mode=$;case $:for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0)),h=0,d=0,n.mode=U;case U:if(1024&n.flags){for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(Ft[0]=255&h,Ft[1]=h>>>8&255,n.check=w(n.check,Ft,2,0)),h=0,d=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&(g=n.length,g>c&&(g=c),g&&(n.head&&(St=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),m.arraySet(n.head.extra,i,s,g,St)),512&n.flags&&(n.check=w(n.check,i,g,s)),c-=g,s+=g,n.length-=g),n.length))break t;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===c)break t;g=0;do St=i[s+g++],n.head&&St&&n.length<65536&&(n.head.name+=String.fromCharCode(St));while(St&&c>g);if(512&n.flags&&(n.check=w(n.check,i,g,s)),c-=g,s+=g,St)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=j;case j:if(4096&n.flags){if(0===c)break t;g=0;do St=i[s+g++],n.head&&St&&n.length<65536&&(n.head.comment+=String.fromCharCode(St));while(St&&c>g);if(512&n.flags&&(n.check=w(n.check,i,g,s)),c-=g,s+=g,St)break t}else n.head&&(n.head.comment=null);n.mode=Z;case Z:if(512&n.flags){for(;16>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(h!==(65535&n.check)){t.msg="header crc mismatch",n.mode=ft;break}h=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=X;break;case V:for(;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}t.adler=n.check=r(h),h=0,d=0,n.mode=W;case W:if(0===n.havedict)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=d,O;t.adler=n.check=1,n.mode=X;case X:if(e===x||e===F)break t;case q:if(n.last){h>>>=7&d,d-=7&d,n.mode=ct;break}for(;3>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}switch(n.last=1&h,h>>>=1,d-=1,3&h){case 0:n.mode=Y;break;case 1:if(u(n),n.mode=et,e===F){h>>>=2,d-=2;break t}break;case 2:n.mode=J;break;case 3:t.msg="invalid block type",n.mode=ft}h>>>=2,d-=2;break;case Y:for(h>>>=7&d,d-=7&d;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if((65535&h)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=ft;break}if(n.length=65535&h,h=0,d=0,n.mode=K,e===F)break t;case K:n.mode=G;case G:if(g=n.length){if(g>c&&(g=c),g>l&&(g=l),0===g)break t;m.arraySet(o,i,s,g,a),c-=g,s+=g,l-=g,a+=g,n.length-=g;break}n.mode=X;break;case J:for(;14>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(n.nlen=(31&h)+257,h>>>=5,d-=5,n.ndist=(31&h)+1,h>>>=5,d-=5,n.ncode=(15&h)+4,h>>>=4,d-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=ft;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.ncode;){for(;3>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.lens[Ct[n.have++]]=7&h,h>>>=3,d-=3}for(;n.have<19;)n.lens[Ct[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,kt={bits:n.lenbits},Et=b(S,n.lens,0,19,n.lencode,0,n.work,kt),n.lenbits=kt.bits,Et){t.msg="invalid code lengths set",n.mode=ft;break}n.have=0,n.mode=tt;case tt:for(;n.have<n.nlen+n.ndist;){for(;xt=n.lencode[h&(1<<n.lenbits)-1],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(16>vt)h>>>=gt,d-=gt,n.lens[n.have++]=vt;else{if(16===vt){for(It=gt+2;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(h>>>=gt,d-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=ft;break}St=n.lens[n.have-1],g=3+(3&h),h>>>=2,d-=2}else if(17===vt){for(It=gt+3;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=gt,d-=gt,St=0,g=3+(7&h),h>>>=3,d-=3}else{for(It=gt+7;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=gt,d-=gt,St=0,g=11+(127&h),h>>>=7,d-=7}if(n.have+g>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=ft;break}for(;g--;)n.lens[n.have++]=St}}if(n.mode===ft)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=ft;break}if(n.lenbits=9,kt={bits:n.lenbits},Et=b(E,n.lens,0,n.nlen,n.lencode,0,n.work,kt),n.lenbits=kt.bits,Et){t.msg="invalid literal/lengths set",n.mode=ft;break}if(n.distbits=6,n.distcode=n.distdyn,kt={bits:n.distbits},Et=b(k,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,kt),n.distbits=kt.bits,Et){t.msg="invalid distances set",n.mode=ft;break}if(n.mode=et,e===F)break t;case et:n.mode=nt;case nt:if(c>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=d,_(t,y),a=t.next_out,o=t.output,l=t.avail_out,s=t.next_in,i=t.input,c=t.avail_in,h=n.hold,d=n.bits,n.mode===X&&(n.back=-1);break}for(n.back=0;xt=n.lencode[h&(1<<n.lenbits)-1],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(mt&&0===(240&mt)){for(wt=gt,_t=mt,bt=vt;xt=n.lencode[bt+((h&(1<<wt+_t)-1)>>wt)],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=wt+gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=wt,d-=wt,n.back+=wt}if(h>>>=gt,d-=gt,n.back+=gt,n.length=vt,0===mt){n.mode=at;break}if(32&mt){n.back=-1,n.mode=X;break}if(64&mt){t.msg="invalid literal/length code",n.mode=ft;break}n.extra=15&mt,n.mode=rt;case rt:if(n.extra){for(It=n.extra;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=it;case it:for(;xt=n.distcode[h&(1<<n.distbits)-1],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(0===(240&mt)){for(wt=gt,_t=mt,bt=vt;xt=n.distcode[bt+((h&(1<<wt+_t)-1)>>wt)],gt=xt>>>24,mt=xt>>>16&255,vt=65535&xt,!(d>=wt+gt);){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}h>>>=wt,d-=wt,n.back+=wt}if(h>>>=gt,d-=gt,n.back+=gt,64&mt){t.msg="invalid distance code",n.mode=ft;break}n.offset=vt,n.extra=15&mt,n.mode=ot;case ot:if(n.extra){for(It=n.extra;It>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=ft;break}n.mode=st;case st:if(0===l)break t;if(g=y-l,n.offset>g){if(g=n.offset-g,g>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=ft;break}g>n.wnext?(g-=n.wnext,pt=n.wsize-g):pt=n.wnext-g,g>n.length&&(g=n.length),yt=n.window}else yt=o,pt=a-n.offset,g=n.length;g>l&&(g=l),l-=g,n.length-=g;do o[a++]=yt[pt++];while(--g);0===n.length&&(n.mode=nt);break;case at:if(0===l)break t;o[a++]=n.length,l--,n.mode=nt;break;case ct:if(n.wrap){for(;32>d;){if(0===c)break t;c--,h|=i[s++]<<d,d+=8}if(y-=l,t.total_out+=y,n.total+=y,y&&(t.adler=n.check=n.flags?w(n.check,o,y,a-y):v(n.check,o,y,a-y)),y=l,(n.flags?h:r(h))!==n.check){t.msg="incorrect data check",n.mode=ft;break}h=0,d=0}n.mode=lt;case lt:if(n.wrap&&n.flags){for(;32>d;){if(0===c)break t;c--,h+=i[s++]<<d,d+=8}if(h!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=ft;break}h=0,d=0}n.mode=ut;case ut:Et=T;break t;case ft:Et=A;break t;case ht:return D;case dt:default:return N}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=c,n.hold=h,n.bits=d,(n.wsize||y!==t.avail_out&&n.mode<ft&&(n.mode<ct||e!==I))&&f(t,t.output,t.next_out,y-t.avail_out)?(n.mode=ht,D):(p-=t.avail_in,y-=t.avail_out,t.total_in+=p,t.total_out+=y,n.total+=y,n.wrap&&y&&(t.adler=n.check=n.flags?w(n.check,o,y,t.next_out-y):v(n.check,o,y,t.next_out-y)),t.data_type=n.bits+(n.last?64:0)+(n.mode===X?128:0)+(n.mode===et||n.mode===K?256:0),(0===p&&0===y||e===I)&&Et===C&&(Et=L),Et)}function d(t){if(!t||!t.state)return N;var e=t.state;return e.window&&(e.window=null),t.state=null,C}function p(t,e){var n;return t&&t.state?(n=t.state,0===(2&n.wrap)?N:(n.head=e,e.done=!1,C)):N}var y,g,m=t("../utils/common"),v=t("./adler32"),w=t("./crc32"),_=t("./inffast"),b=t("./inftrees"),S=0,E=1,k=2,I=4,x=5,F=6,C=0,T=1,O=2,N=-2,A=-3,D=-4,L=-5,R=8,B=1,P=2,z=3,$=4,U=5,M=6,H=7,j=8,Z=9,V=10,W=11,X=12,q=13,Y=14,K=15,G=16,J=17,Q=18,tt=19,et=20,nt=21,rt=22,it=23,ot=24,st=25,at=26,ct=27,lt=28,ut=29,ft=30,ht=31,dt=32,pt=852,yt=592,gt=15,mt=gt,vt=!0;n.inflateReset=s,n.inflateReset2=a,n.inflateResetKeep=o,n.inflateInit=l,n.inflateInit2=c,n.inflate=h,n.inflateEnd=d,n.inflateGetHeader=p,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,n){"use strict";var r=t("../utils/common"),i=15,o=852,s=592,a=0,c=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,p,y,g,m,v){var w,_,b,S,E,k,I,x,F,C=v.bits,T=0,O=0,N=0,A=0,D=0,L=0,R=0,B=0,P=0,z=0,$=null,U=0,M=new r.Buf16(i+1),H=new r.Buf16(i+1),j=null,Z=0;for(T=0;i>=T;T++)M[T]=0;for(O=0;p>O;O++)M[e[n+O]]++;for(D=C,A=i;A>=1&&0===M[A];A--);if(D>A&&(D=A),0===A)return y[g++]=20971520,y[g++]=20971520,v.bits=1,0;for(N=1;A>N&&0===M[N];N++);for(N>D&&(D=N),B=1,T=1;i>=T;T++)if(B<<=1,B-=M[T],0>B)return-1;if(B>0&&(t===a||1!==A))return-1;for(H[1]=0,T=1;i>T;T++)H[T+1]=H[T]+M[T];for(O=0;p>O;O++)0!==e[n+O]&&(m[H[e[n+O]]++]=O);if(t===a?($=j=m,k=19):t===c?($=u,U-=257,j=f,Z-=257,k=256):($=h,j=d,k=-1),z=0,O=0,T=N,E=g,L=D,R=0,b=-1,P=1<<D,S=P-1,t===c&&P>o||t===l&&P>s)return 1;for(var V=0;;){V++,I=T-R,m[O]<k?(x=0,F=m[O]):m[O]>k?(x=j[Z+m[O]],F=$[U+m[O]]):(x=96,F=0),w=1<<T-R,_=1<<L,N=_;do _-=w,y[E+(z>>R)+_]=I<<24|x<<16|F|0;while(0!==_);for(w=1<<T-1;z&w;)w>>=1;if(0!==w?(z&=w-1,z+=w):z=0,O++,0===--M[T]){if(T===A)break;T=e[n+m[O]]}if(T>D&&(z&S)!==b){for(0===R&&(R=D),E+=N,L=T-R,B=1<<L;A>L+R&&(B-=M[L+R],!(0>=B));)L++,B<<=1;if(P+=1<<L,t===c&&P>o||t===l&&P>s)return 1;b=z&S,y[b]=D<<24|L<<16|E-g|0}}return 0!==z&&(y[E+z]=T-R<<24|64<<16|0),v.bits=D,0}},{"../utils/common":3}],13:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,n){"use strict";function r(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t){return 256>t?st[t]:st[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,n){t.bi_valid>X-n?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>X-t.bi_valid,t.bi_valid+=n-X):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function a(t,e,n){s(t,n[2*e],n[2*e+1])}function c(t,e){var n=0;do n|=1&t,t>>>=1,n<<=1;while(--e>0);return n>>>1}function l(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function u(t,e){var n,r,i,o,s,a,c=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,p=e.stat_desc.max_length,y=0;for(o=0;W>=o;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;V>n;n++)r=t.heap[n],o=c[2*c[2*r+1]+1]+1,o>p&&(o=p,y++),c[2*r+1]=o,r>l||(t.bl_count[o]++,s=0,r>=d&&(s=h[r-d]),a=c[2*r],t.opt_len+=a*(o+s),f&&(t.static_len+=a*(u[2*r+1]+s)));if(0!==y){do{for(o=p-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[p]--,y-=2}while(y>0);for(o=p;0!==o;o--)for(r=t.bl_count[o];0!==r;)i=t.heap[--n],i>l||(c[2*i+1]!==o&&(t.opt_len+=(o-c[2*i+1])*c[2*i],c[2*i+1]=o),r--)}}function f(t,e,n){var r,i,o=new Array(W+1),s=0;for(r=1;W>=r;r++)o[r]=s=s+n[r-1]<<1;for(i=0;e>=i;i++){var a=t[2*i+1];0!==a&&(t[2*i]=c(o[a]++,a))}}function h(){var t,e,n,r,i,o=new Array(W+1);for(n=0,r=0;U-1>r;r++)for(ct[r]=n,t=0;t<1<<Q[r];t++)at[n++]=r;for(at[n-1]=r,i=0,r=0;16>r;r++)for(lt[r]=i,t=0;t<1<<tt[r];t++)st[i++]=r;for(i>>=7;j>r;r++)for(lt[r]=i<<7,t=0;t<1<<tt[r]-7;t++)st[256+i++]=r;for(e=0;W>=e;e++)o[e]=0;for(t=0;143>=t;)it[2*t+1]=8,t++,o[8]++;for(;255>=t;)it[2*t+1]=9,t++,o[9]++;for(;279>=t;)it[2*t+1]=7,t++,o[7]++;for(;287>=t;)it[2*t+1]=8,t++,o[8]++;for(f(it,H+1,o),t=0;j>t;t++)ot[2*t+1]=5,ot[2*t]=c(t,5);ut=new dt(it,Q,M+1,H,W),ft=new dt(ot,tt,0,j,W),ht=new dt(new Array(0),et,0,Z,q)}function d(t){var e;for(e=0;H>e;e++)t.dyn_ltree[2*e]=0;for(e=0;j>e;e++)t.dyn_dtree[2*e]=0;for(e=0;Z>e;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Y]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function y(t,e,n,r){p(t),r&&(o(t,n),o(t,~n)),O.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function g(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function m(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&g(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!g(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function v(t,e,n){var r,o,c,l,u=0;if(0!==t.last_lit)do r=t.pending_buf[t.d_buf+2*u]<<8|t.pending_buf[t.d_buf+2*u+1],o=t.pending_buf[t.l_buf+u],u++,0===r?a(t,o,e):(c=at[o],a(t,c+M+1,e),l=Q[c],0!==l&&(o-=ct[c],s(t,o,l)),r--,c=i(r),a(t,c,n),l=tt[c],0!==l&&(r-=lt[c],s(t,r,l)));while(u<t.last_lit);a(t,Y,e)}function w(t,e){var n,r,i,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=V,n=0;c>n;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=2>l?++l:0,o[2*i]=1,t.depth[i]=0,t.opt_len--,a&&(t.static_len-=s[2*i+1]);for(e.max_code=l,n=t.heap_len>>1;n>=1;n--)m(t,o,n);i=c;do n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],m(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,m(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],u(t,e),f(o,l,t.bl_count)}function _(t,e,n){var r,i,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),e[2*(n+1)+1]=65535,r=0;n>=r;r++)i=s,s=e[2*(r+1)+1],++a<c&&i===s||(l>a?t.bl_tree[2*i]+=a:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*K]++):10>=a?t.bl_tree[2*G]++:t.bl_tree[2*J]++,a=0,o=i,0===s?(c=138,l=3):i===s?(c=6,l=3):(c=7,l=4))}function b(t,e,n){var r,i,o=-1,c=e[1],l=0,u=7,f=4;for(0===c&&(u=138,f=3),r=0;n>=r;r++)if(i=c,c=e[2*(r+1)+1],!(++l<u&&i===c)){if(f>l){do a(t,i,t.bl_tree);while(0!==--l)}else 0!==i?(i!==o&&(a(t,i,t.bl_tree),l--),a(t,K,t.bl_tree),s(t,l-3,2)):10>=l?(a(t,G,t.bl_tree),s(t,l-3,3)):(a(t,J,t.bl_tree),s(t,l-11,7));l=0,o=i,0===c?(u=138,f=3):i===c?(u=6,f=3):(u=7,f=4)}}function S(t){var e;for(_(t,t.dyn_ltree,t.l_desc.max_code),_(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=Z-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function E(t,e,n,r){var i;for(s(t,e-257,5),s(t,n-1,5),s(t,r-4,4),i=0;r>i;i++)s(t,t.bl_tree[2*nt[i]+1],3);b(t,t.dyn_ltree,e-1),b(t,t.dyn_dtree,n-1)}function k(t){var e,n=4093624447;for(e=0;31>=e;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return A;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return D;for(e=32;M>e;e++)if(0!==t.dyn_ltree[2*e])return D;return A}function I(t){yt||(h(),yt=!0),t.l_desc=new pt(t.dyn_ltree,ut),t.d_desc=new pt(t.dyn_dtree,ft),t.bl_desc=new pt(t.bl_tree,ht),t.bi_buf=0,t.bi_valid=0,d(t)}function x(t,e,n,r){s(t,(R<<1)+(r?1:0),3),y(t,e,n,!0)}function F(t){s(t,B<<1,3),a(t,Y,it),l(t)}function C(t,e,n,r){var i,o,a=0;t.level>0?(t.strm.data_type===L&&(t.strm.data_type=k(t)),w(t,t.l_desc),w(t,t.d_desc),a=S(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,i>=o&&(i=o)):i=o=n+5,i>=n+4&&-1!==e?x(t,e,n,r):t.strategy===N||o===i?(s(t,(B<<1)+(r?1:0),3),v(t,it,ot)):(s(t,(P<<1)+(r?1:0),3),E(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),v(t,t.dyn_ltree,t.dyn_dtree)),d(t),r&&p(t)}function T(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(at[n]+M+1)]++,t.dyn_dtree[2*i(e)]++),t.last_lit===t.lit_bufsize-1}var O=t("../utils/common"),N=4,A=0,D=1,L=2,R=0,B=1,P=2,z=3,$=258,U=29,M=256,H=M+1+U,j=30,Z=19,V=2*H+1,W=15,X=16,q=7,Y=256,K=16,G=17,J=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rt=512,it=new Array(2*(H+2));r(it);var ot=new Array(2*j);r(ot);var st=new Array(rt);r(st);var at=new Array($-z+1);r(at);var ct=new Array(U);r(ct);var lt=new Array(j);r(lt);var ut,ft,ht,dt=function(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length},pt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},yt=!1;n._tr_init=I,n._tr_stored_block=x,n._tr_flush_block=C,n._tr_tally=T,n._tr_align=F},{"../utils/common":3}],15:[function(t,e,n){"use strict";function r(){this.input=null,this.next_in=0,
this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}],"/":[function(t,e,n){"use strict";var r=t("./lib/utils/common").assign,i=t("./lib/deflate"),o=t("./lib/inflate"),s=t("./lib/zlib/constants"),a={};r(a,i,o,s),e.exports=a},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")}),!function(t){"use strict";t.fn.selectOrDie=function(e){var n,r,i={customID:null,customClass:"",placeholder:null,placeholderOption:!1,prefix:null,cycle:!1,stripEmpty:!1,links:!1,linksExternal:!1,size:0,tabIndex:0,onChange:t.noop},o={},s=!1,a={initSoD:function(e){return o=t.extend({},i,e),this.each(function(){if(t(this).parent().hasClass("sod_select"))console.log("Select or Die: It looks like the SoD already exists");else{var e,n,r,i=t(this),s=i.data("custom-id")?i.data("custom-id"):o.customID,c=i.data("custom-class")?i.data("custom-class"):o.customClass,l=i.data("prefix")?i.data("prefix"):o.prefix,u=i.data("placeholder")?i.data("placeholder"):o.placeholder,f=i.data("placeholder-option")?i.data("placeholder-option"):o.placeholderOption,h=i.data("cycle")?i.data("cycle"):o.cycle,d=i.data("links")?i.data("links"):o.links,p=i.data("links-external")?i.data("links-external"):o.linksExternal,y=parseInt(i.data("size"))?i.data("size"):o.size,g=parseInt(i.data("tabindex"))?i.data("tabindex"):o.tabIndex?o.tabIndex:i.attr("tabindex")?i.attr("tabindex"):o.tabIndex,m=i.data("strip-empty")?i.data("strip-empty"):o.stripEmpty,v=i.prop("title")?i.prop("title"):null,w=i.is(":disabled")?" disabled":"",_="",b="",S=0;l&&(_='<span class="sod_prefix">'+l+"</span> "),b+=u&&!l?'<span class="sod_label sod_placeholder">'+u+"</span>":'<span class="sod_label">'+_+"</span>",e=t("<span/>",{id:s,class:"sod_select "+c+w,title:v,tabindex:g,html:b,"data-cycle":h,"data-links":d,"data-links-external":p,"data-placeholder":u,"data-placeholder-option":f,"data-prefix":l,"data-filter":""}).insertAfter(this),a.isTouch()&&e.addClass("touch"),n=t("<span/>",{class:"sod_list_wrapper"}).appendTo(e),r=t("<span/>",{class:"sod_list"}).appendTo(n),t("option, optgroup",i).each(function(n){var i=t(this);m&&!t.trim(i.text())?i.remove():0===n&&f&&!_?a.populateSoD(i,r,e,!0):a.populateSoD(i,r,e,!1)}),y&&(n.show(),t(".sod_option:lt("+y+")",r).each(function(){S+=t(this).outerHeight()}),n.removeAttr("style"),r.css({"max-height":S})),i.appendTo(e),e.on("focusin",a.focusSod).on("click",a.triggerSod).on("click",".sod_option",a.optionClick).on("mousemove",".sod_option",a.optionHover).on("keydown",a.keyboardUse),i.on("change",a.selectChange),t(document).on("click","label[for='"+i.attr("id")+"']",function(t){t.preventDefault(),e.focus()})}})},populateSoD:function(e,n,r,i){var o=r.data("placeholder"),s=r.data("placeholder-option"),a=r.data("prefix"),c=r.find(".sod_label"),l=e.parent(),u=e.text(),f=e.val(),h=e.data("custom-id")?e.data("custom-id"):null,d=e.data("custom-class")?e.data("custom-class"):"",p=e.is(":disabled")?" disabled ":"",y=e.is(":selected")?" selected active ":"",g=e.data("link")?" link ":"",m=e.data("link-external")?" linkexternal":"",v=e.prop("label");e.is("option")?(t("<span/>",{class:"sod_option "+d+p+y+g+m,id:h,title:u,html:u,"data-value":f}).appendTo(n),i&&!a?(r.data("label",u),r.data("placeholder",u),e.prop("disabled",!0),n.find(".sod_option:last").addClass("is-placeholder disabled"),y&&c.addClass("sod_placeholder")):y&&o&&!s&&!a?r.data("label",o):y&&r.data("label",u),(y&&!o||y&&s||y&&a)&&c.append(u),l.is("optgroup")&&(n.find(".sod_option:last").addClass("groupchild"),l.is(":disabled")&&n.find(".sod_option:last").addClass("disabled"))):t("<span/>",{class:"sod_option optgroup "+p,title:v,html:v,"data-label":v}).appendTo(n)},focusSod:function(){var e=t(this);e.hasClass("disabled")?a.blurSod(e):(a.blurSod(t(".sod_select.focus").not(e)),e.addClass("focus"),t("html").on("click.sodBlur",function(){a.blurSod(e)}))},triggerSod:function(e){e.stopPropagation();var n=t(this),i=n.find(".sod_list"),o=n.data("placeholder"),s=n.find(".active"),c=n.find(".selected");n.hasClass("disabled")||n.hasClass("open")||n.hasClass("touch")?(clearTimeout(r),n.removeClass("open"),o&&(n.find(".sod_label").get(0).lastChild.nodeValue=s.text())):(n.addClass("open"),o&&!n.data("prefix")&&n.find(".sod_label").addClass("sod_placeholder").html(o),a.listScroll(i,c),a.checkViewport(n,i))},keyboardUse:function(e){var r,i,o,c=t(this),l=c.find(".sod_list"),u=c.find(".sod_option"),f=c.find(".sod_label"),h=c.data("cycle"),d=u.filter(".active");return e.which>36&&e.which<41?(37===e.which||38===e.which?(i=d.prevAll(":not('.disabled, .optgroup')").first(),o=u.not(".disabled, .optgroup").last()):(39===e.which||40===e.which)&&(i=d.nextAll(":not('.disabled, .optgroup')").first(),o=u.not(".disabled, .optgroup").first()),!i.hasClass("sod_option")&&h&&(i=o),(i.hasClass("sod_option")||h)&&(d.removeClass("active"),i.addClass("active"),f.get(0).lastChild.nodeValue=i.text(),a.listScroll(l,i),c.hasClass("open")||(s=!0)),!1):(13===e.which||32===e.which&&c.hasClass("open")&&(" "===c.data("filter")[0]||""===c.data("filter"))?(e.preventDefault(),d.click()):32!==e.which||c.hasClass("open")||" "!==c.data("filter")[0]&&""!==c.data("filter")?27===e.which&&a.blurSod(c):(e.preventDefault(),s=!1,c.click()),void(0!==e.which&&(clearTimeout(n),c.data("filter",c.data("filter")+String.fromCharCode(e.which)),r=u.filter(function(){return 0===t(this).text().toLowerCase().indexOf(c.data("filter").toLowerCase())}).not(".disabled, .optgroup").first(),r.length&&(d.removeClass("active"),r.addClass("active"),a.listScroll(l,r),f.get(0).lastChild.nodeValue=r.text(),c.hasClass("open")||(s=!0)),n=setTimeout(function(){c.data("filter","")},500))))},optionHover:function(){var e=t(this);e.hasClass("disabled")||e.hasClass("optgroup")||e.siblings().removeClass("active").end().addClass("active")},optionClick:function(e){e.stopPropagation();var n=t(this),i=n.closest(".sod_select"),o=n.hasClass("disabled"),s=n.hasClass("optgroup"),a=i.find(".sod_option:not('.optgroup')").index(this);i.hasClass("touch")||(o||s||(i.find(".selected, .sod_placeholder").removeClass("selected sod_placeholder"),n.addClass("selected"),i.find("select option")[a].selected=!0,i.find("select").change()),clearTimeout(r),i.removeClass("open"))},selectChange:function(){var e=t(this),n=e.find(":selected"),r=n.text(),i=e.closest(".sod_select");i.find(".sod_label").get(0).lastChild.nodeValue=r,i.data("label",r),o.onChange.call(this),!i.data("links")&&!n.data("link")||n.data("link-external")?(i.data("links-external")||n.data("link-external"))&&window.open(n.val(),"_blank"):window.location.href=n.val()},blurSod:function(e){if(t("body").find(e).length){var n=e.data("label"),i=e.data("placeholder"),o=e.find(".active"),a=e.find(".selected"),c=!1;clearTimeout(r),s&&!o.hasClass("selected")?(o.click(),c=!0):o.hasClass("selected")||(o.removeClass("active"),a.addClass("active")),!c&&i?e.find(".sod_label").get(0).lastChild.nodeValue=a.text():c||(e.find(".sod_label").get(0).lastChild.nodeValue=n),s=!1,e.removeClass("open focus"),e.blur(),t("html").off(".sodBlur")}},checkViewport:function(e,n){var i=e[0].getBoundingClientRect(),o=n.outerHeight();i.bottom+o+10>t(window).height()&&i.top-o>10?e.addClass("above"):e.removeClass("above"),r=setTimeout(function(){a.checkViewport(e,n)},200)},listScroll:function(t,e){var n=t[0].getBoundingClientRect(),r=e[0].getBoundingClientRect();n.top>r.top?t.scrollTop(t.scrollTop()-n.top+r.top):n.bottom<r.bottom&&t.scrollTop(t.scrollTop()-n.bottom+r.bottom)},isTouch:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}},c={destroy:function(){return this.each(function(){var e=t(this),n=e.parent();n.hasClass("sod_select")?(e.off("change"),n.find("span").remove(),e.unwrap()):console.log("Select or Die: There's no SoD to destroy")})},update:function(){return this.each(function(){var e=t(this),n=e.parent(),r=n.find(".sod_list:first");n.hasClass("sod_select")?(r.empty(),n.find(".sod_label").get(0).lastChild.nodeValue="",e.is(":disabled")&&n.addClass("disabled"),t("option, optgroup",e).each(function(){a.populateSoD(t(this),r,n)})):console.log("Select or Die: There's no SoD to update")})},disable:function(e){return this.each(function(){var n=t(this),r=n.parent();r.hasClass("sod_select")?"undefined"!=typeof e?(r.find(".sod_list:first .sod_option[data-value='"+e+"']").addClass("disabled"),r.find(".sod_list:first .sod_option[data-label='"+e+"']").nextUntil(":not(.groupchild)").addClass("disabled"),t("option[value='"+e+"'], optgroup[label='"+e+"']",this).prop("disabled",!0)):r.hasClass("sod_select")&&(r.addClass("disabled"),n.prop("disabled",!0)):console.log("Select or Die: There's no SoD to disable")})},enable:function(e){return this.each(function(){var n=t(this),r=n.parent();r.hasClass("sod_select")?"undefined"!=typeof e?(r.find(".sod_list:first .sod_option[data-value='"+e+"']").removeClass("disabled"),r.find(".sod_list:first .sod_option[data-label='"+e+"']").nextUntil(":not(.groupchild)").removeClass("disabled"),t("option[value='"+e+"'], optgroup[label='"+e+"']",this).prop("disabled",!1)):r.hasClass("sod_select")&&(r.removeClass("disabled"),n.prop("disabled",!1)):console.log("Select or Die: There's no SoD to enable")})}};return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error('Select or Die: Oh no! No such method "'+e+'" for the SoD instance'):a.initSoD.apply(this,arguments)}}(jQuery);
//# sourceMappingURL=build.js.map
