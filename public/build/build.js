!function(r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).BrowserFS=r()}(function(){return function g(q,l,n){function f(d,a){if(!l[d]){if(!q[d]){var c="function"==typeof require&&require;if(!a&&c)return c(d,!0);if(e)return e(d,!0);c=Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c;}c=l[d]={exports:{}};
q[d][0].call(c.exports,function(b){var c=q[d][1][b];return f(c?c:b)},c,c.exports,g,q,l,n)}return l[d].exports}for(var e="function"==typeof require&&require,d=0;d<n.length;d++)f(n[d]);return f}({1:[function(g,q,l){!function(){function g(){}function f(b){var c=!1;return function(){if(c)throw Error("Callback was already called.");c=!0;b.apply(this,arguments)}}function e(b){var c=!1;return function(){c||(c=!0,b.apply(this,arguments))}}function d(b){return F(b)||"number"==typeof b.length&&0<=b.length&&
0===b.length%1}function p(b,c){return d(b)?a(b,c):h(b,c)}function a(b,c){for(var a=-1,m=b.length;++a<m;)c(b[a],a,b)}function c(b,c){for(var a=-1,m=b.length,d=Array(m);++a<m;)d[a]=c(b[a],a,b);return d}function b(b){return c(Array(b),function(b,c){return c})}function k(b,c,m){return a(b,function(b,a,d){m=c(m,b,a,d)}),m}function h(b,c){a(Q(b),function(a){c(b[a],a)})}function z(b){var c,a,m=-1;return d(b)?(c=b.length,function(){return m++,c>m?m:null}):(a=Q(b),c=a.length,function(){return m++,c>m?a[m]:
null})}function M(b,c){c=c||0;var a=-1,m=b.length;c&&(m-=c,m=0>m?0:m);for(var d=Array(m);++a<m;)d[a]=b[a+c];return d}function G(b){return function(c,a,m){return b(c,m)}}function t(b){return function(c,a,m){m=e(m||g);c=c||[];var d=z(c);if(0>=b)return m(null);var h=!1,E=0,k=!1;!function V(){if(h&&0>=E)return m(null);for(;b>E&&!k;){var t=d();if(null===t)return h=!0,void(0>=E&&m(null));E+=1;a(c[t],t,f(function(b){--E;b?(m(b),k=!0):V()}))}}()}}function m(b){return function(c,a,m){return b(A.eachOf,c,a,
m)}}function E(b,c){return function(a,m,d){return c(t(b),a,m,d)}}function B(b){return function(c,a,m){return b(A.eachOfSeries,c,a,m)}}function C(b,c,a,m){m=e(m||g);var d=[];b(c,function(b,c,m){a(b,function(b,a){d[c]=a;m(b)})},function(b){m(b,d)})}function T(b,a,m,d){var h=[];a=c(a,function(b,c){return{index:c,value:b}});b(a,function(b,c,a){m(b.value,function(c){c&&h.push(b);a()})},function(){d(c(h.sort(function(b,c){return b.index-c.index}),function(b){return b.value}))})}function H(b,a,m,d){var h=
[];a=c(a,function(b,c){return{index:c,value:b}});b(a,function(b,c,a){m(b.value,function(c){c||h.push(b);a()})},function(){d(c(h.sort(function(b,c){return b.index-c.index}),function(b){return b.value}))})}function x(b,c,a,m){b(c,function(b,c,d){a(b,function(c){c?(m(b),m=g):d()})},function(){m()})}function y(b,c,a){a=a||g;var m=d(c)?[]:{};b(c,function(b,c,a){b(function(b){var d=M(arguments,1);1>=d.length&&(d=d[0]);m[c]=d;a(b)})},function(b){a(b,m)})}function K(b,c,a,m){var d=[];b(c,function(b,c,m){a(b,
function(b,c){d=d.concat(c||[]);m(b)})},function(b){m(b,d)})}function L(b,m,d){function h(b,c,m,d){if(null!=d&&"function"!=typeof d)throw Error("task callback must be a function");return b.started=!0,F(c)||(c=[c]),0===c.length&&b.idle()?A.setImmediate(function(){b.drain()}):(a(c,function(c){c={data:c,callback:d||g};m?b.tasks.unshift(c):b.tasks.push(c);b.tasks.length===b.concurrency&&b.saturated()}),void A.setImmediate(b.process))}function E(b,c){return function(){--k;var m=arguments;a(c,function(b){b.callback.apply(b,
m)});0===b.tasks.length+k&&b.drain();b.process()}}if(null==m)m=1;else if(0===m)throw Error("Concurrency must not be zero");var k=0,t={tasks:[],concurrency:m,saturated:g,empty:g,drain:g,started:!1,paused:!1,push:function(b,c){h(t,b,!1,c)},kill:function(){t.drain=g;t.tasks=[]},unshift:function(b,c){h(t,b,!0,c)},process:function(){if(!t.paused&&k<t.concurrency&&t.tasks.length)for(;k<t.concurrency&&t.tasks.length;){var a=d?t.tasks.splice(0,d):t.tasks.splice(0,t.tasks.length),m=c(a,function(b){return b.data});
0===t.tasks.length&&t.empty();k+=1;a=f(E(t,a));b(m,a)}},length:function(){return t.tasks.length},running:function(){return k},idle:function(){return 0===t.tasks.length+k},pause:function(){t.paused=!0},resume:function(){if(!1!==t.paused){t.paused=!1;for(var b=Math.min(t.concurrency,t.tasks.length),c=1;b>=c;c++)A.setImmediate(t.process)}}};return t}function l(b){return function(c){var m=M(arguments,1);c.apply(null,m.concat([function(c){var m=M(arguments,1);"undefined"!=typeof console&&(c?console.error&&
console.error(c):console[b]&&a(m,function(c){console[b](c)}))}]))}}function D(c){return function(a,m,d){c(b(a),m,d)}}function S(b,c){function a(){var m=this,d=M(arguments),h=d.pop();return b(c,function(b,c,a){b.apply(m,d.concat([a]))},h)}if(2<arguments.length){var m=M(arguments,2);return a.apply(this,m)}return a}function X(b){return function(){var c=M(arguments),a=c.pop();c.push(function(){var b=arguments;m?A.setImmediate(function(){a.apply(null,b)}):a.apply(null,b)});var m=!0;b.apply(this,c);m=!1}}
var w,u,A={};w="object"==typeof window&&this===window?window:"object"==typeof global&&this===global?global:this;null!=w&&(u=w.async);A.noConflict=function(){return w.async=u,A};var aa,N=Object.prototype.toString,F=Array.isArray||function(b){return"[object Array]"===N.call(b)},Q=Object.keys||function(b){var c=[],a;for(a in b)b.hasOwnProperty(a)&&c.push(a);return c};"function"==typeof setImmediate&&(aa=setImmediate);"undefined"!=typeof process&&process.nextTick?(A.nextTick=process.nextTick,aa?A.setImmediate=
function(b){aa(b)}:A.setImmediate=A.nextTick):aa?(A.nextTick=function(b){aa(b)},A.setImmediate=A.nextTick):(A.nextTick=function(b){setTimeout(b,0)},A.setImmediate=A.nextTick);A.forEach=A.each=function(b,c,a){return A.eachOf(b,G(c),a)};A.forEachSeries=A.eachSeries=function(b,c,a){return A.eachOfSeries(b,G(c),a)};A.forEachLimit=A.eachLimit=function(b,c,a,m){return t(c)(b,G(a),m)};A.forEachOf=A.eachOf=function(b,c,a){function m(b){b?a(b):(E+=1,E>=h&&a(null))}a=e(a||g);b=b||[];var h=d(b)?b.length:Q(b).length,
E=0;return h?void p(b,function(a,d){c(b[d],d,f(m))}):a(null)};A.forEachOfSeries=A.eachOfSeries=function(b,c,a){function m(){var E=!0;return null===h?a(null):(c(b[h],h,f(function(b){if(b)a(b);else{if(h=d(),null===h)return a(null);E?A.nextTick(m):m()}})),void(E=!1))}a=e(a||g);b=b||[];var d=z(b),h=d();m()};A.forEachOfLimit=A.eachOfLimit=function(b,c,a,m){t(c)(b,a,m)};A.map=m(C);A.mapSeries=B(C);A.mapLimit=function(b,c,a,m){return E(c,C)(b,a,m)};A.inject=A.foldl=A.reduce=function(b,c,a,m){A.eachOfSeries(b,
function(b,m,d){a(c,b,function(b,a){c=a;d(b)})},function(b){m(b||null,c)})};A.foldr=A.reduceRight=function(b,a,m,d){b=c(b,function(b){return b}).reverse();A.reduce(b,a,m,d)};A.select=A.filter=m(T);A.selectSeries=A.filterSeries=B(T);A.reject=m(H);A.rejectSeries=B(H);A.detect=m(x);A.detectSeries=B(x);A.any=A.some=function(b,c,a){A.eachOf(b,function(b,m,d){c(b,function(b){b&&(a(!0),a=g);d()})},function(){a(!1)})};A.all=A.every=function(b,c,a){A.eachOf(b,function(b,m,d){c(b,function(b){b||(a(!1),a=g);
d()})},function(){a(!0)})};A.sortBy=function(b,a,m){function d(b,c){var a=b.criteria,m=c.criteria;return m>a?-1:a>m?1:0}A.map(b,function(b,c){a(b,function(a,m){a?c(a):c(null,{value:b,criteria:m})})},function(b,a){return b?m(b):void m(null,c(a.sort(d),function(b){return b.value}))})};A.auto=function(b,c){function m(b){B.unshift(b)}function d(){E--;a(B.slice(0),function(b){b()})}c=e(c||g);var h=Q(b),E=h.length;if(!E)return c(null);var t={},B=[];m(function(){E||c(null,t)});a(h,function(h){function E(b){var m=
M(arguments,1);if(1>=m.length&&(m=m[0]),b){var k={};a(Q(t),function(b){k[b]=t[b]});k[h]=m;c(b,k)}else t[h]=m,A.setImmediate(d)}function y(){return k(e,function(b,c){return b&&t.hasOwnProperty(c)},!0)&&!t.hasOwnProperty(h)}function z(){if(y()){a:for(var b=0;b<B.length;b+=1)if(B[b]===z){B.splice(b,1);break a}p[p.length-1](E,t)}}for(var C,p=F(b[h])?b[h]:[b[h]],e=p.slice(0,Math.abs(p.length-1))||[],D=e.length;D--;){if(!(C=b[e[D]]))throw Error("Has inexistant dependency");if(F(C)&&~C.indexOf(h))throw Error("Has cyclic dependencies");
}y()?p[p.length-1](E,t):m(z)})};A.retry=function(b,c,a){function m(h,E){function k(b,c){return function(a){b(function(b,m){a(!b||c,{err:b,result:m})},E)}}for(;b;)d.push(k(c,!--b));A.series(d,function(b,c){c=c[c.length-1];(h||a)(c.err,c.result)})}var d=[];return"function"==typeof b&&(a=c,c=b,b=5),b=parseInt(b,10)||5,a?m():m};A.waterfall=function(b,c){function a(b){return function(m){if(m)c.apply(null,arguments);else{var d=M(arguments,1),h=b.next();h?d.push(a(h)):d.push(c);X(b).apply(null,d)}}}return(c=
e(c||g),F(b))?b.length?void a(A.iterator(b))():c():c(Error("First argument to waterfall must be an array of functions"))};A.parallel=function(b,c){y(A.eachOf,b,c)};A.parallelLimit=function(b,c,a){y(t(c),b,a)};A.series=function(b,c){c=c||g;var a=d(b)?[]:{};A.eachOfSeries(b,function(b,c,m){b(function(b){var d=M(arguments,1);1>=d.length&&(d=d[0]);a[c]=d;m(b)})},function(b){c(b,a)})};A.iterator=function(b){function c(a){function m(){return b.length&&b[a].apply(null,arguments),m.next()}return m.next=function(){return a<
b.length-1?c(a+1):null},m}return c(0)};A.apply=function(b){var c=M(arguments,1);return function(){return b.apply(null,c.concat(M(arguments)))}};A.concat=m(K);A.concatSeries=B(K);A.whilst=function(b,c,a){b()?c(function(m){return m?a(m):void A.whilst(b,c,a)}):a(null)};A.doWhilst=function(b,c,a){b(function(m){if(m)return a(m);var d=M(arguments,1);c.apply(null,d)?A.doWhilst(b,c,a):a(null)})};A.until=function(b,c,a){b()?a(null):c(function(m){return m?a(m):void A.until(b,c,a)})};A.doUntil=function(b,c,
a){b(function(m){if(m)return a(m);var d=M(arguments,1);c.apply(null,d)?a(null):A.doUntil(b,c,a)})};A.queue=function(b,c){return L(function(c,a){b(c[0],a)},c,1)};A.priorityQueue=function(b,c){function m(b,c){return b.priority-c.priority}function d(b,c,a){for(var m=-1,h=b.length-1;h>m;){var E=m+(h-m+1>>>1);0<=a(c,b[E])?m=E:h=E-1}return m}function h(b,c,E,k){if(null!=k&&"function"!=typeof k)throw Error("task callback must be a function");return b.started=!0,F(c)||(c=[c]),0===c.length?A.setImmediate(function(){b.drain()}):
void a(c,function(c){c={data:c,priority:E,callback:"function"==typeof k?k:g};b.tasks.splice(d(b.tasks,c,m)+1,0,c);b.tasks.length===b.concurrency&&b.saturated();A.setImmediate(b.process)})}var E=A.queue(b,c);return E.push=function(b,c,a){h(E,b,c,a)},delete E.unshift,E};A.cargo=function(b,c){return L(b,1,c)};A.log=l("log");A.dir=l("dir");A.memoize=function(b,c){function a(){var h=M(arguments),E=h.pop(),k=c.apply(null,h);k in m?A.nextTick(function(){E.apply(null,m[k])}):k in d?d[k].push(E):(d[k]=[E],
b.apply(null,h.concat([function(){m[k]=M(arguments);var b=d[k];delete d[k];for(var c=0,a=b.length;a>c;c++)b[c].apply(null,arguments)}])))}var m={},d={};return c=c||function(b){return b},a.memo=m,a.unmemoized=b,a};A.unmemoize=function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}};A.times=D(A.map);A.timesSeries=D(A.mapSeries);A.timesLimit=function(c,a,m,d){return A.mapLimit(b(c),a,m,d)};A.seq=function(){var b=arguments;return function(){var c=this,a=M(arguments),m=a.slice(-1)[0];
"function"==typeof m?a.pop():m=g;A.reduce(b,a,function(b,a,m){a.apply(c,b.concat([function(){var b=arguments[0],c=M(arguments,1);m(b,c)}]))},function(b,a){m.apply(c,[b].concat(a))})}};A.compose=function(){return A.seq.apply(null,Array.prototype.reverse.call(arguments))};A.applyEach=function(){var b=M(arguments);return S.apply(null,[A.eachOf].concat(b))};A.applyEachSeries=function(){var b=M(arguments);return S.apply(null,[A.eachOfSeries].concat(b))};A.forever=function(b,c){function a(b){return b?m(b):
void d(a)}var m=f(c||g),d=X(b);a()};A.ensureAsync=X;"undefined"!=typeof q&&q.exports?q.exports=A:w.async=A}()},{}],2:[function(g,q,l){!function(g){"object"==typeof l&&"undefined"!=typeof q?q.exports=g():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=g()}(function(){return function f(e,d,p){function a(b,h){if(!d[b]){if(!e[b]){var z="function"==typeof g&&g;if(!h&&z)return z(b,!0);if(c)return c(b,!0);z=Error("Cannot find module '"+b+"'");
throw z.code="MODULE_NOT_FOUND",z;}z=d[b]={exports:{}};e[b][0].call(z.exports,function(c){var d=e[b][1][c];return a(d?d:c)},z,z.exports,f,e,d,p)}return d[b].exports}for(var c="function"==typeof g&&g,b=0;b<p.length;b++)a(p[b]);return a}({1:[function(f,e,d){f="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;d.assign=function(c){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var a=b.shift();if(a){if("object"!=typeof a)throw new TypeError(a+
"must be non-object");for(var d in a)a.hasOwnProperty(d)&&(c[d]=a[d])}}return c};d.shrinkBuf=function(c,b){return c.length===b?c:c.subarray?c.subarray(0,b):(c.length=b,c)};var p={arraySet:function(c,b,a,d,z){if(b.subarray&&c.subarray)return void c.set(b.subarray(a,a+d),z);for(var p=0;d>p;p++)c[z+p]=b[a+p]},flattenChunks:function(c){var b,a,d,z,p;b=d=0;for(a=c.length;a>b;b++)d+=c[b].length;p=new Uint8Array(d);b=d=0;for(a=c.length;a>b;b++)z=c[b],p.set(z,d),d+=z.length;return p}},a={arraySet:function(c,
b,a,d,z){for(var p=0;d>p;p++)c[z+p]=b[a+p]},flattenChunks:function(c){return[].concat.apply([],c)}};d.setTyped=function(c){c?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,p)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,a))};d.setTyped(f)},{}],2:[function(f,e,d){function p(d,k){if(65537>k&&(d.subarray&&b||!d.subarray&&c))return String.fromCharCode.apply(null,a.shrinkBuf(d,k));for(var p="",e=0;k>e;e++)p+=String.fromCharCode(d[e]);return p}var a=f("./common"),c=!0,b=!0;
try{String.fromCharCode.apply(null,[0])}catch(h){c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){b=!1}var k=new a.Buf8(256);for(f=0;256>f;f++)k[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;k[254]=k[254]=1;d.string2buf=function(b){var c,d,k,t,m,E=b.length,B=0;for(t=0;E>t;t++)d=b.charCodeAt(t),55296===(64512&d)&&E>t+1&&(k=b.charCodeAt(t+1),56320===(64512&k)&&(d=65536+(d-55296<<10)+(k-56320),t++)),B+=128>d?1:2048>d?2:65536>d?3:4;c=new a.Buf8(B);for(t=m=0;B>m;t++)d=b.charCodeAt(t),
55296===(64512&d)&&E>t+1&&(k=b.charCodeAt(t+1),56320===(64512&k)&&(d=65536+(d-55296<<10)+(k-56320),t++)),128>d?c[m++]=d:2048>d?(c[m++]=192|d>>>6,c[m++]=128|63&d):65536>d?(c[m++]=224|d>>>12,c[m++]=128|d>>>6&63,c[m++]=128|63&d):(c[m++]=240|d>>>18,c[m++]=128|d>>>12&63,c[m++]=128|d>>>6&63,c[m++]=128|63&d);return c};d.buf2binstring=function(b){return p(b,b.length)};d.binstring2buf=function(b){for(var c=new a.Buf8(b.length),d=0,k=c.length;k>d;d++)c[d]=b.charCodeAt(d);return c};d.buf2string=function(b,c){var a,
d,t,m,E=c||b.length,B=Array(2*E);for(a=d=0;E>a;)if(t=b[a++],128>t)B[d++]=t;else if(m=k[t],4<m)B[d++]=65533,a+=m-1;else{for(t&=2===m?31:3===m?15:7;1<m&&E>a;)t=t<<6|63&b[a++],m--;1<m?B[d++]=65533:65536>t?B[d++]=t:(t-=65536,B[d++]=55296|t>>10&1023,B[d++]=56320|1023&t)}return p(B,d)};d.utf8border=function(b,c){var a;c=c||b.length;c>b.length&&(c=b.length);for(a=c-1;0<=a&&128===(192&b[a]);)a--;return 0>a?c:0===a?c:a+k[b[a]]>c?a:c}},{"./common":1}],3:[function(f,e,d){e.exports=function(d,a,c,b){var k=65535&
d|0;d=d>>>16&65535|0;for(var h=0;0!==c;){h=2E3<c?2E3:c;c-=h;do k=k+a[b++]|0,d=d+k|0;while(--h);k%=65521;d%=65521}return k|d<<16|0}},{}],4:[function(f,e,d){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,
Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(f,e,d){var p=function(){for(var a,c=[],b=0;256>b;b++){a=b;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;c[b]=a}return c}();e.exports=function(a,c,b,d){b=d+b;for(a^=-1;b>d;d++)a=a>>>8^p[255&(a^c[d])];return-1^a}},{}],6:[function(f,e,d){e.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],7:[function(f,e,d){e.exports=function(d,a){var c,
b,k,h,z,e,G,t,m,E,B,C,f,g,x,y,K,L,l,D,S,q,w,u;c=d.state;b=d.next_in;w=d.input;k=b+(d.avail_in-5);h=d.next_out;u=d.output;z=h-(a-d.avail_out);e=h+(d.avail_out-257);G=c.dmax;t=c.wsize;m=c.whave;E=c.wnext;B=c.window;C=c.hold;f=c.bits;g=c.lencode;x=c.distcode;y=(1<<c.lenbits)-1;K=(1<<c.distbits)-1;a:do b:for(15>f&&(C+=w[b++]<<f,f+=8,C+=w[b++]<<f,f+=8),L=g[C&y];;){if(l=L>>>24,C>>>=l,f-=l,l=L>>>16&255,0===l)u[h++]=65535&L;else{if(!(16&l)){if(0===(64&l)){L=g[(65535&L)+(C&(1<<l)-1)];continue b}if(32&l){c.mode=
12;break a}d.msg="invalid literal/length code";c.mode=30;break a}D=65535&L;(l&=15)&&(l>f&&(C+=w[b++]<<f,f+=8),D+=C&(1<<l)-1,C>>>=l,f-=l);15>f&&(C+=w[b++]<<f,f+=8,C+=w[b++]<<f,f+=8);L=x[C&K];c:for(;;){if(l=L>>>24,C>>>=l,f-=l,l=L>>>16&255,!(16&l)){if(0===(64&l)){L=x[(65535&L)+(C&(1<<l)-1)];continue c}d.msg="invalid distance code";c.mode=30;break a}if(S=65535&L,l&=15,l>f&&(C+=w[b++]<<f,f+=8,l>f&&(C+=w[b++]<<f,f+=8)),S+=C&(1<<l)-1,S>G){d.msg="invalid distance too far back";c.mode=30;break a}if(C>>>=l,
f-=l,l=h-z,S>l){if(l=S-l,l>m&&c.sane){d.msg="invalid distance too far back";c.mode=30;break a}if(L=0,q=B,0===E){if(L+=t-l,D>l){D-=l;do u[h++]=B[L++];while(--l);L=h-S;q=u}}else if(l>E){if(L+=t+E-l,l-=E,D>l){D-=l;do u[h++]=B[L++];while(--l);if(L=0,D>E){l=E;D-=l;do u[h++]=B[L++];while(--l);L=h-S;q=u}}}else if(L+=E-l,D>l){D-=l;do u[h++]=B[L++];while(--l);L=h-S;q=u}for(;2<D;)u[h++]=q[L++],u[h++]=q[L++],u[h++]=q[L++],D-=3;D&&(u[h++]=q[L++],1<D&&(u[h++]=q[L++]))}else{L=h-S;do u[h++]=u[L++],u[h++]=u[L++],
u[h++]=u[L++],D-=3;while(2<D);D&&(u[h++]=u[L++],1<D&&(u[h++]=u[L++]))}break}}break}while(k>b&&e>h);D=f>>3;b-=D;f-=D<<3;d.next_in=b;d.next_out=h;d.avail_in=k>b?5+(k-b):5-(b-k);d.avail_out=e>h?257+(e-h):257-(h-e);c.hold=C&(1<<f)-1;c.bits=f}},{}],8:[function(f,e,d){function p(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function a(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=
0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new G.Buf16(320);this.work=new G.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function c(b){var c;return b&&b.state?(c=b.state,b.total_in=b.total_out=c.total=0,b.msg="",c.wrap&&(b.adler=1&c.wrap),c.mode=H,c.last=0,c.havedict=0,c.dmax=32768,c.head=null,c.hold=0,c.bits=0,
c.lencode=c.lendyn=new G.Buf32(x),c.distcode=c.distdyn=new G.Buf32(y),c.sane=1,c.back=-1,C):g}function b(b){var a;return b&&b.state?(a=b.state,a.wsize=0,a.whave=0,a.wnext=0,c(b)):g}function k(c,a){var d,m;return c&&c.state?(m=c.state,0>a?(d=0,a=-a):(d=(a>>4)+1,48>a&&(a&=15)),a&&(8>a||15<a)?g:(null!==m.window&&m.wbits!==a&&(m.window=null),m.wrap=d,m.wbits=a,b(c))):g}function h(b,c){var d,m;return b?(m=new a,b.state=m,m.window=null,d=k(b,c),d!==C&&(b.state=null),d):g}var z,M,G=f("../utils/common"),
t=f("./adler32"),m=f("./crc32"),E=f("./inffast"),B=f("./inftrees"),C=0,g=-2,H=1,x=852,y=592,K=!0;d.inflateReset=b;d.inflateReset2=k;d.inflateResetKeep=c;d.inflateInit=function(b){return h(b,15)};d.inflateInit2=h;d.inflate=function(b,c){var a,d,h,k,y,e,x,f,l,q,J,I,W,R,U,P,Y,ba,Z,V,ea,da,ca=0,fa=new G.Buf8(4),ha=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&0!==b.avail_in)return g;a=b.state;12===a.mode&&(a.mode=13);y=b.next_out;h=b.output;x=b.avail_out;k=b.next_in;
d=b.input;e=b.avail_in;f=a.hold;l=a.bits;q=e;J=x;ea=C;a:for(;;)switch(a.mode){case H:if(0===a.wrap){a.mode=13;break}for(;16>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}if(2&a.wrap&&35615===f){a.check=0;fa[0]=255&f;fa[1]=f>>>8&255;a.check=m(a.check,fa,2,0);l=f=0;a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&f)<<8)+(f>>8))%31){b.msg="incorrect header check";a.mode=30;break}if(8!==(15&f)){b.msg="unknown compression method";a.mode=30;break}if(f>>>=4,l-=4,V=(15&f)+8,0===a.wbits)a.wbits=
V;else if(V>a.wbits){b.msg="invalid window size";a.mode=30;break}a.dmax=1<<V;b.adler=a.check=1;a.mode=512&f?10:12;l=f=0;break;case 2:for(;16>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}if(a.flags=f,8!==(255&a.flags)){b.msg="unknown compression method";a.mode=30;break}if(57344&a.flags){b.msg="unknown header flags set";a.mode=30;break}a.head&&(a.head.text=f>>8&1);512&a.flags&&(fa[0]=255&f,fa[1]=f>>>8&255,a.check=m(a.check,fa,2,0));l=f=0;a.mode=3;case 3:for(;32>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=
8}a.head&&(a.head.time=f);512&a.flags&&(fa[0]=255&f,fa[1]=f>>>8&255,fa[2]=f>>>16&255,fa[3]=f>>>24&255,a.check=m(a.check,fa,4,0));l=f=0;a.mode=4;case 4:for(;16>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}a.head&&(a.head.xflags=255&f,a.head.os=f>>8);512&a.flags&&(fa[0]=255&f,fa[1]=f>>>8&255,a.check=m(a.check,fa,2,0));l=f=0;a.mode=5;case 5:if(1024&a.flags){for(;16>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}a.length=f;a.head&&(a.head.extra_len=f);512&a.flags&&(fa[0]=255&f,fa[1]=f>>>8&255,a.check=m(a.check,
fa,2,0));l=f=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(I=a.length,I>e&&(I=e),I&&(a.head&&(V=a.head.extra_len-a.length,a.head.extra||(a.head.extra=Array(a.head.extra_len)),G.arraySet(a.head.extra,d,k,I,V)),512&a.flags&&(a.check=m(a.check,d,I,k)),e-=I,k+=I,a.length-=I),a.length))break a;a.length=0;a.mode=7;case 7:if(2048&a.flags){if(0===e)break a;I=0;do V=d[k+I++],a.head&&V&&65536>a.length&&(a.head.name+=String.fromCharCode(V));while(V&&e>I);if(512&a.flags&&(a.check=m(a.check,
d,I,k)),e-=I,k+=I,V)break a}else a.head&&(a.head.name=null);a.length=0;a.mode=8;case 8:if(4096&a.flags){if(0===e)break a;I=0;do V=d[k+I++],a.head&&V&&65536>a.length&&(a.head.comment+=String.fromCharCode(V));while(V&&e>I);if(512&a.flags&&(a.check=m(a.check,d,I,k)),e-=I,k+=I,V)break a}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;16>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}if(f!==(65535&a.check)){b.msg="header crc mismatch";a.mode=30;break}l=f=0}a.head&&(a.head.hcrc=a.flags>>
9&1,a.head.done=!0);b.adler=a.check=0;a.mode=12;break;case 10:for(;32>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}b.adler=a.check=p(f);l=f=0;a.mode=11;case 11:if(0===a.havedict)return b.next_out=y,b.avail_out=x,b.next_in=k,b.avail_in=e,a.hold=f,a.bits=l,2;b.adler=a.check=1;a.mode=12;case 12:if(5===c||6===c)break a;case 13:if(a.last){f>>>=7&l;l-=7&l;a.mode=27;break}for(;3>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}switch(a.last=1&f,f>>>=1,--l,3&f){case 0:a.mode=14;break;case 1:R=a;if(K){P=void 0;z=
new G.Buf32(512);M=new G.Buf32(32);for(P=0;144>P;)R.lens[P++]=8;for(;256>P;)R.lens[P++]=9;for(;280>P;)R.lens[P++]=7;for(;288>P;)R.lens[P++]=8;B(1,R.lens,0,288,z,0,R.work,{bits:9});for(P=0;32>P;)R.lens[P++]=5;B(2,R.lens,0,32,M,0,R.work,{bits:5});K=!1}R.lencode=z;R.lenbits=9;R.distcode=M;R.distbits=5;if(a.mode=20,6===c){f>>>=2;l-=2;break a}break;case 2:a.mode=17;break;case 3:b.msg="invalid block type",a.mode=30}f>>>=2;l-=2;break;case 14:f>>>=7&l;for(l-=7&l;32>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=
8}if((65535&f)!==(f>>>16^65535)){b.msg="invalid stored block lengths";a.mode=30;break}if(a.length=65535&f,f=0,l=0,a.mode=15,6===c)break a;case 15:a.mode=16;case 16:if(I=a.length){if(I>e&&(I=e),I>x&&(I=x),0===I)break a;G.arraySet(h,d,k,I,y);e-=I;k+=I;x-=I;y+=I;a.length-=I;break}a.mode=12;break;case 17:for(;14>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}if(a.nlen=(31&f)+257,f>>>=5,l-=5,a.ndist=(31&f)+1,f>>>=5,l-=5,a.ncode=(15&f)+4,f>>>=4,l-=4,286<a.nlen||30<a.ndist){b.msg="too many length or distance symbols";
a.mode=30;break}a.have=0;a.mode=18;case 18:for(;a.have<a.ncode;){for(;3>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}a.lens[ha[a.have++]]=7&f;f>>>=3;l-=3}for(;19>a.have;)a.lens[ha[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,da={bits:a.lenbits},ea=B(0,a.lens,0,19,a.lencode,0,a.work,da),a.lenbits=da.bits,ea){b.msg="invalid code lengths set";a.mode=30;break}a.have=0;a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;ca=a.lencode[f&(1<<a.lenbits)-1],U=ca>>>24,P=65535&ca,!(l>=U);){if(0===e)break a;e--;
f+=d[k++]<<l;l+=8}if(16>P)f>>>=U,l-=U,a.lens[a.have++]=P;else{if(16===P){for(R=U+2;R>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}if(f>>>=U,l-=U,0===a.have){b.msg="invalid bit length repeat";a.mode=30;break}V=a.lens[a.have-1];I=3+(3&f);f>>>=2;l-=2}else if(17===P){for(R=U+3;R>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}f>>>=U;l-=U;V=0;I=3+(7&f);f>>>=3;l-=3}else{for(R=U+7;R>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}f>>>=U;l-=U;V=0;I=11+(127&f);f>>>=7;l-=7}if(a.have+I>a.nlen+a.ndist){b.msg="invalid bit length repeat";
a.mode=30;break}for(;I--;)a.lens[a.have++]=V}}if(30===a.mode)break;if(0===a.lens[256]){b.msg="invalid code -- missing end-of-block";a.mode=30;break}if(a.lenbits=9,da={bits:a.lenbits},ea=B(1,a.lens,0,a.nlen,a.lencode,0,a.work,da),a.lenbits=da.bits,ea){b.msg="invalid literal/lengths set";a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,da={bits:a.distbits},ea=B(2,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,da),a.distbits=da.bits,ea){b.msg="invalid distances set";a.mode=30;break}if(a.mode=20,6===c)break a;
case 20:a.mode=21;case 21:if(6<=e&&258<=x){b.next_out=y;b.avail_out=x;b.next_in=k;b.avail_in=e;a.hold=f;a.bits=l;E(b,J);y=b.next_out;h=b.output;x=b.avail_out;k=b.next_in;d=b.input;e=b.avail_in;f=a.hold;l=a.bits;12===a.mode&&(a.back=-1);break}for(a.back=0;ca=a.lencode[f&(1<<a.lenbits)-1],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(l>=U);){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}if(R&&0===(240&R)){Y=U;ba=R;for(Z=P;ca=a.lencode[Z+((f&(1<<Y+ba)-1)>>Y)],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(l>=Y+U);){if(0===e)break a;
e--;f+=d[k++]<<l;l+=8}f>>>=Y;l-=Y;a.back+=Y}if(f>>>=U,l-=U,a.back+=U,a.length=P,0===R){a.mode=26;break}if(32&R){a.back=-1;a.mode=12;break}if(64&R){b.msg="invalid literal/length code";a.mode=30;break}a.extra=15&R;a.mode=22;case 22:if(a.extra){for(R=a.extra;R>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}a.length+=f&(1<<a.extra)-1;f>>>=a.extra;l-=a.extra;a.back+=a.extra}a.was=a.length;a.mode=23;case 23:for(;ca=a.distcode[f&(1<<a.distbits)-1],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(l>=U);){if(0===e)break a;
e--;f+=d[k++]<<l;l+=8}if(0===(240&R)){Y=U;ba=R;for(Z=P;ca=a.distcode[Z+((f&(1<<Y+ba)-1)>>Y)],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(l>=Y+U);){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}f>>>=Y;l-=Y;a.back+=Y}if(f>>>=U,l-=U,a.back+=U,64&R){b.msg="invalid distance code";a.mode=30;break}a.offset=P;a.extra=15&R;a.mode=24;case 24:if(a.extra){for(R=a.extra;R>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}a.offset+=f&(1<<a.extra)-1;f>>>=a.extra;l-=a.extra;a.back+=a.extra}if(a.offset>a.dmax){b.msg="invalid distance too far back";
a.mode=30;break}a.mode=25;case 25:if(0===x)break a;if(I=J-x,a.offset>I){if(I=a.offset-I,I>a.whave&&a.sane){b.msg="invalid distance too far back";a.mode=30;break}I>a.wnext?(I-=a.wnext,W=a.wsize-I):W=a.wnext-I;I>a.length&&(I=a.length);R=a.window}else R=h,W=y-a.offset,I=a.length;I>x&&(I=x);x-=I;a.length-=I;do h[y++]=R[W++];while(--I);0===a.length&&(a.mode=21);break;case 26:if(0===x)break a;h[y++]=a.length;x--;a.mode=21;break;case 27:if(a.wrap){for(;32>l;){if(0===e)break a;e--;f|=d[k++]<<l;l+=8}if(J-=
x,b.total_out+=J,a.total+=J,J&&(b.adler=a.check=a.flags?m(a.check,h,J,y-J):t(a.check,h,J,y-J)),J=x,(a.flags?f:p(f))!==a.check){b.msg="incorrect data check";a.mode=30;break}l=f=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;32>l;){if(0===e)break a;e--;f+=d[k++]<<l;l+=8}if(f!==(4294967295&a.total)){b.msg="incorrect length check";a.mode=30;break}l=f=0}a.mode=29;case 29:ea=1;break a;case 30:ea=-3;break a;case 31:return-4;default:return g}b.next_out=y;b.avail_out=x;b.next_in=k;b.avail_in=e;a.hold=f;a.bits=
l;if(k=a.wsize||J!==b.avail_out&&30>a.mode&&(27>a.mode||4!==c)){k=b.output;y=b.next_out;d=J-b.avail_out;var ga;e=b.state;k=(null===e.window&&(e.wsize=1<<e.wbits,e.wnext=0,e.whave=0,e.window=new G.Buf8(e.wsize)),d>=e.wsize?(G.arraySet(e.window,k,y-e.wsize,e.wsize,0),e.wnext=0,e.whave=e.wsize):(ga=e.wsize-e.wnext,ga>d&&(ga=d),G.arraySet(e.window,k,y-d,ga,e.wnext),d-=ga,d?(G.arraySet(e.window,k,y-d,d,0),e.wnext=d,e.whave=e.wsize):(e.wnext+=ga,e.wnext===e.wsize&&(e.wnext=0),e.whave<e.wsize&&(e.whave+=
ga))),0)}return k?(a.mode=31,-4):(q-=b.avail_in,J-=b.avail_out,b.total_in+=q,b.total_out+=J,a.total+=J,a.wrap&&J&&(b.adler=a.check=a.flags?m(a.check,h,J,b.next_out-J):t(a.check,h,J,b.next_out-J)),b.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0===q&&0===J||4===c)&&ea===C&&(ea=-5),ea)};d.inflateEnd=function(b){if(!b||!b.state)return g;var a=b.state;return a.window&&(a.window=null),b.state=null,C};d.inflateGetHeader=function(b,a){var c;return b&&b.state?(c=b.state,
0===(2&c.wrap)?g:(c.head=a,a.done=!1,C)):g};d.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(f,e,d){var p=f("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,
8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(d,z,e,f,t,m,E,B){var C,g,H,x,y,l,L,q;x=B.bits;for(var D=0,S=0,X=0,w=0,u=0,A=0,aa=0,N=C=0,F=0,Q=null,J=0,I=new p.Buf16(16),A=new p.Buf16(16),W=null,R=0,D=0;15>=D;D++)I[D]=0;for(S=0;f>S;S++)I[z[e+S]]++;u=x;for(w=15;1<=w&&0===I[w];w--);if(u>w&&(u=w),0===w)return t[m++]=20971520,t[m++]=20971520,B.bits=1,0;for(X=1;w>X&&0===I[X];X++);X>u&&(u=X);for(D=C=1;15>=
D;D++)if(C<<=1,C-=I[D],0>C)return-1;if(0<C&&(0===d||1!==w))return-1;A[1]=0;for(D=1;15>D;D++)A[D+1]=A[D]+I[D];for(S=0;f>S;S++)0!==z[e+S]&&(E[A[z[e+S]]++]=S);if(0===d?(Q=W=E,y=19):1===d?(Q=a,J-=257,W=c,R-=257,y=256):(Q=b,W=k,y=-1),F=0,S=0,D=X,x=m,A=u,aa=0,H=-1,N=1<<u,f=N-1,1===d&&852<N||2===d&&592<N)return 1;for(var U=0;;){U++;l=D-aa;E[S]<y?(L=0,q=E[S]):E[S]>y?(L=W[R+E[S]],q=Q[J+E[S]]):(L=96,q=0);C=1<<D-aa;X=g=1<<A;do g-=C,t[x+(F>>aa)+g]=l<<24|L<<16|q|0;while(0!==g);for(C=1<<D-1;F&C;)C>>=1;if(0!==C?
(F&=C-1,F+=C):F=0,S++,0===--I[D]){if(D===w)break;D=z[e+E[S]]}if(D>u&&(F&f)!==H){0===aa&&(aa=u);x+=X;A=D-aa;for(C=1<<A;w>A+aa&&(C-=I[A+aa],!(0>=C));)A++,C<<=1;if(N+=1<<A,1===d&&852<N||2===d&&592<N)return 1;H=F&f;t[H]=u<<24|A<<16|x-m|0}}return 0!==F&&(t[x+F]=D-aa<<24|4194304),B.bits=u,0}},{"../utils/common":1}],10:[function(f,e,d){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},
{}],11:[function(f,e,d){e.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/lib/inflate.js":[function(f,e,d){function p(b,a){var c=new t(a);if(c.push(b,!0),c.err)throw c.msg;return c.result}var a=f("./zlib/inflate.js"),c=f("./utils/common"),b=f("./utils/strings"),k=f("./zlib/constants"),h=f("./zlib/messages"),z=f("./zlib/zstream"),M=f("./zlib/gzheader"),
G=Object.prototype.toString,t=function(b){var d=this.options=c.assign({chunkSize:16384,windowBits:0,to:""},b||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||b&&b.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&0===(15&d.windowBits)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new z;this.strm.avail_out=0;b=a.inflateInit2(this.strm,d.windowBits);
if(b!==k.Z_OK)throw Error(h[b]);this.header=new M;a.inflateGetHeader(this.strm,this.header)};t.prototype.push=function(d,h){var t,z,e,p,f,y=this.strm,M=this.options.chunkSize;if(this.ended)return!1;z=h===~~h?h:!0===h?k.Z_FINISH:k.Z_NO_FLUSH;"string"==typeof d?y.input=b.binstring2buf(d):"[object ArrayBuffer]"===G.call(d)?y.input=new Uint8Array(d):y.input=d;y.next_in=0;y.avail_in=y.input.length;do{if(0===y.avail_out&&(y.output=new c.Buf8(M),y.next_out=0,y.avail_out=M),t=a.inflate(y,k.Z_NO_FLUSH),t!==
k.Z_STREAM_END&&t!==k.Z_OK)return this.onEnd(t),this.ended=!0,!1;y.next_out&&(0===y.avail_out||t===k.Z_STREAM_END||0===y.avail_in&&(z===k.Z_FINISH||z===k.Z_SYNC_FLUSH))&&("string"===this.options.to?(e=b.utf8border(y.output,y.next_out),p=y.next_out-e,f=b.buf2string(y.output,e),y.next_out=p,y.avail_out=M-p,p&&c.arraySet(y.output,y.output,e,p,0),this.onData(f)):this.onData(c.shrinkBuf(y.output,y.next_out)))}while(0<y.avail_in&&t!==k.Z_STREAM_END);return t===k.Z_STREAM_END&&(z=k.Z_FINISH),z===k.Z_FINISH?
(t=a.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===k.Z_OK):z===k.Z_SYNC_FLUSH?(this.onEnd(k.Z_OK),y.avail_out=0,!0):!0};t.prototype.onData=function(b){this.chunks.push(b)};t.prototype.onEnd=function(b){b===k.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};d.Inflate=t;d.inflate=p;d.inflateRaw=function(b,a){return a=a||{},a.raw=!0,p(b,a)};d.ungzip=p},{"./utils/common":1,"./utils/strings":2,
"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")})},{}],3:[function(g,q,l){function n(b,a){switch(void 0===a&&(a=b.toString()),b.name){case "NotFoundError":return new h(z.ENOENT,a);case "QuotaExceededError":return new h(z.ENOSPC,a);default:return new h(z.EIO,a)}}function f(b,a,c){return void 0===a&&(a=z.EIO),void 0===c&&(c=null),function(d){d.preventDefault();b(new h(a,c))}}function e(a){var c=a.getBufferCore();c instanceof
b.BufferCoreArrayBuffer||(a=new k(this._buffer.length),this._buffer.copy(a),c=a.getBufferCore());return c.getDataView().buffer}var d=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},p=g("../core/buffer");q=g("../core/browserfs");var a=g("../generic/key_value_filesystem"),c=g("../core/api_error"),b=g("../core/buffer_core_arraybuffer");g=g("../core/global");var k=p.Buffer,h=c.ApiError,z=c.ErrorCode,
M=g.indexedDB||g.mozIndexedDB||g.webkitIndexedDB||g.msIndexedDB,G=function(){function b(a,c){this.tx=a;this.store=c}return b.prototype.get=function(b,a){try{var c=this.store.get(b);c.onerror=f(a);c.onsuccess=function(b){b=b.target.result;void 0===b?a(null,b):a(null,new k(b))}}catch(d){a(n(d))}},b}();l.IndexedDBROTransaction=G;var t=function(b){function a(c,d){b.call(this,c,d)}return d(a,b),a.prototype.put=function(b,a,c,d){try{var m,h=e(a);m=c?this.store.put(h,b):this.store.add(h,b);m.onerror=f(d);
m.onsuccess=function(b){d(null,!0)}}catch(k){d(n(k))}},a.prototype["delete"]=function(b,a){try{var c=this.store["delete"](b);c.onerror=f(a);c.onsuccess=function(b){a()}}catch(d){a(n(d))}},a.prototype.commit=function(b){setTimeout(b,0)},a.prototype.abort=function(b){var a;try{this.tx.abort()}catch(c){a=n(c)}finally{b(a)}},a}(G);l.IndexedDBRWTransaction=t;var m=function(){function b(a,c){var d=this;void 0===c&&(c="browserfs");this.storeName=c;var m=M.open(this.storeName,1);m.onupgradeneeded=function(b){b=
b.target.result;b.objectStoreNames.contains(d.storeName)&&b.deleteObjectStore(d.storeName);b.createObjectStore(d.storeName)};m.onsuccess=function(b){d.db=b.target.result;a(null,d)};m.onerror=f(a,z.EACCES)}return b.prototype.name=function(){return"IndexedDB - "+this.storeName},b.prototype.clear=function(b){try{var a=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();a.onsuccess=function(a){setTimeout(b,0)};a.onerror=f(b)}catch(c){b(n(c))}},b.prototype.beginTransaction=
function(b){void 0===b&&(b="readonly");var a=this.db.transaction(this.storeName,b),c=a.objectStore(this.storeName);if("readwrite"===b)return new t(a,c);if("readonly"===b)return new G(a,c);throw new h(z.EINVAL,"Invalid transaction type.");},b}();l.IndexedDBStore=m;g=function(b){function a(c,d){var h=this;b.call(this);new m(function(b,a){b?c(b):h.init(a,function(b){c(b,h)})},d)}return d(a,b),a.isAvailable=function(){try{return"undefined"!=typeof M&&null!==M.open("__browserfs_test__")}catch(b){return!1}},
a}(a.AsyncKeyValueFileSystem);l.IndexedDBFileSystem=g;q.registerFileSystem("IndexedDB",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/global":24,"../generic/key_value_filesystem":35}],4:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},f=g("../core/file_system"),e=g("../generic/file_index"),d=g("../core/buffer"),
p=g("../core/api_error"),a=g("../core/file_flag"),c=g("../generic/preload_file");q=g("../core/browserfs");var b=g("../generic/xhr"),k=(d.Buffer,p.ApiError),h=p.ErrorCode,z=(a.FileFlag,a.ActionType);g=function(a){function p(b,c){void 0===c&&(c="");a.call(this);null==b&&(b="index.json");0<c.length&&"/"!==c.charAt(c.length-1)&&(c+="/");this.prefix_url=c;var d=this._requestFileSync(b,"json");if(null==d)throw Error("Unable to find listing at URL: "+b);this._index=e.FileIndex.from_listing(d)}return n(p,
a),p.prototype.empty=function(){this._index.fileIterator(function(b){b.file_data=null})},p.prototype.getXhrPath=function(b){return"/"===b.charAt(0)&&(b=b.slice(1)),this.prefix_url+b},p.prototype._requestFileSizeAsync=function(a,c){b.getFileSizeAsync(this.getXhrPath(a),c)},p.prototype._requestFileSizeSync=function(a){return b.getFileSizeSync(this.getXhrPath(a))},p.prototype._requestFileAsync=function(a,c,d){b.asyncDownloadFile(this.getXhrPath(a),c,d)},p.prototype._requestFileSync=function(a,c){return b.syncDownloadFile(this.getXhrPath(a),
c)},p.prototype.getName=function(){return"XmlHttpRequest"},p.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},p.prototype.diskSpace=function(b,a){a(0,0)},p.prototype.isReadOnly=function(){return!0},p.prototype.supportsLinks=function(){return!1},p.prototype.supportsProps=function(){return!1},p.prototype.supportsSynch=function(){return!0},p.prototype.preloadFile=function(b,a){var c=this._index.getInode(b);if(null===c)throw k.ENOENT(b);c=c.getData();c.size=a.length;
c.file_data=a},p.prototype.stat=function(b,a,c){a=this._index.getInode(b);if(null===a)return c(k.ENOENT(b));var d;a.isFile()?(d=a.getData(),0>d.size?this._requestFileSizeAsync(b,function(b,a){return b?c(b):(d.size=a,void c(null,d.clone()))}):c(null,d.clone())):(d=a.getStats(),c(null,d))},p.prototype.statSync=function(b,a){var c=this._index.getInode(b);if(null===c)throw k.ENOENT(b);var d;return c.isFile()?(d=c.getData(),0>d.size&&(d.size=this._requestFileSizeSync(b))):d=c.getStats(),d},p.prototype.open=
function(b,a,d,B){if(a.isWriteable())return B(new k(h.EPERM,b));var e=this;d=this._index.getInode(b);if(null===d)return B(k.ENOENT(b));if(d.isDir())return B(k.EISDIR(b));var p=d.getData();switch(a.pathExistsAction()){case z.THROW_EXCEPTION:case z.TRUNCATE_FILE:return B(k.EEXIST(b));case z.NOP:if(null!=p.file_data)return B(null,new c.NoSyncFile(e,b,a,p.clone(),p.file_data));this._requestFileAsync(b,"buffer",function(d,h){return d?B(d):(p.size=h.length,p.file_data=h,B(null,new c.NoSyncFile(e,b,a,p.clone(),
h)))});break;default:return B(new k(h.EINVAL,"Invalid FileMode object."))}},p.prototype.openSync=function(b,a,d){if(a.isWriteable())throw new k(h.EPERM,b);d=this._index.getInode(b);if(null===d)throw k.ENOENT(b);if(d.isDir())throw k.EISDIR(b);d=d.getData();switch(a.pathExistsAction()){case z.THROW_EXCEPTION:case z.TRUNCATE_FILE:throw k.EEXIST(b);case z.NOP:if(null!=d.file_data)return new c.NoSyncFile(this,b,a,d.clone(),d.file_data);var B=this._requestFileSync(b,"buffer");return d.size=B.length,d.file_data=
B,new c.NoSyncFile(this,b,a,d.clone(),B);default:throw new k(h.EINVAL,"Invalid FileMode object.");}},p.prototype.readdir=function(b,a){try{a(null,this.readdirSync(b))}catch(c){a(c)}},p.prototype.readdirSync=function(b){var a=this._index.getInode(b);if(null===a)throw k.ENOENT(b);if(a.isFile())throw k.ENOTDIR(b);return a.getListing()},p.prototype.readFile=function(b,a,c,h){var k=h;this.open(b,c,420,function(b,c){if(b)return h(b);h=function(b,a){c.close(function(c){return null==b&&(b=c),k(b,a)})};var E=
c.getBuffer();if(null===a)return 0<E.length?h(b,E.sliceCopy()):h(b,new d.Buffer(0));try{h(null,E.toString(a))}catch(t){h(t)}})},p.prototype.readFileSync=function(b,a,c){b=this.openSync(b,c,420);try{var h=b.getBuffer();return null===a?0<h.length?h.sliceCopy():new d.Buffer(0):h.toString(a)}finally{b.closeSync()}},p}(f.BaseFileSystem);l.XmlHttpRequest=g;q.registerFileSystem("XmlHttpRequest",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,
"../generic/file_index":33,"../generic/preload_file":36,"../generic/xhr":37}],5:[function(g,q,l){var n=this.__extends||function(d,a){function c(){this.constructor=d}for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);c.prototype=a.prototype;d.prototype=new c};l=g("../core/file_system");var f=g("../core/file_flag"),e=g("../generic/preload_file");g=g("../core/browserfs");var d=function(d){function a(a,b,k,h,z){d.call(this,a,b,k,h,z)}return n(a,d),a.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),
this.resetDirty())},a.prototype.closeSync=function(){this.syncSync()},a}(e.PreloadFile);l=function(e){function a(a,b){if(e.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._sync=a,this._async=b,!a.supportsSynch())throw Error("Expected synchronous storage.");if(b.supportsSynch())throw Error("Expected asynchronous storage.");}return n(a,e),a.prototype.getName=function(){return"AsyncMirror"},a.isAvailable=function(){return!0},a.prototype._syncSync=function(a){this._sync.writeFileSync(a.getPath(),
a.getBuffer(),null,f.FileFlag.getFileFlag("w"),a.getStats().mode);this.enqueueOp({apiMethod:"writeFile",arguments:[a.getPath(),a.getBuffer(),null,a.getFlag(),a.getStats().mode]})},a.prototype.initialize=function(a){var b=this;if(this._isInitialized)a();else{var d=function(a,c,d){"/"!==a&&b._sync.mkdirSync(a,c);b._async.readdir(a,function(b,c){function h(b){b?d(b):k<c.length?(z(a+"/"+c[k],h),k++):d()}if(b)d(b);else{var k=0;h()}})},h=function(a,c,d){b._async.readFile(a,null,f.FileFlag.getFileFlag("r"),
function(m,h){if(m)d(m);else try{b._sync.writeFileSync(a,h,null,f.FileFlag.getFileFlag("w"),c)}catch(k){m=k}finally{d(m)}})},z=function(a,c){b._async.stat(a,!1,function(b,m){b?c(b):m.isDirectory()?d(a,m.mode,c):h(a,m.mode,c)})};d("/",0,function(d){d?a(d):(b._isInitialized=!0,a())})}},a.prototype.isReadOnly=function(){return!1},a.prototype.supportsSynch=function(){return!0},a.prototype.supportsLinks=function(){return!1},a.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},
a.prototype.enqueueOp=function(a){var b=this;if(this._queue.push(a),!this._queueRunning){this._queueRunning=!0;var d=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+"\n$"),0<b._queue.length){a=b._queue.shift();var c=a.arguments;c.push(d);b._async[a.apiMethod].apply(b._async,c)}else b._queueRunning=!1};d()}},a.prototype.renameSync=function(a,b){this._sync.renameSync(a,b);this.enqueueOp({apiMethod:"rename",arguments:[a,b]})},a.prototype.statSync=
function(a,b){return this._sync.statSync(a,b)},a.prototype.openSync=function(a,b,k){return this._sync.openSync(a,b,k).closeSync(),new d(this,a,b,this._sync.statSync(a,!1),this._sync.readFileSync(a,null,f.FileFlag.getFileFlag("r")))},a.prototype.unlinkSync=function(a){this._sync.unlinkSync(a);this.enqueueOp({apiMethod:"unlink",arguments:[a]})},a.prototype.rmdirSync=function(a){this._sync.rmdirSync(a);this.enqueueOp({apiMethod:"rmdir",arguments:[a]})},a.prototype.mkdirSync=function(a,b){this._sync.mkdirSync(a,
b);this.enqueueOp({apiMethod:"mkdir",arguments:[a,b]})},a.prototype.readdirSync=function(a){return this._sync.readdirSync(a)},a.prototype.existsSync=function(a){return this._sync.existsSync(a)},a.prototype.chmodSync=function(a,b,d){this._sync.chmodSync(a,b,d);this.enqueueOp({apiMethod:"chmod",arguments:[a,b,d]})},a.prototype.chownSync=function(a,b,d,h){this._sync.chownSync(a,b,d,h);this.enqueueOp({apiMethod:"chown",arguments:[a,b,d,h]})},a.prototype.utimesSync=function(a,b,d){this._sync.utimesSync(a,
b,d);this.enqueueOp({apiMethod:"utimes",arguments:[a,b,d]})},a}(l.SynchronousFileSystem);g.registerFileSystem("AsyncMirrorFS",l);q.exports=l},{"../core/browserfs":15,"../core/file_flag":22,"../core/file_system":23,"../generic/preload_file":36}],6:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},f=g("../generic/preload_file"),e=g("../core/file_system"),d=g("../core/node_fs_stats"),
p=g("../core/buffer"),a=g("../core/api_error"),c=g("../core/node_path");q=g("../core/browserfs");var b=g("../core/buffer_core_arraybuffer"),k=g("async"),h=p.Buffer,z=d.Stats,M=a.ApiError,G=a.ErrorCode,t=d.FileType,m=function(a){function c(b,d,m,h,k){a.call(this,b,d,m,h,k)}return n(c,a),c.prototype.sync=function(a){var c=this;if(this.isDirty()){var d=this.getBuffer(),m=d.getBufferCore();m instanceof b.BufferCoreArrayBuffer||(d=new h(d.length),this.getBuffer().copy(d),m=d.getBufferCore());m=m.getDataView();
d=new DataView(m.buffer,m.byteOffset+d.getOffset(),d.length);this._fs._writeFileStrict(this.getPath(),d,function(b){b||c.resetDirty();a(b)})}else a()},c.prototype.close=function(b){this.sync(b)},c}(f.PreloadFile);l.DropboxFile=m;g=function(b){function a(c){b.call(this);this.client=c}return n(a,b),a.prototype.getName=function(){return"Dropbox"},a.isAvailable=function(){return"undefined"!=typeof Dropbox},a.prototype.isReadOnly=function(){return!1},a.prototype.supportsSymlinks=function(){return!1},a.prototype.supportsProps=
function(){return!1},a.prototype.supportsSynch=function(){return!1},a.prototype.empty=function(b){var a=this;this.client.readdir("/",function(c,d,m,h){c?b(a.convert(c)):k.each(h,function(b,c){a.client.remove(b.path,function(b,d){c(b?a.convert(b):b)})},function(c){c?b(a.convert(c)):b()})})},a.prototype.rename=function(b,a,c){this.client.move(b,a,function(d,m){if(d){var h=-1<d.response.error.indexOf(b)?b:a;c(new M(G.ENOENT,h+" doesn't exist"))}else c()})},a.prototype.stat=function(b,a,c){var d=this;
this.client.stat(b,function(a,m){if(!(a||null!=m&&m.isRemoved)){var h=new z(d._statType(m),m.size);return c(null,h)}c(new M(G.ENOENT,b+" doesn't exist"))})},a.prototype.open=function(b,a,c,d){var m=this;this.client.readFile(b,{arrayBuffer:!0},function(c,k,E,t){if(!c)return c=new h(null===k?0:k),E=m._makeFile(b,a,E,c),d(null,E);if(a.isReadable())d(new M(G.ENOENT,b+" doesn't exist"));else switch(c.status){case 0:return console.error("No connection");case 404:var B=new ArrayBuffer(0);return m._writeFileStrict(b,
B,function(c,k){if(c)d(c);else{var E=m._makeFile(b,a,k,new h(B));d(null,E)}});default:return console.log("Unhandled error: "+c)}})},a.prototype._writeFileStrict=function(b,a,d){var m=this,h=c.dirname(b);this.stat(h,!1,function(c,k){c?d(new M(G.ENOENT,"Can't create "+b+" because "+h+" doesn't exist")):m.client.writeFile(b,a,function(b,a){b?d(m.convert(b)):d(null,a)})})},a.prototype._statType=function(b){return b.isFile?t.FILE:t.DIRECTORY},a.prototype._makeFile=function(b,a,c,d){var h=this._statType(c);
c=new z(h,c.size);return new m(this,b,a,c,d)},a.prototype._remove=function(b,a,c){var d=this;this.client.stat(b,function(m,h){m?a(new M(G.ENOENT,b+" doesn't exist")):h.isFile&&!c?a(new M(G.ENOTDIR,b+" is a file.")):!h.isFile&&c?a(new M(G.EISDIR,b+" is a directory.")):d.client.remove(b,function(c,d){a(c?new M(G.EIO,"Failed to remove "+b):null)})})},a.prototype.unlink=function(b,a){this._remove(b,a,!0)},a.prototype.rmdir=function(b,a){this._remove(b,a,!1)},a.prototype.mkdir=function(b,a,d){var m=this,
h=c.dirname(b);this.client.stat(h,function(a,c){a?d(new M(G.ENOENT,"Can't create "+b+" because "+h+" doesn't exist")):m.client.mkdir(b,function(a,c){d(a?new M(G.EEXIST,b+" already exists"):null)})})},a.prototype.readdir=function(b,a){var c=this;this.client.readdir(b,function(b,d,m,h){return b?a(c.convert(b)):a(null,d)})},a.prototype.convert=function(b,a){switch(void 0===a&&(a=""),b.status){case 400:return new M(G.EINVAL,a);case 401:case 403:return new M(G.EIO,a);case 404:return new M(G.ENOENT,a);
case 405:return new M(G.ENOTSUP,a);default:return new M(G.EIO,a)}},a}(e.BaseFileSystem);l.DropboxFileSystem=g;q.registerFileSystem("Dropbox",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],7:[function(g,q,l){function n(b,a,c,d){if("undefined"!=typeof navigator.webkitPersistentStorage)switch(b){case z.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(a,
c,d);break;case z.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(a,c,d);break;default:d(null)}else z.webkitStorageInfo.requestQuota(b,a,c,d)}var f=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},e=g("../generic/preload_file"),d=g("../core/file_system"),p=g("../core/api_error"),a=g("../core/file_flag"),c=g("../core/node_fs_stats"),b=g("../core/buffer");q=g("../core/browserfs");var k=g("../core/buffer_core_arraybuffer"),
h=g("../core/node_path"),z=g("../core/global"),M=g("async"),G=b.Buffer,t=c.Stats,m=c.FileType,E=p.ApiError,B=p.ErrorCode,C=a.ActionType,T=z.webkitRequestFileSystem||z.requestFileSystem||null,H=function(b){function a(c,d,m,h,k){b.call(this,c,d,m,h,k)}return f(a,b),a.prototype.sync=function(b){var a=this;if(this.isDirty()){var c=this._fs;c.fs.root.getFile(this.getPath(),{create:!1},function(d){d.createWriter(function(d){var m=a.getBuffer(),h=m.getBufferCore();h instanceof k.BufferCoreArrayBuffer||(m=
new G(m.length),a.getBuffer().copy(m),h=m.getBufferCore());var h=h.getDataView(),m=new DataView(h.buffer,h.byteOffset+m.getOffset(),m.length),m=new Blob([m]),E=m.size;d.onwriteend=function(){d.onwriteend=null;d.truncate(E);a.resetDirty();b()};d.onerror=function(a){b(c.convert(a))};d.write(m)})},function(a){b(c.convert(a))})}else b()},a.prototype.close=function(b){this.sync(b)},a}(e.PreloadFile);l.HTML5FSFile=H;g=function(b){function a(c,d){b.call(this);this.size=null!=c?c:5;this.type=null!=d?d:z.PERSISTENT;
this.size*=1048576}return f(a,b),a.prototype.getName=function(){return"HTML5 FileSystem"},a.isAvailable=function(){return null!=T},a.prototype.isReadOnly=function(){return!1},a.prototype.supportsSymlinks=function(){return!1},a.prototype.supportsProps=function(){return!1},a.prototype.supportsSynch=function(){return!1},a.prototype.convert=function(b,a){switch(void 0===a&&(a=""),b.name){case "QuotaExceededError":return new E(B.ENOSPC,a);case "NotFoundError":return new E(B.ENOENT,a);case "SecurityError":return new E(B.EACCES,
a);case "InvalidModificationError":return new E(B.EPERM,a);case "SyntaxError":case "TypeMismatchError":return new E(B.EINVAL,a);default:return new E(B.EINVAL,a)}},a.prototype.convertErrorEvent=function(b,a){return void 0===a&&(a=""),new E(B.ENOENT,b.message+"; "+a)},a.prototype.allocate=function(b){var a=this;void 0===b&&(b=function(){});var c=function(c){a.fs=c;b()},d=function(c){b(a.convert(c))};this.type===z.PERSISTENT?n(this.type,this.size,function(b){T(a.type,b,c,d)},d):T(this.type,this.size,
c,d)},a.prototype.empty=function(b){var a=this;this._readdir("/",function(c,d){c?(console.error("Failed to empty FS"),b(c)):M.each(d,function(b,c){var d=function(){c()},m=function(d){c(a.convert(d,b.fullPath))};b.isFile?b.remove(d,m):b.removeRecursively(d,m)},function(a){c?(console.error("Failed to empty FS"),b(c)):b()})})},a.prototype.rename=function(b,a,c){var d=this,m=2,k=0,E=this.fs.root,t=function(h){0===--m&&c(d.convert(h,"Failed to rename "+b+" to "+a+"."))},B=function(m){return 2===++k?void console.error("Something was identified as both a file and a directory. This should never happen."):
b===a?c():void E.getDirectory(h.dirname(a),{},function(k){m.moveTo(k,h.basename(a),function(b){c()},function(h){m.isDirectory?d.unlink(a,function(m){m?t(h):d.rename(b,a,c)}):t(h)})},t)};E.getFile(b,{},B,t);E.getDirectory(b,{},B,t)},a.prototype.stat=function(b,a,c){var d=this,h={create:!1},k=function(b){b=new t(m.DIRECTORY,4096);c(null,b)},E=function(a){c(d.convert(a,b))};this.fs.root.getFile(b,h,function(b){b.file(function(b){b=new t(m.FILE,b.size);c(null,b)},E)},function(){d.fs.root.getDirectory(b,
h,k,E)})},a.prototype.open=function(b,a,c,d){var m=this;c={create:a.pathNotExistsAction()===C.CREATE_FILE,exclusive:a.isExclusive()};var h=function(a){d(m.convertErrorEvent(a,b))},k=function(a){d(m.convert(a,b))};this.fs.root.getFile(b,c,function(c){c.file(function(c){var k=new FileReader;k.onloadend=function(h){h=m._makeFile(b,a,c,k.result);d(null,h)};k.onerror=h;k.readAsArrayBuffer(c)},k)},h)},a.prototype._statType=function(b){return b.isFile?m.FILE:m.DIRECTORY},a.prototype._makeFile=function(b,
a,c,d){void 0===d&&(d=new ArrayBuffer(0));c=new t(m.FILE,c.size);d=new G(d);return new H(this,b,a,c,d)},a.prototype._remove=function(b,a,c){var d=this,m=function(c){c.remove(function(){a()},function(c){a(d.convert(c,b))})},h=function(c){a(d.convert(c,b))},k={create:!1};c?this.fs.root.getFile(b,k,m,h):this.fs.root.getDirectory(b,k,m,h)},a.prototype.unlink=function(b,a){this._remove(b,a,!0)},a.prototype.rmdir=function(b,a){this._remove(b,a,!1)},a.prototype.mkdir=function(b,a,c){var d=this;this.fs.root.getDirectory(b,
{create:!0,exclusive:!0},function(b){c()},function(a){c(d.convert(a,b))})},a.prototype._readdir=function(b,a){var c=this;this.fs.root.getDirectory(b,{create:!1},function(d){var m=d.createReader(),h=[],k=function(d){a(c.convert(d,b))},E=function(){m.readEntries(function(b){b.length?(h=h.concat(Array.prototype.slice.call(b||[],0)),E()):a(null,h)},k)};E()})},a.prototype.readdir=function(b,a){this._readdir(b,function(b,c){if(null!=b)return a(b);for(var d=[],m=0;m<c.length;m++)d.push(c[m].name);a(null,
d)})},a}(d.BaseFileSystem);l.HTML5FS=g;q.registerFileSystem("HTML5FS",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/global":24,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],8:[function(g,q,l){var n=this.__extends||function(d,e){function a(){this.constructor=d}for(var c in e)e.hasOwnProperty(c)&&(d[c]=e[c]);a.prototype=e.prototype;d.prototype=
new a},f=g("../generic/key_value_filesystem");g=g("../core/browserfs");var e=function(){function d(){this.store={}}return d.prototype.name=function(){return"In-memory"},d.prototype.clear=function(){this.store={}},d.prototype.beginTransaction=function(d){return new f.SimpleSyncRWTransaction(this)},d.prototype.get=function(d){return this.store[d]},d.prototype.put=function(d,a,c){return!c&&this.store.hasOwnProperty(d)?!1:(this.store[d]=a,!0)},d.prototype["delete"]=function(d){delete this.store[d]},d}();
l.InMemoryStore=e;q=function(d){function p(){d.call(this,{store:new e})}return n(p,d),p}(f.SyncKeyValueFileSystem);l.InMemoryFileSystem=q;g.registerFileSystem("InMemory",q)},{"../core/browserfs":15,"../generic/key_value_filesystem":35}],9:[function(g,q,l){var n,f=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},e=g("../core/buffer");q=g("../core/browserfs");var d=g("../generic/key_value_filesystem"),
p=g("../core/api_error"),a=g("../core/global"),c=e.Buffer,b=p.ApiError,k=p.ErrorCode;g=!1;try{a.localStorage.setItem("__test__",String.fromCharCode(55296)),g=a.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(z){g=!1}n=g?"binary_string":"binary_string_ie";var h=function(){function h(){}return h.prototype.name=function(){return"LocalStorage"},h.prototype.clear=function(){a.localStorage.clear()},h.prototype.beginTransaction=function(b){return new d.SimpleSyncRWTransaction(this)},
h.prototype.get=function(b){try{var d=a.localStorage.getItem(b);if(null!==d)return new c(d,n)}catch(h){}},h.prototype.put=function(c,d,h){try{return h||null===a.localStorage.getItem(c)?(a.localStorage.setItem(c,d.toString(n)),!0):!1}catch(m){throw new b(k.ENOSPC,"LocalStorage is full.");}},h.prototype["delete"]=function(c){try{a.localStorage.removeItem(c)}catch(d){throw new b(k.EIO,"Unable to delete key "+c+": "+d);}},h}();l.LocalStorageStore=h;g=function(b){function c(){b.call(this,{store:new h})}
return f(c,b),c.isAvailable=function(){return"undefined"!=typeof a.localStorage},c}(d.SyncKeyValueFileSystem);l.LocalStorageFileSystem=g;q.registerFileSystem("LocalStorage",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/global":24,"../generic/key_value_filesystem":35}],10:[function(g,q,l){function n(b,a,c){return a?function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var c=a[0],d=this._get_fs(c);a[0]=d.path;try{return d.fs[b].apply(d.fs,a)}catch(h){throw this.standardizeError(h,
d.path,c),h;}}:function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var h=a[0],k=this._get_fs(h);if(a[0]=k.path,"function"==typeof a[a.length-1]){var t=a[a.length-1],e=this;a[a.length-1]=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];0<b.length&&b[0]instanceof d.ApiError&&e.standardizeError(b[0],k.path,h);t.apply(null,b)}}return k.fs[b].apply(k.fs,a)}}var f=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=
a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file_system");var e=g("./in_memory"),d=g("../core/api_error"),p=g("../core/node_fs");g=g("../core/browserfs");var a=d.ApiError,c=d.ErrorCode;q=function(b){function d(){b.call(this);this.mntMap={};this.rootFs=new e.InMemoryFileSystem}return f(d,b),d.prototype.mount=function(b,d){if(this.mntMap[b])throw new a(c.EINVAL,"Mount point "+b+" is already taken.");this.rootFs.mkdirSync(b,511);this.mntMap[b]=d},d.prototype.umount=function(b){if(!this.mntMap[b])throw new a(c.EINVAL,
"Mount point "+b+" is already unmounted.");delete this.mntMap[b];this.rootFs.rmdirSync(b)},d.prototype._get_fs=function(b){for(var a in this.mntMap){var c=this.mntMap[a];if(0===b.indexOf(a))return b=b.substr(1<a.length?a.length:0),""===b&&(b="/"),{fs:c,path:b}}return{fs:this.rootFs,path:b}},d.prototype.getName=function(){return"MountableFileSystem"},d.isAvailable=function(){return!0},d.prototype.diskSpace=function(b,a){a(0,0)},d.prototype.isReadOnly=function(){return!1},d.prototype.supportsLinks=
function(){return!1},d.prototype.supportsProps=function(){return!1},d.prototype.supportsSynch=function(){return!0},d.prototype.standardizeError=function(b,a,c){var d;return-1!==(d=b.message.indexOf(a))&&(b.message=b.message.substr(0,d)+c+b.message.substr(d+a.length)),b},d.prototype.rename=function(b,a,c){var d=this._get_fs(b),h=this._get_fs(a);if(d.fs===h.fs){var k=this;return d.fs.rename(d.path,h.path,function(e){e&&k.standardizeError(k.standardizeError(e,d.path,b),h.path,a);c(e)})}return p.readFile(b,
function(d,h){return d?c(d):void p.writeFile(a,h,function(a){return a?c(a):void p.unlink(b,c)})})},d.prototype.renameSync=function(b,a){var c=this._get_fs(b),d=this._get_fs(a);if(c.fs===d.fs)try{return c.fs.renameSync(c.path,d.path)}catch(h){throw this.standardizeError(this.standardizeError(h,c.path,b),d.path,a),h;}c=p.readFileSync(b);return p.writeFileSync(a,c),p.unlinkSync(b)},d}(q.BaseFileSystem);l.MountableFileSystem=q;l=[["readdir","exists","unlink","rmdir","readlink"],["stat","mkdir","realpath",
"truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]];for(var b=0;b<l.length;b++)for(var k=l[b],h=0;h<k.length;h++){var z=k[h];q.prototype[z]=n(z,!1,b+1);q.prototype[z+"Sync"]=n(z+"Sync",!0,b+1)}g.registerFileSystem("MountableFileSystem",q)},{"../core/api_error":14,"../core/browserfs":15,"../core/file_system":23,"../core/node_fs":26,"./in_memory":8}],11:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&
(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},f=g("../core/file_system"),e=g("../core/buffer"),d=g("../core/api_error"),p=g("../core/file_flag"),a=g("../generic/preload_file");l=g("../core/browserfs");var c=g("../core/node_path"),b=d.ApiError,k=e.Buffer,h=d.ErrorCode,z=function(b){function a(c,d,h,k,e){b.call(this,c,d,h,k,e)}return n(a,b),a.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},a.prototype.closeSync=function(){this.syncSync()},a}(a.PreloadFile);
g=function(a){function d(c,m){if(a.call(this),this._isInitialized=!1,this._deletedFiles={},this._deleteLog=null,this._writable=c,this._readable=m,this._writable.isReadOnly())throw new b(h.EINVAL,"Writable file system must be writable.");if(!this._writable.supportsSynch()||!this._readable.supportsSynch())throw new b(h.EINVAL,"OverlayFS currently only operates on synchronous file systems.");}return n(d,a),d.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},
d.prototype.createParentDirectories=function(b){var a=this;b=c.dirname(b);for(var d=[];!this._writable.existsSync(b);)d.push(b),b=c.dirname(b);d=d.reverse();d.forEach(function(b){a._writable.mkdirSync(b,a.statSync(b,!1).mode)})},d.isAvailable=function(){return!0},d.prototype._syncSync=function(b){this.createParentDirectories(b.getPath());this._writable.writeFileSync(b.getPath(),b.getBuffer(),null,p.FileFlag.getFileFlag("w"),b.getStats().mode)},d.prototype.getName=function(){return"OverlayFS"},d.prototype.initialize=
function(b){var a=this;this._isInitialized?b():this._writable.readFile("/.deletedFiles.log","utf8",p.FileFlag.getFileFlag("r"),function(c,d){if(c){if(c.type!==h.ENOENT)return b(c)}else d.split("\n").forEach(function(b){a._deletedFiles[b.slice(1)]="d"===b.slice(0,1)});a._writable.open("/.deletedFiles.log",p.FileFlag.getFileFlag("a"),420,function(c,d){c?b(c):(a._deleteLog=d,b())})})},d.prototype.isReadOnly=function(){return!1},d.prototype.supportsSynch=function(){return!0},d.prototype.supportsLinks=
function(){return!1},d.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},d.prototype.deletePath=function(b){this._deletedFiles[b]=!0;b=new k("d"+b+"\n");this._deleteLog.writeSync(b,0,b.length,null);this._deleteLog.syncSync()},d.prototype.undeletePath=function(b){this._deletedFiles[b]&&(this._deletedFiles[b]=!1,b=new k("u"+b),this._deleteLog.writeSync(b,0,b.length,null),this._deleteLog.syncSync())},d.prototype.renameSync=function(a,d){var k=this,
B=this.statSync(a,!1);if(B.isDirectory()){if(a===d)return;B=511;if(this.existsSync(d)){var e=this.statSync(d,!1),B=e.mode;if(!e.isDirectory())throw new b(h.ENOTDIR,"Path "+d+" is a file.");if(0<this.readdirSync(d).length)throw new b(h.ENOTEMPTY,"Path "+d+" not empty.");}this._writable.existsSync(a)?this._writable.renameSync(a,d):this._writable.existsSync(d)||this._writable.mkdirSync(d,B);this._readable.existsSync(a)&&this._readable.readdirSync(a).forEach(function(b){k.renameSync(c.resolve(a,b),c.resolve(d,
b))})}else{if(this.existsSync(d)&&this.statSync(d,!1).isDirectory())throw new b(h.EISDIR,"Path "+d+" is a directory.");this.writeFileSync(d,this.readFileSync(a,null,p.FileFlag.getFileFlag("r")),null,p.FileFlag.getFileFlag("w"),B.mode)}a!==d&&this.existsSync(a)&&this.unlinkSync(a)},d.prototype.statSync=function(a,c){try{return this._writable.statSync(a,c)}catch(d){if(this._deletedFiles[a])throw new b(h.ENOENT,"Path "+a+" does not exist.");var k=this._readable.statSync(a,c).clone();return k.mode|=146,
k}},d.prototype.openSync=function(a,c,d){if(this.existsSync(a))switch(c.pathExistsAction()){case p.ActionType.TRUNCATE_FILE:return this.createParentDirectories(a),this._writable.openSync(a,c,d);case p.ActionType.NOP:if(this._writable.existsSync(a))return this._writable.openSync(a,c,d);var k=this._readable.statSync(a,!1).clone();return k.mode=d,new z(this,a,c,k,this._readable.readFileSync(a,null,p.FileFlag.getFileFlag("r")));default:throw new b(h.EEXIST,"Path "+a+" exists.");}else switch(c.pathNotExistsAction()){case p.ActionType.CREATE_FILE:return this.createParentDirectories(a),
this._writable.openSync(a,c,d);default:throw new b(h.ENOENT,"Path "+a+" does not exist.");}},d.prototype.unlinkSync=function(a){if(!this.existsSync(a))throw new b(h.ENOENT,"Path "+a+" does not exist.");this._writable.existsSync(a)&&this._writable.unlinkSync(a);this.existsSync(a)&&this.deletePath(a)},d.prototype.rmdirSync=function(a){if(!this.existsSync(a))throw new b(h.ENOENT,"Path "+a+" does not exist.");if(this._writable.existsSync(a)&&this._writable.rmdirSync(a),this.existsSync(a)){if(0<this.readdirSync(a).length)throw new b(h.ENOTEMPTY,
"Directory "+a+" is not empty.");this.deletePath(a)}},d.prototype.mkdirSync=function(a,c){if(this.existsSync(a))throw new b(h.EEXIST,"Path "+a+" already exists.");this.createParentDirectories(a);this._writable.mkdirSync(a,c)},d.prototype.readdirSync=function(a){var c=this;if(!this.statSync(a,!1).isDirectory())throw new b(h.ENOTDIR,"Path "+a+" is not a directory.");var d=[];try{d=d.concat(this._writable.readdirSync(a))}catch(k){}try{d=d.concat(this._readable.readdirSync(a))}catch(k){}var B={};return d.filter(function(b){var d=
void 0===B[b]&&!0!==c._deletedFiles[a+"/"+b];return B[b]=!0,d})},d.prototype.existsSync=function(b){return this._writable.existsSync(b)||this._readable.existsSync(b)&&!0!==this._deletedFiles[b]},d.prototype.chmodSync=function(b,a,c){var d=this;this.operateOnWritable(b,function(){d._writable.chmodSync(b,a,c)})},d.prototype.chownSync=function(b,a,c,d){var h=this;this.operateOnWritable(b,function(){h._writable.chownSync(b,a,c,d)})},d.prototype.utimesSync=function(b,a,c){var d=this;this.operateOnWritable(b,
function(){d._writable.utimesSync(b,a,c)})},d.prototype.operateOnWritable=function(a,c){if(!this.existsSync(a))throw new b(h.ENOENT,"Path "+a+" does not exist.");this._writable.existsSync(a)||this.copyToWritable(a);c()},d.prototype.copyToWritable=function(b){var a=this.statSync(b,!1);a.isDirectory()?this._writable.mkdirSync(b,a.mode):this.writeFileSync(b,this._readable.readFileSync(b,null,p.FileFlag.getFileFlag("r")),null,p.FileFlag.getFileFlag("w"),this.statSync(b,!1).mode)},d}(f.SynchronousFileSystem);
l.registerFileSystem("OverlayFS",g);q.exports=g},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,"../core/node_path":28,"../generic/preload_file":36}],12:[function(g,q,l){function n(b){return{type:f.ERROR,errorData:b.writeToBuffer().toArrayBuffer()}}var f,e=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file_system");
var d=g("../core/buffer"),p=g("../core/api_error"),a=g("../core/file_flag"),c=g("../core/file"),b=g("../core/node_fs_stats"),k=g("../generic/preload_file"),h=g("../core/browserfs"),z=d.Buffer;!function(b){b[b.CB=0]="CB";b[b.FD=1]="FD";b[b.ERROR=2]="ERROR";b[b.STATS=3]="STATS";b[b.PROBE=4]="PROBE";b[b.FILEFLAG=5]="FILEFLAG";b[b.BUFFER=6]="BUFFER"}(f||(f={}));var M=function(){function b(){this._callbacks={};this._nextId=0}return b.prototype.toRemoteArg=function(b){var a=this._nextId++;return this._callbacks[a]=
b,{type:f.CB,id:a}},b.prototype.toLocalArg=function(b){var a=this._callbacks[b];return delete this._callbacks[b],a},b}(),G=function(){function c(){this._fileDescriptors={};this._nextId=0}return c.prototype.toRemoteArg=function(b,a,c,d){var h,m,k=this._nextId++;this._fileDescriptors[k]=b;b.stat(function(t,e){t?d(t):(m=e.toBuffer().toArrayBuffer(),c.isReadable()?b.read(new z(e.size),0,e.size,0,function(b,E,t){b?d(b):(h=t.toArrayBuffer(),d(null,{type:f.FD,id:k,data:h,stat:m,path:a,flag:c.getFlagString()}))}):
d(null,{type:f.FD,id:k,data:new ArrayBuffer(0),stat:m,path:a,flag:c.getFlagString()}))})},c.prototype._applyFdChanges=function(c,d){var h=this._fileDescriptors[c.id],m=new z(c.data),k=b.Stats.fromBuffer(new z(c.stat)),t=a.FileFlag.getFileFlag(c.flag);t.isWriteable()?h.write(m,0,m.length,t.isAppendable()?h.getPos():0,function(b){function a(){h.stat(function(b,a){b?d(b):a.mode!==k.mode?h.chmod(k.mode,function(b){d(b,h)}):d(b,h)})}b?d(b):t.isAppendable()?a():h.truncate(m.length,function(){a()})}):d(null,
h)},c.prototype.applyFdAPIRequest=function(b,a){var c=this,d=b.args[0];this._applyFdChanges(d,function(h,m){h?a(h):m[b.method](function(h){"close"===b.method&&delete c._fileDescriptors[d.id];a(h)})})},c}(),t=function(b){function a(c,d,h,k,E,t){b.call(this,c,d,h,k,t);this._remoteFdId=E}return e(a,b),a.prototype.getRemoteFdId=function(){return this._remoteFdId},a.prototype.toRemoteArg=function(){return{type:f.FD,id:this._remoteFdId,data:this.getBuffer().toArrayBuffer(),stat:this.getStats().toBuffer().toArrayBuffer(),
path:this.getPath(),flag:this.getFlag().getFlagString()}},a.prototype._syncClose=function(b,a){var c=this;this.isDirty()?this._fs.syncClose(b,this,function(b){b||c.resetDirty();a(b)}):a()},a.prototype.sync=function(b){this._syncClose("sync",b)},a.prototype.close=function(b){this._syncClose("close",b)},a}(k.PreloadFile);g=function(d){function k(b){var a=this;d.call(this);this._callbackConverter=new M;this._supportProps=this._supportLinks=this._isReadOnly=this._isInitialized=!1;this._outstandingRequests=
{};this._worker=b;this._worker.addEventListener("message",function(b){if(null!=b.data&&"object"==typeof b.data&&b.data.hasOwnProperty("browserfsMessage")&&b.data.browserfsMessage){var c=b.data,d=c.args,h=Array(d.length);for(b=0;b<h.length;b++)h[b]=a._argRemote2Local(d[b]);a._callbackConverter.toLocalArg(c.cbId).apply(null,h)}})}return e(k,d),k.isAvailable=function(){return"undefined"!=typeof Worker},k.prototype.getName=function(){return"WorkerFS"},k.prototype._argRemote2Local=function(c){if(null==
c)return c;switch(typeof c){case "object":if(null==c.type||"number"!=typeof c.type)return c;switch(c.type){case f.ERROR:return p.ApiError.fromBuffer(new z(c.errorData));case f.FD:return new t(this,c.path,a.FileFlag.getFileFlag(c.flag),b.Stats.fromBuffer(new z(c.stat)),c.id,new z(c.data));case f.STATS:return b.Stats.fromBuffer(new z(c.statsData));case f.FILEFLAG:return a.FileFlag.getFileFlag(c.flagStr);case f.BUFFER:return new z(c.data);default:return c}default:return c}},k.prototype._argLocal2Remote=
function(c){if(null==c)return c;switch(typeof c){case "object":return c instanceof b.Stats?{type:f.STATS,statsData:c.toBuffer().toArrayBuffer()}:c instanceof p.ApiError?n(c):c instanceof t?c.toRemoteArg():c instanceof a.FileFlag?{type:f.FILEFLAG,flagStr:c.getFlagString()}:c instanceof z?{type:f.BUFFER,data:c.toArrayBuffer()}:c;case "function":return this._callbackConverter.toRemoteArg(c);default:return c}},k.prototype.initialize=function(b){var a=this;if(this._isInitialized)b();else{var c={browserfsMessage:!0,
method:"probe",args:[this._callbackConverter.toRemoteArg(function(c){a._isInitialized=!0;a._isReadOnly=c.isReadOnly;a._supportLinks=c.supportsLinks;a._supportProps=c.supportsProps;b()})]};this._worker.postMessage(c)}},k.prototype.isReadOnly=function(){return this._isReadOnly},k.prototype.supportsSynch=function(){return!1},k.prototype.supportsLinks=function(){return this._supportLinks},k.prototype.supportsProps=function(){return this._supportProps},k.prototype._rpc=function(b,a){var c,d={browserfsMessage:!0,
method:b,args:null},h=Array(a.length);for(c=0;c<a.length;c++)h[c]=this._argLocal2Remote(a[c]);d.args=h;this._worker.postMessage(d)},k.prototype.rename=function(b,a,c){this._rpc("rename",arguments)},k.prototype.stat=function(b,a,c){this._rpc("stat",arguments)},k.prototype.open=function(b,a,c,d){this._rpc("open",arguments)},k.prototype.unlink=function(b,a){this._rpc("unlink",arguments)},k.prototype.rmdir=function(b,a){this._rpc("rmdir",arguments)},k.prototype.mkdir=function(b,a,c){this._rpc("mkdir",
arguments)},k.prototype.readdir=function(b,a){this._rpc("readdir",arguments)},k.prototype.exists=function(b,a){this._rpc("exists",arguments)},k.prototype.realpath=function(b,a,c){this._rpc("realpath",arguments)},k.prototype.truncate=function(b,a,c){this._rpc("truncate",arguments)},k.prototype.readFile=function(b,a,c,d){this._rpc("readFile",arguments)},k.prototype.writeFile=function(b,a,c,d,h,k){this._rpc("writeFile",arguments)},k.prototype.appendFile=function(b,a,c,d,h,k){this._rpc("appendFile",arguments)},
k.prototype.chmod=function(b,a,c,d){this._rpc("chmod",arguments)},k.prototype.chown=function(b,a,c,d,h){this._rpc("chown",arguments)},k.prototype.utimes=function(b,a,c,d){this._rpc("utimes",arguments)},k.prototype.link=function(b,a,c){this._rpc("link",arguments)},k.prototype.symlink=function(b,a,c,d){this._rpc("symlink",arguments)},k.prototype.readlink=function(b,a){this._rpc("readlink",arguments)},k.prototype.syncClose=function(b,a,c){this._worker.postMessage({browserfsMessage:!0,method:b,args:[a.toRemoteArg(),
this._callbackConverter.toRemoteArg(c)]})},k.attachRemoteListener=function(d){function k(d,h,m){switch(typeof d){case "object":d instanceof b.Stats?m(null,{type:f.STATS,statsData:d.toBuffer().toArrayBuffer()}):d instanceof p.ApiError?m(null,n(d)):d instanceof c.BaseFile?m(null,E.toRemoteArg(d,h[0],h[1],m)):d instanceof a.FileFlag?m(null,{type:f.FILEFLAG,flagStr:d.getFlagString()}):d instanceof z?m(null,{type:f.BUFFER,data:d.toArrayBuffer()}):m(null,d);break;default:m(null,d)}}function m(c,h){if(null==
c)return c;switch(typeof c){case "object":if("number"!=typeof c.type)return c;switch(c.type){case f.CB:var E=c.id;return function(){var b,a,c=Array(arguments.length),m=arguments.length;for(b=0;b<arguments.length;b++)!function(b,t){k(t,h,function(h,k){c[b]=k;h?0<m&&(m=-1,a={browserfsMessage:!0,cbId:E,args:[n(h)]},d.postMessage(a)):0===--m&&(a={browserfsMessage:!0,cbId:E,args:c},d.postMessage(a))})}(b,arguments[b]);0===arguments.length&&(a={browserfsMessage:!0,cbId:E,args:c},d.postMessage(a))};case f.ERROR:return p.ApiError.fromBuffer(new z(c.errorData));
case f.STATS:return b.Stats.fromBuffer(new z(c.statsData));case f.FILEFLAG:return a.FileFlag.getFileFlag(c.flagStr);case f.BUFFER:return new z(c.data);default:return c}default:return c}}var E=new G,t=h.BFSRequire("fs");d.addEventListener("message",function(b){if(null!=b.data&&"object"==typeof b.data&&b.data.hasOwnProperty("browserfsMessage")&&b.data.browserfsMessage){var a,c=b.data,h=c.args;b=Array(h.length);switch(c.method){case "close":case "sync":!function(){var b=h[1];E.applyFdAPIRequest(c,function(a){a=
{browserfsMessage:!0,cbId:b.id,args:a?[n(a)]:[]};d.postMessage(a)})}();break;case "probe":!function(){var b=t.getRootFS(),b={browserfsMessage:!0,cbId:h[0].id,args:[{type:f.PROBE,isReadOnly:b.isReadOnly(),supportsLinks:b.supportsLinks(),supportsProps:b.supportsProps()}]};d.postMessage(b)}();break;default:for(a=0;a<h.length;a++)b[a]=m(h[a],b);a=t.getRootFS();a[c.method].apply(a,b)}}})},k}(q.BaseFileSystem);l.WorkerFS=g;h.registerFileSystem("WorkerFS",g)},{"../core/api_error":14,"../core/browserfs":15,
"../core/buffer":16,"../core/file":21,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/preload_file":36}],13:[function(g,q,l){function n(b,a){return new Date((a>>9)+1980,(a>>5&15)-1,31&a,b>>11,b>>5&63,31&b)}function f(b,a,c,d){return 0===d?"":b.toString(a?"utf8":"extended_ascii",c,c+d)}var e=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},d=g("../core/buffer"),
p=g("../core/api_error"),a=g("../generic/file_index");q=g("../core/browserfs");var c=g("../core/node_fs_stats"),b=g("../core/file_system"),k=g("../core/file_flag"),h=g("../core/buffer_core_arraybuffer"),z=g("../generic/preload_file"),M=g("zlib-inflate").inflateRaw,G=p.ApiError,t=p.ErrorCode,m=k.ActionType;!function(b){b[b.MSDOS=0]="MSDOS";b[b.AMIGA=1]="AMIGA";b[b.OPENVMS=2]="OPENVMS";b[b.UNIX=3]="UNIX";b[b.VM_CMS=4]="VM_CMS";b[b.ATARI_ST=5]="ATARI_ST";b[b.OS2_HPFS=6]="OS2_HPFS";b[b.MAC=7]="MAC";b[b.Z_SYSTEM=
8]="Z_SYSTEM";b[b.CP_M=9]="CP_M";b[b.NTFS=10]="NTFS";b[b.MVS=11]="MVS";b[b.VSE=12]="VSE";b[b.ACORN_RISC=13]="ACORN_RISC";b[b.VFAT=14]="VFAT";b[b.ALT_MVS=15]="ALT_MVS";b[b.BEOS=16]="BEOS";b[b.TANDEM=17]="TANDEM";b[b.OS_400=18]="OS_400";b[b.OSX=19]="OSX"}(l.ExternalFileAttributeType||(l.ExternalFileAttributeType={}));l.ExternalFileAttributeType;!function(b){b[b.STORED=0]="STORED";b[b.SHRUNK=1]="SHRUNK";b[b.REDUCED_1=2]="REDUCED_1";b[b.REDUCED_2=3]="REDUCED_2";b[b.REDUCED_3=4]="REDUCED_3";b[b.REDUCED_4=
5]="REDUCED_4";b[b.IMPLODE=6]="IMPLODE";b[b.DEFLATE=8]="DEFLATE";b[b.DEFLATE64=9]="DEFLATE64";b[b.TERSE_OLD=10]="TERSE_OLD";b[b.BZIP2=12]="BZIP2";b[b.LZMA=14]="LZMA";b[b.TERSE_NEW=18]="TERSE_NEW";b[b.LZ77=19]="LZ77";b[b.WAVPACK=97]="WAVPACK";b[b.PPMD=98]="PPMD"}(l.CompressionMethod||(l.CompressionMethod={}));var E=l.CompressionMethod,B=function(){function b(a){if(this.data=a,67324752!==a.readUInt32LE(0))throw new G(t.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0));
}return b.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},b.prototype.flags=function(){return this.data.readUInt16LE(6)},b.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},b.prototype.lastModFileTime=function(){return n(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},b.prototype.crc32=function(){return this.data.readUInt32LE(14)},b.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},b.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},
b.prototype.fileName=function(){return f(this.data,this.useUTF8(),30,this.fileNameLength())},b.prototype.extraField=function(){var b=30+this.fileNameLength();return this.data.slice(b,b+this.extraFieldLength())},b.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},b.prototype.useUTF8=function(){return 2048===(2048&this.flags())},b}();l.FileHeader=B;var C=function(){function b(a,c,d){this.header=a;this.record=c;this.data=d}return b.prototype.decompress=function(){var b=
this.data,a=this.header.compressionMethod();switch(a){case E.DEFLATE:if(b.getBufferCore()instanceof h.BufferCoreArrayBuffer)return a=b.getBufferCore().getDataView(),b=a.byteOffset+b.getOffset(),b=(new Uint8Array(a.buffer)).subarray(b,b+this.record.compressedSize()),b=M(b,{chunkSize:this.record.uncompressedSize()}),new d.Buffer(new h.BufferCoreArrayBuffer(b.buffer),b.byteOffset,b.byteOffset+b.length);b=b.slice(0,this.record.compressedSize());return new d.Buffer(M(b.toJSON().data,{chunkSize:this.record.uncompressedSize()}));
case E.STORED:return b.sliceCopy(0,this.record.uncompressedSize());default:throw b=E[a],b=b?b:"Unknown: "+a,new G(t.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+b);}},b}();l.FileData=C;g=function(){function b(a){this.data=a}return b.prototype.crc32=function(){return this.data.readUInt32LE(0)},b.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},b.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)},b}();l.DataDescriptor=g;g=function(){function b(a){if(this.data=
a,134630224!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0));}return b.prototype.length=function(){return this.data.readUInt32LE(4)},b.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())},b}();l.ArchiveExtraDataRecord=g;g=function(){function b(a){if(this.data=a,84233040!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0));}return b.prototype.size=
function(){return this.data.readUInt16LE(4)},b.prototype.signatureData=function(){return this.data.slice(6,6+this.size())},b}();l.DigitalSignature=g;var T=function(){function b(a,c){if(this.zipData=a,this.data=c,33639248!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));}return b.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},b.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},
b.prototype.flag=function(){return this.data.readUInt16LE(8)},b.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},b.prototype.lastModFileTime=function(){return n(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},b.prototype.crc32=function(){return this.data.readUInt32LE(16)},b.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},b.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},b.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},
b.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},b.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},b.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},b.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},b.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},b.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},b.prototype.fileName=function(){return f(this.data,
this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},b.prototype.extraField=function(){var b=44+this.fileNameLength();return this.data.slice(b,b+this.extraFieldLength())},b.prototype.fileComment=function(){var b=46+this.fileNameLength()+this.extraFieldLength();return f(this.data,this.useUTF8(),b,this.fileCommentLength())},b.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},b.prototype.isDirectory=function(){var b=this.fileName();
return(16&this.externalAttributes()?!0:!1)||"/"===b.charAt(b.length-1)},b.prototype.isFile=function(){return!this.isDirectory()},b.prototype.useUTF8=function(){return 2048===(2048&this.flag())},b.prototype.isEncrypted=function(){return 1===(1&this.flag())},b.prototype.getData=function(){var b=this.headerRelativeOffset(),a=new B(this.zipData.slice(b));return(new C(a,this,this.zipData.slice(b+a.totalSize()))).decompress()},b.prototype.getStats=function(){return new c.Stats(c.FileType.FILE,this.uncompressedSize(),
365,new Date,this.lastModFileTime())},b}();l.CentralDirectory=T;var H=function(){function b(a){if(this.data=a,101010256!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0));}return b.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},b.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},b.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},b.prototype.cdTotalEntryCount=
function(){return this.data.readUInt16LE(10)},b.prototype.cdSize=function(){return this.data.readUInt32LE(12)},b.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},b.prototype.cdZipComment=function(){return f(this.data,!0,22,this.data.readUInt16LE(20))},b}();l.EndOfCentralDirectory=H;b=function(b){function c(d,h){void 0===h&&(h="");b.call(this);this.data=d;this.name=h;this._index=new a.FileIndex;this.populateIndex()}return e(c,b),c.prototype.getName=function(){return"ZipFS"+(""!==this.name?
" "+this.name:"")},c.isAvailable=function(){return!0},c.prototype.diskSpace=function(b,a){a(this.data.length,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.statSync=function(b,a){var c=this._index.getInode(b);if(null===c)throw new G(t.ENOENT,""+b+" not found.");return c.isFile()?c.getData().getStats():c.getStats()},c.prototype.openSync=function(b,
a,c){if(a.isWriteable())throw new G(t.EPERM,b);c=this._index.getInode(b);if(null===c)throw new G(t.ENOENT,""+b+" is not in the FileIndex.");if(c.isDir())throw new G(t.EISDIR,""+b+" is a directory.");c=c.getData();var d=c.getStats();switch(a.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw new G(t.EEXIST,""+b+" already exists.");case m.NOP:return new z.NoSyncFile(this,b,a,d,c.getData());default:throw new G(t.EINVAL,"Invalid FileMode object.");}},c.prototype.readdirSync=function(b){var a=
this._index.getInode(b);if(null===a)throw new G(t.ENOENT,""+b+" not found.");if(a.isFile())throw new G(t.ENOTDIR,""+b+" is a file, not a directory.");return a.getListing()},c.prototype.readFileSync=function(b,a,c){b=this.openSync(b,c,420);try{var h=b.getBuffer();return null===a?0<h.length?h.sliceCopy():new d.Buffer(0):h.toString(a)}finally{b.closeSync()}},c.prototype.getEOCD=function(){for(var b=Math.min(65557,this.data.length-1),a=22;b>a;a++)if(101010256===this.data.readUInt32LE(this.data.length-
a))return new H(this.data.slice(this.data.length-a));throw new G(t.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.");},c.prototype.populateIndex=function(){var b=this.getEOCD();if(b.diskNumber()!==b.cdDiskNumber())throw new G(t.EINVAL,"ZipFS does not support spanned zip files.");var c=b.cdOffset();if(4294967295===c)throw new G(t.EINVAL,"ZipFS does not support Zip64.");for(b=c+b.cdSize();b>c;){var d=new T(this.data,this.data.slice(c)),c=c+d.totalSize(),h=d.fileName();
if("/"===h.charAt(0))throw Error("WHY IS THIS ABSOLUTE");"/"===h.charAt(h.length-1)&&(h=h.substr(0,h.length-1));d.isDirectory()?this._index.addPath("/"+h,new a.DirInode):this._index.addPath("/"+h,new a.FileInode(d))}},c}(b.SynchronousFileSystem);l.ZipFS=b;q.registerFileSystem("ZipFS",b)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/file_index":33,"../generic/preload_file":36,
"zlib-inflate":2}],14:[function(g,q,l){var n=g("./buffer").Buffer;!function(d){d[d.EPERM=0]="EPERM";d[d.ENOENT=1]="ENOENT";d[d.EIO=2]="EIO";d[d.EBADF=3]="EBADF";d[d.EACCES=4]="EACCES";d[d.EBUSY=5]="EBUSY";d[d.EEXIST=6]="EEXIST";d[d.ENOTDIR=7]="ENOTDIR";d[d.EISDIR=8]="EISDIR";d[d.EINVAL=9]="EINVAL";d[d.EFBIG=10]="EFBIG";d[d.ENOSPC=11]="ENOSPC";d[d.EROFS=12]="EROFS";d[d.ENOTEMPTY=13]="ENOTEMPTY";d[d.ENOTSUP=14]="ENOTSUP"}(l.ErrorCode||(l.ErrorCode={}));var f=l.ErrorCode,e={};e[f.EPERM]="Operation not permitted.";
e[f.ENOENT]="No such file or directory.";e[f.EIO]="Input/output error.";e[f.EBADF]="Bad file descriptor.";e[f.EACCES]="Permission denied.";e[f.EBUSY]="Resource busy or locked.";e[f.EEXIST]="File exists.";e[f.ENOTDIR]="File is not a directory.";e[f.EISDIR]="File is a directory.";e[f.EINVAL]="Invalid argument.";e[f.EFBIG]="File is too big.";e[f.ENOSPC]="No space left on disk.";e[f.EROFS]="Cannot modify a read-only file system.";e[f.ENOTEMPTY]="Directory is not empty.";e[f.ENOTSUP]="Operation is not supported.";
g=function(){function d(d,a){this.type=d;this.code=f[d];null!=a?this.message=a:this.message=e[d]}return d.prototype.toString=function(){return this.code+": "+e[this.type]+" "+this.message},d.prototype.writeToBuffer=function(d,a){void 0===d&&(d=new n(this.bufferSize()));void 0===a&&(a=0);d.writeUInt8(this.type,a);var c=d.write(this.message,a+5);return d.writeUInt32LE(c,a+1),d},d.fromBuffer=function(e,a){return void 0===a&&(a=0),new d(e.readUInt8(a),e.toString("utf8",a+5,a+5+e.readUInt32LE(a+1)))},
d.prototype.bufferSize=function(){return 5+n.byteLength(this.message)},d.FileError=function(p,a){return new d(p,a+": "+e[p])},d.ENOENT=function(d){return this.FileError(f.ENOENT,d)},d.EEXIST=function(d){return this.FileError(f.EEXIST,d)},d.EISDIR=function(d){return this.FileError(f.EISDIR,d)},d.ENOTDIR=function(d){return this.FileError(f.ENOTDIR,d)},d.EPERM=function(d){return this.FileError(f.EPERM,d)},d}();l.ApiError=g},{"./buffer":16}],15:[function(g,q,l){function n(a){switch(a){case "fs":return e;
case "path":return d;case "buffer":return f;case "process":return p.process;default:return l.FileSystem[a]}}var f=g("./buffer"),e=g("./node_fs"),d=g("./node_path"),p=g("./node_process");l.install=function(a){a.Buffer=f.Buffer;a.process=p.process;var c=null!=a.require?a.require:null;a.require=function(b){var a=n(b);return null==a?c.apply(null,Array.prototype.slice.call(arguments,0)):a}};l.FileSystem={};l.registerFileSystem=function(a,c){l.FileSystem[a]=c};l.BFSRequire=n;l.initialize=function(a){return e._initialize(a)}},
{"./buffer":16,"./node_fs":26,"./node_path":28,"./node_process":29}],16:[function(g,q,l){var n=g("./buffer_core");q=g("./buffer_core_array");var f=g("./buffer_core_arraybuffer"),e=g("./buffer_core_imagedata"),d=g("./string_util"),p=[f.BufferCoreArrayBuffer,e.BufferCoreImageData,q.BufferCoreArray],a=function(){var a,b;for(a=0;a<p.length;a++)if(b=p[a],b.isAvailable())return b;throw Error("This browser does not support any available BufferCore implementations.");}();g=function(){function c(b,d,h){void 0===
d&&(d="utf8");this.offset=0;if(!(this instanceof c))return new c(b,d);if(b instanceof n.BufferCoreCommon)this.data=b,b="number"==typeof d?d:0,h="number"==typeof h?h:this.data.getLength(),this.offset=b,this.length=h-b;else if("number"==typeof b){if(b!==b>>>0)throw new TypeError("Buffer size must be a uint32.");this.length=b;this.data=new a(b)}else if("undefined"!=typeof DataView&&b instanceof DataView)this.data=new f.BufferCoreArrayBuffer(b),this.length=b.byteLength;else if("undefined"!=typeof ArrayBuffer&&
"number"==typeof b.byteLength)this.data=new f.BufferCoreArrayBuffer(b),this.length=b.byteLength;else if(b instanceof c)this.data=new a(b.length),this.length=b.length,b.copy(this);else if(Array.isArray(b)||null!=b&&"object"==typeof b&&"number"==typeof b[0]){this.data=new a(b.length);for(h=0;h<b.length;h++)this.data.writeUInt8(h,b[h]);this.length=b.length}else{if("string"!=typeof b)throw Error("Invalid argument to Buffer constructor: "+b);this.length=c.byteLength(b,d);this.data=new a(this.length);this.write(b,
0,this.length,d)}}return c.prototype.getBufferCore=function(){return this.data},c.prototype.getOffset=function(){return this.offset},c.prototype.set=function(b,a){return 0>a?this.writeInt8(a,b):this.writeUInt8(a,b)},c.prototype.get=function(b){return this.readUInt8(b)},c.prototype.write=function(b,a,h,e){if(void 0===a&&(a=0),void 0===h&&(h=this.length),void 0===e&&(e="utf8"),"string"==typeof a?(e=""+a,a=0,h=this.length):"string"==typeof h&&(e=""+h,h=this.length),a>=this.length)return 0;e=d.FindUtil(e);
return h=h+a>this.length?this.length-a:h,a+=this.offset,e.str2byte(b,0===a&&h===this.length?this:new c(this.data,a,h+a))},c.prototype.toString=function(b,a,h){if(void 0===b&&(b="utf8"),void 0===a&&(a=0),void 0===h&&(h=this.length),!(h>=a))throw Error("Invalid start/end positions: "+a+" - "+h);if(a===h)return"";h>this.length&&(h=this.length);return d.FindUtil(b).byte2str(0===a&&h===this.length?this:new c(this.data,a+this.offset,h+this.offset))},c.prototype.toJSON=function(){for(var b=this.length,a=
Array(b),c=0;b>c;c++)a[c]=this.readUInt8(c);return{type:"Buffer",data:a}},c.prototype.toArrayBuffer=function(){var b=this.getBufferCore();if(b instanceof f.BufferCoreArrayBuffer){var a=b.getDataView(),b=a.buffer;return 0===a.byteOffset&&a.byteLength===b.byteLength?b:b.slice(a.byteOffset,a.byteLength)}b=new ArrayBuffer(this.length);a=new c(b);return this.copy(a,0,0,this.length),b},c.prototype.copy=function(b,a,c,d){if(void 0===a&&(a=0),void 0===c&&(c=0),void 0===d&&(d=this.length),a=0>a?0:a,c=0>c?
0:c,c>d)throw new RangeError("sourceEnd < sourceStart");if(d===c)return 0;if(a>=b.length)throw new RangeError("targetStart out of bounds");if(c>=this.length)throw new RangeError("sourceStart out of bounds");if(d>this.length)throw new RangeError("sourceEnd out of bounds");var e=Math.min(d-c,b.length-a,this.length-c);for(d=0;e-3>d;d+=4)b.writeInt32LE(this.readInt32LE(c+d),a+d);for(d=4294967292&e;e>d;d++)b.writeUInt8(this.readUInt8(c+d),a+d);return e},c.prototype.slice=function(b,a){if(void 0===b&&(b=
0),void 0===a&&(a=this.length),0>b&&(b+=this.length,0>b&&(b=0)),0>a&&(a+=this.length,0>a&&(a=0)),a>this.length&&(a=this.length),b>a&&(b=a),0>b||0>a||b>=this.length||a>this.length)throw Error("Invalid slice indices.");return new c(this.data,b+this.offset,a+this.offset)},c.prototype.sliceCopy=function(b,a){if(void 0===b&&(b=0),void 0===a&&(a=this.length),0>b&&(b+=this.length,0>b&&(b=0)),0>a&&(a+=this.length,0>a&&(a=0)),a>this.length&&(a=this.length),b>a&&(b=a),0>b||0>a||b>=this.length||a>this.length)throw Error("Invalid slice indices.");
return new c(this.data.copy(b+this.offset,a+this.offset))},c.prototype.fill=function(b,a,c){void 0===a&&(a=0);void 0===c&&(c=this.length);switch(typeof b){case "string":b=255&b.charCodeAt(0);break;case "number":break;default:throw Error("Invalid argument to fill.");}a+=this.offset;c+=this.offset;this.data.fill(b,a,c)},c.prototype.readUInt8=function(b,a){return b+=this.offset,this.data.readUInt8(b)},c.prototype.readUInt16LE=function(b,a){return b+=this.offset,this.data.readUInt16LE(b)},c.prototype.readUInt16BE=
function(b,a){return b+=this.offset,this.data.readUInt16BE(b)},c.prototype.readUInt32LE=function(b,a){return b+=this.offset,this.data.readUInt32LE(b)},c.prototype.readUInt32BE=function(b,a){return b+=this.offset,this.data.readUInt32BE(b)},c.prototype.readInt8=function(b,a){return b+=this.offset,this.data.readInt8(b)},c.prototype.readInt16LE=function(b,a){return b+=this.offset,this.data.readInt16LE(b)},c.prototype.readInt16BE=function(b,a){return b+=this.offset,this.data.readInt16BE(b)},c.prototype.readInt32LE=
function(b,a){return b+=this.offset,this.data.readInt32LE(b)},c.prototype.readInt32BE=function(b,a){return b+=this.offset,this.data.readInt32BE(b)},c.prototype.readFloatLE=function(b,a){return b+=this.offset,this.data.readFloatLE(b)},c.prototype.readFloatBE=function(b,a){return b+=this.offset,this.data.readFloatBE(b)},c.prototype.readDoubleLE=function(b,a){return b+=this.offset,this.data.readDoubleLE(b)},c.prototype.readDoubleBE=function(b,a){return b+=this.offset,this.data.readDoubleBE(b)},c.prototype.writeUInt8=
function(b,a,c){a+=this.offset;this.data.writeUInt8(a,b)},c.prototype.writeUInt16LE=function(b,a,c){a+=this.offset;this.data.writeUInt16LE(a,b)},c.prototype.writeUInt16BE=function(b,a,c){a+=this.offset;this.data.writeUInt16BE(a,b)},c.prototype.writeUInt32LE=function(b,a,c){a+=this.offset;this.data.writeUInt32LE(a,b)},c.prototype.writeUInt32BE=function(b,a,c){a+=this.offset;this.data.writeUInt32BE(a,b)},c.prototype.writeInt8=function(b,a,c){a+=this.offset;this.data.writeInt8(a,b)},c.prototype.writeInt16LE=
function(b,a,c){a+=this.offset;this.data.writeInt16LE(a,b)},c.prototype.writeInt16BE=function(b,a,c){a+=this.offset;this.data.writeInt16BE(a,b)},c.prototype.writeInt32LE=function(b,a,c){a+=this.offset;this.data.writeInt32LE(a,b)},c.prototype.writeInt32BE=function(b,a,c){a+=this.offset;this.data.writeInt32BE(a,b)},c.prototype.writeFloatLE=function(b,a,c){a+=this.offset;this.data.writeFloatLE(a,b)},c.prototype.writeFloatBE=function(b,a,c){a+=this.offset;this.data.writeFloatBE(a,b)},c.prototype.writeDoubleLE=
function(b,a,c){a+=this.offset;this.data.writeDoubleLE(a,b)},c.prototype.writeDoubleBE=function(b,a,c){a+=this.offset;this.data.writeDoubleBE(a,b)},c.isEncoding=function(b){try{d.FindUtil(b)}catch(a){return!1}return!0},c.isBuffer=function(b){return b instanceof c},c.byteLength=function(b,a){void 0===a&&(a="utf8");return d.FindUtil(a).byteLength(b)},c.concat=function(b,a){var d;if(0===b.length||0===a)return new c(0);if(1===b.length)return b[0];if(null==a)for(var e=a=0;e<b.length;e++)d=b[e],a+=d.length;
for(var e=new c(a),p=0,f=0;f<b.length;f++)d=b[f],p+=d.copy(e,p);return e},c}();l.Buffer=g},{"./buffer_core":17,"./buffer_core_array":18,"./buffer_core_arraybuffer":19,"./buffer_core_imagedata":20,"./string_util":30}],17:[function(g,q,l){var n=Math.pow(2,128),f=-1*n;g=function(){function e(){}return e.prototype.getLength=function(){throw Error("BufferCore implementations should implement getLength.");},e.prototype.writeInt8=function(d,e){this.writeUInt8(d,255&e|(2147483648&e)>>>24)},e.prototype.writeInt16LE=
function(d,e){this.writeUInt8(d,255&e);this.writeUInt8(d+1,e>>>8&255|(2147483648&e)>>>24)},e.prototype.writeInt16BE=function(d,e){this.writeUInt8(d+1,255&e);this.writeUInt8(d,e>>>8&255|(2147483648&e)>>>24)},e.prototype.writeInt32LE=function(d,e){this.writeUInt8(d,255&e);this.writeUInt8(d+1,e>>>8&255);this.writeUInt8(d+2,e>>>16&255);this.writeUInt8(d+3,e>>>24&255)},e.prototype.writeInt32BE=function(d,e){this.writeUInt8(d+3,255&e);this.writeUInt8(d+2,e>>>8&255);this.writeUInt8(d+1,e>>>16&255);this.writeUInt8(d,
e>>>24&255)},e.prototype.writeUInt8=function(d,e){throw Error("BufferCore implementations should implement writeUInt8.");},e.prototype.writeUInt16LE=function(d,e){this.writeUInt8(d,255&e);this.writeUInt8(d+1,e>>8&255)},e.prototype.writeUInt16BE=function(d,e){this.writeUInt8(d+1,255&e);this.writeUInt8(d,e>>8&255)},e.prototype.writeUInt32LE=function(d,e){this.writeInt32LE(d,0|e)},e.prototype.writeUInt32BE=function(d,e){this.writeInt32BE(d,0|e)},e.prototype.writeFloatLE=function(d,e){this.writeInt32LE(d,
this.float2intbits(e))},e.prototype.writeFloatBE=function(d,e){this.writeInt32BE(d,this.float2intbits(e))},e.prototype.writeDoubleLE=function(d,e){var a=this.double2longbits(e);this.writeInt32LE(d,a[0]);this.writeInt32LE(d+4,a[1])},e.prototype.writeDoubleBE=function(d,e){var a=this.double2longbits(e);this.writeInt32BE(d+4,a[0]);this.writeInt32BE(d,a[1])},e.prototype.readInt8=function(d){d=this.readUInt8(d);return 128&d?4294967168|d:d},e.prototype.readInt16LE=function(d){d=this.readUInt16LE(d);return 32768&
d?4294934528|d:d},e.prototype.readInt16BE=function(d){d=this.readUInt16BE(d);return 32768&d?4294934528|d:d},e.prototype.readInt32LE=function(d){return 0|this.readUInt32LE(d)},e.prototype.readInt32BE=function(d){return 0|this.readUInt32BE(d)},e.prototype.readUInt8=function(d){throw Error("BufferCore implementations should implement readUInt8.");},e.prototype.readUInt16LE=function(d){return this.readUInt8(d+1)<<8|this.readUInt8(d)},e.prototype.readUInt16BE=function(d){return this.readUInt8(d)<<8|this.readUInt8(d+
1)},e.prototype.readUInt32LE=function(d){return(this.readUInt8(d+3)<<24|this.readUInt8(d+2)<<16|this.readUInt8(d+1)<<8|this.readUInt8(d))>>>0},e.prototype.readUInt32BE=function(d){return(this.readUInt8(d)<<24|this.readUInt8(d+1)<<16|this.readUInt8(d+2)<<8|this.readUInt8(d+3))>>>0},e.prototype.readFloatLE=function(d){return this.intbits2float(this.readInt32LE(d))},e.prototype.readFloatBE=function(d){return this.intbits2float(this.readInt32BE(d))},e.prototype.readDoubleLE=function(d){return this.longbits2double(this.readInt32LE(d+
4),this.readInt32LE(d))},e.prototype.readDoubleBE=function(d){return this.longbits2double(this.readInt32BE(d),this.readInt32BE(d+4))},e.prototype.copy=function(d,e){throw Error("BufferCore implementations should implement copy.");},e.prototype.fill=function(d,e,a){for(;a>e;e++)this.writeUInt8(e,d)},e.prototype.float2intbits=function(d){var e,a,c;return 0===d?0:d===Number.POSITIVE_INFINITY?2139095040:d===Number.NEGATIVE_INFINITY?-8388608:isNaN(d)?2143289344:(c=0>d?1:0,d=Math.abs(d),1.1754942106924411E-38>=
d&&1.401298464324817E-45<=d?(e=0,a=Math.round(d/Math.pow(2,-126)*Math.pow(2,23)),c<<31|e<<23|a):(e=Math.floor(Math.log(d)/Math.LN2),a=Math.round((d/Math.pow(2,e)-1)*Math.pow(2,23)),c<<31|e+127<<23|a))},e.prototype.double2longbits=function(d){var e,a,c,b;return 0===d?[0,0]:d===Number.POSITIVE_INFINITY?[0,2146435072]:d===Number.NEGATIVE_INFINITY?[0,-1048576]:isNaN(d)?[0,2146959360]:(b=0>d?-2147483648:0,d=Math.abs(d),2.225073858507201E-308>=d&&4.9E-324<=d?(e=0,c=d/Math.pow(2,-1022)*Math.pow(2,52)):(e=
Math.floor(Math.log(d)/Math.LN2),d<Math.pow(2,e)&&--e,c=(d/Math.pow(2,e)-1)*Math.pow(2,52),e=e+1023<<20),a=c*Math.pow(2,-32)|0|b|e,[65535&c,a])},e.prototype.intbits2float=function(d){if(2139095040===d)return Number.POSITIVE_INFINITY;if(-8388608===d)return Number.NEGATIVE_INFINITY;var e,a=(2147483648&d)>>>31,c=(2139095040&d)>>>23;d&=8388607;return e=0===c?Math.pow(-1,a)*d*Math.pow(2,-149):Math.pow(-1,a)*(1+d*Math.pow(2,-23))*Math.pow(2,c-127),(f>e||e>n)&&(e=NaN),e},e.prototype.longbits2double=function(d,
e){var a=(2147483648&d)>>>31,c=(2146435072&d)>>>20,b=(1048575&d)*Math.pow(2,32)+e;return 0===c&&0===b?0:2047===c?0===b?1===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:NaN:0===c?Math.pow(-1,a)*b*Math.pow(2,-1074):Math.pow(-1,a)*(1+b*Math.pow(2,-52))*Math.pow(2,c-1023)},e}();l.BufferCoreCommon=g},{}],18:[function(g,q,l){var n=this.__extends||function(e,d){function p(){this.constructor=e}for(var a in d)d.hasOwnProperty(a)&&(e[a]=d[a]);p.prototype=d.prototype;e.prototype=new p},f=[4294967040,
4294902015,4278255615,16777215];g=function(e){function d(d){e.call(this);this.length=d;this.buff=Array(Math.ceil(d/4));d=this.buff.length;for(var a=0;d>a;a++)this.buff[a]=0}return n(d,e),d.isAvailable=function(){return!0},d.prototype.getLength=function(){return this.length},d.prototype.writeUInt8=function(d,a){var c=d>>2,b=3&d;this.buff[c]&=f[b];this.buff[c]|=(a&255)<<(b<<3)},d.prototype.readUInt8=function(d){return this.buff[d>>2]>>((3&d)<<3)&255},d.prototype.copy=function(e,a){for(var c=new d(a-
e),b=e;a>b;b++)c.writeUInt8(b-e,this.readUInt8(b));return c},d}(g("./buffer_core").BufferCoreCommon);l.BufferCoreArray=g},{"./buffer_core":17}],19:[function(g,q,l){var n=this.__extends||function(f,e){function d(){this.constructor=f}for(var p in e)e.hasOwnProperty(p)&&(f[p]=e[p]);d.prototype=e.prototype;f.prototype=new d};g=function(f){function e(d){f.call(this);"number"==typeof d?this.buff=new DataView(new ArrayBuffer(d)):d instanceof DataView?this.buff=d:this.buff=new DataView(d);this.length=this.buff.byteLength}
return n(e,f),e.isAvailable=function(){return"undefined"!=typeof DataView},e.prototype.getLength=function(){return this.length},e.prototype.writeInt8=function(d,e){this.buff.setInt8(d,e)},e.prototype.writeInt16LE=function(d,e){this.buff.setInt16(d,e,!0)},e.prototype.writeInt16BE=function(d,e){this.buff.setInt16(d,e,!1)},e.prototype.writeInt32LE=function(d,e){this.buff.setInt32(d,e,!0)},e.prototype.writeInt32BE=function(d,e){this.buff.setInt32(d,e,!1)},e.prototype.writeUInt8=function(d,e){this.buff.setUint8(d,
e)},e.prototype.writeUInt16LE=function(d,e){this.buff.setUint16(d,e,!0)},e.prototype.writeUInt16BE=function(d,e){this.buff.setUint16(d,e,!1)},e.prototype.writeUInt32LE=function(d,e){this.buff.setUint32(d,e,!0)},e.prototype.writeUInt32BE=function(d,e){this.buff.setUint32(d,e,!1)},e.prototype.writeFloatLE=function(d,e){this.buff.setFloat32(d,e,!0)},e.prototype.writeFloatBE=function(d,e){this.buff.setFloat32(d,e,!1)},e.prototype.writeDoubleLE=function(d,e){this.buff.setFloat64(d,e,!0)},e.prototype.writeDoubleBE=
function(d,e){this.buff.setFloat64(d,e,!1)},e.prototype.readInt8=function(d){return this.buff.getInt8(d)},e.prototype.readInt16LE=function(d){return this.buff.getInt16(d,!0)},e.prototype.readInt16BE=function(d){return this.buff.getInt16(d,!1)},e.prototype.readInt32LE=function(d){return this.buff.getInt32(d,!0)},e.prototype.readInt32BE=function(d){return this.buff.getInt32(d,!1)},e.prototype.readUInt8=function(d){return this.buff.getUint8(d)},e.prototype.readUInt16LE=function(d){return this.buff.getUint16(d,
!0)},e.prototype.readUInt16BE=function(d){return this.buff.getUint16(d,!1)},e.prototype.readUInt32LE=function(d){return this.buff.getUint32(d,!0)},e.prototype.readUInt32BE=function(d){return this.buff.getUint32(d,!1)},e.prototype.readFloatLE=function(d){return this.buff.getFloat32(d,!0)},e.prototype.readFloatBE=function(d){return this.buff.getFloat32(d,!1)},e.prototype.readDoubleLE=function(d){return this.buff.getFloat64(d,!0)},e.prototype.readDoubleBE=function(d){return this.buff.getFloat64(d,!1)},
e.prototype.copy=function(d,f){var a,c=this.buff.buffer;if(ArrayBuffer.prototype.slice)a=c.slice(d,f);else{a=new ArrayBuffer(f-d);var b=new Uint8Array(a),c=new Uint8Array(c);b.set(c.subarray(d,f))}return new e(a)},e.prototype.fill=function(d,e,a){d&=255;var c=a-e,b=4*(c/4|0),k=d<<24|d<<16|d<<8|d;for(a=0;b>a;a+=4)this.writeInt32LE(a+e,k);for(a=b;c>a;a++)this.writeUInt8(a+e,d)},e.prototype.getDataView=function(){return this.buff},e}(g("./buffer_core").BufferCoreCommon);l.BufferCoreArrayBuffer=g},{"./buffer_core":17}],
20:[function(g,q,l){var n=this.__extends||function(f,e){function d(){this.constructor=f}for(var p in e)e.hasOwnProperty(p)&&(f[p]=e[p]);d.prototype=e.prototype;f.prototype=new d};g=function(f){function e(d){f.call(this);this.length=d;this.buff=e.getCanvasPixelArray(d)}return n(e,f),e.getCanvasPixelArray=function(d){var f=e.imageDataFactory;return void 0===f&&(e.imageDataFactory=f=document.createElement("canvas").getContext("2d")),0===d&&(d=1),f.createImageData(Math.ceil(d/4),1).data},e.isAvailable=
function(){return"undefined"!=typeof CanvasPixelArray},e.prototype.getLength=function(){return this.length},e.prototype.writeUInt8=function(d,e){this.buff[d]=e},e.prototype.readUInt8=function(d){return this.buff[d]},e.prototype.copy=function(d,f){for(var a=new e(f-d),c=d;f>c;c++)a.writeUInt8(c-d,this.buff[c]);return a},e}(g("./buffer_core").BufferCoreCommon);l.BufferCoreImageData=g},{"./buffer_core":17}],21:[function(g,q,l){g=g("./api_error");var n=g.ApiError,f=g.ErrorCode;g=function(){function e(){}
return e.prototype.sync=function(d){d(new n(f.ENOTSUP))},e.prototype.syncSync=function(){throw new n(f.ENOTSUP);},e.prototype.datasync=function(d){this.sync(d)},e.prototype.datasyncSync=function(){return this.syncSync()},e.prototype.chown=function(d,e,a){a(new n(f.ENOTSUP))},e.prototype.chownSync=function(d,e){throw new n(f.ENOTSUP);},e.prototype.chmod=function(d,e){e(new n(f.ENOTSUP))},e.prototype.chmodSync=function(d){throw new n(f.ENOTSUP);},e.prototype.utimes=function(d,e,a){a(new n(f.ENOTSUP))},
e.prototype.utimesSync=function(d,e){throw new n(f.ENOTSUP);},e}();l.BaseFile=g},{"./api_error":14}],22:[function(g,q,l){var n=g("./api_error");!function(e){e[e.NOP=0]="NOP";e[e.THROW_EXCEPTION=1]="THROW_EXCEPTION";e[e.TRUNCATE_FILE=2]="TRUNCATE_FILE";e[e.CREATE_FILE=3]="CREATE_FILE"}(l.ActionType||(l.ActionType={}));var f=l.ActionType;g=function(){function e(d){if(this.flagStr=d,0>e.validFlagStrs.indexOf(d))throw new n.ApiError(n.ErrorCode.EINVAL,"Invalid flag: "+d);}return e.getFileFlag=function(d){return e.flagCache.hasOwnProperty(d)?
e.flagCache[d]:e.flagCache[d]=new e(d)},e.prototype.getFlagString=function(){return this.flagStr},e.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},e.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},e.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},e.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},e.prototype.isSynchronous=
function(){return-1!==this.flagStr.indexOf("s")},e.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},e.prototype.pathExistsAction=function(){return this.isExclusive()?f.THROW_EXCEPTION:this.isTruncating()?f.TRUNCATE_FILE:f.NOP},e.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?f.CREATE_FILE:f.THROW_EXCEPTION},e.flagCache={},e.validFlagStrs="r r+ rs rs+ w wx w+ wx+ a ax a+ ax+".split(" "),e}();l.FileFlag=g},{"./api_error":14}],
23:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("./api_error");var f=g("./file_flag"),e=g("./node_path");g=g("./buffer");var d=q.ApiError,p=q.ErrorCode,a=g.Buffer,c=f.ActionType;g=function(){function b(){}return b.prototype.supportsLinks=function(){return!1},b.prototype.diskSpace=function(b,a){a(0,0)},b.prototype.openFile=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.createFile=
function(b,a,c,e){throw new d(p.ENOTSUP);},b.prototype.open=function(b,a,z,f){var g=this;this.stat(b,!1,function(t,m){if(t)switch(a.pathNotExistsAction()){case c.CREATE_FILE:return g.stat(e.dirname(b),!1,function(c,m){c?f(c):m.isDirectory()?g.createFile(b,a,z,f):f(new d(p.ENOTDIR,e.dirname(b)+" is not a directory."))});case c.THROW_EXCEPTION:return f(new d(p.ENOENT,""+b+" doesn't exist."));default:return f(new d(p.EINVAL,"Invalid FileFlag object."))}else{if(m.isDirectory())return f(new d(p.EISDIR,
b+" is a directory."));switch(a.pathExistsAction()){case c.THROW_EXCEPTION:return f(new d(p.EEXIST,b+" already exists."));case c.TRUNCATE_FILE:return g.openFile(b,a,function(b,a){b?f(b):a.truncate(0,function(){a.sync(function(){f(null,a)})})});case c.NOP:return g.openFile(b,a,f);default:return f(new d(p.EINVAL,"Invalid FileFlag object."))}}})},b.prototype.rename=function(b,a,c){c(new d(p.ENOTSUP))},b.prototype.renameSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.stat=function(b,a,c){c(new d(p.ENOTSUP))},
b.prototype.statSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.openFileSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.createFileSync=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.openSync=function(b,a,z){var f;try{f=this.statSync(b,!1)}catch(g){switch(a.pathNotExistsAction()){case c.CREATE_FILE:if(!this.statSync(e.dirname(b),!1).isDirectory())throw new d(p.ENOTDIR,e.dirname(b)+" is not a directory.");return this.createFileSync(b,a,z);case c.THROW_EXCEPTION:throw new d(p.ENOENT,
""+b+" doesn't exist.");default:throw new d(p.EINVAL,"Invalid FileFlag object.");}}if(f.isDirectory())throw new d(p.EISDIR,b+" is a directory.");switch(a.pathExistsAction()){case c.THROW_EXCEPTION:throw new d(p.EEXIST,b+" already exists.");case c.TRUNCATE_FILE:return this.unlinkSync(b),this.createFileSync(b,a,f.mode);case c.NOP:return this.openFileSync(b,a);default:throw new d(p.EINVAL,"Invalid FileFlag object.");}},b.prototype.unlink=function(b,a){a(new d(p.ENOTSUP))},b.prototype.unlinkSync=function(b){throw new d(p.ENOTSUP);
},b.prototype.rmdir=function(b,a){a(new d(p.ENOTSUP))},b.prototype.rmdirSync=function(b){throw new d(p.ENOTSUP);},b.prototype.mkdir=function(b,a,c){c(new d(p.ENOTSUP))},b.prototype.mkdirSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.readdir=function(b,a){a(new d(p.ENOTSUP))},b.prototype.readdirSync=function(b){throw new d(p.ENOTSUP);},b.prototype.exists=function(b,a){this.stat(b,null,function(b){a(null==b)})},b.prototype.existsSync=function(b){try{return this.statSync(b,!0),!0}catch(a){return!1}},
b.prototype.realpath=function(b,a,c){if(this.supportsLinks()){a=b.split(e.sep);for(var f=0;f<a.length;f++){var g=a.slice(0,f+1);a[f]=e.join.apply(null,g)}}else this.exists(b,function(a){a?c(null,b):c(new d(p.ENOENT,"File "+b+" not found."))})},b.prototype.realpathSync=function(b,a){if(!this.supportsLinks()){if(this.existsSync(b))return b;throw new d(p.ENOENT,"File "+b+" not found.");}for(var c=b.split(e.sep),f=0;f<c.length;f++){var g=c.slice(0,f+1);c[f]=e.join.apply(null,g)}},b.prototype.truncate=
function(b,a,c){this.open(b,f.FileFlag.getFileFlag("r+"),420,function(b,d){return b?c(b):void d.truncate(a,function(b){d.close(function(a){c(b||a)})})})},b.prototype.truncateSync=function(b,a){var c=this.openSync(b,f.FileFlag.getFileFlag("r+"),420);try{c.truncateSync(a)}catch(d){throw d;}finally{c.closeSync()}},b.prototype.readFile=function(b,c,d,e){var f=e;this.open(b,d,420,function(b,d){return b?e(b):(e=function(b,a){d.close(function(c){return null==b&&(b=c),f(b,a)})},void d.stat(function(b,k){if(null!=
b)return e(b);var t=new a(k.size);d.read(t,0,k.size,0,function(b){if(null!=b)return e(b);if(null===c)return e(b,t);try{e(null,t.toString(c))}catch(a){e(a)}})}))})},b.prototype.readFileSync=function(b,c,d){b=this.openSync(b,d,420);try{var e=b.statSync(),f=new a(e.size);return b.readSync(f,0,e.size,0),b.closeSync(),null===c?f:f.toString(c)}finally{b.closeSync()}},b.prototype.writeFile=function(b,c,d,e,f,t){var m=t;this.open(b,e,420,function(b,k){if(null!=b)return t(b);t=function(b){k.close(function(a){m(null!=
b?b:a)})};try{"string"==typeof c&&(c=new a(c,d))}catch(e){return t(e)}k.write(c,0,c.length,0,t)})},b.prototype.writeFileSync=function(b,c,d,e,f){b=this.openSync(b,e,f);try{"string"==typeof c&&(c=new a(c,d)),b.writeSync(c,0,c.length,0)}finally{b.closeSync()}},b.prototype.appendFile=function(b,c,d,e,f,t){var m=t;this.open(b,e,f,function(b,k){return null!=b?t(b):(t=function(b){k.close(function(a){m(null!=b?b:a)})},"string"==typeof c&&(c=new a(c,d)),void k.write(c,0,c.length,null,t))})},b.prototype.appendFileSync=
function(b,c,d,e,f){b=this.openSync(b,e,f);try{"string"==typeof c&&(c=new a(c,d)),b.writeSync(c,0,c.length,null)}finally{b.closeSync()}},b.prototype.chmod=function(b,a,c,e){e(new d(p.ENOTSUP))},b.prototype.chmodSync=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.chown=function(b,a,c,e,f){f(new d(p.ENOTSUP))},b.prototype.chownSync=function(b,a,c,e){throw new d(p.ENOTSUP);},b.prototype.utimes=function(b,a,c,e){e(new d(p.ENOTSUP))},b.prototype.utimesSync=function(b,a,c){throw new d(p.ENOTSUP);
},b.prototype.link=function(b,a,c){c(new d(p.ENOTSUP))},b.prototype.linkSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.symlink=function(b,a,c,e){e(new d(p.ENOTSUP))},b.prototype.symlinkSync=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.readlink=function(b,a){a(new d(p.ENOTSUP))},b.prototype.readlinkSync=function(b){throw new d(p.ENOTSUP);},b}();l.BaseFileSystem=g;g=function(b){function a(){b.apply(this,arguments)}return n(a,b),a.prototype.supportsSynch=function(){return!0},a.prototype.rename=
function(b,a,c){try{this.renameSync(b,a),c()}catch(d){c(d)}},a.prototype.stat=function(b,a,c){try{c(null,this.statSync(b,a))}catch(d){c(d)}},a.prototype.open=function(b,a,c,d){try{d(null,this.openSync(b,a,c))}catch(k){d(k)}},a.prototype.unlink=function(b,a){try{this.unlinkSync(b),a()}catch(c){a(c)}},a.prototype.rmdir=function(b,a){try{this.rmdirSync(b),a()}catch(c){a(c)}},a.prototype.mkdir=function(b,a,c){try{this.mkdirSync(b,a),c()}catch(d){c(d)}},a.prototype.readdir=function(b,a){try{a(null,this.readdirSync(b))}catch(c){a(c)}},
a.prototype.chmod=function(b,a,c,d){try{this.chmodSync(b,a,c),d()}catch(k){d(k)}},a.prototype.chown=function(b,a,c,d,k){try{this.chownSync(b,a,c,d),k()}catch(m){k(m)}},a.prototype.utimes=function(b,a,c,d){try{this.utimesSync(b,a,c),d()}catch(k){d(k)}},a.prototype.link=function(b,a,c){try{this.linkSync(b,a),c()}catch(d){c(d)}},a.prototype.symlink=function(b,a,c,d){try{this.symlinkSync(b,a,c),d()}catch(k){d(k)}},a.prototype.readlink=function(b,a){try{a(null,this.readlinkSync(b))}catch(c){a(c)}},a}(g);
l.SynchronousFileSystem=g},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],24:[function(g,q,l){q.exports="undefined"!=typeof window?window:"undefined"!=typeof self?self:global},{}],25:[function(g,q,l){var n=this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);b.prototype=c.prototype;a.prototype=new b};q=g("./buffer");g=g("./api_error");var f=q.Buffer,e=g.ApiError,d=g.ErrorCode,p=function(){function a(a,b,d){this.data=a;this.encoding=
b;this.cb=d;this.size="string"!=typeof a?a.length:f.byteLength(a,null!=b?b:void 0);"string"!=typeof this.data&&(this.data=this.data.sliceCopy())}return a.prototype.getData=function(a){return null==a?"string"==typeof this.data?new f(this.data,null!=this.encoding?this.encoding:void 0):this.data:"string"==typeof this.data?a===this.encoding?this.data:(new f(this.data,null!=this.encoding?this.encoding:void 0)).toString(a):this.data.toString(a)},a}();g=function(){function a(){this._listeners={};this.maxListeners=
10}return a.prototype.addListener=function(a,b){return"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)>this.maxListeners&&process.stdout.write("Warning: Event "+a+" has more than "+this.maxListeners+" listeners.\n"),this.emit("newListener",a,b),this},a.prototype.on=function(a,b){return this.addListener(a,b)},a.prototype.once=function(a,b){var d=!1,h=function(){this.removeListener(a,h);d||(d=!0,b.apply(this,arguments))};return this.addListener(a,h)},a.prototype._emitRemoveListener=
function(a,b){var d;if(this._listeners.removeListener&&0<this._listeners.removeListener.length)for(d=0;d<b.length;d++)this.emit("removeListener",a,b[d])},a.prototype.removeListener=function(a,b){var d=this._listeners[a];if("undefined"!=typeof d){var h=d.indexOf(b);-1<h&&d.splice(h,1)}return this.emit("removeListener",a,b),this},a.prototype.removeAllListeners=function(a){var b;if("undefined"!=typeof a)b=this._listeners[a],this._listeners[a]=[],this._emitRemoveListener(a,b);else for(a=Object.keys(this._listeners),
b=0;b<a.length;b++)this.removeAllListeners(a[b]);return this},a.prototype.setMaxListeners=function(a){this.maxListeners=a},a.prototype.listeners=function(a){return"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].slice(0)},a.prototype.emit=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var d=this._listeners[a],h=!1;if("undefined"!=typeof d){var e;for(e=0;e<d.length;e++)h=!0,d[e].apply(this,b)}return h},a}();l.AbstractEventEmitter=g;g=function(a){function c(b,
c){a.call(this);this.writable=b;this.readable=c;this.encoding=null;this.flowing=!1;this.buffer=[];this.endEvent=null;this.ended=!1;this.drained=!0}return n(c,a),c.prototype.addListener=function(b,c){var d=a.prototype.addListener.call(this,b,c),e=this;return"data"!==b||this.flowing?"readable"===b&&0<this.buffer.length&&setTimeout(function(){e.emit("readable")},0):this.resume(),d},c.prototype._processArgs=function(b,a,c){return"string"==typeof a?new p(b,a,c):new p(b,null,a)},c.prototype._processEvents=
function(){this.drained!==(0===this.buffer.length)&&this.drained&&this.emit("readable");this.flowing&&0!==this.buffer.length&&this.emit("data",this.read());this.drained=0===this.buffer.length},c.prototype.emitEvent=function(b,a){this.emit(b,a.getData(this.encoding));a.cb&&a.cb()},c.prototype.write=function(b,a,c){if(this.ended)throw new e(d.EPERM,"Cannot write to an ended stream.");b=this._processArgs(b,a,c);return this._push(b),this.flowing},c.prototype.end=function(b,a,c){if(this.ended)throw new e(d.EPERM,
"Stream is already closed.");b=this._processArgs(b,a,c);this.ended=!0;this.endEvent=b;this._processEvents()},c.prototype.read=function(b){var a,c,d,e=[],g=[],t=0;d=0;var m="number"!=typeof b;m&&(b=4294967295);for(d=0;d<this.buffer.length&&b>t;d++)a=this.buffer[d],e.push(a.getData()),a.cb&&g.push(a.cb),t+=a.size,a=a.cb;if(!m&&b>t)return null;if(this.buffer=this.buffer.slice(e.length),d=t>b?b:t,c=f.concat(e),t>b&&(a&&g.pop(),this._push(new p(c.slice(b),null,a))),0<g.length&&setTimeout(function(){var b;
for(b=0;b<g.length;b++)g[b]()},0),this.ended&&0===this.buffer.length&&null!==this.endEvent){var E=this.endEvent,B=this;this.endEvent=null;setTimeout(function(){B.emitEvent("end",E)},0)}return 0===e.length?(this.emit("_read"),null):null===this.encoding?c.slice(0,d):c.toString(this.encoding,0,d)},c.prototype.setEncoding=function(b){this.encoding=b},c.prototype.pause=function(){this.flowing=!1},c.prototype.resume=function(){this.flowing=!0;this._processEvents()},c.prototype.pipe=function(b,a){throw new e(d.EPERM,
"Unimplemented.");},c.prototype.unpipe=function(b){},c.prototype.unshift=function(b){if(this.ended)throw new e(d.EPERM,"Stream has ended.");this.buffer.unshift(new p(b,this.encoding));this._processEvents()},c.prototype._push=function(b){this.buffer.push(b);this._processEvents()},c.prototype.wrap=function(b){throw new e(d.EPERM,"Unimplemented.");},c}(g);l.AbstractDuplexStream=g},{"./api_error":14,"./buffer":16}],26:[function(g,q,l){function n(b,a){if("function"!=typeof b)throw new h(z.EINVAL,"Callback must be a function.");
switch("undefined"==typeof __numWaiting&&(__numWaiting=0),__numWaiting++,a){case 1:return function(a){setImmediate(function(){return __numWaiting--,b(a)})};case 2:return function(a,c){setImmediate(function(){return __numWaiting--,b(a,c)})};case 3:return function(a,c,d){setImmediate(function(){return __numWaiting--,b(a,c,d)})};default:throw Error("Invalid invocation of wrapCb.");}}function f(b){if("function"!=typeof b.write)throw new h(z.EBADF,"Invalid file descriptor.");}function e(b,a){switch(typeof b){case "number":return b;
case "string":var c=parseInt(b,8);if(NaN!==c)return c;default:return a}}function d(b){if(0<=b.indexOf("\x00"))throw new h(z.EINVAL,"Path must be a string without null bytes.");if(""===b)throw new h(z.EINVAL,"Path must not be empty.");return k.resolve(b)}function p(b,a,c,d){switch(typeof b){case "object":return{encoding:"undefined"!=typeof b.encoding?b.encoding:a,flag:"undefined"!=typeof b.flag?b.flag:c,mode:e(b.mode,d)};case "string":return{encoding:b,flag:c,mode:d};default:return{encoding:a,flag:c,
mode:d}}}function a(){}l=g("./api_error");var c=g("./file_flag"),b=g("./buffer"),k=g("./node_path"),h=l.ApiError,z=l.ErrorCode,M=c.FileFlag,G=b.Buffer;g=function(){function b(){}return b._initialize=function(a){if(!a.constructor.isAvailable())throw new h(z.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return b.root=a},b._toUnixTimestamp=function(b){if("number"==typeof b)return b;if(b instanceof Date)return b.getTime()/1E3;throw Error("Cannot parse time: "+b);},b.getRootFS=
function(){return b.root?b.root:null},b.rename=function(c,h,k){void 0===k&&(k=a);k=n(k,1);try{b.root.rename(d(c),d(h),k)}catch(e){k(e)}},b.renameSync=function(a,c){b.root.renameSync(d(a),d(c))},b.exists=function(c,h){void 0===h&&(h=a);var k=n(h,1);try{return b.root.exists(d(c),k)}catch(e){return k(!1)}},b.existsSync=function(a){try{return b.root.existsSync(d(a))}catch(c){return!1}},b.stat=function(c,h){void 0===h&&(h=a);var k=n(h,2);try{return b.root.stat(d(c),!1,k)}catch(e){return k(e,null)}},b.statSync=
function(a){return b.root.statSync(d(a),!1)},b.lstat=function(c,h){void 0===h&&(h=a);var k=n(h,2);try{return b.root.stat(d(c),!0,k)}catch(e){return k(e,null)}},b.lstatSync=function(a){return b.root.statSync(d(a),!0)},b.truncate=function(c,k,e){void 0===k&&(k=0);void 0===e&&(e=a);var f=0;"function"==typeof k?e=k:"number"==typeof k&&(f=k);k=n(e,1);try{if(0>f)throw new h(z.EINVAL);return b.root.truncate(d(c),f,k)}catch(p){return k(p)}},b.truncateSync=function(a,c){if(void 0===c&&(c=0),0>c)throw new h(z.EINVAL);
return b.root.truncateSync(d(a),c)},b.unlink=function(c,h){void 0===h&&(h=a);var k=n(h,1);try{return b.root.unlink(d(c),k)}catch(e){return k(e)}},b.unlinkSync=function(a){return b.root.unlinkSync(d(a))},b.open=function(c,h,k,f){void 0===f&&(f=a);var z=e(k,420);k=n("function"==typeof k?k:f,2);try{return b.root.open(d(c),M.getFileFlag(h),z,k)}catch(p){return k(p,null)}},b.openSync=function(a,c,h){return void 0===h&&(h=420),b.root.openSync(d(a),M.getFileFlag(c),h)},b.readFile=function(c,k,e){void 0===
k&&(k={});void 0===e&&(e=a);var f=p(k,null,"r",null);k=n("function"==typeof k?k:e,2);try{var g=M.getFileFlag(f.flag);return g.isReadable()?b.root.readFile(d(c),f.encoding,g,k):k(new h(z.EINVAL,"Flag passed to readFile must allow for reading."))}catch(G){return k(G,null)}},b.readFileSync=function(a,c){void 0===c&&(c={});var k=p(c,null,"r",null),e=M.getFileFlag(k.flag);if(!e.isReadable())throw new h(z.EINVAL,"Flag passed to readFile must allow for reading.");return b.root.readFileSync(d(a),k.encoding,
e)},b.writeFile=function(c,k,e,f){void 0===e&&(e={});void 0===f&&(f=a);var g=p(e,"utf8","w",420);e=n("function"==typeof e?e:f,1);try{var G=M.getFileFlag(g.flag);return G.isWriteable()?b.root.writeFile(d(c),k,g.encoding,G,g.mode,e):e(new h(z.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(l){return e(l)}},b.writeFileSync=function(a,c,k){k=p(k,"utf8","w",420);var e=M.getFileFlag(k.flag);if(!e.isWriteable())throw new h(z.EINVAL,"Flag passed to writeFile must allow for writing.");return b.root.writeFileSync(d(a),
c,k.encoding,e,k.mode)},b.appendFile=function(c,k,e,f){void 0===f&&(f=a);var g=p(e,"utf8","a",420);e=n("function"==typeof e?e:f,1);try{var G=M.getFileFlag(g.flag);if(!G.isAppendable())return e(new h(z.EINVAL,"Flag passed to appendFile must allow for appending."));b.root.appendFile(d(c),k,g.encoding,G,g.mode,e)}catch(l){e(l)}},b.appendFileSync=function(a,c,k){k=p(k,"utf8","a",420);var e=M.getFileFlag(k.flag);if(!e.isAppendable())throw new h(z.EINVAL,"Flag passed to appendFile must allow for appending.");
return b.root.appendFileSync(d(a),c,k.encoding,e,k.mode)},b.fstat=function(b,c){void 0===c&&(c=a);var d=n(c,2);try{f(b),b.stat(d)}catch(h){d(h)}},b.fstatSync=function(b){return f(b),b.statSync()},b.close=function(b,c){void 0===c&&(c=a);var d=n(c,1);try{f(b),b.close(d)}catch(h){d(h)}},b.closeSync=function(b){return f(b),b.closeSync()},b.ftruncate=function(b,c,d){void 0===d&&(d=a);var k="number"==typeof c?c:0;c=n("function"==typeof c?c:d,1);try{if(f(b),0>k)throw new h(z.EINVAL);b.truncate(k,c)}catch(e){c(e)}},
b.ftruncateSync=function(b,a){return void 0===a&&(a=0),f(b),b.truncateSync(a)},b.fsync=function(b,c){void 0===c&&(c=a);var d=n(c,1);try{f(b),b.sync(d)}catch(h){d(h)}},b.fsyncSync=function(b){return f(b),b.syncSync()},b.fdatasync=function(b,c){void 0===c&&(c=a);var d=n(c,1);try{f(b),b.datasync(d)}catch(h){d(h)}},b.fdatasyncSync=function(b){f(b);b.datasyncSync()},b.write=function(b,c,d,k,e,t){void 0===t&&(t=a);var p=null;if("string"==typeof c){var y="utf8";switch(typeof d){case "function":t=d;break;
case "number":p=d;y="string"==typeof k?k:"utf8";t="function"==typeof e?e:t;break;default:return("function"==typeof k?k:"function"==typeof e?e:t)(new h(z.EINVAL,"Invalid arguments."))}c=new G(c,y);d=0;k=c.length}else p="number"==typeof e?e:null,t="function"==typeof e?e:t;e=n(t,3);try{f(b),null==p&&(p=b.getPos()),b.write(c,d,k,p,e)}catch(g){e(g)}},b.writeSync=function(b,a,c,d,h){var k=0;"string"==typeof a?(h="number"==typeof c?c:null,k=0,a=new G(a,"string"==typeof d?d:"utf8"),d=a.length):(k=c,h="number"==
typeof h?h:null);return f(b),null==h&&(h=b.getPos()),b.writeSync(a,k,d,h)},b.read=function(b,c,d,h,k,e){void 0===e&&(e=a);var t,y;"number"==typeof c?(e="function"==typeof k?k:e,t=0,y=new G(c),k=n(function(b,a,c){return b?e(b):void e(b,c.toString(h),a)},3)):(y=c,t=d,c=h,d=k,k=n(e,3));try{f(b),null==d&&(d=b.getPos()),b.read(y,t,c,d,k)}catch(z){k(z)}},b.readSync=function(b,a,c,d,h){var k,e=!1;if("number"==typeof a){k=a;h=c;var t=d;c=0;a=new G(k);e=!0}else k=d;f(b);null==h&&(h=b.getPos());b=b.readSync(a,
c,k,h);return e?[a.toString(t),b]:b},b.fchown=function(b,c,d,h){void 0===h&&(h=a);h=n(h,1);try{f(b),b.chown(c,d,h)}catch(k){h(k)}},b.fchownSync=function(b,a,c){return f(b),b.chownSync(a,c)},b.fchmod=function(b,c,d){void 0===d&&(d=a);d=n(d,1);try{c="string"==typeof c?parseInt(c,8):c,f(b),b.chmod(c,d)}catch(h){d(h)}},b.fchmodSync=function(b,a){return a="string"==typeof a?parseInt(a,8):a,f(b),b.chmodSync(a)},b.futimes=function(b,c,d,h){void 0===h&&(h=a);h=n(h,1);try{f(b),"number"==typeof c&&(c=new Date(1E3*
c)),"number"==typeof d&&(d=new Date(1E3*d)),b.utimes(c,d,h)}catch(k){h(k)}},b.futimesSync=function(b,a,c){return f(b),"number"==typeof a&&(a=new Date(1E3*a)),"number"==typeof c&&(c=new Date(1E3*c)),b.utimesSync(a,c)},b.rmdir=function(c,h){void 0===h&&(h=a);var k=n(h,1);try{c=d(c),b.root.rmdir(c,k)}catch(e){k(e)}},b.rmdirSync=function(a){return a=d(a),b.root.rmdirSync(a)},b.mkdir=function(c,h,k){void 0===k&&(k=a);"function"==typeof h&&(k=h,h=511);k=n(k,1);try{c=d(c),b.root.mkdir(c,h,k)}catch(e){k(e)}},
b.mkdirSync=function(a,c){return void 0===c&&(c=511),c="string"==typeof c?parseInt(c,8):c,a=d(a),b.root.mkdirSync(a,c)},b.readdir=function(c,h){void 0===h&&(h=a);var k=n(h,2);try{c=d(c),b.root.readdir(c,k)}catch(e){k(e)}},b.readdirSync=function(a){return a=d(a),b.root.readdirSync(a)},b.link=function(c,h,k){void 0===k&&(k=a);k=n(k,1);try{c=d(c),h=d(h),b.root.link(c,h,k)}catch(e){k(e)}},b.linkSync=function(a,c){return a=d(a),c=d(c),b.root.linkSync(a,c)},b.symlink=function(c,k,e,f){void 0===f&&(f=a);
var p="string"==typeof e?e:"file";e=n("function"==typeof e?e:f,1);try{if("file"!==p&&"dir"!==p)return e(new h(z.EINVAL,"Invalid type: "+p));c=d(c);k=d(k);b.root.symlink(c,k,p,e)}catch(g){e(g)}},b.symlinkSync=function(a,c,k){if(null==k)k="file";else if("file"!==k&&"dir"!==k)throw new h(z.EINVAL,"Invalid type: "+k);return a=d(a),c=d(c),b.root.symlinkSync(a,c,k)},b.readlink=function(c,h){void 0===h&&(h=a);var k=n(h,2);try{c=d(c),b.root.readlink(c,k)}catch(e){k(e)}},b.readlinkSync=function(a){return a=
d(a),b.root.readlinkSync(a)},b.chown=function(c,h,k,e){void 0===e&&(e=a);e=n(e,1);try{c=d(c),b.root.chown(c,!1,h,k,e)}catch(f){e(f)}},b.chownSync=function(a,c,h){a=d(a);b.root.chownSync(a,!1,c,h)},b.lchown=function(c,h,k,e){void 0===e&&(e=a);e=n(e,1);try{c=d(c),b.root.chown(c,!0,h,k,e)}catch(f){e(f)}},b.lchownSync=function(a,c,h){return a=d(a),b.root.chownSync(a,!0,c,h)},b.chmod=function(c,h,k){void 0===k&&(k=a);k=n(k,1);try{h="string"==typeof h?parseInt(h,8):h,c=d(c),b.root.chmod(c,!1,h,k)}catch(e){k(e)}},
b.chmodSync=function(a,c){return c="string"==typeof c?parseInt(c,8):c,a=d(a),b.root.chmodSync(a,!1,c)},b.lchmod=function(c,h,k){void 0===k&&(k=a);k=n(k,1);try{h="string"==typeof h?parseInt(h,8):h,c=d(c),b.root.chmod(c,!0,h,k)}catch(e){k(e)}},b.lchmodSync=function(a,c){return a=d(a),c="string"==typeof c?parseInt(c,8):c,b.root.chmodSync(a,!0,c)},b.utimes=function(c,h,k,e){void 0===e&&(e=a);e=n(e,1);try{c=d(c),"number"==typeof h&&(h=new Date(1E3*h)),"number"==typeof k&&(k=new Date(1E3*k)),b.root.utimes(c,
h,k,e)}catch(f){e(f)}},b.utimesSync=function(a,c,h){return a=d(a),"number"==typeof c&&(c=new Date(1E3*c)),"number"==typeof h&&(h=new Date(1E3*h)),b.root.utimesSync(a,c,h)},b.realpath=function(c,h,k){var e="object"==typeof h?h:{};k="function"==typeof h?h:a;h=n(k,2);try{c=d(c),b.root.realpath(c,e,h)}catch(f){h(f)}},b.realpathSync=function(a,c){return void 0===c&&(c={}),a=d(a),b.root.realpathSync(a,c)},b.root=null,b}();q.exports=g},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],
27:[function(g,q,l){var n=g("./buffer").Buffer;!function(e){e[e.FILE=32768]="FILE";e[e.DIRECTORY=16384]="DIRECTORY";e[e.SYMLINK=40960]="SYMLINK"}(l.FileType||(l.FileType={}));var f=l.FileType;g=function(){function e(d,e,a,c,b,k){if(void 0===c&&(c=new Date),void 0===b&&(b=new Date),void 0===k&&(k=new Date),this.size=e,this.mode=a,this.atime=c,this.mtime=b,this.ctime=k,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,null==this.mode)switch(d){case f.FILE:this.mode=
420;break;default:this.mode=511}this.blocks=Math.ceil(e/512);4096>this.mode&&(this.mode|=d)}return e.prototype.toBuffer=function(){var d=new n(32);return d.writeUInt32LE(this.size,0),d.writeUInt32LE(this.mode,4),d.writeDoubleLE(this.atime.getTime(),8),d.writeDoubleLE(this.mtime.getTime(),16),d.writeDoubleLE(this.ctime.getTime(),24),d},e.fromBuffer=function(d){var f=d.readUInt32LE(0),a=d.readUInt32LE(4),c=d.readDoubleLE(8),b=d.readDoubleLE(16);d=d.readDoubleLE(24);return new e(61440&a,f,4095&a,new Date(c),
new Date(b),new Date(d))},e.prototype.clone=function(){return new e(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},e.prototype.isFile=function(){return(61440&this.mode)===f.FILE},e.prototype.isDirectory=function(){return(61440&this.mode)===f.DIRECTORY},e.prototype.isSymbolicLink=function(){return(61440&this.mode)===f.SYMLINK},e.prototype.chmod=function(d){this.mode=61440&this.mode|d},e.prototype.isSocket=function(){return!1},e.prototype.isBlockDevice=function(){return!1},
e.prototype.isCharacterDevice=function(){return!1},e.prototype.isFIFO=function(){return!1},e}();l.Stats=g},{"./buffer":16}],28:[function(g,q,l){var n=g("./node_process").process;g=function(){function f(){}return f.normalize=function(e){""===e&&(e=".");var d=e.charAt(0)===f.sep;e=f._removeDuplicateSeps(e);for(var p=e.split(f.sep),a=[],c=0;c<p.length;c++){var b=p[c];"."!==b&&(".."===b&&(d||!d&&0<a.length&&".."!==a[0])?a.pop():a.push(b))}if(!d&&2>a.length)switch(a.length){case 1:""===a[0]&&a.unshift(".");
break;default:a.push(".")}return e=a.join(f.sep),d&&e.charAt(0)!==f.sep&&(e=f.sep+e),e},f.join=function(){for(var e=[],d=0;d<arguments.length;d++)e[d-0]=arguments[d];for(var d=[],p=0;p<e.length;p++){var a=e[p];if("string"!=typeof a)throw new TypeError("Invalid argument type to path.join: "+typeof a);""!==a&&d.push(a)}return f.normalize(d.join(f.sep))},f.resolve=function(){for(var e=[],d=0;d<arguments.length;d++)e[d-0]=arguments[d];for(var d=[],p=0;p<e.length;p++){var a=e[p];if("string"!=typeof a)throw new TypeError("Invalid argument type to path.join: "+
typeof a);""!==a&&(a.charAt(0)===f.sep&&(d=[]),d.push(a))}e=f.normalize(d.join(f.sep));if(1<e.length&&e.charAt(e.length-1)===f.sep)return e.substr(0,e.length-1);e.charAt(0)!==f.sep&&("."!==e.charAt(0)||1!==e.length&&e.charAt(1)!==f.sep||(e=1===e.length?"":e.substr(2)),d=n.cwd(),e=""!==e?this.normalize(d+("/"!==d?f.sep:"")+e):d);return e},f.relative=function(e,d){var p;e=f.resolve(e);d=f.resolve(d);var a=e.split(f.sep),c=d.split(f.sep);c.shift();a.shift();var b=0,k=[];for(p=0;p<a.length;p++)if(a[p]!==
c[p]){b=a.length-p;break}k=c.slice(p);1===a.length&&""===a[0]&&(b=0);b>a.length&&(b=a.length);a="";for(p=0;b>p;p++)a+="../";return a+=k.join(f.sep),1<a.length&&a.charAt(a.length-1)===f.sep&&(a=a.substr(0,a.length-1)),a},f.dirname=function(e){e=f._removeDuplicateSeps(e);var d=e.charAt(0)===f.sep;e=e.split(f.sep);return""===e.pop()&&0<e.length&&e.pop(),1<e.length||1===e.length&&!d?e.join(f.sep):d?f.sep:"."},f.basename=function(e,d){if(void 0===d&&(d=""),""===e)return e;e=f.normalize(e);var p=e.split(f.sep),
a=p[p.length-1];return""===a&&1<p.length?p[p.length-2]:0<d.length&&a.substr(a.length-d.length)===d?a.substr(0,a.length-d.length):a},f.extname=function(e){e=f.normalize(e);var d=e.split(f.sep);if(e=d.pop(),""===e&&0<d.length&&(e=d.pop()),".."===e)return"";d=e.lastIndexOf(".");return-1===d||0===d?"":e.substr(d)},f.isAbsolute=function(e){return 0<e.length&&e.charAt(0)===f.sep},f._makeLong=function(e){return e},f._removeDuplicateSeps=function(e){return e.replace(this._replaceRegex,this.sep)},f.sep="/",
f._replaceRegex=RegExp("//+","g"),f.delimiter=":",f}();q.exports=g},{"./node_process":29}],29:[function(g,q,l){var n=this.__extends||function(d,e){function a(){this.constructor=d}for(var c in e)e.hasOwnProperty(c)&&(d[c]=e[c]);a.prototype=e.prototype;d.prototype=new a},f=null,e=function(d){function e(){d.call(this,!0,!0);this.isRaw=!1;this.columns=80;this.rows=120;this.isTTY=!0}return n(e,d),e.prototype.setReadMode=function(a){this.isRaw!==a&&(this.isRaw=a,this.emit("modeChange"))},e.prototype.changeColumns=
function(a){a!==this.columns&&(this.columns=a,this.emit("resize"))},e.prototype.changeRows=function(a){a!==this.rows&&(this.rows=a,this.emit("resize"))},e.isatty=function(a){return a instanceof e},e}(g("./node_eventemitter").AbstractDuplexStream);l.TTY=e;q=function(){function d(){this.startTime=Date.now();this._cwd="/";this.platform="browser";this.argv=[];this.stdout=new e;this.stderr=new e;this.stdin=new e}return d.prototype.chdir=function(d){null===f&&(f=g("./node_path"));this._cwd=f.resolve(d)},
d.prototype.cwd=function(){return this._cwd},d.prototype.uptime=function(){return(Date.now()-this.startTime)/1E3|0},d}();l.Process=q;l.process=new q},{"./node_eventemitter":25,"./node_path":28}],30:[function(g,q,l){l.FindUtil=function(h){var z;a:switch(typeof h){case "object":z=""+h;break a;case "string":z=h;break a;default:throw Error("Invalid encoding argument specified");}switch(h=z,h=h.toLowerCase()){case "utf8":case "utf-8":return n;case "ascii":return f;case "binary":return d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return a;
case "hex":return c;case "base64":return p;case "binary_string":return b;case "binary_string_ie":return k;case "extended_ascii":return e;default:throw Error("Unknown encoding: "+h);}};var n=function(){function b(){}return b.str2byte=function(b,a){for(var c=0,d=0,h=a.length,k=0;c<b.length&&h>d;){var e=b.charCodeAt(c++),f=b.charCodeAt(c);if(55296<=e&&56319>=e&&56320<=f&&57343>=f){if(d+3>=h)break;k++;e=(1023&e|1024)<<10|1023&f;a.writeUInt8(e>>18|240,d++);a.writeUInt8(e>>12&63|128,d++);a.writeUInt8(e>>
6&63|128,d++);a.writeUInt8(63&e|128,d++);c++}else if(128>e)a.writeUInt8(e,d++),k++;else if(2048>e){if(d+1>=h)break;k++;a.writeUInt8(e>>6|192,d++);a.writeUInt8(63&e|128,d++)}else if(65536>e){if(d+2>=h)break;k++;a.writeUInt8(e>>12|224,d++);a.writeUInt8(e>>6&63|128,d++);a.writeUInt8(63&e|128,d++)}}return d},b.byte2str=function(b){for(var a=[],c=0;c<b.length;){var d=b.readUInt8(c++);if(128>d)a.push(String.fromCharCode(d));else{if(192>d)throw Error("Found incomplete part of character in string.");if(224>
d)a.push(String.fromCharCode((31&d)<<6|63&b.readUInt8(c++)));else if(240>d)a.push(String.fromCharCode((15&d)<<12|(63&b.readUInt8(c++))<<6|63&b.readUInt8(c++)));else{if(!(248>d))throw Error("Unable to represent UTF-8 string as UTF-16 JavaScript string.");var h=b.readUInt8(c+2);a.push(String.fromCharCode(1023&((7&d)<<8|(63&b.readUInt8(c++))<<2|(63&b.readUInt8(c++))>>4)|55296));a.push(String.fromCharCode((15&h)<<6|63&b.readUInt8(c++)|56320))}}}return a.join("")},b.byteLength=function(b){var a=encodeURIComponent(b).match(/%[89ABab]/g);
return b.length+(a?a.length:0)},b}();l.UTF8=n;var f=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,d=0;c>d;d++)a.writeUInt8(b.charCodeAt(d)%256,d);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(127&b.readUInt8(c));return a.join("")},b.byteLength=function(b){return b.length},b}();l.ASCII=f;var e=function(){function b(){}return b.str2byte=function(a,c){for(var d=a.length>c.length?c.length:
a.length,k=0;d>k;k++){var e=a.charCodeAt(k);if(127<e){var E=b.extendedChars.indexOf(a.charAt(k));-1<E&&(e=E+128)}c.writeUInt8(e,k)}return d},b.byte2str=function(a){for(var c=Array(a.length),d=0;d<a.length;d++){var k=a.readUInt8(d);127<k?c[d]=b.extendedChars[k-128]:c[d]=String.fromCharCode(k)}return c.join("")},b.byteLength=function(b){return b.length},b.extendedChars="\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb___\u00a6\u00a6\u00c1\u00c2\u00c0\u00a9\u00a6\u00a6++\u00a2\u00a5++--+-+\u00e3\u00c3++--\u00a6-+\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8i\u00cd\u00ce\u00cf++__\u00a6\u00cc_\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1_\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2_ ".split(""),
b}();l.ExtendedASCII=e;var d=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,d=0;c>d;d++)a.writeUInt8(255&b.charCodeAt(d),d);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(255&b.readUInt8(c));return a.join("")},b.byteLength=function(b){return b.length},b}();l.BINARY=d;var p=function(){function b(){}return b.byte2str=function(a){for(var c="",d=0;d<a.length;){var k=a.readUInt8(d++),e=d<a.length?
a.readUInt8(d++):NaN,E=d<a.length?a.readUInt8(d++):NaN,f=k>>2,k=(3&k)<<4|e>>4,p=(15&e)<<2|E>>6,g=63&E;isNaN(e)?p=g=64:isNaN(E)&&(g=64);c=c+b.num2b64[f]+b.num2b64[k]+b.num2b64[p]+b.num2b64[g]}return c},b.str2byte=function(a,c){var d=c.length,k="",e=0;a=a.replace(/[^A-Za-z0-9\+\/\=\-\_]/g,"");for(var E=0;e<a.length;){var f=b.b642num[a.charAt(e++)],p=b.b642num[a.charAt(e++)],g=b.b642num[a.charAt(e++)],l=b.b642num[a.charAt(e++)],n=(15&p)<<4|g>>2,y=(3&g)<<6|l;if(c.writeUInt8(f<<2|p>>4,E++),E===d)break;
if(64!==g&&(k+=c.writeUInt8(n,E++)),E===d)break;if(64!==l&&(k+=c.writeUInt8(y,E++)),E===d)break}return E},b.byteLength=function(b){return Math.floor(6*b.replace(/[^A-Za-z0-9\+\/\-\_]/g,"").length/8)},b.b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),b.num2b64=function(){for(var a=Array(b.b64chars.length),c=0;c<b.b64chars.length;c++)a[c]=b.b64chars[c];return a}(),b.b642num=function(){for(var a={},c=0;c<b.b64chars.length;c++)a[b.b64chars[c]]=c;return a["-"]=62,
a._=63,a}(),b}();l.BASE64=p;var a=function(){function b(){}return b.str2byte=function(b,a){var c=b.length;2*c>a.length&&(c=1===a.length%2?(a.length-1)/2:a.length/2);for(var d=0;c>d;d++)a.writeUInt16LE(b.charCodeAt(d),2*d);return 2*c},b.byte2str=function(b){if(0!==b.length%2)throw Error("Invalid UCS2 byte array.");for(var a=Array(b.length/2),c=0;c<b.length;c+=2)a[c/2]=String.fromCharCode(b.readUInt8(c)|b.readUInt8(c+1)<<8);return a.join("")},b.byteLength=function(b){return 2*b.length},b}();l.UCS2=
a;var c=function(){function b(){}return b.str2byte=function(b,a){if(1===b.length%2)throw Error("Invalid hex string");var c=b.length>>1;c>a.length&&(c=a.length);for(var d=0;c>d;d++){var h=this.hex2num[b.charAt(d<<1)],k=this.hex2num[b.charAt((d<<1)+1)];a.writeUInt8(h<<4|k,d)}return c},b.byte2str=function(b){for(var a=b.length,c=Array(a<<1),d=0,h=0;a>h;h++){var k=15&b.readUInt8(h),e=b.readUInt8(h)>>4;c[d++]=this.num2hex[e];c[d++]=this.num2hex[k]}return c.join("")},b.byteLength=function(b){return b.length>>
1},b.HEXCHARS="0123456789abcdef",b.num2hex=function(){for(var a=Array(b.HEXCHARS.length),c=0;c<b.HEXCHARS.length;c++)a[c]=b.HEXCHARS[c];return a}(),b.hex2num=function(){var a,c,d={};for(a=0;a<b.HEXCHARS.length;a++)c=b.HEXCHARS[a],d[c]=a;for(a=0;6>a;a++)c="ABCDEF"[a],d[c]=a+10;return d}(),b}();l.HEX=c;var b=function(){function b(){}return b.str2byte=function(a,c){if(0===a.length)return 0;var d=b.byteLength(a);d>c.length&&(d=c.length);var k=0,e=0,E=e+d,f=a.charCodeAt(k++);for(0!==f&&(c.writeUInt8(255&
f,0),e=1);E>e;e+=2)f=a.charCodeAt(k++),1===E-e&&c.writeUInt8(f>>8,e),2<=E-e&&c.writeUInt16BE(f,e);return d},b.byte2str=function(b){var a=b.length;if(0===a)return"";for(var c=Array((a>>1)+1),d=0,h=0;h<c.length;h++)0===h?1===a%2?c[h]=String.fromCharCode(256|b.readUInt8(d++)):c[h]=String.fromCharCode(0):c[h]=String.fromCharCode(b.readUInt8(d++)<<8|b.readUInt8(d++));return c.join("")},b.byteLength=function(b){if(0===b.length)return 0;var a=b.charCodeAt(0);b=b.length-1<<1;return 0!==a&&b++,b},b}();l.BINSTR=
b;var k=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,d=0;c>d;d++)a.writeUInt8(b.charCodeAt(d)-32,d);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(b.readUInt8(c)+32);return a.join("")},b.byteLength=function(b){return b.length},b}();l.BINSTRIE=k},{}],31:[function(g,q,l){l.isIE="undefined"!=typeof navigator&&(null!=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||-1!==navigator.userAgent.indexOf("Trident"));
l.isWebWorker="undefined"==typeof window},{}],32:[function(g,q,l){var n=g("../core/browserfs"),f=g("../core/node_fs");q=g("../core/buffer");g=g("../core/buffer_core_arraybuffer");var e=q.Buffer,d=g.BufferCoreArrayBuffer,p=function(){function a(b){this.fs=b;this.FS=b.getFS();this.PATH=b.getPATH();this.ERRNO_CODES=b.getERRNO_CODES()}return a.prototype.open=function(b){var a=this.fs.realPath(b.node),c=this.FS;try{c.isFile(b.node.mode)&&(b.nfd=f.openSync(a,this.fs.flagsToPermissionString(b.flags)))}catch(d){if(!d.code)throw d;
throw new c.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.close=function(b){var a=this.FS;try{a.isFile(b.node.mode)&&b.nfd&&f.closeSync(b.nfd)}catch(c){if(!c.code)throw c;throw new a.ErrnoError(this.ERRNO_CODES[c.code]);}},a.prototype.read=function(b,a,c,p,g){var l,t=new d(a.buffer);a=new e(t,a.byteOffset+c,a.byteOffset+c+p);try{l=f.readSync(b.nfd,a,0,p,g)}catch(m){throw new this.FS.ErrnoError(this.ERRNO_CODES[m.code]);}return l},a.prototype.write=function(b,a,c,p,g){var l,t=new d(a.buffer);
a=new e(t,a.byteOffset+c,a.byteOffset+c+p);try{l=f.writeSync(b.nfd,a,0,p,g)}catch(m){throw new this.FS.ErrnoError(this.ERRNO_CODES[m.code]);}return l},a.prototype.llseek=function(b,a,c){if(1===c)a+=b.position;else if(2===c&&this.FS.isFile(b.node.mode))try{var d=f.fstatSync(b.nfd);a+=d.size}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}if(0>a)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return b.position=a,a},a}(),a=function(){function a(b){this.fs=b;this.FS=b.getFS();this.PATH=
b.getPATH();this.ERRNO_CODES=b.getERRNO_CODES()}return a.prototype.getattr=function(b){var a;b=this.fs.realPath(b);try{a=f.lstatSync(b)}catch(c){if(!c.code)throw c;throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code]);}return{dev:a.dev,ino:a.ino,mode:a.mode,nlink:a.nlink,uid:a.uid,gid:a.gid,rdev:a.rdev,size:a.size,atime:a.atime,mtime:a.mtime,ctime:a.ctime,blksize:a.blksize,blocks:a.blocks}},a.prototype.setattr=function(b,a){var c=this.fs.realPath(b);try{if(void 0!==a.mode&&(f.chmodSync(c,a.mode),
b.mode=a.mode),void 0!==a.timestamp){var d=new Date(a.timestamp);f.utimesSync(c,d,d)}}catch(e){if(!e.code)throw e;if("ENOTSUP"!==e.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}if(void 0!==a.size)try{f.truncateSync(c,a.size)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}},a.prototype.lookup=function(b,a){var c=this.PATH.join2(this.fs.realPath(b),a),c=this.fs.getMode(c);return this.fs.createNode(b,a,c)},a.prototype.mknod=function(b,a,c,d){b=this.fs.createNode(b,
a,c,d);a=this.fs.realPath(b);try{this.FS.isDir(b.mode)?f.mkdirSync(a,b.mode):f.writeFileSync(a,"",{mode:b.mode})}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}return b},a.prototype.rename=function(b,a,c){b=this.fs.realPath(b);a=this.PATH.join2(this.fs.realPath(a),c);try{f.renameSync(b,a)}catch(d){if(!d.code)throw d;throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.unlink=function(b,a){var c=this.PATH.join2(this.fs.realPath(b),a);try{f.unlinkSync(c)}catch(d){if(!d.code)throw d;
throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.rmdir=function(b,a){var c=this.PATH.join2(this.fs.realPath(b),a);try{f.rmdirSync(c)}catch(d){if(!d.code)throw d;throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.readdir=function(b){b=this.fs.realPath(b);try{return f.readdirSync(b)}catch(a){if(!a.code)throw a;throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code]);}},a.prototype.symlink=function(b,a,c){b=this.PATH.join2(this.fs.realPath(b),a);try{f.symlinkSync(c,
b)}catch(d){if(!d.code)throw d;throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.readlink=function(b){b=this.fs.realPath(b);try{return f.readlinkSync(b)}catch(a){if(!a.code)throw a;throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code]);}},a}();g=function(){function c(b,c,d){if(void 0===b&&(b=self.FS),void 0===c&&(c=self.PATH),void 0===d&&(d=self.ERRNO_CODES),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",
705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},"undefined"==typeof n)throw Error("BrowserFS is not loaded. Please load it before this library.");this.FS=b;this.PATH=c;this.ERRNO_CODES=d;this.node_ops=new a(this);this.stream_ops=new p(this)}return c.prototype.mount=function(b){return this.createNode(null,"/",this.getMode(b.opts.root),0)},c.prototype.createNode=function(b,a,c,d){d=this.FS;if(!d.isDir(c)&&!d.isFile(c)&&
!d.isLink(c))throw new d.ErrnoError(this.ERRNO_CODES.EINVAL);b=d.createNode(b,a,c);return b.node_ops=this.node_ops,b.stream_ops=this.stream_ops,b},c.prototype.getMode=function(b){var a;try{a=f.lstatSync(b)}catch(c){if(!c.code)throw c;throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code]);}return a.mode},c.prototype.realPath=function(b){for(var a=[];b.parent!==b;)a.push(b.name),b=b.parent;return a.push(b.mount.opts.root),a.reverse(),this.PATH.join.apply(null,a)},c.prototype.flagsToPermissionString=
function(b){return b in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[b]:b},c.prototype.getFS=function(){return this.FS},c.prototype.getPATH=function(){return this.PATH},c.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES},c}();l.BFSEmscriptenFS=g;n.EmscriptenFS=g},{"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/node_fs":26}],33:[function(g,q,l){var n=g("../core/node_fs_stats"),f=g("../core/node_path"),e=n.Stats;g=function(){function a(){this._index=
{};this.addPath("/",new p)}return a.prototype._split_path=function(a){var b=f.dirname(a);a=a.substr(b.length+("/"===b?0:1));return[b,a]},a.prototype.fileIterator=function(a){for(var b in this._index)for(var d=this._index[b],h=d.getListing(),e=0;e<h.length;e++){var f=d.getItem(h[e]);f.isFile()&&a(f.getData())}},a.prototype.addPath=function(a,b){if(null==b)throw Error("Inode must be specified");if("/"!==a[0])throw Error("Path must be absolute, got: "+a);if(this._index.hasOwnProperty(a))return this._index[a]===
b;var d=this._split_path(a),h=d[0],d=d[1],e=this._index[h];return void 0===e&&"/"!==a&&(e=new p,!this.addPath(h,e))||"/"!==a&&!e.addItem(d,b)?!1:(b.isFile()||(this._index[a]=b),!0)},a.prototype.removePath=function(a){var b=this._split_path(a),d=this._index[b[0]];if(void 0===d)return null;b=d.remItem(b[1]);if(null===b)return null;if(!b.isFile()){for(var d=b.getListing(),h=0;h<d.length;h++)this.removePath(a+"/"+d[h]);"/"!==a&&delete this._index[a]}return b},a.prototype.ls=function(a){a=this._index[a];
return void 0===a?null:a.getListing()},a.prototype.getInode=function(a){var b=this._split_path(a),d=b[0],b=b[1],h=this._index[d];return void 0===h?null:d===a?h:h.getItem(b)},a.from_listing=function(c){var b=new a,k=new p;b._index["/"]=k;for(c=[["",c,k]];0<c.length;){var h,f=c.pop(),k=f[0],g=f[1],f=f[2],l;for(l in g){var t=g[l],m=""+k+"/"+l;null!=t?(b._index[m]=h=new p,c.push([m,t,h])):h=new d(new e(n.FileType.FILE,-1,365));null!=f&&(f._ls[l]=h)}}return b},a}();l.FileIndex=g;var d=function(){function a(a){this.data=
a}return a.prototype.isFile=function(){return!0},a.prototype.isDir=function(){return!1},a.prototype.getData=function(){return this.data},a.prototype.setData=function(a){this.data=a},a}();l.FileInode=d;var p=function(){function a(){this._ls={}}return a.prototype.isFile=function(){return!1},a.prototype.isDir=function(){return!0},a.prototype.getStats=function(){return new e(n.FileType.DIRECTORY,4096,365)},a.prototype.getListing=function(){return Object.keys(this._ls)},a.prototype.getItem=function(a){var b;
return null!=(b=this._ls[a])?b:null},a.prototype.addItem=function(a,b){return a in this._ls?!1:(this._ls[a]=b,!0)},a.prototype.remItem=function(a){var b=this._ls[a];return void 0===b?null:(delete this._ls[a],b)},a}();l.DirInode=p},{"../core/node_fs_stats":27,"../core/node_path":28}],34:[function(g,q,l){var n=g("../core/node_fs_stats"),f=g("../core/buffer");g=function(){function e(d,e,a,c,b,k){this.id=d;this.size=e;this.mode=a;this.atime=c;this.mtime=b;this.ctime=k}return e.prototype.toStats=function(){return new n.Stats((61440&
this.mode)===n.FileType.DIRECTORY?n.FileType.DIRECTORY:n.FileType.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},e.prototype.getSize=function(){return 30+this.id.length},e.prototype.toBuffer=function(d){return void 0===d&&(d=new f.Buffer(this.getSize())),d.writeUInt32LE(this.size,0),d.writeUInt16LE(this.mode,4),d.writeDoubleLE(this.atime,6),d.writeDoubleLE(this.mtime,14),d.writeDoubleLE(this.ctime,22),d.write(this.id,30,this.id.length,"ascii"),d},e.prototype.update=
function(d){var e=!1;this.size!==d.size&&(this.size=d.size,e=!0);this.mode!==d.mode&&(this.mode=d.mode,e=!0);var a=d.atime.getTime();this.atime!==a&&(this.atime=a,e=!0);a=d.mtime.getTime();this.mtime!==a&&(this.mtime=a,e=!0);d=d.ctime.getTime();return this.ctime!==d&&(this.ctime=d,e=!0),e},e.fromBuffer=function(d){if(void 0===d)throw Error("NO");return new e(d.toString("ascii",30),d.readUInt32LE(0),d.readUInt16LE(4),d.readDoubleLE(6),d.readDoubleLE(14),d.readDoubleLE(22))},e.prototype.isFile=function(){return(61440&
this.mode)===n.FileType.FILE},e.prototype.isDirectory=function(){return(61440&this.mode)===n.FileType.DIRECTORY},e}();q.exports=g},{"../core/buffer":16,"../core/node_fs_stats":27}],35:[function(g,q,l){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"==b?a:3&a|8).toString(16)})}function f(b,a){return b?(a(b),!1):!0}function e(b,a,c){return b?(a.abort(function(){c(b)}),!1):!0}var d=this.__extends||function(b,a){function c(){this.constructor=
b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file_system");var p=g("../core/api_error"),a=g("../core/node_fs_stats"),c=g("../core/node_path"),b=g("../generic/inode"),k=g("../core/buffer");g=g("../generic/preload_file");var h=p.ApiError,z=k.Buffer,k=function(){function b(a){this.store=a;this.originalData={};this.modifiedKeys=[]}return b.prototype.stashOldValue=function(b,a){this.originalData.hasOwnProperty(b)||(this.originalData[b]=a)},b.prototype.markModified=
function(b){-1===this.modifiedKeys.indexOf(b)&&(this.modifiedKeys.push(b),this.originalData.hasOwnProperty(b)||(this.originalData[b]=this.store.get(b)))},b.prototype.get=function(b){var a=this.store.get(b);return this.stashOldValue(b,a),a},b.prototype.put=function(b,a,c){return this.markModified(b),this.store.put(b,a,c)},b.prototype["delete"]=function(b){this.markModified(b);this.store["delete"](b)},b.prototype.commit=function(){},b.prototype.abort=function(){var b,a,c;for(b=0;b<this.modifiedKeys.length;b++)a=
this.modifiedKeys[b],c=this.originalData[a],null===c?this.store["delete"](a):this.store.put(a,c,!0)},b}();l.SimpleSyncRWTransaction=k;var M=function(b){function a(c,d,h,e,k){b.call(this,c,d,h,e,k)}return d(a,b),a.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},a.prototype.closeSync=function(){this.syncSync()},a}(g.PreloadFile);l.SyncKeyValueFile=M;k=function(e){function k(b){e.call(this);this.store=b.store;this.makeRootDirectory()}
return d(k,e),k.isAvailable=function(){return!0},k.prototype.getName=function(){return this.store.name()},k.prototype.isReadOnly=function(){return!1},k.prototype.supportsSymlinks=function(){return!1},k.prototype.supportsProps=function(){return!1},k.prototype.supportsSynch=function(){return!0},k.prototype.makeRootDirectory=function(){var c=this.store.beginTransaction("readwrite");if(void 0===c.get("/")){var d=(new Date).getTime(),d=new b(n(),4096,511|a.FileType.DIRECTORY,d,d,d);c.put(d.id,new z("{}"),
!1);c.put("/",d.toBuffer(),!1);c.commit()}},k.prototype._findINode=function(b,a,d){var e=this,k=function(k){k=e.getDirListing(b,a,k);if(k[d])return k[d];throw h.ENOENT(c.resolve(a,d));};return"/"===a?""===d?"/":k(this.getINode(b,a,"/")):k(this.getINode(b,a+c.sep+d,this._findINode(b,c.dirname(a),c.basename(a))))},k.prototype.findINode=function(b,a){return this.getINode(b,a,this._findINode(b,c.dirname(a),c.basename(a)))},k.prototype.getINode=function(a,c,d){a=a.get(d);if(void 0===a)throw h.ENOENT(c);
return b.fromBuffer(a)},k.prototype.getDirListing=function(b,a,c){if(!c.isDirectory())throw h.ENOTDIR(a);b=b.get(c.id);if(void 0===b)throw h.ENOENT(a);return JSON.parse(b.toString())},k.prototype.addNewNode=function(b,a){for(var c;;)try{return c=n(),b.put(c,a,!1),c}catch(d){}throw new h(p.ErrorCode.EIO,"Unable to commit data to key-value store.");},k.prototype.commitNewFile=function(a,d,e,k,m){var f=c.dirname(d),y=c.basename(d),t=this.findINode(a,f),f=this.getDirListing(a,f,t),p=(new Date).getTime();
if("/"===d)throw h.EEXIST(d);if(f[y])throw h.EEXIST(d);try{var g=this.addNewNode(a,m),l=new b(g,m.length,k|e,p,p,p),M=this.addNewNode(a,l.toBuffer());f[y]=M;a.put(t.id,new z(JSON.stringify(f)),!0)}catch(n){throw a.abort(),n;}return a.commit(),l},k.prototype.empty=function(){this.store.clear();this.makeRootDirectory()},k.prototype.renameSync=function(b,a){var d=this.store.beginTransaction("readwrite"),e=c.dirname(b),k=c.basename(b),m=c.dirname(a),f=c.basename(a),t=this.findINode(d,e),g=this.getDirListing(d,
e,t);if(!g[k])throw h.ENOENT(b);var l=g[k];if(delete g[k],0===(m+"/").indexOf(b+"/"))throw new h(p.ErrorCode.EBUSY,e);var M,n;if(m===e?(M=t,n=g):(M=this.findINode(d,m),n=this.getDirListing(d,m,M)),n[f]){e=this.getINode(d,a,n[f]);if(!e.isFile())throw h.EPERM(a);try{d["delete"](e.id),d["delete"](n[f])}catch(G){throw d.abort(),G;}}n[f]=l;try{d.put(t.id,new z(JSON.stringify(g)),!0),d.put(M.id,new z(JSON.stringify(n)),!0)}catch(G){throw d.abort(),G;}d.commit()},k.prototype.statSync=function(b,a){return this.findINode(this.store.beginTransaction("readonly"),
b).toStats()},k.prototype.createFileSync=function(b,c,d){var h=this.store.beginTransaction("readwrite"),e=new z(0);d=this.commitNewFile(h,b,a.FileType.FILE,d,e);return new M(this,b,c,d.toStats(),e)},k.prototype.openFileSync=function(b,a){var c=this.store.beginTransaction("readonly"),d=this.findINode(c,b),c=c.get(d.id);if(void 0===c)throw h.ENOENT(b);return new M(this,b,a,d.toStats(),c)},k.prototype.removeEntry=function(b,a){var d=this.store.beginTransaction("readwrite"),e=c.dirname(b),k=this.findINode(d,
e),e=this.getDirListing(d,e,k),m=c.basename(b);if(!e[m])throw h.ENOENT(b);var f=e[m];delete e[m];m=this.getINode(d,b,f);if(!a&&m.isDirectory())throw h.EISDIR(b);if(a&&!m.isDirectory())throw h.ENOTDIR(b);try{d["delete"](m.id),d["delete"](f),d.put(k.id,new z(JSON.stringify(e)),!0)}catch(t){throw d.abort(),t;}d.commit()},k.prototype.unlinkSync=function(b){this.removeEntry(b,!1)},k.prototype.rmdirSync=function(b){this.removeEntry(b,!0)},k.prototype.mkdirSync=function(b,c){var d=this.store.beginTransaction("readwrite"),
h=new z("{}");this.commitNewFile(d,b,a.FileType.DIRECTORY,c,h)},k.prototype.readdirSync=function(b){var a=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(a,b,this.findINode(a,b)))},k.prototype._syncSync=function(b,a,d){var h=this.store.beginTransaction("readwrite"),e=this._findINode(h,c.dirname(b),c.basename(b));b=this.getINode(h,b,e);d=b.update(d);try{h.put(b.id,a,!0),d&&h.put(e,b.toBuffer(),!0)}catch(k){throw h.abort(),k;}h.commit()},k}(q.SynchronousFileSystem);l.SyncKeyValueFileSystem=
k;var G=function(b){function a(c,d,h,e,k){b.call(this,c,d,h,e,k)}return d(a,b),a.prototype.sync=function(b){var a=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(c){c||a.resetDirty();b(c)}):b()},a.prototype.close=function(b){this.sync(b)},a}(g.PreloadFile);l.AsyncKeyValueFile=G;q=function(k){function m(){k.apply(this,arguments)}return d(m,k),m.prototype.init=function(b,a){this.store=b;this.makeRootDirectory(a)},m.isAvailable=function(){return!0},m.prototype.getName=
function(){return this.store.name()},m.prototype.isReadOnly=function(){return!1},m.prototype.supportsSymlinks=function(){return!1},m.prototype.supportsProps=function(){return!1},m.prototype.supportsSynch=function(){return!1},m.prototype.makeRootDirectory=function(c){var d=this.store.beginTransaction("readwrite");d.get("/",function(h,k){if(h||void 0===k){var m=(new Date).getTime(),f=new b(n(),4096,511|a.FileType.DIRECTORY,m,m,m);d.put(f.id,new z("{}"),!1,function(b){e(b,d,c)&&d.put("/",f.toBuffer(),
!1,function(b){b?d.abort(function(){c(b)}):d.commit(c)})})}else d.commit(c)})},m.prototype._findINode=function(b,a,d,e){var k=this,m=function(b,k,m){b?e(b):m[d]?e(null,m[d]):e(h.ENOENT(c.resolve(a,d)))};"/"===a?""===d?e(null,"/"):this.getINode(b,a,"/",function(c,d){f(c,e)&&k.getDirListing(b,a,d,function(b,a){m(b,d,a)})}):this.findINodeAndDirListing(b,a,m)},m.prototype.findINode=function(b,a,d){var h=this;this._findINode(b,c.dirname(a),c.basename(a),function(c,e){f(c,d)&&h.getINode(b,a,e,d)})},m.prototype.getINode=
function(a,c,d,e){a.get(d,function(a,d){f(a,e)&&(void 0===d?e(h.ENOENT(c)):e(null,b.fromBuffer(d)))})},m.prototype.getDirListing=function(b,a,c,d){c.isDirectory()?b.get(c.id,function(b,c){if(f(b,d))try{d(null,JSON.parse(c.toString()))}catch(e){d(h.ENOENT(a))}}):d(h.ENOTDIR(a))},m.prototype.findINodeAndDirListing=function(b,a,c){var d=this;this.findINode(b,a,function(h,e){f(h,c)&&d.getDirListing(b,a,e,function(b,a){f(b,c)&&c(null,e,a)})})},m.prototype.addNewNode=function(b,a,c){var d,e=0,k=function(){5===
++e?c(new h(p.ErrorCode.EIO,"Unable to commit data to key-value store.")):(d=n(),b.put(d,a,!1,function(b,a){b||!a?k():c(null,d)}))};k()},m.prototype.commitNewFile=function(a,d,k,m,f,t){var y=this,p=c.dirname(d),g=c.basename(d),l=(new Date).getTime();return"/"===d?t(h.EEXIST(d)):void this.findINodeAndDirListing(a,p,function(c,p,M){e(c,a,t)&&(M[g]?a.abort(function(){t(h.EEXIST(d))}):y.addNewNode(a,f,function(c,d){if(e(c,a,t)){var h=new b(d,f.length,m|k,l,l,l);y.addNewNode(a,h.toBuffer(),function(b,
c){e(b,a,t)&&(M[g]=c,a.put(p.id,new z(JSON.stringify(M)),!0,function(b){e(b,a,t)&&a.commit(function(b){e(b,a,t)&&t(null,h)})}))})}}))})},m.prototype.empty=function(b){var a=this;this.store.clear(function(c){f(c,b)&&a.makeRootDirectory(b)})},m.prototype.rename=function(b,a,d){var k=this,m=this.store.beginTransaction("readwrite"),f=c.dirname(b),t=c.basename(b),g=c.dirname(a),l=c.basename(a),M={},n={},G=!1;if(0===(g+"/").indexOf(b+"/"))return d(new h(p.ErrorCode.EBUSY,f));var q=function(){if(!G&&n.hasOwnProperty(f)&&
n.hasOwnProperty(g)){var c=n[f],p=M[f],q=n[g],w=M[g];if(c[t]){var F=c[t];delete c[t];var X=function(){q[l]=F;m.put(p.id,new z(JSON.stringify(c)),!0,function(b){e(b,m,d)&&(f===g?m.commit(d):m.put(w.id,new z(JSON.stringify(q)),!0,function(b){e(b,m,d)&&m.commit(d)}))})};q[l]?k.getINode(m,a,q[l],function(b,c){e(b,m,d)&&(c.isFile()?m["delete"](c.id,function(b){e(b,m,d)&&m["delete"](q[l],function(b){e(b,m,d)&&X()})}):m.abort(function(b){d(h.EPERM(a))}))}):X()}else d(h.ENOENT(b))}},w=function(b){k.findINodeAndDirListing(m,
b,function(a,c,h){a?G||(G=!0,m.abort(function(){d(a)})):(M[b]=c,n[b]=h,q())})};w(f);f!==g&&w(g)},m.prototype.stat=function(b,a,c){a=this.store.beginTransaction("readonly");this.findINode(a,b,function(b,a){f(b,c)&&c(null,a.toStats())})},m.prototype.createFile=function(b,c,d,h){var e=this,k=this.store.beginTransaction("readwrite"),m=new z(0);this.commitNewFile(k,b,a.FileType.FILE,d,m,function(a,d){f(a,h)&&h(null,new G(e,b,c,d.toStats(),m))})},m.prototype.openFile=function(b,a,c){var d=this,e=this.store.beginTransaction("readonly");
this.findINode(e,b,function(k,m){f(k,c)&&e.get(m.id,function(e,k){f(e,c)&&(void 0===k?c(h.ENOENT(b)):c(null,new G(d,b,a,m.toStats(),k)))})})},m.prototype.removeEntry=function(b,a,d){var k=this,m=this.store.beginTransaction("readwrite"),f=c.dirname(b),t=c.basename(b);this.findINodeAndDirListing(m,f,function(c,f,p){if(e(c,m,d))if(p[t]){var g=p[t];delete p[t];k.getINode(m,b,g,function(c,k){e(c,m,d)&&(!a&&k.isDirectory()?m.abort(function(){d(h.EISDIR(b))}):a&&!k.isDirectory()?m.abort(function(){d(h.ENOTDIR(b))}):
m["delete"](k.id,function(b){e(b,m,d)&&m["delete"](g,function(b){e(b,m,d)&&m.put(f.id,new z(JSON.stringify(p)),!0,function(b){e(b,m,d)&&m.commit(d)})})}))})}else m.abort(function(){d(h.ENOENT(b))})})},m.prototype.unlink=function(b,a){this.removeEntry(b,!1,a)},m.prototype.rmdir=function(b,a){this.removeEntry(b,!0,a)},m.prototype.mkdir=function(b,c,d){var h=this.store.beginTransaction("readwrite"),e=new z("{}");this.commitNewFile(h,b,a.FileType.DIRECTORY,c,e,d)},m.prototype.readdir=function(b,a){var c=
this,d=this.store.beginTransaction("readonly");this.findINode(d,b,function(h,e){f(h,a)&&c.getDirListing(d,b,e,function(b,c){f(b,a)&&a(null,Object.keys(c))})})},m.prototype._sync=function(b,a,d,h){var k=this,m=this.store.beginTransaction("readwrite");this._findINode(m,c.dirname(b),c.basename(b),function(c,f){e(c,m,h)&&k.getINode(m,b,f,function(b,c){if(e(b,m,h)){var k=c.update(d);m.put(c.id,a,!0,function(b){e(b,m,h)&&(k?m.put(f,c.toBuffer(),!0,function(b){e(b,m,h)&&m.commit(h)}):m.commit(h))})}})})},
m}(q.BaseFileSystem);l.AsyncKeyValueFileSystem=q},{"../core/api_error":14,"../core/buffer":16,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/inode":34,"../generic/preload_file":36}],36:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file");var f=g("../core/buffer"),e=g("../core/api_error"),d=g("../core/node_fs"),p=e.ApiError,
a=e.ErrorCode,c=f.Buffer;g=function(b){function e(a,d,k,f,t){if(b.call(this),this._pos=0,this._dirty=!1,this._fs=a,this._path=d,this._flag=k,this._stat=f,null!=t?this._buffer=t:this._buffer=new c(0),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.");}return n(e,b),e.prototype.isDirty=function(){return this._dirty},e.prototype.resetDirty=function(){this._dirty=
!1},e.prototype.getBuffer=function(){return this._buffer},e.prototype.getStats=function(){return this._stat},e.prototype.getFlag=function(){return this._flag},e.prototype.getPath=function(){return this._path},e.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},e.prototype.advancePos=function(b){return this._pos+=b},e.prototype.setPos=function(b){return this._pos=b},e.prototype.sync=function(b){try{this.syncSync(),b()}catch(a){b(a)}},e.prototype.syncSync=function(){throw new p(a.ENOTSUP);
},e.prototype.close=function(b){try{this.closeSync(),b()}catch(a){b(a)}},e.prototype.closeSync=function(){throw new p(a.ENOTSUP);},e.prototype.stat=function(b){try{b(null,this._stat.clone())}catch(a){b(a)}},e.prototype.statSync=function(){return this._stat.clone()},e.prototype.truncate=function(b,a){try{this.truncateSync(b),this._flag.isSynchronous()&&!d.getRootFS().supportsSynch()&&this.sync(a),a()}catch(c){return a(c)}},e.prototype.truncateSync=function(b){if(this._dirty=!0,!this._flag.isWriteable())throw new p(a.EPERM,
"File not opened with a writeable mode.");if(this._stat.mtime=new Date,b>this._buffer.length)return b=new c(b-this._buffer.length),b.fill(0),this.writeSync(b,0,b.length,this._buffer.length),void(this._flag.isSynchronous()&&d.getRootFS().supportsSynch()&&this.syncSync());this._stat.size=b;var e=new c(b);this._buffer.copy(e,0,0,b);this._buffer=e;this._flag.isSynchronous()&&d.getRootFS().supportsSynch()&&this.syncSync()},e.prototype.write=function(b,a,c,d,e){try{e(null,this.writeSync(b,a,c,d),b)}catch(k){e(k)}},
e.prototype.writeSync=function(b,d,e,k){if(this._dirty=!0,null==k&&(k=this.getPos()),!this._flag.isWriteable())throw new p(a.EPERM,"File not opened with a writeable mode.");var f=k+e;f>this._stat.size&&(this._stat.size=f,f>this._buffer.length)&&(f=new c(f),this._buffer.copy(f),this._buffer=f);b=b.copy(this._buffer,k,d,d+e);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),b):(this.setPos(k+b),b)},e.prototype.read=function(b,a,c,d,e){try{e(null,this.readSync(b,a,c,d),b)}catch(k){e(k)}},
e.prototype.readSync=function(b,c,d,e){if(!this._flag.isReadable())throw new p(a.EPERM,"File not opened with a readable mode.");null==e&&(e=this.getPos());e+d>this._stat.size&&(d=this._stat.size-e);b=this._buffer.copy(b,c,e,e+d);return this._stat.atime=new Date,this._pos=e+d,b},e.prototype.chmod=function(b,a){try{this.chmodSync(b),a()}catch(c){a(c)}},e.prototype.chmodSync=function(b){if(!this._fs.supportsProps())throw new p(a.ENOTSUP);this._dirty=!0;this._stat.chmod(b);this.syncSync()},e}(q.BaseFile);
l.PreloadFile=g;g=function(b){function a(c,d,e,k,f){b.call(this,c,d,e,k,f)}return n(a,b),a.prototype.sync=function(b){b()},a.prototype.syncSync=function(){},a.prototype.close=function(b){b()},a.prototype.closeSync=function(){},a}(g);l.NoSyncFile=g},{"../core/api_error":14,"../core/buffer":16,"../core/file":21,"../core/node_fs":26}],37:[function(g,q,l){function n(b){var a=IEBinaryToArray_ByteStr(b);b=IEBinaryToArray_ByteStr_Last(b);a=a.replace(/[\s\S]/g,function(b){b=b.charCodeAt(0);return String.fromCharCode(255&
b,b>>8)})+b;b=Array(a.length);for(var c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b}function f(b,a,c,d){switch(c){case "buffer":case "json":break;default:return d(new h(z.EINVAL,"Invalid download type: "+c))}var e=new XMLHttpRequest;e.open("GET",a,b);e.setRequestHeader("Accept-Charset","x-user-defined");e.onreadystatechange=function(b){var a;if(4===e.readyState){if(200!==e.status)return d(new h(e.status,"XHR error."));switch(c){case "buffer":return a=n(e.responseBody),d(null,new M(a));case "json":return d(null,
JSON.parse(e.responseText))}}};e.send()}function e(b,a,c){f(!0,b,a,c)}function d(b,a){var c;return f(!1,b,a,function(b,a){if(b)throw b;c=a}),c}function p(b,a,c){var d=new XMLHttpRequest;d.open("GET",b,!0);var e=!0;switch(a){case "buffer":d.responseType="arraybuffer";break;case "json":try{d.responseType="json",e="json"===d.responseType}catch(k){e=!1}break;default:return c(new h(z.EINVAL,"Invalid download type: "+a))}d.onreadystatechange=function(b){if(4===d.readyState){if(200!==d.status)return c(new h(d.status,
"XHR error."));switch(a){case "buffer":return c(null,new M(d.response?d.response:0));case "json":return e?c(null,d.response):c(null,JSON.parse(d.responseText))}}};d.send()}function a(b,a){var c=new XMLHttpRequest;c.open("GET",b,!1);var d=null,e=null;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.onreadystatechange=function(b){if(4===c.readyState){if(200!==c.status)return void(e=new h(c.status,"XHR error."));switch(a){case "buffer":b=c.responseText;d=new M(b.length);for(var k=0;k<b.length;k++)d.writeUInt8(b.charCodeAt(k),
k);break;case "json":return void(d=JSON.parse(c.responseText))}}},c.send(),e)throw e;return d}function c(b,a){var c=new XMLHttpRequest;switch(c.open("GET",b,!1),a){case "buffer":c.responseType="arraybuffer";break;case "json":break;default:throw new h(z.EINVAL,"Invalid download type: "+a);}var d,e;if(c.onreadystatechange=function(b){if(4===c.readyState)if(200===c.status)switch(a){case "buffer":d=new M(c.response);break;case "json":d=JSON.parse(c.response)}else e=new h(c.status,"XHR error.")},c.send(),
e)throw e;return d}function b(b,a,c){var d=new XMLHttpRequest;d.open("HEAD",a,b);d.onreadystatechange=function(b){if(4===d.readyState){if(200!=d.status)return c(new h(d.status,"XHR HEAD error."));try{return c(null,parseInt(d.getResponseHeader("Content-Length"),10))}catch(a){return c(new h(z.EIO,"XHR HEAD error: Could not read content-length."))}}};d.send()}q=g("../core/util");var k=g("../core/buffer");g=g("../core/api_error");var h=g.ApiError,z=g.ErrorCode,M=k.Buffer;l.asyncDownloadFile=q.isIE&&"undefined"==
typeof Blob?e:p;l.syncDownloadFile=q.isIE&&"undefined"==typeof Blob?d:q.isIE&&"undefined"!=typeof Blob?c:a;l.getFileSizeSync=function(a){var c;return b(!1,a,function(b,a){if(b)throw b;c=a}),c};l.getFileSizeAsync=function(a,c){b(!0,a,c)}},{"../core/api_error":14,"../core/buffer":16,"../core/util":31}],38:[function(g,q,l){var n=g("./core/global");if(Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(d){return"[object Array]"===Object.prototype.toString.call(d)}),
Object.keys||(Object.keys=function(){var d=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),a="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),c=a.length;return function(b){if("object"!=typeof b&&("function"!=typeof b||null===b))throw new TypeError("Object.keys called on non-object");var k,h=[];for(k in b)d.call(b,k)&&h.push(k);if(e)for(k=0;c>k;k++)d.call(b,a[k])&&h.push(a[k]);return h}}()),"b"!=="ab".substr(-1)&&
(String.prototype.substr=function(d){return function(e,a){return 0>e&&(e=this.length+e),d.call(this,e,a)}}(String.prototype.substr)),Array.prototype.forEach||(Array.prototype.forEach=function(d,e){for(var a=0;a<this.length;++a)a in this&&d.call(e,this[a],a,this)}),"undefined"==typeof setImmediate){var f=[];if(function(){if("undefined"!=typeof n.importScripts||!n.postMessage)return!1;var d=!0,e=n.onmessage;return n.onmessage=function(){d=!1},n.postMessage("","*"),n.onmessage=e,d}())n.setImmediate=
function(d){f.push(d);n.postMessage("zero-timeout-message","*")},l=function(d){if(d.source===self&&"zero-timeout-message"===d.data&&(d.stopPropagation?d.stopPropagation():d.cancelBubble=!0,0<f.length))return f.shift()()},n.addEventListener?n.addEventListener("message",l,!0):n.attachEvent("onmessage",l);else if(n.MessageChannel){var e=new n.MessageChannel;e.port1.onmessage=function(d){return 0<f.length?f.shift()():void 0};n.setImmediate=function(d){f.push(d);e.port2.postMessage("")}}else n.setImmediate=
function(d){return setTimeout(d,0)}}Array.prototype.indexOf||(Array.prototype.indexOf=function(d,e){if(void 0===e&&(e=0),!this)throw new TypeError;var a=this.length;if(0===a||c>=a)return-1;var c=e;for(0>c&&(c=a+c);a>c;c++)if(this[c]===d)return c;return-1});Array.prototype.forEach||(Array.prototype.forEach=function(d,e){var a,c;a=0;for(c=this.length;c>a;++a)a in this&&d.call(e,this[a],a,this)});Array.prototype.map||(Array.prototype.map=function(d,e){var a,c,b;if(null==this)throw new TypeError(" this is null or not defined");
var k=Object(this),h=k.length>>>0;if("function"!=typeof d)throw new TypeError(d+" is not a function");e&&(a=e);c=Array(h);for(b=0;h>b;){var f,g;b in k&&(f=k[b],g=d.call(a,f,b,k),c[b]=g);b++}return c});"undefined"!=typeof document&&void 0===window.chrome&&document.write("\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n Dim lastIndex\r\n lastIndex = LenB(Binary)\r\n if lastIndex mod 2 Then\r\n IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n Else\r\n IEBinaryToArray_ByteStr_Last = \"\"\r\n End If\r\nEnd Function\r\n\x3c/script>\r\n");
g("./generic/emscripten_fs");g("./backend/IndexedDB");g("./backend/XmlHttpRequest");g("./backend/async_mirror");g("./backend/dropbox");g("./backend/html5fs");g("./backend/in_memory");g("./backend/localStorage");g("./backend/mountable_file_system");g("./backend/overlay");g("./backend/workerfs");g("./backend/zipfs");q.exports=g("./core/browserfs")},{"./backend/IndexedDB":3,"./backend/XmlHttpRequest":4,"./backend/async_mirror":5,"./backend/dropbox":6,"./backend/html5fs":7,"./backend/in_memory":8,"./backend/localStorage":9,
"./backend/mountable_file_system":10,"./backend/overlay":11,"./backend/workerfs":12,"./backend/zipfs":13,"./core/browserfs":15,"./core/global":24,"./generic/emscripten_fs":32}]},{},[38])(38)});!function(r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).BrowserFS=r()}(function(){return function g(q,l,n){function f(d,a){if(!l[d]){if(!q[d]){var c="function"==typeof require&&require;if(!a&&c)return c(d,!0);if(e)return e(d,!0);c=Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c;}c=l[d]={exports:{}};
q[d][0].call(c.exports,function(b){var a=q[d][1][b];return f(a?a:b)},c,c.exports,g,q,l,n)}return l[d].exports}for(var e="function"==typeof require&&require,d=0;d<n.length;d++)f(n[d]);return f}({1:[function(g,q,l){!function(){function g(){}function f(b){var a=!1;return function(){if(a)throw Error("Callback was already called.");a=!0;b.apply(this,arguments)}}function e(b){var a=!1;return function(){a||(a=!0,b.apply(this,arguments))}}function d(b){return F(b)||"number"==typeof b.length&&0<=b.length&&
0===b.length%1}function p(b,c){return d(b)?a(b,c):h(b,c)}function a(b,a){for(var c=-1,d=b.length;++c<d;)a(b[c],c,b)}function c(b,a){for(var c=-1,d=b.length,e=Array(d);++c<d;)e[c]=a(b[c],c,b);return e}function b(b){return c(Array(b),function(b,a){return a})}function k(b,c,d){return a(b,function(b,a,e){d=c(d,b,a,e)}),d}function h(b,c){a(Q(b),function(a){c(b[a],a)})}function z(b){var a,c,e=-1;return d(b)?(a=b.length,function(){return e++,a>e?e:null}):(c=Q(b),a=c.length,function(){return e++,a>e?c[e]:
null})}function l(b,a){a=a||0;var c=-1,d=b.length;a&&(d-=a,d=0>d?0:d);for(var e=Array(d);++c<d;)e[c]=b[c+a];return e}function G(b){return function(a,c,d){return b(a,d)}}function t(b){return function(a,c,d){d=e(d||g);a=a||[];var h=z(a);if(0>=b)return d(null);var k=!1,m=0,t=!1;!function V(){if(k&&0>=m)return d(null);for(;b>m&&!t;){var e=h();if(null===e)return k=!0,void(0>=m&&d(null));m+=1;c(a[e],e,f(function(b){--m;b?(d(b),t=!0):V()}))}}()}}function m(b){return function(a,c,d){return b(A.eachOf,a,c,
d)}}function E(b,a){return function(c,d,e){return a(t(b),c,d,e)}}function B(b){return function(a,c,d){return b(A.eachOfSeries,a,c,d)}}function C(b,a,c,d){d=e(d||g);var h=[];b(a,function(b,a,d){c(b,function(b,c){h[a]=c;d(b)})},function(b){d(b,h)})}function T(b,a,d,e){var h=[];a=c(a,function(b,a){return{index:a,value:b}});b(a,function(b,a,c){d(b.value,function(a){a&&h.push(b);c()})},function(){e(c(h.sort(function(b,a){return b.index-a.index}),function(b){return b.value}))})}function H(b,a,d,e){var h=
[];a=c(a,function(b,a){return{index:a,value:b}});b(a,function(b,a,c){d(b.value,function(a){a||h.push(b);c()})},function(){e(c(h.sort(function(b,a){return b.index-a.index}),function(b){return b.value}))})}function x(b,a,c,d){b(a,function(b,a,e){c(b,function(a){a?(d(b),d=g):e()})},function(){d()})}function y(b,a,c){c=c||g;var e=d(a)?[]:{};b(a,function(b,a,c){b(function(b){var d=l(arguments,1);1>=d.length&&(d=d[0]);e[a]=d;c(b)})},function(b){c(b,e)})}function K(b,a,c,d){var e=[];b(a,function(b,a,d){c(b,
function(b,a){e=e.concat(a||[]);d(b)})},function(b){d(b,e)})}function L(b,d,e){function h(b,c,d,e){if(null!=e&&"function"!=typeof e)throw Error("task callback must be a function");return b.started=!0,F(c)||(c=[c]),0===c.length&&b.idle()?A.setImmediate(function(){b.drain()}):(a(c,function(a){a={data:a,callback:e||g};d?b.tasks.unshift(a):b.tasks.push(a);b.tasks.length===b.concurrency&&b.saturated()}),void A.setImmediate(b.process))}function k(b,c){return function(){--m;var d=arguments;a(c,function(b){b.callback.apply(b,
d)});0===b.tasks.length+m&&b.drain();b.process()}}if(null==d)d=1;else if(0===d)throw Error("Concurrency must not be zero");var m=0,t={tasks:[],concurrency:d,saturated:g,empty:g,drain:g,started:!1,paused:!1,push:function(b,a){h(t,b,!1,a)},kill:function(){t.drain=g;t.tasks=[]},unshift:function(b,a){h(t,b,!0,a)},process:function(){if(!t.paused&&m<t.concurrency&&t.tasks.length)for(;m<t.concurrency&&t.tasks.length;){var a=e?t.tasks.splice(0,e):t.tasks.splice(0,t.tasks.length),d=c(a,function(b){return b.data});
0===t.tasks.length&&t.empty();m+=1;a=f(k(t,a));b(d,a)}},length:function(){return t.tasks.length},running:function(){return m},idle:function(){return 0===t.tasks.length+m},pause:function(){t.paused=!0},resume:function(){if(!1!==t.paused){t.paused=!1;for(var b=Math.min(t.concurrency,t.tasks.length),a=1;b>=a;a++)A.setImmediate(t.process)}}};return t}function O(b){return function(c){var d=l(arguments,1);c.apply(null,d.concat([function(c){var d=l(arguments,1);"undefined"!=typeof console&&(c?console.error&&
console.error(c):console[b]&&a(d,function(a){console[b](a)}))}]))}}function D(a){return function(c,d,e){a(b(c),d,e)}}function S(b,a){function c(){var d=this,e=l(arguments),h=e.pop();return b(a,function(b,a,c){b.apply(d,e.concat([c]))},h)}if(2<arguments.length){var d=l(arguments,2);return c.apply(this,d)}return c}function X(b){return function(){var a=l(arguments),c=a.pop();a.push(function(){var b=arguments;d?A.setImmediate(function(){c.apply(null,b)}):c.apply(null,b)});var d=!0;b.apply(this,a);d=!1}}
var w,u,A={};w="object"==typeof window&&this===window?window:"object"==typeof global&&this===global?global:this;null!=w&&(u=w.async);A.noConflict=function(){return w.async=u,A};var aa,N=Object.prototype.toString,F=Array.isArray||function(b){return"[object Array]"===N.call(b)},Q=Object.keys||function(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a};"function"==typeof setImmediate&&(aa=setImmediate);"undefined"!=typeof process&&process.nextTick?(A.nextTick=process.nextTick,aa?A.setImmediate=
function(b){aa(b)}:A.setImmediate=A.nextTick):aa?(A.nextTick=function(b){aa(b)},A.setImmediate=A.nextTick):(A.nextTick=function(b){setTimeout(b,0)},A.setImmediate=A.nextTick);A.forEach=A.each=function(b,a,c){return A.eachOf(b,G(a),c)};A.forEachSeries=A.eachSeries=function(b,a,c){return A.eachOfSeries(b,G(a),c)};A.forEachLimit=A.eachLimit=function(b,a,c,d){return t(a)(b,G(c),d)};A.forEachOf=A.eachOf=function(b,a,c){function h(b){b?c(b):(m+=1,m>=k&&c(null))}c=e(c||g);b=b||[];var k=d(b)?b.length:Q(b).length,
m=0;return k?void p(b,function(c,d){a(b[d],d,f(h))}):c(null)};A.forEachOfSeries=A.eachOfSeries=function(b,a,c){function d(){var e=!0;return null===k?c(null):(a(b[k],k,f(function(b){if(b)c(b);else{if(k=h(),null===k)return c(null);e?A.nextTick(d):d()}})),void(e=!1))}c=e(c||g);b=b||[];var h=z(b),k=h();d()};A.forEachOfLimit=A.eachOfLimit=function(b,a,c,d){t(a)(b,c,d)};A.map=m(C);A.mapSeries=B(C);A.mapLimit=function(b,a,c,d){return E(a,C)(b,c,d)};A.inject=A.foldl=A.reduce=function(b,a,c,d){A.eachOfSeries(b,
function(b,d,e){c(a,b,function(b,c){a=c;e(b)})},function(b){d(b||null,a)})};A.foldr=A.reduceRight=function(b,a,d,e){b=c(b,function(b){return b}).reverse();A.reduce(b,a,d,e)};A.select=A.filter=m(T);A.selectSeries=A.filterSeries=B(T);A.reject=m(H);A.rejectSeries=B(H);A.detect=m(x);A.detectSeries=B(x);A.any=A.some=function(b,a,c){A.eachOf(b,function(b,d,e){a(b,function(b){b&&(c(!0),c=g);e()})},function(){c(!1)})};A.all=A.every=function(b,a,c){A.eachOf(b,function(b,d,e){a(b,function(b){b||(c(!1),c=g);
e()})},function(){c(!0)})};A.sortBy=function(b,a,d){function e(b,a){var c=b.criteria,d=a.criteria;return d>c?-1:c>d?1:0}A.map(b,function(b,c){a(b,function(a,d){a?c(a):c(null,{value:b,criteria:d})})},function(b,a){return b?d(b):void d(null,c(a.sort(e),function(b){return b.value}))})};A.auto=function(b,c){function d(b){y.unshift(b)}function h(){f--;a(y.slice(0),function(b){b()})}c=e(c||g);var m=Q(b),f=m.length;if(!f)return c(null);var t={},y=[];d(function(){f||c(null,t)});a(m,function(e){function m(b){var d=
l(arguments,1);if(1>=d.length&&(d=d[0]),b){var k={};a(Q(t),function(b){k[b]=t[b]});k[e]=d;c(b,k)}else t[e]=d,A.setImmediate(h)}function f(){return k(E,function(b,a){return b&&t.hasOwnProperty(a)},!0)&&!t.hasOwnProperty(e)}function p(){if(f()){var b=0;a:for(;b<y.length;b+=1)if(y[b]===p){y.splice(b,1);break a}g[g.length-1](m,t)}}for(var ca,g=F(b[e])?b[e]:[b[e]],E=g.slice(0,Math.abs(g.length-1))||[],B=E.length;B--;){if(!(ca=b[E[B]]))throw Error("Has inexistant dependency");if(F(ca)&&~ca.indexOf(e))throw Error("Has cyclic dependencies");
}f()?g[g.length-1](m,t):d(p)})};A.retry=function(b,a,c){function d(h,k){function m(b,a){return function(c){b(function(b,d){c(!b||a,{err:b,result:d})},k)}}for(;b;)e.push(m(a,!--b));A.series(e,function(b,a){a=a[a.length-1];(h||c)(a.err,a.result)})}var e=[];return"function"==typeof b&&(c=a,a=b,b=5),b=parseInt(b,10)||5,c?d():d};A.waterfall=function(b,a){function c(b){return function(d){if(d)a.apply(null,arguments);else{var e=l(arguments,1),h=b.next();h?e.push(c(h)):e.push(a);X(b).apply(null,e)}}}return(a=
e(a||g),F(b))?b.length?void c(A.iterator(b))():a():a(Error("First argument to waterfall must be an array of functions"))};A.parallel=function(b,a){y(A.eachOf,b,a)};A.parallelLimit=function(b,a,c){y(t(a),b,c)};A.series=function(b,a){a=a||g;var c=d(b)?[]:{};A.eachOfSeries(b,function(b,a,d){b(function(b){var e=l(arguments,1);1>=e.length&&(e=e[0]);c[a]=e;d(b)})},function(b){a(b,c)})};A.iterator=function(b){function a(c){function d(){return b.length&&b[c].apply(null,arguments),d.next()}return d.next=function(){return c<
b.length-1?a(c+1):null},d}return a(0)};A.apply=function(b){var a=l(arguments,1);return function(){return b.apply(null,a.concat(l(arguments)))}};A.concat=m(K);A.concatSeries=B(K);A.whilst=function(b,a,c){b()?a(function(d){return d?c(d):void A.whilst(b,a,c)}):c(null)};A.doWhilst=function(b,a,c){b(function(d){if(d)return c(d);var e=l(arguments,1);a.apply(null,e)?A.doWhilst(b,a,c):c(null)})};A.until=function(b,a,c){b()?c(null):a(function(d){return d?c(d):void A.until(b,a,c)})};A.doUntil=function(b,a,
c){b(function(d){if(d)return c(d);var e=l(arguments,1);a.apply(null,e)?c(null):A.doUntil(b,a,c)})};A.queue=function(b,a){return L(function(a,c){b(a[0],c)},a,1)};A.priorityQueue=function(b,c){function d(b,a){return b.priority-a.priority}function e(b,a,c){for(var d=-1,h=b.length-1;h>d;){var k=d+(h-d+1>>>1);0<=c(a,b[k])?d=k:h=k-1}return d}function h(b,c,k,m){if(null!=m&&"function"!=typeof m)throw Error("task callback must be a function");return b.started=!0,F(c)||(c=[c]),0===c.length?A.setImmediate(function(){b.drain()}):
void a(c,function(a){a={data:a,priority:k,callback:"function"==typeof m?m:g};b.tasks.splice(e(b.tasks,a,d)+1,0,a);b.tasks.length===b.concurrency&&b.saturated();A.setImmediate(b.process)})}var k=A.queue(b,c);return k.push=function(b,a,c){h(k,b,a,c)},delete k.unshift,k};A.cargo=function(b,a){return L(b,1,a)};A.log=O("log");A.dir=O("dir");A.memoize=function(b,a){function c(){var h=l(arguments),k=h.pop(),m=a.apply(null,h);m in d?A.nextTick(function(){k.apply(null,d[m])}):m in e?e[m].push(k):(e[m]=[k],
b.apply(null,h.concat([function(){d[m]=l(arguments);var b=e[m];delete e[m];for(var a=0,c=b.length;c>a;a++)b[a].apply(null,arguments)}])))}var d={},e={};return a=a||function(b){return b},c.memo=d,c.unmemoized=b,c};A.unmemoize=function(b){return function(){return(b.unmemoized||b).apply(null,arguments)}};A.times=D(A.map);A.timesSeries=D(A.mapSeries);A.timesLimit=function(a,c,d,e){return A.mapLimit(b(a),c,d,e)};A.seq=function(){var b=arguments;return function(){var a=this,c=l(arguments),d=c.slice(-1)[0];
"function"==typeof d?c.pop():d=g;A.reduce(b,c,function(b,c,d){c.apply(a,b.concat([function(){var b=arguments[0],a=l(arguments,1);d(b,a)}]))},function(b,c){d.apply(a,[b].concat(c))})}};A.compose=function(){return A.seq.apply(null,Array.prototype.reverse.call(arguments))};A.applyEach=function(){var b=l(arguments);return S.apply(null,[A.eachOf].concat(b))};A.applyEachSeries=function(){var b=l(arguments);return S.apply(null,[A.eachOfSeries].concat(b))};A.forever=function(b,a){function c(b){return b?d(b):
void e(c)}var d=f(a||g),e=X(b);c()};A.ensureAsync=X;"undefined"!=typeof q&&q.exports?q.exports=A:w.async=A}()},{}],2:[function(g,q,l){!function(g){"object"==typeof l&&"undefined"!=typeof q?q.exports=g():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=g()}(function(){return function f(e,d,p){function a(b,h){if(!d[b]){if(!e[b]){var z="function"==typeof g&&g;if(!h&&z)return z(b,!0);if(c)return c(b,!0);z=Error("Cannot find module '"+b+"'");
throw z.code="MODULE_NOT_FOUND",z;}z=d[b]={exports:{}};e[b][0].call(z.exports,function(c){var d=e[b][1][c];return a(d?d:c)},z,z.exports,f,e,d,p)}return d[b].exports}for(var c="function"==typeof g&&g,b=0;b<p.length;b++)a(p[b]);return a}({1:[function(f,e,d){f="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;d.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var d=b.shift();if(d){if("object"!=typeof d)throw new TypeError(d+
"must be non-object");for(var e in d)d.hasOwnProperty(e)&&(a[e]=d[e])}}return a};d.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var p={arraySet:function(a,b,d,e,f){if(b.subarray&&a.subarray)return void a.set(b.subarray(d,d+e),f);for(var p=0;e>p;p++)a[f+p]=b[d+p]},flattenChunks:function(a){var b,d,e,f,p;b=e=0;for(d=a.length;d>b;b++)e+=a[b].length;p=new Uint8Array(e);b=e=0;for(d=a.length;d>b;b++)f=a[b],p.set(f,e),e+=f.length;return p}},a={arraySet:function(a,
b,d,e,f){for(var p=0;e>p;p++)a[f+p]=b[d+p]},flattenChunks:function(a){return[].concat.apply([],a)}};d.setTyped=function(c){c?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,p)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,a))};d.setTyped(f)},{}],2:[function(f,e,d){function p(d,e){if(65537>e&&(d.subarray&&b||!d.subarray&&c))return String.fromCharCode.apply(null,a.shrinkBuf(d,e));for(var k="",f=0;e>f;f++)k+=String.fromCharCode(d[f]);return k}var a=f("./common"),c=!0,b=!0;
try{String.fromCharCode.apply(null,[0])}catch(h){c=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){b=!1}var k=new a.Buf8(256);for(f=0;256>f;f++)k[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;k[254]=k[254]=1;d.string2buf=function(b){var c,d,e,k,m,f=b.length,p=0;for(k=0;f>k;k++)d=b.charCodeAt(k),55296===(64512&d)&&f>k+1&&(e=b.charCodeAt(k+1),56320===(64512&e)&&(d=65536+(d-55296<<10)+(e-56320),k++)),p+=128>d?1:2048>d?2:65536>d?3:4;c=new a.Buf8(p);for(k=m=0;p>m;k++)d=b.charCodeAt(k),
55296===(64512&d)&&f>k+1&&(e=b.charCodeAt(k+1),56320===(64512&e)&&(d=65536+(d-55296<<10)+(e-56320),k++)),128>d?c[m++]=d:2048>d?(c[m++]=192|d>>>6,c[m++]=128|63&d):65536>d?(c[m++]=224|d>>>12,c[m++]=128|d>>>6&63,c[m++]=128|63&d):(c[m++]=240|d>>>18,c[m++]=128|d>>>12&63,c[m++]=128|d>>>6&63,c[m++]=128|63&d);return c};d.buf2binstring=function(b){return p(b,b.length)};d.binstring2buf=function(b){for(var c=new a.Buf8(b.length),d=0,e=c.length;e>d;d++)c[d]=b.charCodeAt(d);return c};d.buf2string=function(b,a){var c,
d,e,m,f=a||b.length,g=Array(2*f);for(c=d=0;f>c;)if(e=b[c++],128>e)g[d++]=e;else if(m=k[e],4<m)g[d++]=65533,c+=m-1;else{for(e&=2===m?31:3===m?15:7;1<m&&f>c;)e=e<<6|63&b[c++],m--;1<m?g[d++]=65533:65536>e?g[d++]=e:(e-=65536,g[d++]=55296|e>>10&1023,g[d++]=56320|1023&e)}return p(g,d)};d.utf8border=function(b,a){var c;a=a||b.length;a>b.length&&(a=b.length);for(c=a-1;0<=c&&128===(192&b[c]);)c--;return 0>c?a:0===c?a:c+k[b[c]]>a?c:a}},{"./common":1}],3:[function(f,e,d){e.exports=function(d,a,c,b){var e=65535&
d|0;d=d>>>16&65535|0;for(var h=0;0!==c;){h=2E3<c?2E3:c;c-=h;do e=e+a[b++]|0,d=d+e|0;while(--h);e%=65521;d%=65521}return e|d<<16|0}},{}],4:[function(f,e,d){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,
Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(f,e,d){var p=function(){for(var a,c=[],b=0;256>b;b++){a=b;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;c[b]=a}return c}();e.exports=function(a,c,b,d){b=d+b;for(a^=-1;b>d;d++)a=a>>>8^p[255&(a^c[d])];return-1^a}},{}],6:[function(f,e,d){e.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],7:[function(f,e,d){e.exports=function(d,a){var c,
b,e,h,f,g,l,t,m,E,B,C,q,H,x,y,K,L,O,D,S,X,w,u;c=d.state;b=d.next_in;w=d.input;e=b+(d.avail_in-5);h=d.next_out;u=d.output;f=h-(a-d.avail_out);g=h+(d.avail_out-257);l=c.dmax;t=c.wsize;m=c.whave;E=c.wnext;B=c.window;C=c.hold;q=c.bits;H=c.lencode;x=c.distcode;y=(1<<c.lenbits)-1;K=(1<<c.distbits)-1;a:do b:for(15>q&&(C+=w[b++]<<q,q+=8,C+=w[b++]<<q,q+=8),L=H[C&y];;){if(O=L>>>24,C>>>=O,q-=O,O=L>>>16&255,0===O)u[h++]=65535&L;else{if(!(16&O)){if(0===(64&O)){L=H[(65535&L)+(C&(1<<O)-1)];continue b}if(32&O){c.mode=
12;break a}d.msg="invalid literal/length code";c.mode=30;break a}D=65535&L;(O&=15)&&(O>q&&(C+=w[b++]<<q,q+=8),D+=C&(1<<O)-1,C>>>=O,q-=O);15>q&&(C+=w[b++]<<q,q+=8,C+=w[b++]<<q,q+=8);L=x[C&K];c:for(;;){if(O=L>>>24,C>>>=O,q-=O,O=L>>>16&255,!(16&O)){if(0===(64&O)){L=x[(65535&L)+(C&(1<<O)-1)];continue c}d.msg="invalid distance code";c.mode=30;break a}if(S=65535&L,O&=15,O>q&&(C+=w[b++]<<q,q+=8,O>q&&(C+=w[b++]<<q,q+=8)),S+=C&(1<<O)-1,S>l){d.msg="invalid distance too far back";c.mode=30;break a}if(C>>>=O,
q-=O,O=h-f,S>O){if(O=S-O,O>m&&c.sane){d.msg="invalid distance too far back";c.mode=30;break a}if(L=0,X=B,0===E){if(L+=t-O,D>O){D-=O;do u[h++]=B[L++];while(--O);L=h-S;X=u}}else if(O>E){if(L+=t+E-O,O-=E,D>O){D-=O;do u[h++]=B[L++];while(--O);if(L=0,D>E){O=E;D-=O;do u[h++]=B[L++];while(--O);L=h-S;X=u}}}else if(L+=E-O,D>O){D-=O;do u[h++]=B[L++];while(--O);L=h-S;X=u}for(;2<D;)u[h++]=X[L++],u[h++]=X[L++],u[h++]=X[L++],D-=3;D&&(u[h++]=X[L++],1<D&&(u[h++]=X[L++]))}else{L=h-S;do u[h++]=u[L++],u[h++]=u[L++],
u[h++]=u[L++],D-=3;while(2<D);D&&(u[h++]=u[L++],1<D&&(u[h++]=u[L++]))}break}}break}while(e>b&&g>h);D=q>>3;b-=D;q-=D<<3;d.next_in=b;d.next_out=h;d.avail_in=e>b?5+(e-b):5-(b-e);d.avail_out=g>h?257+(g-h):257-(h-g);c.hold=C&(1<<q)-1;c.bits=q}},{}],8:[function(f,e,d){function p(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function a(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=
0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new G.Buf16(320);this.work=new G.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function c(b){var a;return b&&b.state?(a=b.state,b.total_in=b.total_out=a.total=0,b.msg="",a.wrap&&(b.adler=1&a.wrap),a.mode=H,a.last=0,a.havedict=0,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,
a.lencode=a.lendyn=new G.Buf32(x),a.distcode=a.distdyn=new G.Buf32(y),a.sane=1,a.back=-1,C):q}function b(b){var a;return b&&b.state?(a=b.state,a.wsize=0,a.whave=0,a.wnext=0,c(b)):q}function k(a,c){var d,e;return a&&a.state?(e=a.state,0>c?(d=0,c=-c):(d=(c>>4)+1,48>c&&(c&=15)),c&&(8>c||15<c)?q:(null!==e.window&&e.wbits!==c&&(e.window=null),e.wrap=d,e.wbits=c,b(a))):q}function h(b,c){var d,e;return b?(e=new a,b.state=e,e.window=null,d=k(b,c),d!==C&&(b.state=null),d):q}var g,l,G=f("../utils/common"),
t=f("./adler32"),m=f("./crc32"),E=f("./inffast"),B=f("./inftrees"),C=0,q=-2,H=1,x=852,y=592,K=!0;d.inflateReset=b;d.inflateReset2=k;d.inflateResetKeep=c;d.inflateInit=function(b){return h(b,15)};d.inflateInit2=h;d.inflate=function(b,a){var c,d,e,h,k,f,y,x,F,Q,J,I,W,R,U,P,Y,ba,Z,V,ea,da,ca=0,fa=new G.Buf8(4),ha=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!b||!b.state||!b.output||!b.input&&0!==b.avail_in)return q;c=b.state;12===c.mode&&(c.mode=13);k=b.next_out;e=b.output;y=b.avail_out;h=b.next_in;
d=b.input;f=b.avail_in;x=c.hold;F=c.bits;Q=f;J=y;ea=C;a:for(;;)switch(c.mode){case H:if(0===c.wrap){c.mode=13;break}for(;16>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if(2&c.wrap&&35615===x){c.check=0;fa[0]=255&x;fa[1]=x>>>8&255;c.check=m(c.check,fa,2,0);F=x=0;c.mode=2;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&x)<<8)+(x>>8))%31){b.msg="incorrect header check";c.mode=30;break}if(8!==(15&x)){b.msg="unknown compression method";c.mode=30;break}if(x>>>=4,F-=4,V=(15&x)+8,0===c.wbits)c.wbits=
V;else if(V>c.wbits){b.msg="invalid window size";c.mode=30;break}c.dmax=1<<V;b.adler=c.check=1;c.mode=512&x?10:12;F=x=0;break;case 2:for(;16>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if(c.flags=x,8!==(255&c.flags)){b.msg="unknown compression method";c.mode=30;break}if(57344&c.flags){b.msg="unknown header flags set";c.mode=30;break}c.head&&(c.head.text=x>>8&1);512&c.flags&&(fa[0]=255&x,fa[1]=x>>>8&255,c.check=m(c.check,fa,2,0));F=x=0;c.mode=3;case 3:for(;32>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=
8}c.head&&(c.head.time=x);512&c.flags&&(fa[0]=255&x,fa[1]=x>>>8&255,fa[2]=x>>>16&255,fa[3]=x>>>24&255,c.check=m(c.check,fa,4,0));F=x=0;c.mode=4;case 4:for(;16>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}c.head&&(c.head.xflags=255&x,c.head.os=x>>8);512&c.flags&&(fa[0]=255&x,fa[1]=x>>>8&255,c.check=m(c.check,fa,2,0));F=x=0;c.mode=5;case 5:if(1024&c.flags){for(;16>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}c.length=x;c.head&&(c.head.extra_len=x);512&c.flags&&(fa[0]=255&x,fa[1]=x>>>8&255,c.check=m(c.check,
fa,2,0));F=x=0}else c.head&&(c.head.extra=null);c.mode=6;case 6:if(1024&c.flags&&(I=c.length,I>f&&(I=f),I&&(c.head&&(V=c.head.extra_len-c.length,c.head.extra||(c.head.extra=Array(c.head.extra_len)),G.arraySet(c.head.extra,d,h,I,V)),512&c.flags&&(c.check=m(c.check,d,I,h)),f-=I,h+=I,c.length-=I),c.length))break a;c.length=0;c.mode=7;case 7:if(2048&c.flags){if(0===f)break a;I=0;do V=d[h+I++],c.head&&V&&65536>c.length&&(c.head.name+=String.fromCharCode(V));while(V&&f>I);if(512&c.flags&&(c.check=m(c.check,
d,I,h)),f-=I,h+=I,V)break a}else c.head&&(c.head.name=null);c.length=0;c.mode=8;case 8:if(4096&c.flags){if(0===f)break a;I=0;do V=d[h+I++],c.head&&V&&65536>c.length&&(c.head.comment+=String.fromCharCode(V));while(V&&f>I);if(512&c.flags&&(c.check=m(c.check,d,I,h)),f-=I,h+=I,V)break a}else c.head&&(c.head.comment=null);c.mode=9;case 9:if(512&c.flags){for(;16>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if(x!==(65535&c.check)){b.msg="header crc mismatch";c.mode=30;break}F=x=0}c.head&&(c.head.hcrc=c.flags>>
9&1,c.head.done=!0);b.adler=c.check=0;c.mode=12;break;case 10:for(;32>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}b.adler=c.check=p(x);F=x=0;c.mode=11;case 11:if(0===c.havedict)return b.next_out=k,b.avail_out=y,b.next_in=h,b.avail_in=f,c.hold=x,c.bits=F,2;b.adler=c.check=1;c.mode=12;case 12:if(5===a||6===a)break a;case 13:if(c.last){x>>>=7&F;F-=7&F;c.mode=27;break}for(;3>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}switch(c.last=1&x,x>>>=1,--F,3&x){case 0:c.mode=14;break;case 1:R=c;if(K){g=new G.Buf32(512);
l=new G.Buf32(32);for(P=0;144>P;)R.lens[P++]=8;for(;256>P;)R.lens[P++]=9;for(;280>P;)R.lens[P++]=7;for(;288>P;)R.lens[P++]=8;B(1,R.lens,0,288,g,0,R.work,{bits:9});for(P=0;32>P;)R.lens[P++]=5;B(2,R.lens,0,32,l,0,R.work,{bits:5});K=!1}R.lencode=g;R.lenbits=9;R.distcode=l;R.distbits=5;if(c.mode=20,6===a){x>>>=2;F-=2;break a}break;case 2:c.mode=17;break;case 3:b.msg="invalid block type",c.mode=30}x>>>=2;F-=2;break;case 14:x>>>=7&F;for(F-=7&F;32>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if((65535&x)!==
(x>>>16^65535)){b.msg="invalid stored block lengths";c.mode=30;break}if(c.length=65535&x,x=0,F=0,c.mode=15,6===a)break a;case 15:c.mode=16;case 16:if(I=c.length){if(I>f&&(I=f),I>y&&(I=y),0===I)break a;G.arraySet(e,d,h,I,k);f-=I;h+=I;y-=I;k+=I;c.length-=I;break}c.mode=12;break;case 17:for(;14>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if(c.nlen=(31&x)+257,x>>>=5,F-=5,c.ndist=(31&x)+1,x>>>=5,F-=5,c.ncode=(15&x)+4,x>>>=4,F-=4,286<c.nlen||30<c.ndist){b.msg="too many length or distance symbols";c.mode=
30;break}c.have=0;c.mode=18;case 18:for(;c.have<c.ncode;){for(;3>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}c.lens[ha[c.have++]]=7&x;x>>>=3;F-=3}for(;19>c.have;)c.lens[ha[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,da={bits:c.lenbits},ea=B(0,c.lens,0,19,c.lencode,0,c.work,da),c.lenbits=da.bits,ea){b.msg="invalid code lengths set";c.mode=30;break}c.have=0;c.mode=19;case 19:for(;c.have<c.nlen+c.ndist;){for(;ca=c.lencode[x&(1<<c.lenbits)-1],U=ca>>>24,P=65535&ca,!(F>=U);){if(0===f)break a;f--;x+=d[h++]<<
F;F+=8}if(16>P)x>>>=U,F-=U,c.lens[c.have++]=P;else{if(16===P){for(R=U+2;R>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if(x>>>=U,F-=U,0===c.have){b.msg="invalid bit length repeat";c.mode=30;break}V=c.lens[c.have-1];I=3+(3&x);x>>>=2;F-=2}else if(17===P){for(R=U+3;R>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}x>>>=U;F-=U;V=0;I=3+(7&x);x>>>=3;F-=3}else{for(R=U+7;R>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}x>>>=U;F-=U;V=0;I=11+(127&x);x>>>=7;F-=7}if(c.have+I>c.nlen+c.ndist){b.msg="invalid bit length repeat";
c.mode=30;break}for(;I--;)c.lens[c.have++]=V}}if(30===c.mode)break;if(0===c.lens[256]){b.msg="invalid code -- missing end-of-block";c.mode=30;break}if(c.lenbits=9,da={bits:c.lenbits},ea=B(1,c.lens,0,c.nlen,c.lencode,0,c.work,da),c.lenbits=da.bits,ea){b.msg="invalid literal/lengths set";c.mode=30;break}if(c.distbits=6,c.distcode=c.distdyn,da={bits:c.distbits},ea=B(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,da),c.distbits=da.bits,ea){b.msg="invalid distances set";c.mode=30;break}if(c.mode=20,6===a)break a;
case 20:c.mode=21;case 21:if(6<=f&&258<=y){b.next_out=k;b.avail_out=y;b.next_in=h;b.avail_in=f;c.hold=x;c.bits=F;E(b,J);k=b.next_out;e=b.output;y=b.avail_out;h=b.next_in;d=b.input;f=b.avail_in;x=c.hold;F=c.bits;12===c.mode&&(c.back=-1);break}for(c.back=0;ca=c.lencode[x&(1<<c.lenbits)-1],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(F>=U);){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if(R&&0===(240&R)){Y=U;ba=R;for(Z=P;ca=c.lencode[Z+((x&(1<<Y+ba)-1)>>Y)],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(F>=Y+U);){if(0===f)break a;
f--;x+=d[h++]<<F;F+=8}x>>>=Y;F-=Y;c.back+=Y}if(x>>>=U,F-=U,c.back+=U,c.length=P,0===R){c.mode=26;break}if(32&R){c.back=-1;c.mode=12;break}if(64&R){b.msg="invalid literal/length code";c.mode=30;break}c.extra=15&R;c.mode=22;case 22:if(c.extra){for(R=c.extra;R>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}c.length+=x&(1<<c.extra)-1;x>>>=c.extra;F-=c.extra;c.back+=c.extra}c.was=c.length;c.mode=23;case 23:for(;ca=c.distcode[x&(1<<c.distbits)-1],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(F>=U);){if(0===f)break a;
f--;x+=d[h++]<<F;F+=8}if(0===(240&R)){Y=U;ba=R;for(Z=P;ca=c.distcode[Z+((x&(1<<Y+ba)-1)>>Y)],U=ca>>>24,R=ca>>>16&255,P=65535&ca,!(F>=Y+U);){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}x>>>=Y;F-=Y;c.back+=Y}if(x>>>=U,F-=U,c.back+=U,64&R){b.msg="invalid distance code";c.mode=30;break}c.offset=P;c.extra=15&R;c.mode=24;case 24:if(c.extra){for(R=c.extra;R>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}c.offset+=x&(1<<c.extra)-1;x>>>=c.extra;F-=c.extra;c.back+=c.extra}if(c.offset>c.dmax){b.msg="invalid distance too far back";
c.mode=30;break}c.mode=25;case 25:if(0===y)break a;if(I=J-y,c.offset>I){if(I=c.offset-I,I>c.whave&&c.sane){b.msg="invalid distance too far back";c.mode=30;break}I>c.wnext?(I-=c.wnext,W=c.wsize-I):W=c.wnext-I;I>c.length&&(I=c.length);R=c.window}else R=e,W=k-c.offset,I=c.length;I>y&&(I=y);y-=I;c.length-=I;do e[k++]=R[W++];while(--I);0===c.length&&(c.mode=21);break;case 26:if(0===y)break a;e[k++]=c.length;y--;c.mode=21;break;case 27:if(c.wrap){for(;32>F;){if(0===f)break a;f--;x|=d[h++]<<F;F+=8}if(J-=
y,b.total_out+=J,c.total+=J,J&&(b.adler=c.check=c.flags?m(c.check,e,J,k-J):t(c.check,e,J,k-J)),J=y,(c.flags?x:p(x))!==c.check){b.msg="incorrect data check";c.mode=30;break}F=x=0}c.mode=28;case 28:if(c.wrap&&c.flags){for(;32>F;){if(0===f)break a;f--;x+=d[h++]<<F;F+=8}if(x!==(4294967295&c.total)){b.msg="incorrect length check";c.mode=30;break}F=x=0}c.mode=29;case 29:ea=1;break a;case 30:ea=-3;break a;case 31:return-4;default:return q}b.next_out=k;b.avail_out=y;b.next_in=h;b.avail_in=f;c.hold=x;c.bits=
F;if(h=c.wsize||J!==b.avail_out&&30>c.mode&&(27>c.mode||4!==a)){h=b.output;k=b.next_out;d=J-b.avail_out;var ga;f=b.state;h=(null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new G.Buf8(f.wsize)),d>=f.wsize?(G.arraySet(f.window,h,k-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(ga=f.wsize-f.wnext,ga>d&&(ga=d),G.arraySet(f.window,h,k-d,ga,f.wnext),d-=ga,d?(G.arraySet(f.window,h,k-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=ga,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=
ga))),0)}return h?(c.mode=31,-4):(Q-=b.avail_in,J-=b.avail_out,b.total_in+=Q,b.total_out+=J,c.total+=J,c.wrap&&J&&(b.adler=c.check=c.flags?m(c.check,e,J,b.next_out-J):t(c.check,e,J,b.next_out-J)),b.data_type=c.bits+(c.last?64:0)+(12===c.mode?128:0)+(20===c.mode||15===c.mode?256:0),(0===Q&&0===J||4===a)&&ea===C&&(ea=-5),ea)};d.inflateEnd=function(b){if(!b||!b.state)return q;var a=b.state;return a.window&&(a.window=null),b.state=null,C};d.inflateGetHeader=function(b,a){var c;return b&&b.state?(c=b.state,
0===(2&c.wrap)?q:(c.head=a,a.done=!1,C)):q};d.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(f,e,d){var p=f("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,
8193,12289,16385,24577,0,0],k=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(d,e,f,g,t,m,E,l){var C,q,H,x,y,K,L,O;x=l.bits;for(var D=0,S=0,X=0,w=0,u=0,A=0,aa=0,N=0,F=0,Q=null,J=0,I=new p.Buf16(16),A=new p.Buf16(16),W=null,R=0,D=0;15>=D;D++)I[D]=0;for(S=0;g>S;S++)I[e[f+S]]++;u=x;for(w=15;1<=w&&0===I[w];w--);if(u>w&&(u=w),0===w)return t[m++]=20971520,t[m++]=20971520,l.bits=1,0;for(X=1;w>X&&0===I[X];X++);X>u&&(u=X);for(D=C=1;15>=D;D++)if(C<<=
1,C-=I[D],0>C)return-1;if(0<C&&(0===d||1!==w))return-1;A[1]=0;for(D=1;15>D;D++)A[D+1]=A[D]+I[D];for(S=0;g>S;S++)0!==e[f+S]&&(E[A[e[f+S]]++]=S);if(0===d?(Q=W=E,y=19):1===d?(Q=a,J-=257,W=c,R-=257,y=256):(Q=b,W=k,y=-1),F=0,S=0,D=X,x=m,A=u,aa=0,H=-1,N=1<<u,g=N-1,1===d&&852<N||2===d&&592<N)return 1;for(var U=0;;){U++;K=D-aa;E[S]<y?(L=0,O=E[S]):E[S]>y?(L=W[R+E[S]],O=Q[J+E[S]]):(L=96,O=0);C=1<<D-aa;X=q=1<<A;do q-=C,t[x+(F>>aa)+q]=K<<24|L<<16|O|0;while(0!==q);for(C=1<<D-1;F&C;)C>>=1;if(0!==C?(F&=C-1,F+=C):
F=0,S++,0===--I[D]){if(D===w)break;D=e[f+E[S]]}if(D>u&&(F&g)!==H){0===aa&&(aa=u);x+=X;A=D-aa;for(C=1<<A;w>A+aa&&(C-=I[A+aa],!(0>=C));)A++,C<<=1;if(N+=1<<A,1===d&&852<N||2===d&&592<N)return 1;H=F&g;t[H]=u<<24|A<<16|x-m|0}}return 0!==F&&(t[x+F]=D-aa<<24|4194304),l.bits=u,0}},{"../utils/common":1}],10:[function(f,e,d){e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},
{}],11:[function(f,e,d){e.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/lib/inflate.js":[function(f,e,d){function g(b,a){var c=new t(a);if(c.push(b,!0),c.err)throw c.msg;return c.result}var a=f("./zlib/inflate.js"),c=f("./utils/common"),b=f("./utils/strings"),k=f("./zlib/constants"),h=f("./zlib/messages"),l=f("./zlib/zstream"),M=f("./zlib/gzheader"),
G=Object.prototype.toString,t=function(b){var d=this.options=c.assign({chunkSize:16384,windowBits:0,to:""},b||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||b&&b.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&0===(15&d.windowBits)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new l;this.strm.avail_out=0;b=a.inflateInit2(this.strm,d.windowBits);
if(b!==k.Z_OK)throw Error(h[b]);this.header=new M;a.inflateGetHeader(this.strm,this.header)};t.prototype.push=function(d,e){var h,f,t,g,p,y=this.strm,l=this.options.chunkSize;if(this.ended)return!1;f=e===~~e?e:!0===e?k.Z_FINISH:k.Z_NO_FLUSH;"string"==typeof d?y.input=b.binstring2buf(d):"[object ArrayBuffer]"===G.call(d)?y.input=new Uint8Array(d):y.input=d;y.next_in=0;y.avail_in=y.input.length;do{if(0===y.avail_out&&(y.output=new c.Buf8(l),y.next_out=0,y.avail_out=l),h=a.inflate(y,k.Z_NO_FLUSH),h!==
k.Z_STREAM_END&&h!==k.Z_OK)return this.onEnd(h),this.ended=!0,!1;y.next_out&&(0===y.avail_out||h===k.Z_STREAM_END||0===y.avail_in&&(f===k.Z_FINISH||f===k.Z_SYNC_FLUSH))&&("string"===this.options.to?(t=b.utf8border(y.output,y.next_out),g=y.next_out-t,p=b.buf2string(y.output,t),y.next_out=g,y.avail_out=l-g,g&&c.arraySet(y.output,y.output,t,g,0),this.onData(p)):this.onData(c.shrinkBuf(y.output,y.next_out)))}while(0<y.avail_in&&h!==k.Z_STREAM_END);return h===k.Z_STREAM_END&&(f=k.Z_FINISH),f===k.Z_FINISH?
(h=a.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===k.Z_OK):f===k.Z_SYNC_FLUSH?(this.onEnd(k.Z_OK),y.avail_out=0,!0):!0};t.prototype.onData=function(b){this.chunks.push(b)};t.prototype.onEnd=function(b){b===k.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=c.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};d.Inflate=t;d.inflate=g;d.inflateRaw=function(b,a){return a=a||{},a.raw=!0,g(b,a)};d.ungzip=g},{"./utils/common":1,"./utils/strings":2,
"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")})},{}],3:[function(g,q,l){function n(b,a){switch(void 0===a&&(a=b.toString()),b.name){case "NotFoundError":return new h(z.ENOENT,a);case "QuotaExceededError":return new h(z.ENOSPC,a);default:return new h(z.EIO,a)}}function f(b,a,c){return void 0===a&&(a=z.EIO),void 0===c&&(c=null),function(d){d.preventDefault();b(new h(a,c))}}function e(a){var c=a.getBufferCore();c instanceof
b.BufferCoreArrayBuffer||(a=new k(this._buffer.length),this._buffer.copy(a),c=a.getBufferCore());return c.getDataView().buffer}var d=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},p=g("../core/buffer");q=g("../core/browserfs");var a=g("../generic/key_value_filesystem"),c=g("../core/api_error"),b=g("../core/buffer_core_arraybuffer");g=g("../core/global");var k=p.Buffer,h=c.ApiError,z=c.ErrorCode,
M=g.indexedDB||g.mozIndexedDB||g.webkitIndexedDB||g.msIndexedDB,G=function(){function b(a,c){this.tx=a;this.store=c}return b.prototype.get=function(b,a){try{var c=this.store.get(b);c.onerror=f(a);c.onsuccess=function(b){b=b.target.result;void 0===b?a(null,b):a(null,new k(b))}}catch(d){a(n(d))}},b}();l.IndexedDBROTransaction=G;var t=function(b){function a(c,d){b.call(this,c,d)}return d(a,b),a.prototype.put=function(b,a,c,d){try{var h,k=e(a);h=c?this.store.put(k,b):this.store.add(k,b);h.onerror=f(d);
h.onsuccess=function(b){d(null,!0)}}catch(m){d(n(m))}},a.prototype["delete"]=function(b,a){try{var c=this.store["delete"](b);c.onerror=f(a);c.onsuccess=function(b){a()}}catch(d){a(n(d))}},a.prototype.commit=function(b){setTimeout(b,0)},a.prototype.abort=function(b){var a;try{this.tx.abort()}catch(c){a=n(c)}finally{b(a)}},a}(G);l.IndexedDBRWTransaction=t;var m=function(){function b(a,c){var d=this;void 0===c&&(c="browserfs");this.storeName=c;var e=M.open(this.storeName,1);e.onupgradeneeded=function(b){b=
b.target.result;b.objectStoreNames.contains(d.storeName)&&b.deleteObjectStore(d.storeName);b.createObjectStore(d.storeName)};e.onsuccess=function(b){d.db=b.target.result;a(null,d)};e.onerror=f(a,z.EACCES)}return b.prototype.name=function(){return"IndexedDB - "+this.storeName},b.prototype.clear=function(b){try{var a=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();a.onsuccess=function(a){setTimeout(b,0)};a.onerror=f(b)}catch(c){b(n(c))}},b.prototype.beginTransaction=
function(b){void 0===b&&(b="readonly");var a=this.db.transaction(this.storeName,b),c=a.objectStore(this.storeName);if("readwrite"===b)return new t(a,c);if("readonly"===b)return new G(a,c);throw new h(z.EINVAL,"Invalid transaction type.");},b}();l.IndexedDBStore=m;g=function(b){function a(c,d){var e=this;b.call(this);new m(function(b,a){b?c(b):e.init(a,function(b){c(b,e)})},d)}return d(a,b),a.isAvailable=function(){try{return"undefined"!=typeof M&&null!==M.open("__browserfs_test__")}catch(b){return!1}},
a}(a.AsyncKeyValueFileSystem);l.IndexedDBFileSystem=g;q.registerFileSystem("IndexedDB",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/global":24,"../generic/key_value_filesystem":35}],4:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},f=g("../core/file_system"),e=g("../generic/file_index"),d=g("../core/buffer"),
p=g("../core/api_error"),a=g("../core/file_flag"),c=g("../generic/preload_file");q=g("../core/browserfs");var b=g("../generic/xhr"),k=(d.Buffer,p.ApiError),h=p.ErrorCode,z=(a.FileFlag,a.ActionType);g=function(a){function f(b,c){void 0===c&&(c="");a.call(this);null==b&&(b="index.json");0<c.length&&"/"!==c.charAt(c.length-1)&&(c+="/");this.prefix_url=c;var d=this._requestFileSync(b,"json");if(null==d)throw Error("Unable to find listing at URL: "+b);this._index=e.FileIndex.from_listing(d)}return n(f,
a),f.prototype.empty=function(){this._index.fileIterator(function(b){b.file_data=null})},f.prototype.getXhrPath=function(b){return"/"===b.charAt(0)&&(b=b.slice(1)),this.prefix_url+b},f.prototype._requestFileSizeAsync=function(a,c){b.getFileSizeAsync(this.getXhrPath(a),c)},f.prototype._requestFileSizeSync=function(a){return b.getFileSizeSync(this.getXhrPath(a))},f.prototype._requestFileAsync=function(a,c,d){b.asyncDownloadFile(this.getXhrPath(a),c,d)},f.prototype._requestFileSync=function(a,c){return b.syncDownloadFile(this.getXhrPath(a),
c)},f.prototype.getName=function(){return"XmlHttpRequest"},f.isAvailable=function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},f.prototype.diskSpace=function(b,a){a(0,0)},f.prototype.isReadOnly=function(){return!0},f.prototype.supportsLinks=function(){return!1},f.prototype.supportsProps=function(){return!1},f.prototype.supportsSynch=function(){return!0},f.prototype.preloadFile=function(b,a){var c=this._index.getInode(b);if(null===c)throw k.ENOENT(b);c=c.getData();c.size=a.length;
c.file_data=a},f.prototype.stat=function(b,a,c){a=this._index.getInode(b);if(null===a)return c(k.ENOENT(b));var d;a.isFile()?(d=a.getData(),0>d.size?this._requestFileSizeAsync(b,function(b,a){return b?c(b):(d.size=a,void c(null,d.clone()))}):c(null,d.clone())):(d=a.getStats(),c(null,d))},f.prototype.statSync=function(b,a){var c=this._index.getInode(b);if(null===c)throw k.ENOENT(b);var d;return c.isFile()?(d=c.getData(),0>d.size&&(d.size=this._requestFileSizeSync(b))):d=c.getStats(),d},f.prototype.open=
function(b,a,d,e){if(a.isWriteable())return e(new k(h.EPERM,b));var f=this;d=this._index.getInode(b);if(null===d)return e(k.ENOENT(b));if(d.isDir())return e(k.EISDIR(b));var g=d.getData();switch(a.pathExistsAction()){case z.THROW_EXCEPTION:case z.TRUNCATE_FILE:return e(k.EEXIST(b));case z.NOP:if(null!=g.file_data)return e(null,new c.NoSyncFile(f,b,a,g.clone(),g.file_data));this._requestFileAsync(b,"buffer",function(d,h){return d?e(d):(g.size=h.length,g.file_data=h,e(null,new c.NoSyncFile(f,b,a,g.clone(),
h)))});break;default:return e(new k(h.EINVAL,"Invalid FileMode object."))}},f.prototype.openSync=function(b,a,d){if(a.isWriteable())throw new k(h.EPERM,b);d=this._index.getInode(b);if(null===d)throw k.ENOENT(b);if(d.isDir())throw k.EISDIR(b);d=d.getData();switch(a.pathExistsAction()){case z.THROW_EXCEPTION:case z.TRUNCATE_FILE:throw k.EEXIST(b);case z.NOP:if(null!=d.file_data)return new c.NoSyncFile(this,b,a,d.clone(),d.file_data);var e=this._requestFileSync(b,"buffer");return d.size=e.length,d.file_data=
e,new c.NoSyncFile(this,b,a,d.clone(),e);default:throw new k(h.EINVAL,"Invalid FileMode object.");}},f.prototype.readdir=function(b,a){try{a(null,this.readdirSync(b))}catch(c){a(c)}},f.prototype.readdirSync=function(b){var a=this._index.getInode(b);if(null===a)throw k.ENOENT(b);if(a.isFile())throw k.ENOTDIR(b);return a.getListing()},f.prototype.readFile=function(b,a,c,e){var h=e;this.open(b,c,420,function(b,c){if(b)return e(b);e=function(b,a){c.close(function(c){return null==b&&(b=c),h(b,a)})};var k=
c.getBuffer();if(null===a)return 0<k.length?e(b,k.sliceCopy()):e(b,new d.Buffer(0));try{e(null,k.toString(a))}catch(f){e(f)}})},f.prototype.readFileSync=function(b,a,c){b=this.openSync(b,c,420);try{var e=b.getBuffer();return null===a?0<e.length?e.sliceCopy():new d.Buffer(0):e.toString(a)}finally{b.closeSync()}},f}(f.BaseFileSystem);l.XmlHttpRequest=g;q.registerFileSystem("XmlHttpRequest",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,
"../generic/file_index":33,"../generic/preload_file":36,"../generic/xhr":37}],5:[function(g,q,l){var n=this.__extends||function(d,a){function c(){this.constructor=d}for(var b in a)a.hasOwnProperty(b)&&(d[b]=a[b]);c.prototype=a.prototype;d.prototype=new c};l=g("../core/file_system");var f=g("../core/file_flag"),e=g("../generic/preload_file");g=g("../core/browserfs");var d=function(d){function a(a,b,e,h,f){d.call(this,a,b,e,h,f)}return n(a,d),a.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),
this.resetDirty())},a.prototype.closeSync=function(){this.syncSync()},a}(e.PreloadFile);l=function(e){function a(a,b){if(e.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._sync=a,this._async=b,!a.supportsSynch())throw Error("Expected synchronous storage.");if(b.supportsSynch())throw Error("Expected asynchronous storage.");}return n(a,e),a.prototype.getName=function(){return"AsyncMirror"},a.isAvailable=function(){return!0},a.prototype._syncSync=function(a){this._sync.writeFileSync(a.getPath(),
a.getBuffer(),null,f.FileFlag.getFileFlag("w"),a.getStats().mode);this.enqueueOp({apiMethod:"writeFile",arguments:[a.getPath(),a.getBuffer(),null,a.getFlag(),a.getStats().mode]})},a.prototype.initialize=function(a){var b=this;if(this._isInitialized)a();else{var d=function(a,c,d){"/"!==a&&b._sync.mkdirSync(a,c);b._async.readdir(a,function(b,c){function e(b){b?d(b):h<c.length?(g(a+"/"+c[h],e),h++):d()}if(b)d(b);else{var h=0;e()}})},e=function(a,c,d){b._async.readFile(a,null,f.FileFlag.getFileFlag("r"),
function(e,h){if(e)d(e);else try{b._sync.writeFileSync(a,h,null,f.FileFlag.getFileFlag("w"),c)}catch(k){e=k}finally{d(e)}})},g=function(a,c){b._async.stat(a,!1,function(b,f){b?c(b):f.isDirectory()?d(a,f.mode,c):e(a,f.mode,c)})};d("/",0,function(d){d?a(d):(b._isInitialized=!0,a())})}},a.prototype.isReadOnly=function(){return!1},a.prototype.supportsSynch=function(){return!0},a.prototype.supportsLinks=function(){return!1},a.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},
a.prototype.enqueueOp=function(a){var b=this;if(this._queue.push(a),!this._queueRunning){this._queueRunning=!0;var d=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+"\n$"),0<b._queue.length){a=b._queue.shift();var c=a.arguments;c.push(d);b._async[a.apiMethod].apply(b._async,c)}else b._queueRunning=!1};d()}},a.prototype.renameSync=function(a,b){this._sync.renameSync(a,b);this.enqueueOp({apiMethod:"rename",arguments:[a,b]})},a.prototype.statSync=
function(a,b){return this._sync.statSync(a,b)},a.prototype.openSync=function(a,b,e){return this._sync.openSync(a,b,e).closeSync(),new d(this,a,b,this._sync.statSync(a,!1),this._sync.readFileSync(a,null,f.FileFlag.getFileFlag("r")))},a.prototype.unlinkSync=function(a){this._sync.unlinkSync(a);this.enqueueOp({apiMethod:"unlink",arguments:[a]})},a.prototype.rmdirSync=function(a){this._sync.rmdirSync(a);this.enqueueOp({apiMethod:"rmdir",arguments:[a]})},a.prototype.mkdirSync=function(a,b){this._sync.mkdirSync(a,
b);this.enqueueOp({apiMethod:"mkdir",arguments:[a,b]})},a.prototype.readdirSync=function(a){return this._sync.readdirSync(a)},a.prototype.existsSync=function(a){return this._sync.existsSync(a)},a.prototype.chmodSync=function(a,b,d){this._sync.chmodSync(a,b,d);this.enqueueOp({apiMethod:"chmod",arguments:[a,b,d]})},a.prototype.chownSync=function(a,b,d,e){this._sync.chownSync(a,b,d,e);this.enqueueOp({apiMethod:"chown",arguments:[a,b,d,e]})},a.prototype.utimesSync=function(a,b,d){this._sync.utimesSync(a,
b,d);this.enqueueOp({apiMethod:"utimes",arguments:[a,b,d]})},a}(l.SynchronousFileSystem);g.registerFileSystem("AsyncMirrorFS",l);q.exports=l},{"../core/browserfs":15,"../core/file_flag":22,"../core/file_system":23,"../generic/preload_file":36}],6:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},f=g("../generic/preload_file"),e=g("../core/file_system"),d=g("../core/node_fs_stats"),
p=g("../core/buffer"),a=g("../core/api_error"),c=g("../core/node_path");q=g("../core/browserfs");var b=g("../core/buffer_core_arraybuffer"),k=g("async"),h=p.Buffer,z=d.Stats,M=a.ApiError,G=a.ErrorCode,t=d.FileType,m=function(a){function c(b,d,e,h,k){a.call(this,b,d,e,h,k)}return n(c,a),c.prototype.sync=function(a){var c=this;if(this.isDirty()){var d=this.getBuffer(),e=d.getBufferCore();e instanceof b.BufferCoreArrayBuffer||(d=new h(d.length),this.getBuffer().copy(d),e=d.getBufferCore());e=e.getDataView();
d=new DataView(e.buffer,e.byteOffset+d.getOffset(),d.length);this._fs._writeFileStrict(this.getPath(),d,function(b){b||c.resetDirty();a(b)})}else a()},c.prototype.close=function(b){this.sync(b)},c}(f.PreloadFile);l.DropboxFile=m;g=function(b){function a(c){b.call(this);this.client=c}return n(a,b),a.prototype.getName=function(){return"Dropbox"},a.isAvailable=function(){return"undefined"!=typeof Dropbox},a.prototype.isReadOnly=function(){return!1},a.prototype.supportsSymlinks=function(){return!1},a.prototype.supportsProps=
function(){return!1},a.prototype.supportsSynch=function(){return!1},a.prototype.empty=function(b){var a=this;this.client.readdir("/",function(c,d,e,h){c?b(a.convert(c)):k.each(h,function(b,c){a.client.remove(b.path,function(b,d){c(b?a.convert(b):b)})},function(c){c?b(a.convert(c)):b()})})},a.prototype.rename=function(b,a,c){this.client.move(b,a,function(d,e){if(d){var h=-1<d.response.error.indexOf(b)?b:a;c(new M(G.ENOENT,h+" doesn't exist"))}else c()})},a.prototype.stat=function(b,a,c){var d=this;
this.client.stat(b,function(a,e){if(!(a||null!=e&&e.isRemoved)){var h=new z(d._statType(e),e.size);return c(null,h)}c(new M(G.ENOENT,b+" doesn't exist"))})},a.prototype.open=function(b,a,c,d){var e=this;this.client.readFile(b,{arrayBuffer:!0},function(c,k,f,m){if(!c)return c=new h(null===k?0:k),f=e._makeFile(b,a,f,c),d(null,f);if(a.isReadable())d(new M(G.ENOENT,b+" doesn't exist"));else switch(c.status){case 0:return console.error("No connection");case 404:var t=new ArrayBuffer(0);return e._writeFileStrict(b,
t,function(c,k){if(c)d(c);else{var f=e._makeFile(b,a,k,new h(t));d(null,f)}});default:return console.log("Unhandled error: "+c)}})},a.prototype._writeFileStrict=function(b,a,d){var e=this,h=c.dirname(b);this.stat(h,!1,function(c,k){c?d(new M(G.ENOENT,"Can't create "+b+" because "+h+" doesn't exist")):e.client.writeFile(b,a,function(b,a){b?d(e.convert(b)):d(null,a)})})},a.prototype._statType=function(b){return b.isFile?t.FILE:t.DIRECTORY},a.prototype._makeFile=function(b,a,c,d){var e=this._statType(c);
c=new z(e,c.size);return new m(this,b,a,c,d)},a.prototype._remove=function(b,a,c){var d=this;this.client.stat(b,function(e,h){e?a(new M(G.ENOENT,b+" doesn't exist")):h.isFile&&!c?a(new M(G.ENOTDIR,b+" is a file.")):!h.isFile&&c?a(new M(G.EISDIR,b+" is a directory.")):d.client.remove(b,function(c,d){a(c?new M(G.EIO,"Failed to remove "+b):null)})})},a.prototype.unlink=function(b,a){this._remove(b,a,!0)},a.prototype.rmdir=function(b,a){this._remove(b,a,!1)},a.prototype.mkdir=function(b,a,d){var e=this,
h=c.dirname(b);this.client.stat(h,function(a,c){a?d(new M(G.ENOENT,"Can't create "+b+" because "+h+" doesn't exist")):e.client.mkdir(b,function(a,c){d(a?new M(G.EEXIST,b+" already exists"):null)})})},a.prototype.readdir=function(b,a){var c=this;this.client.readdir(b,function(b,d,e,h){return b?a(c.convert(b)):a(null,d)})},a.prototype.convert=function(b,a){switch(void 0===a&&(a=""),b.status){case 400:return new M(G.EINVAL,a);case 401:case 403:return new M(G.EIO,a);case 404:return new M(G.ENOENT,a);
case 405:return new M(G.ENOTSUP,a);default:return new M(G.EIO,a)}},a}(e.BaseFileSystem);l.DropboxFileSystem=g;q.registerFileSystem("Dropbox",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],7:[function(g,q,l){function n(b,a,c,d){if("undefined"!=typeof navigator.webkitPersistentStorage)switch(b){case z.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(a,
c,d);break;case z.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(a,c,d);break;default:d(null)}else z.webkitStorageInfo.requestQuota(b,a,c,d)}var f=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},e=g("../generic/preload_file"),d=g("../core/file_system"),p=g("../core/api_error"),a=g("../core/file_flag"),c=g("../core/node_fs_stats"),b=g("../core/buffer");q=g("../core/browserfs");var k=g("../core/buffer_core_arraybuffer"),
h=g("../core/node_path"),z=g("../core/global"),M=g("async"),G=b.Buffer,t=c.Stats,m=c.FileType,E=p.ApiError,B=p.ErrorCode,C=a.ActionType,T=z.webkitRequestFileSystem||z.requestFileSystem||null,H=function(b){function a(c,d,e,h,k){b.call(this,c,d,e,h,k)}return f(a,b),a.prototype.sync=function(b){var a=this;if(this.isDirty()){var c=this._fs;c.fs.root.getFile(this.getPath(),{create:!1},function(d){d.createWriter(function(d){var e=a.getBuffer(),h=e.getBufferCore();h instanceof k.BufferCoreArrayBuffer||(e=
new G(e.length),a.getBuffer().copy(e),h=e.getBufferCore());var h=h.getDataView(),e=new DataView(h.buffer,h.byteOffset+e.getOffset(),e.length),e=new Blob([e]),f=e.size;d.onwriteend=function(){d.onwriteend=null;d.truncate(f);a.resetDirty();b()};d.onerror=function(a){b(c.convert(a))};d.write(e)})},function(a){b(c.convert(a))})}else b()},a.prototype.close=function(b){this.sync(b)},a}(e.PreloadFile);l.HTML5FSFile=H;g=function(b){function a(c,d){b.call(this);this.size=null!=c?c:5;this.type=null!=d?d:z.PERSISTENT;
this.size*=1048576}return f(a,b),a.prototype.getName=function(){return"HTML5 FileSystem"},a.isAvailable=function(){return null!=T},a.prototype.isReadOnly=function(){return!1},a.prototype.supportsSymlinks=function(){return!1},a.prototype.supportsProps=function(){return!1},a.prototype.supportsSynch=function(){return!1},a.prototype.convert=function(b,a){switch(void 0===a&&(a=""),b.name){case "QuotaExceededError":return new E(B.ENOSPC,a);case "NotFoundError":return new E(B.ENOENT,a);case "SecurityError":return new E(B.EACCES,
a);case "InvalidModificationError":return new E(B.EPERM,a);case "SyntaxError":case "TypeMismatchError":return new E(B.EINVAL,a);default:return new E(B.EINVAL,a)}},a.prototype.convertErrorEvent=function(b,a){return void 0===a&&(a=""),new E(B.ENOENT,b.message+"; "+a)},a.prototype.allocate=function(b){var a=this;void 0===b&&(b=function(){});var c=function(c){a.fs=c;b()},d=function(c){b(a.convert(c))};this.type===z.PERSISTENT?n(this.type,this.size,function(b){T(a.type,b,c,d)},d):T(this.type,this.size,
c,d)},a.prototype.empty=function(b){var a=this;this._readdir("/",function(c,d){c?(console.error("Failed to empty FS"),b(c)):M.each(d,function(b,c){var d=function(){c()},e=function(d){c(a.convert(d,b.fullPath))};b.isFile?b.remove(d,e):b.removeRecursively(d,e)},function(a){c?(console.error("Failed to empty FS"),b(c)):b()})})},a.prototype.rename=function(b,a,c){var d=this,e=2,k=0,f=this.fs.root,m=function(h){0===--e&&c(d.convert(h,"Failed to rename "+b+" to "+a+"."))},y=function(e){return 2===++k?void console.error("Something was identified as both a file and a directory. This should never happen."):
b===a?c():void f.getDirectory(h.dirname(a),{},function(k){e.moveTo(k,h.basename(a),function(b){c()},function(h){e.isDirectory?d.unlink(a,function(e){e?m(h):d.rename(b,a,c)}):m(h)})},m)};f.getFile(b,{},y,m);f.getDirectory(b,{},y,m)},a.prototype.stat=function(b,a,c){var d=this,e={create:!1},h=function(b){b=new t(m.DIRECTORY,4096);c(null,b)},k=function(a){c(d.convert(a,b))};this.fs.root.getFile(b,e,function(b){b.file(function(b){b=new t(m.FILE,b.size);c(null,b)},k)},function(){d.fs.root.getDirectory(b,
e,h,k)})},a.prototype.open=function(b,a,c,d){var e=this;c={create:a.pathNotExistsAction()===C.CREATE_FILE,exclusive:a.isExclusive()};var h=function(a){d(e.convertErrorEvent(a,b))},k=function(a){d(e.convert(a,b))};this.fs.root.getFile(b,c,function(c){c.file(function(c){var k=new FileReader;k.onloadend=function(h){h=e._makeFile(b,a,c,k.result);d(null,h)};k.onerror=h;k.readAsArrayBuffer(c)},k)},h)},a.prototype._statType=function(b){return b.isFile?m.FILE:m.DIRECTORY},a.prototype._makeFile=function(b,
a,c,d){void 0===d&&(d=new ArrayBuffer(0));c=new t(m.FILE,c.size);d=new G(d);return new H(this,b,a,c,d)},a.prototype._remove=function(b,a,c){var d=this,e=function(c){c.remove(function(){a()},function(c){a(d.convert(c,b))})},h=function(c){a(d.convert(c,b))},k={create:!1};c?this.fs.root.getFile(b,k,e,h):this.fs.root.getDirectory(b,k,e,h)},a.prototype.unlink=function(b,a){this._remove(b,a,!0)},a.prototype.rmdir=function(b,a){this._remove(b,a,!1)},a.prototype.mkdir=function(b,a,c){var d=this;this.fs.root.getDirectory(b,
{create:!0,exclusive:!0},function(b){c()},function(a){c(d.convert(a,b))})},a.prototype._readdir=function(b,a){var c=this;this.fs.root.getDirectory(b,{create:!1},function(d){var e=d.createReader(),h=[],k=function(d){a(c.convert(d,b))},f=function(){e.readEntries(function(b){b.length?(h=h.concat(Array.prototype.slice.call(b||[],0)),f()):a(null,h)},k)};f()})},a.prototype.readdir=function(b,a){this._readdir(b,function(b,c){if(null!=b)return a(b);for(var d=[],e=0;e<c.length;e++)d.push(c[e].name);a(null,
d)})},a}(d.BaseFileSystem);l.HTML5FS=g;q.registerFileSystem("HTML5FS",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/global":24,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],8:[function(g,q,l){var n=this.__extends||function(d,e){function a(){this.constructor=d}for(var c in e)e.hasOwnProperty(c)&&(d[c]=e[c]);a.prototype=e.prototype;d.prototype=
new a},f=g("../generic/key_value_filesystem");g=g("../core/browserfs");var e=function(){function d(){this.store={}}return d.prototype.name=function(){return"In-memory"},d.prototype.clear=function(){this.store={}},d.prototype.beginTransaction=function(d){return new f.SimpleSyncRWTransaction(this)},d.prototype.get=function(d){return this.store[d]},d.prototype.put=function(d,a,c){return!c&&this.store.hasOwnProperty(d)?!1:(this.store[d]=a,!0)},d.prototype["delete"]=function(d){delete this.store[d]},d}();
l.InMemoryStore=e;q=function(d){function f(){d.call(this,{store:new e})}return n(f,d),f}(f.SyncKeyValueFileSystem);l.InMemoryFileSystem=q;g.registerFileSystem("InMemory",q)},{"../core/browserfs":15,"../generic/key_value_filesystem":35}],9:[function(g,q,l){var n,f=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},e=g("../core/buffer");q=g("../core/browserfs");var d=g("../generic/key_value_filesystem"),
p=g("../core/api_error"),a=g("../core/global"),c=e.Buffer,b=p.ApiError,k=p.ErrorCode;g=!1;try{a.localStorage.setItem("__test__",String.fromCharCode(55296)),g=a.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(z){g=!1}n=g?"binary_string":"binary_string_ie";var h=function(){function e(){}return e.prototype.name=function(){return"LocalStorage"},e.prototype.clear=function(){a.localStorage.clear()},e.prototype.beginTransaction=function(b){return new d.SimpleSyncRWTransaction(this)},
e.prototype.get=function(b){try{var d=a.localStorage.getItem(b);if(null!==d)return new c(d,n)}catch(e){}},e.prototype.put=function(c,d,e){try{return e||null===a.localStorage.getItem(c)?(a.localStorage.setItem(c,d.toString(n)),!0):!1}catch(h){throw new b(k.ENOSPC,"LocalStorage is full.");}},e.prototype["delete"]=function(c){try{a.localStorage.removeItem(c)}catch(d){throw new b(k.EIO,"Unable to delete key "+c+": "+d);}},e}();l.LocalStorageStore=h;g=function(b){function c(){b.call(this,{store:new h})}
return f(c,b),c.isAvailable=function(){return"undefined"!=typeof a.localStorage},c}(d.SyncKeyValueFileSystem);l.LocalStorageFileSystem=g;q.registerFileSystem("LocalStorage",g)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/global":24,"../generic/key_value_filesystem":35}],10:[function(g,q,l){function n(b,a,c){return a?function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var c=a[0],d=this._get_fs(c);a[0]=d.path;try{return d.fs[b].apply(d.fs,a)}catch(e){throw this.standardizeError(e,
d.path,c),e;}}:function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var e=a[0],h=this._get_fs(e);if(a[0]=h.path,"function"==typeof a[a.length-1]){var k=a[a.length-1],f=this;a[a.length-1]=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];0<b.length&&b[0]instanceof d.ApiError&&f.standardizeError(b[0],h.path,e);k.apply(null,b)}}return h.fs[b].apply(h.fs,a)}}var f=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=
a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file_system");var e=g("./in_memory"),d=g("../core/api_error"),p=g("../core/node_fs");g=g("../core/browserfs");var a=d.ApiError,c=d.ErrorCode;q=function(b){function d(){b.call(this);this.mntMap={};this.rootFs=new e.InMemoryFileSystem}return f(d,b),d.prototype.mount=function(b,d){if(this.mntMap[b])throw new a(c.EINVAL,"Mount point "+b+" is already taken.");this.rootFs.mkdirSync(b,511);this.mntMap[b]=d},d.prototype.umount=function(b){if(!this.mntMap[b])throw new a(c.EINVAL,
"Mount point "+b+" is already unmounted.");delete this.mntMap[b];this.rootFs.rmdirSync(b)},d.prototype._get_fs=function(b){for(var a in this.mntMap){var c=this.mntMap[a];if(0===b.indexOf(a))return b=b.substr(1<a.length?a.length:0),""===b&&(b="/"),{fs:c,path:b}}return{fs:this.rootFs,path:b}},d.prototype.getName=function(){return"MountableFileSystem"},d.isAvailable=function(){return!0},d.prototype.diskSpace=function(b,a){a(0,0)},d.prototype.isReadOnly=function(){return!1},d.prototype.supportsLinks=
function(){return!1},d.prototype.supportsProps=function(){return!1},d.prototype.supportsSynch=function(){return!0},d.prototype.standardizeError=function(b,a,c){var d;return-1!==(d=b.message.indexOf(a))&&(b.message=b.message.substr(0,d)+c+b.message.substr(d+a.length)),b},d.prototype.rename=function(b,a,c){var d=this._get_fs(b),e=this._get_fs(a);if(d.fs===e.fs){var h=this;return d.fs.rename(d.path,e.path,function(k){k&&h.standardizeError(h.standardizeError(k,d.path,b),e.path,a);c(k)})}return p.readFile(b,
function(d,e){return d?c(d):void p.writeFile(a,e,function(a){return a?c(a):void p.unlink(b,c)})})},d.prototype.renameSync=function(b,a){var c=this._get_fs(b),d=this._get_fs(a);if(c.fs===d.fs)try{return c.fs.renameSync(c.path,d.path)}catch(e){throw this.standardizeError(this.standardizeError(e,c.path,b),d.path,a),e;}c=p.readFileSync(b);return p.writeFileSync(a,c),p.unlinkSync(b)},d}(q.BaseFileSystem);l.MountableFileSystem=q;l=[["readdir","exists","unlink","rmdir","readlink"],["stat","mkdir","realpath",
"truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]];for(var b=0;b<l.length;b++)for(var k=l[b],h=0;h<k.length;h++){var z=k[h];q.prototype[z]=n(z,!1,b+1);q.prototype[z+"Sync"]=n(z+"Sync",!0,b+1)}g.registerFileSystem("MountableFileSystem",q)},{"../core/api_error":14,"../core/browserfs":15,"../core/file_system":23,"../core/node_fs":26,"./in_memory":8}],11:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&
(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},f=g("../core/file_system"),e=g("../core/buffer"),d=g("../core/api_error"),p=g("../core/file_flag"),a=g("../generic/preload_file");l=g("../core/browserfs");var c=g("../core/node_path"),b=d.ApiError,k=e.Buffer,h=d.ErrorCode,z=function(b){function a(c,d,e,h,k){b.call(this,c,d,e,h,k)}return n(a,b),a.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},a.prototype.closeSync=function(){this.syncSync()},a}(a.PreloadFile);
g=function(a){function d(c,e){if(a.call(this),this._isInitialized=!1,this._deletedFiles={},this._deleteLog=null,this._writable=c,this._readable=e,this._writable.isReadOnly())throw new b(h.EINVAL,"Writable file system must be writable.");if(!this._writable.supportsSynch()||!this._readable.supportsSynch())throw new b(h.EINVAL,"OverlayFS currently only operates on synchronous file systems.");}return n(d,a),d.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},
d.prototype.createParentDirectories=function(b){var a=this;b=c.dirname(b);for(var d=[];!this._writable.existsSync(b);)d.push(b),b=c.dirname(b);d=d.reverse();d.forEach(function(b){a._writable.mkdirSync(b,a.statSync(b,!1).mode)})},d.isAvailable=function(){return!0},d.prototype._syncSync=function(b){this.createParentDirectories(b.getPath());this._writable.writeFileSync(b.getPath(),b.getBuffer(),null,p.FileFlag.getFileFlag("w"),b.getStats().mode)},d.prototype.getName=function(){return"OverlayFS"},d.prototype.initialize=
function(b){var a=this;this._isInitialized?b():this._writable.readFile("/.deletedFiles.log","utf8",p.FileFlag.getFileFlag("r"),function(c,d){if(c){if(c.type!==h.ENOENT)return b(c)}else d.split("\n").forEach(function(b){a._deletedFiles[b.slice(1)]="d"===b.slice(0,1)});a._writable.open("/.deletedFiles.log",p.FileFlag.getFileFlag("a"),420,function(c,d){c?b(c):(a._deleteLog=d,b())})})},d.prototype.isReadOnly=function(){return!1},d.prototype.supportsSynch=function(){return!0},d.prototype.supportsLinks=
function(){return!1},d.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},d.prototype.deletePath=function(b){this._deletedFiles[b]=!0;b=new k("d"+b+"\n");this._deleteLog.writeSync(b,0,b.length,null);this._deleteLog.syncSync()},d.prototype.undeletePath=function(b){this._deletedFiles[b]&&(this._deletedFiles[b]=!1,b=new k("u"+b),this._deleteLog.writeSync(b,0,b.length,null),this._deleteLog.syncSync())},d.prototype.renameSync=function(a,d){var e=this,
k=this.statSync(a,!1);if(k.isDirectory()){if(a===d)return;k=511;if(this.existsSync(d)){var f=this.statSync(d,!1),k=f.mode;if(!f.isDirectory())throw new b(h.ENOTDIR,"Path "+d+" is a file.");if(0<this.readdirSync(d).length)throw new b(h.ENOTEMPTY,"Path "+d+" not empty.");}this._writable.existsSync(a)?this._writable.renameSync(a,d):this._writable.existsSync(d)||this._writable.mkdirSync(d,k);this._readable.existsSync(a)&&this._readable.readdirSync(a).forEach(function(b){e.renameSync(c.resolve(a,b),c.resolve(d,
b))})}else{if(this.existsSync(d)&&this.statSync(d,!1).isDirectory())throw new b(h.EISDIR,"Path "+d+" is a directory.");this.writeFileSync(d,this.readFileSync(a,null,p.FileFlag.getFileFlag("r")),null,p.FileFlag.getFileFlag("w"),k.mode)}a!==d&&this.existsSync(a)&&this.unlinkSync(a)},d.prototype.statSync=function(a,c){try{return this._writable.statSync(a,c)}catch(d){if(this._deletedFiles[a])throw new b(h.ENOENT,"Path "+a+" does not exist.");var e=this._readable.statSync(a,c).clone();return e.mode|=146,
e}},d.prototype.openSync=function(a,c,d){if(this.existsSync(a))switch(c.pathExistsAction()){case p.ActionType.TRUNCATE_FILE:return this.createParentDirectories(a),this._writable.openSync(a,c,d);case p.ActionType.NOP:if(this._writable.existsSync(a))return this._writable.openSync(a,c,d);var e=this._readable.statSync(a,!1).clone();return e.mode=d,new z(this,a,c,e,this._readable.readFileSync(a,null,p.FileFlag.getFileFlag("r")));default:throw new b(h.EEXIST,"Path "+a+" exists.");}else switch(c.pathNotExistsAction()){case p.ActionType.CREATE_FILE:return this.createParentDirectories(a),
this._writable.openSync(a,c,d);default:throw new b(h.ENOENT,"Path "+a+" does not exist.");}},d.prototype.unlinkSync=function(a){if(!this.existsSync(a))throw new b(h.ENOENT,"Path "+a+" does not exist.");this._writable.existsSync(a)&&this._writable.unlinkSync(a);this.existsSync(a)&&this.deletePath(a)},d.prototype.rmdirSync=function(a){if(!this.existsSync(a))throw new b(h.ENOENT,"Path "+a+" does not exist.");if(this._writable.existsSync(a)&&this._writable.rmdirSync(a),this.existsSync(a)){if(0<this.readdirSync(a).length)throw new b(h.ENOTEMPTY,
"Directory "+a+" is not empty.");this.deletePath(a)}},d.prototype.mkdirSync=function(a,c){if(this.existsSync(a))throw new b(h.EEXIST,"Path "+a+" already exists.");this.createParentDirectories(a);this._writable.mkdirSync(a,c)},d.prototype.readdirSync=function(a){var c=this;if(!this.statSync(a,!1).isDirectory())throw new b(h.ENOTDIR,"Path "+a+" is not a directory.");var d=[];try{d=d.concat(this._writable.readdirSync(a))}catch(e){}try{d=d.concat(this._readable.readdirSync(a))}catch(e){}var k={};return d.filter(function(b){var d=
void 0===k[b]&&!0!==c._deletedFiles[a+"/"+b];return k[b]=!0,d})},d.prototype.existsSync=function(b){return this._writable.existsSync(b)||this._readable.existsSync(b)&&!0!==this._deletedFiles[b]},d.prototype.chmodSync=function(b,a,c){var d=this;this.operateOnWritable(b,function(){d._writable.chmodSync(b,a,c)})},d.prototype.chownSync=function(b,a,c,d){var e=this;this.operateOnWritable(b,function(){e._writable.chownSync(b,a,c,d)})},d.prototype.utimesSync=function(b,a,c){var d=this;this.operateOnWritable(b,
function(){d._writable.utimesSync(b,a,c)})},d.prototype.operateOnWritable=function(a,c){if(!this.existsSync(a))throw new b(h.ENOENT,"Path "+a+" does not exist.");this._writable.existsSync(a)||this.copyToWritable(a);c()},d.prototype.copyToWritable=function(b){var a=this.statSync(b,!1);a.isDirectory()?this._writable.mkdirSync(b,a.mode):this.writeFileSync(b,this._readable.readFileSync(b,null,p.FileFlag.getFileFlag("r")),null,p.FileFlag.getFileFlag("w"),this.statSync(b,!1).mode)},d}(f.SynchronousFileSystem);
l.registerFileSystem("OverlayFS",g);q.exports=g},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,"../core/node_path":28,"../generic/preload_file":36}],12:[function(g,q,l){function n(b){return{type:f.ERROR,errorData:b.writeToBuffer().toArrayBuffer()}}var f,e=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file_system");
var d=g("../core/buffer"),p=g("../core/api_error"),a=g("../core/file_flag"),c=g("../core/file"),b=g("../core/node_fs_stats"),k=g("../generic/preload_file"),h=g("../core/browserfs"),z=d.Buffer;!function(b){b[b.CB=0]="CB";b[b.FD=1]="FD";b[b.ERROR=2]="ERROR";b[b.STATS=3]="STATS";b[b.PROBE=4]="PROBE";b[b.FILEFLAG=5]="FILEFLAG";b[b.BUFFER=6]="BUFFER"}(f||(f={}));var M=function(){function b(){this._callbacks={};this._nextId=0}return b.prototype.toRemoteArg=function(b){var a=this._nextId++;return this._callbacks[a]=
b,{type:f.CB,id:a}},b.prototype.toLocalArg=function(b){var a=this._callbacks[b];return delete this._callbacks[b],a},b}(),G=function(){function c(){this._fileDescriptors={};this._nextId=0}return c.prototype.toRemoteArg=function(b,a,c,d){var e,h,k=this._nextId++;this._fileDescriptors[k]=b;b.stat(function(m,g){m?d(m):(h=g.toBuffer().toArrayBuffer(),c.isReadable()?b.read(new z(g.size),0,g.size,0,function(b,m,g){b?d(b):(e=g.toArrayBuffer(),d(null,{type:f.FD,id:k,data:e,stat:h,path:a,flag:c.getFlagString()}))}):
d(null,{type:f.FD,id:k,data:new ArrayBuffer(0),stat:h,path:a,flag:c.getFlagString()}))})},c.prototype._applyFdChanges=function(c,d){var e=this._fileDescriptors[c.id],h=new z(c.data),k=b.Stats.fromBuffer(new z(c.stat)),f=a.FileFlag.getFileFlag(c.flag);f.isWriteable()?e.write(h,0,h.length,f.isAppendable()?e.getPos():0,function(b){function a(){e.stat(function(b,a){b?d(b):a.mode!==k.mode?e.chmod(k.mode,function(b){d(b,e)}):d(b,e)})}b?d(b):f.isAppendable()?a():e.truncate(h.length,function(){a()})}):d(null,
e)},c.prototype.applyFdAPIRequest=function(b,a){var c=this,d=b.args[0];this._applyFdChanges(d,function(e,h){e?a(e):h[b.method](function(e){"close"===b.method&&delete c._fileDescriptors[d.id];a(e)})})},c}(),t=function(b){function a(c,d,e,h,k,f){b.call(this,c,d,e,h,f);this._remoteFdId=k}return e(a,b),a.prototype.getRemoteFdId=function(){return this._remoteFdId},a.prototype.toRemoteArg=function(){return{type:f.FD,id:this._remoteFdId,data:this.getBuffer().toArrayBuffer(),stat:this.getStats().toBuffer().toArrayBuffer(),
path:this.getPath(),flag:this.getFlag().getFlagString()}},a.prototype._syncClose=function(b,a){var c=this;this.isDirty()?this._fs.syncClose(b,this,function(b){b||c.resetDirty();a(b)}):a()},a.prototype.sync=function(b){this._syncClose("sync",b)},a.prototype.close=function(b){this._syncClose("close",b)},a}(k.PreloadFile);g=function(d){function k(b){var a=this;d.call(this);this._callbackConverter=new M;this._supportProps=this._supportLinks=this._isReadOnly=this._isInitialized=!1;this._outstandingRequests=
{};this._worker=b;this._worker.addEventListener("message",function(b){if(null!=b.data&&"object"==typeof b.data&&b.data.hasOwnProperty("browserfsMessage")&&b.data.browserfsMessage){var c=b.data,d=c.args,e=Array(d.length);for(b=0;b<e.length;b++)e[b]=a._argRemote2Local(d[b]);a._callbackConverter.toLocalArg(c.cbId).apply(null,e)}})}return e(k,d),k.isAvailable=function(){return"undefined"!=typeof Worker},k.prototype.getName=function(){return"WorkerFS"},k.prototype._argRemote2Local=function(c){if(null==
c)return c;switch(typeof c){case "object":if(null==c.type||"number"!=typeof c.type)return c;switch(c.type){case f.ERROR:return p.ApiError.fromBuffer(new z(c.errorData));case f.FD:return new t(this,c.path,a.FileFlag.getFileFlag(c.flag),b.Stats.fromBuffer(new z(c.stat)),c.id,new z(c.data));case f.STATS:return b.Stats.fromBuffer(new z(c.statsData));case f.FILEFLAG:return a.FileFlag.getFileFlag(c.flagStr);case f.BUFFER:return new z(c.data);default:return c}default:return c}},k.prototype._argLocal2Remote=
function(c){if(null==c)return c;switch(typeof c){case "object":return c instanceof b.Stats?{type:f.STATS,statsData:c.toBuffer().toArrayBuffer()}:c instanceof p.ApiError?n(c):c instanceof t?c.toRemoteArg():c instanceof a.FileFlag?{type:f.FILEFLAG,flagStr:c.getFlagString()}:c instanceof z?{type:f.BUFFER,data:c.toArrayBuffer()}:c;case "function":return this._callbackConverter.toRemoteArg(c);default:return c}},k.prototype.initialize=function(b){var a=this;if(this._isInitialized)b();else{var c={browserfsMessage:!0,
method:"probe",args:[this._callbackConverter.toRemoteArg(function(c){a._isInitialized=!0;a._isReadOnly=c.isReadOnly;a._supportLinks=c.supportsLinks;a._supportProps=c.supportsProps;b()})]};this._worker.postMessage(c)}},k.prototype.isReadOnly=function(){return this._isReadOnly},k.prototype.supportsSynch=function(){return!1},k.prototype.supportsLinks=function(){return this._supportLinks},k.prototype.supportsProps=function(){return this._supportProps},k.prototype._rpc=function(b,a){var c,d={browserfsMessage:!0,
method:b,args:null},e=Array(a.length);for(c=0;c<a.length;c++)e[c]=this._argLocal2Remote(a[c]);d.args=e;this._worker.postMessage(d)},k.prototype.rename=function(b,a,c){this._rpc("rename",arguments)},k.prototype.stat=function(b,a,c){this._rpc("stat",arguments)},k.prototype.open=function(b,a,c,d){this._rpc("open",arguments)},k.prototype.unlink=function(b,a){this._rpc("unlink",arguments)},k.prototype.rmdir=function(b,a){this._rpc("rmdir",arguments)},k.prototype.mkdir=function(b,a,c){this._rpc("mkdir",
arguments)},k.prototype.readdir=function(b,a){this._rpc("readdir",arguments)},k.prototype.exists=function(b,a){this._rpc("exists",arguments)},k.prototype.realpath=function(b,a,c){this._rpc("realpath",arguments)},k.prototype.truncate=function(b,a,c){this._rpc("truncate",arguments)},k.prototype.readFile=function(b,a,c,d){this._rpc("readFile",arguments)},k.prototype.writeFile=function(b,a,c,d,e,h){this._rpc("writeFile",arguments)},k.prototype.appendFile=function(b,a,c,d,e,h){this._rpc("appendFile",arguments)},
k.prototype.chmod=function(b,a,c,d){this._rpc("chmod",arguments)},k.prototype.chown=function(b,a,c,d,e){this._rpc("chown",arguments)},k.prototype.utimes=function(b,a,c,d){this._rpc("utimes",arguments)},k.prototype.link=function(b,a,c){this._rpc("link",arguments)},k.prototype.symlink=function(b,a,c,d){this._rpc("symlink",arguments)},k.prototype.readlink=function(b,a){this._rpc("readlink",arguments)},k.prototype.syncClose=function(b,a,c){this._worker.postMessage({browserfsMessage:!0,method:b,args:[a.toRemoteArg(),
this._callbackConverter.toRemoteArg(c)]})},k.attachRemoteListener=function(d){function e(d,h,k){switch(typeof d){case "object":d instanceof b.Stats?k(null,{type:f.STATS,statsData:d.toBuffer().toArrayBuffer()}):d instanceof p.ApiError?k(null,n(d)):d instanceof c.BaseFile?k(null,m.toRemoteArg(d,h[0],h[1],k)):d instanceof a.FileFlag?k(null,{type:f.FILEFLAG,flagStr:d.getFlagString()}):d instanceof z?k(null,{type:f.BUFFER,data:d.toArrayBuffer()}):k(null,d);break;default:k(null,d)}}function k(c,h){if(null==
c)return c;switch(typeof c){case "object":if("number"!=typeof c.type)return c;switch(c.type){case f.CB:var m=c.id;return function(){var b,a,c=Array(arguments.length),k=arguments.length;for(b=0;b<arguments.length;b++)!function(b,f){e(f,h,function(e,h){c[b]=h;e?0<k&&(k=-1,a={browserfsMessage:!0,cbId:m,args:[n(e)]},d.postMessage(a)):0===--k&&(a={browserfsMessage:!0,cbId:m,args:c},d.postMessage(a))})}(b,arguments[b]);0===arguments.length&&(a={browserfsMessage:!0,cbId:m,args:c},d.postMessage(a))};case f.ERROR:return p.ApiError.fromBuffer(new z(c.errorData));
case f.STATS:return b.Stats.fromBuffer(new z(c.statsData));case f.FILEFLAG:return a.FileFlag.getFileFlag(c.flagStr);case f.BUFFER:return new z(c.data);default:return c}default:return c}}var m=new G,g=h.BFSRequire("fs");d.addEventListener("message",function(b){if(null!=b.data&&"object"==typeof b.data&&b.data.hasOwnProperty("browserfsMessage")&&b.data.browserfsMessage){var a,c=b.data,e=c.args;b=Array(e.length);switch(c.method){case "close":case "sync":!function(){var b=e[1];m.applyFdAPIRequest(c,function(a){a=
{browserfsMessage:!0,cbId:b.id,args:a?[n(a)]:[]};d.postMessage(a)})}();break;case "probe":!function(){var b=g.getRootFS(),b={browserfsMessage:!0,cbId:e[0].id,args:[{type:f.PROBE,isReadOnly:b.isReadOnly(),supportsLinks:b.supportsLinks(),supportsProps:b.supportsProps()}]};d.postMessage(b)}();break;default:for(a=0;a<e.length;a++)b[a]=k(e[a],b);a=g.getRootFS();a[c.method].apply(a,b)}}})},k}(q.BaseFileSystem);l.WorkerFS=g;h.registerFileSystem("WorkerFS",g)},{"../core/api_error":14,"../core/browserfs":15,
"../core/buffer":16,"../core/file":21,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/preload_file":36}],13:[function(g,q,l){function n(b,a){return new Date((a>>9)+1980,(a>>5&15)-1,31&a,b>>11,b>>5&63,31&b)}function f(b,a,c,d){return 0===d?"":b.toString(a?"utf8":"extended_ascii",c,c+d)}var e=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c},d=g("../core/buffer"),
p=g("../core/api_error"),a=g("../generic/file_index");q=g("../core/browserfs");var c=g("../core/node_fs_stats"),b=g("../core/file_system"),k=g("../core/file_flag"),h=g("../core/buffer_core_arraybuffer"),z=g("../generic/preload_file"),M=g("zlib-inflate").inflateRaw,G=p.ApiError,t=p.ErrorCode,m=k.ActionType;!function(b){b[b.MSDOS=0]="MSDOS";b[b.AMIGA=1]="AMIGA";b[b.OPENVMS=2]="OPENVMS";b[b.UNIX=3]="UNIX";b[b.VM_CMS=4]="VM_CMS";b[b.ATARI_ST=5]="ATARI_ST";b[b.OS2_HPFS=6]="OS2_HPFS";b[b.MAC=7]="MAC";b[b.Z_SYSTEM=
8]="Z_SYSTEM";b[b.CP_M=9]="CP_M";b[b.NTFS=10]="NTFS";b[b.MVS=11]="MVS";b[b.VSE=12]="VSE";b[b.ACORN_RISC=13]="ACORN_RISC";b[b.VFAT=14]="VFAT";b[b.ALT_MVS=15]="ALT_MVS";b[b.BEOS=16]="BEOS";b[b.TANDEM=17]="TANDEM";b[b.OS_400=18]="OS_400";b[b.OSX=19]="OSX"}(l.ExternalFileAttributeType||(l.ExternalFileAttributeType={}));l.ExternalFileAttributeType;!function(b){b[b.STORED=0]="STORED";b[b.SHRUNK=1]="SHRUNK";b[b.REDUCED_1=2]="REDUCED_1";b[b.REDUCED_2=3]="REDUCED_2";b[b.REDUCED_3=4]="REDUCED_3";b[b.REDUCED_4=
5]="REDUCED_4";b[b.IMPLODE=6]="IMPLODE";b[b.DEFLATE=8]="DEFLATE";b[b.DEFLATE64=9]="DEFLATE64";b[b.TERSE_OLD=10]="TERSE_OLD";b[b.BZIP2=12]="BZIP2";b[b.LZMA=14]="LZMA";b[b.TERSE_NEW=18]="TERSE_NEW";b[b.LZ77=19]="LZ77";b[b.WAVPACK=97]="WAVPACK";b[b.PPMD=98]="PPMD"}(l.CompressionMethod||(l.CompressionMethod={}));var E=l.CompressionMethod,B=function(){function b(a){if(this.data=a,67324752!==a.readUInt32LE(0))throw new G(t.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0));
}return b.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},b.prototype.flags=function(){return this.data.readUInt16LE(6)},b.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},b.prototype.lastModFileTime=function(){return n(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},b.prototype.crc32=function(){return this.data.readUInt32LE(14)},b.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},b.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},
b.prototype.fileName=function(){return f(this.data,this.useUTF8(),30,this.fileNameLength())},b.prototype.extraField=function(){var b=30+this.fileNameLength();return this.data.slice(b,b+this.extraFieldLength())},b.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},b.prototype.useUTF8=function(){return 2048===(2048&this.flags())},b}();l.FileHeader=B;var C=function(){function b(a,c,d){this.header=a;this.record=c;this.data=d}return b.prototype.decompress=function(){var b=
this.data,a=this.header.compressionMethod();switch(a){case E.DEFLATE:if(b.getBufferCore()instanceof h.BufferCoreArrayBuffer)return a=b.getBufferCore().getDataView(),b=a.byteOffset+b.getOffset(),b=(new Uint8Array(a.buffer)).subarray(b,b+this.record.compressedSize()),b=M(b,{chunkSize:this.record.uncompressedSize()}),new d.Buffer(new h.BufferCoreArrayBuffer(b.buffer),b.byteOffset,b.byteOffset+b.length);b=b.slice(0,this.record.compressedSize());return new d.Buffer(M(b.toJSON().data,{chunkSize:this.record.uncompressedSize()}));
case E.STORED:return b.sliceCopy(0,this.record.uncompressedSize());default:throw b=E[a],b=b?b:"Unknown: "+a,new G(t.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+b);}},b}();l.FileData=C;g=function(){function b(a){this.data=a}return b.prototype.crc32=function(){return this.data.readUInt32LE(0)},b.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},b.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)},b}();l.DataDescriptor=g;g=function(){function b(a){if(this.data=
a,134630224!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0));}return b.prototype.length=function(){return this.data.readUInt32LE(4)},b.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())},b}();l.ArchiveExtraDataRecord=g;g=function(){function b(a){if(this.data=a,84233040!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0));}return b.prototype.size=
function(){return this.data.readUInt16LE(4)},b.prototype.signatureData=function(){return this.data.slice(6,6+this.size())},b}();l.DigitalSignature=g;var T=function(){function b(a,c){if(this.zipData=a,this.data=c,33639248!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));}return b.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},b.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},
b.prototype.flag=function(){return this.data.readUInt16LE(8)},b.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},b.prototype.lastModFileTime=function(){return n(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},b.prototype.crc32=function(){return this.data.readUInt32LE(16)},b.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},b.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},b.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},
b.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},b.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},b.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},b.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},b.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},b.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},b.prototype.fileName=function(){return f(this.data,
this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},b.prototype.extraField=function(){var b=44+this.fileNameLength();return this.data.slice(b,b+this.extraFieldLength())},b.prototype.fileComment=function(){var b=46+this.fileNameLength()+this.extraFieldLength();return f(this.data,this.useUTF8(),b,this.fileCommentLength())},b.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},b.prototype.isDirectory=function(){var b=this.fileName();
return(16&this.externalAttributes()?!0:!1)||"/"===b.charAt(b.length-1)},b.prototype.isFile=function(){return!this.isDirectory()},b.prototype.useUTF8=function(){return 2048===(2048&this.flag())},b.prototype.isEncrypted=function(){return 1===(1&this.flag())},b.prototype.getData=function(){var b=this.headerRelativeOffset(),a=new B(this.zipData.slice(b));return(new C(a,this,this.zipData.slice(b+a.totalSize()))).decompress()},b.prototype.getStats=function(){return new c.Stats(c.FileType.FILE,this.uncompressedSize(),
365,new Date,this.lastModFileTime())},b}();l.CentralDirectory=T;var H=function(){function b(a){if(this.data=a,101010256!==this.data.readUInt32LE(0))throw new G(t.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0));}return b.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},b.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},b.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},b.prototype.cdTotalEntryCount=
function(){return this.data.readUInt16LE(10)},b.prototype.cdSize=function(){return this.data.readUInt32LE(12)},b.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},b.prototype.cdZipComment=function(){return f(this.data,!0,22,this.data.readUInt16LE(20))},b}();l.EndOfCentralDirectory=H;b=function(b){function c(d,e){void 0===e&&(e="");b.call(this);this.data=d;this.name=e;this._index=new a.FileIndex;this.populateIndex()}return e(c,b),c.prototype.getName=function(){return"ZipFS"+(""!==this.name?
" "+this.name:"")},c.isAvailable=function(){return!0},c.prototype.diskSpace=function(b,a){a(this.data.length,0)},c.prototype.isReadOnly=function(){return!0},c.prototype.supportsLinks=function(){return!1},c.prototype.supportsProps=function(){return!1},c.prototype.supportsSynch=function(){return!0},c.prototype.statSync=function(b,a){var c=this._index.getInode(b);if(null===c)throw new G(t.ENOENT,""+b+" not found.");return c.isFile()?c.getData().getStats():c.getStats()},c.prototype.openSync=function(b,
a,c){if(a.isWriteable())throw new G(t.EPERM,b);c=this._index.getInode(b);if(null===c)throw new G(t.ENOENT,""+b+" is not in the FileIndex.");if(c.isDir())throw new G(t.EISDIR,""+b+" is a directory.");c=c.getData();var d=c.getStats();switch(a.pathExistsAction()){case m.THROW_EXCEPTION:case m.TRUNCATE_FILE:throw new G(t.EEXIST,""+b+" already exists.");case m.NOP:return new z.NoSyncFile(this,b,a,d,c.getData());default:throw new G(t.EINVAL,"Invalid FileMode object.");}},c.prototype.readdirSync=function(b){var a=
this._index.getInode(b);if(null===a)throw new G(t.ENOENT,""+b+" not found.");if(a.isFile())throw new G(t.ENOTDIR,""+b+" is a file, not a directory.");return a.getListing()},c.prototype.readFileSync=function(b,a,c){b=this.openSync(b,c,420);try{var e=b.getBuffer();return null===a?0<e.length?e.sliceCopy():new d.Buffer(0):e.toString(a)}finally{b.closeSync()}},c.prototype.getEOCD=function(){for(var b=Math.min(65557,this.data.length-1),a=22;b>a;a++)if(101010256===this.data.readUInt32LE(this.data.length-
a))return new H(this.data.slice(this.data.length-a));throw new G(t.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.");},c.prototype.populateIndex=function(){var b=this.getEOCD();if(b.diskNumber()!==b.cdDiskNumber())throw new G(t.EINVAL,"ZipFS does not support spanned zip files.");var c=b.cdOffset();if(4294967295===c)throw new G(t.EINVAL,"ZipFS does not support Zip64.");for(b=c+b.cdSize();b>c;){var d=new T(this.data,this.data.slice(c)),c=c+d.totalSize(),e=d.fileName();
if("/"===e.charAt(0))throw Error("WHY IS THIS ABSOLUTE");"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));d.isDirectory()?this._index.addPath("/"+e,new a.DirInode):this._index.addPath("/"+e,new a.FileInode(d))}},c}(b.SynchronousFileSystem);l.ZipFS=b;q.registerFileSystem("ZipFS",b)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/file_index":33,"../generic/preload_file":36,
"zlib-inflate":2}],14:[function(g,q,l){var n=g("./buffer").Buffer;!function(d){d[d.EPERM=0]="EPERM";d[d.ENOENT=1]="ENOENT";d[d.EIO=2]="EIO";d[d.EBADF=3]="EBADF";d[d.EACCES=4]="EACCES";d[d.EBUSY=5]="EBUSY";d[d.EEXIST=6]="EEXIST";d[d.ENOTDIR=7]="ENOTDIR";d[d.EISDIR=8]="EISDIR";d[d.EINVAL=9]="EINVAL";d[d.EFBIG=10]="EFBIG";d[d.ENOSPC=11]="ENOSPC";d[d.EROFS=12]="EROFS";d[d.ENOTEMPTY=13]="ENOTEMPTY";d[d.ENOTSUP=14]="ENOTSUP"}(l.ErrorCode||(l.ErrorCode={}));var f=l.ErrorCode,e={};e[f.EPERM]="Operation not permitted.";
e[f.ENOENT]="No such file or directory.";e[f.EIO]="Input/output error.";e[f.EBADF]="Bad file descriptor.";e[f.EACCES]="Permission denied.";e[f.EBUSY]="Resource busy or locked.";e[f.EEXIST]="File exists.";e[f.ENOTDIR]="File is not a directory.";e[f.EISDIR]="File is a directory.";e[f.EINVAL]="Invalid argument.";e[f.EFBIG]="File is too big.";e[f.ENOSPC]="No space left on disk.";e[f.EROFS]="Cannot modify a read-only file system.";e[f.ENOTEMPTY]="Directory is not empty.";e[f.ENOTSUP]="Operation is not supported.";
g=function(){function d(d,a){this.type=d;this.code=f[d];null!=a?this.message=a:this.message=e[d]}return d.prototype.toString=function(){return this.code+": "+e[this.type]+" "+this.message},d.prototype.writeToBuffer=function(d,a){void 0===d&&(d=new n(this.bufferSize()));void 0===a&&(a=0);d.writeUInt8(this.type,a);var c=d.write(this.message,a+5);return d.writeUInt32LE(c,a+1),d},d.fromBuffer=function(e,a){return void 0===a&&(a=0),new d(e.readUInt8(a),e.toString("utf8",a+5,a+5+e.readUInt32LE(a+1)))},
d.prototype.bufferSize=function(){return 5+n.byteLength(this.message)},d.FileError=function(f,a){return new d(f,a+": "+e[f])},d.ENOENT=function(d){return this.FileError(f.ENOENT,d)},d.EEXIST=function(d){return this.FileError(f.EEXIST,d)},d.EISDIR=function(d){return this.FileError(f.EISDIR,d)},d.ENOTDIR=function(d){return this.FileError(f.ENOTDIR,d)},d.EPERM=function(d){return this.FileError(f.EPERM,d)},d}();l.ApiError=g},{"./buffer":16}],15:[function(g,q,l){function n(a){switch(a){case "fs":return e;
case "path":return d;case "buffer":return f;case "process":return p.process;default:return l.FileSystem[a]}}var f=g("./buffer"),e=g("./node_fs"),d=g("./node_path"),p=g("./node_process");l.install=function(a){a.Buffer=f.Buffer;a.process=p.process;var c=null!=a.require?a.require:null;a.require=function(b){var a=n(b);return null==a?c.apply(null,Array.prototype.slice.call(arguments,0)):a}};l.FileSystem={};l.registerFileSystem=function(a,c){l.FileSystem[a]=c};l.BFSRequire=n;l.initialize=function(a){return e._initialize(a)}},
{"./buffer":16,"./node_fs":26,"./node_path":28,"./node_process":29}],16:[function(g,q,l){var n=g("./buffer_core");q=g("./buffer_core_array");var f=g("./buffer_core_arraybuffer"),e=g("./buffer_core_imagedata"),d=g("./string_util"),p=[f.BufferCoreArrayBuffer,e.BufferCoreImageData,q.BufferCoreArray],a=function(){var a,b;for(a=0;a<p.length;a++)if(b=p[a],b.isAvailable())return b;throw Error("This browser does not support any available BufferCore implementations.");}();g=function(){function c(b,d,e){void 0===
d&&(d="utf8");this.offset=0;if(!(this instanceof c))return new c(b,d);if(b instanceof n.BufferCoreCommon)this.data=b,b="number"==typeof d?d:0,e="number"==typeof e?e:this.data.getLength(),this.offset=b,this.length=e-b;else if("number"==typeof b){if(b!==b>>>0)throw new TypeError("Buffer size must be a uint32.");this.length=b;this.data=new a(b)}else if("undefined"!=typeof DataView&&b instanceof DataView)this.data=new f.BufferCoreArrayBuffer(b),this.length=b.byteLength;else if("undefined"!=typeof ArrayBuffer&&
"number"==typeof b.byteLength)this.data=new f.BufferCoreArrayBuffer(b),this.length=b.byteLength;else if(b instanceof c)this.data=new a(b.length),this.length=b.length,b.copy(this);else if(Array.isArray(b)||null!=b&&"object"==typeof b&&"number"==typeof b[0]){this.data=new a(b.length);for(e=0;e<b.length;e++)this.data.writeUInt8(e,b[e]);this.length=b.length}else{if("string"!=typeof b)throw Error("Invalid argument to Buffer constructor: "+b);this.length=c.byteLength(b,d);this.data=new a(this.length);this.write(b,
0,this.length,d)}}return c.prototype.getBufferCore=function(){return this.data},c.prototype.getOffset=function(){return this.offset},c.prototype.set=function(b,a){return 0>a?this.writeInt8(a,b):this.writeUInt8(a,b)},c.prototype.get=function(b){return this.readUInt8(b)},c.prototype.write=function(b,a,e,f){if(void 0===a&&(a=0),void 0===e&&(e=this.length),void 0===f&&(f="utf8"),"string"==typeof a?(f=""+a,a=0,e=this.length):"string"==typeof e&&(f=""+e,e=this.length),a>=this.length)return 0;f=d.FindUtil(f);
return e=e+a>this.length?this.length-a:e,a+=this.offset,f.str2byte(b,0===a&&e===this.length?this:new c(this.data,a,e+a))},c.prototype.toString=function(b,a,e){if(void 0===b&&(b="utf8"),void 0===a&&(a=0),void 0===e&&(e=this.length),!(e>=a))throw Error("Invalid start/end positions: "+a+" - "+e);if(a===e)return"";e>this.length&&(e=this.length);return d.FindUtil(b).byte2str(0===a&&e===this.length?this:new c(this.data,a+this.offset,e+this.offset))},c.prototype.toJSON=function(){for(var b=this.length,a=
Array(b),c=0;b>c;c++)a[c]=this.readUInt8(c);return{type:"Buffer",data:a}},c.prototype.toArrayBuffer=function(){var b=this.getBufferCore();if(b instanceof f.BufferCoreArrayBuffer){var a=b.getDataView(),b=a.buffer;return 0===a.byteOffset&&a.byteLength===b.byteLength?b:b.slice(a.byteOffset,a.byteLength)}b=new ArrayBuffer(this.length);a=new c(b);return this.copy(a,0,0,this.length),b},c.prototype.copy=function(b,a,c,d){if(void 0===a&&(a=0),void 0===c&&(c=0),void 0===d&&(d=this.length),a=0>a?0:a,c=0>c?
0:c,c>d)throw new RangeError("sourceEnd < sourceStart");if(d===c)return 0;if(a>=b.length)throw new RangeError("targetStart out of bounds");if(c>=this.length)throw new RangeError("sourceStart out of bounds");if(d>this.length)throw new RangeError("sourceEnd out of bounds");var e=Math.min(d-c,b.length-a,this.length-c);for(d=0;e-3>d;d+=4)b.writeInt32LE(this.readInt32LE(c+d),a+d);for(d=4294967292&e;e>d;d++)b.writeUInt8(this.readUInt8(c+d),a+d);return e},c.prototype.slice=function(b,a){if(void 0===b&&(b=
0),void 0===a&&(a=this.length),0>b&&(b+=this.length,0>b&&(b=0)),0>a&&(a+=this.length,0>a&&(a=0)),a>this.length&&(a=this.length),b>a&&(b=a),0>b||0>a||b>=this.length||a>this.length)throw Error("Invalid slice indices.");return new c(this.data,b+this.offset,a+this.offset)},c.prototype.sliceCopy=function(b,a){if(void 0===b&&(b=0),void 0===a&&(a=this.length),0>b&&(b+=this.length,0>b&&(b=0)),0>a&&(a+=this.length,0>a&&(a=0)),a>this.length&&(a=this.length),b>a&&(b=a),0>b||0>a||b>=this.length||a>this.length)throw Error("Invalid slice indices.");
return new c(this.data.copy(b+this.offset,a+this.offset))},c.prototype.fill=function(b,a,c){void 0===a&&(a=0);void 0===c&&(c=this.length);switch(typeof b){case "string":b=255&b.charCodeAt(0);break;case "number":break;default:throw Error("Invalid argument to fill.");}a+=this.offset;c+=this.offset;this.data.fill(b,a,c)},c.prototype.readUInt8=function(b,a){return b+=this.offset,this.data.readUInt8(b)},c.prototype.readUInt16LE=function(b,a){return b+=this.offset,this.data.readUInt16LE(b)},c.prototype.readUInt16BE=
function(b,a){return b+=this.offset,this.data.readUInt16BE(b)},c.prototype.readUInt32LE=function(b,a){return b+=this.offset,this.data.readUInt32LE(b)},c.prototype.readUInt32BE=function(b,a){return b+=this.offset,this.data.readUInt32BE(b)},c.prototype.readInt8=function(b,a){return b+=this.offset,this.data.readInt8(b)},c.prototype.readInt16LE=function(b,a){return b+=this.offset,this.data.readInt16LE(b)},c.prototype.readInt16BE=function(b,a){return b+=this.offset,this.data.readInt16BE(b)},c.prototype.readInt32LE=
function(b,a){return b+=this.offset,this.data.readInt32LE(b)},c.prototype.readInt32BE=function(b,a){return b+=this.offset,this.data.readInt32BE(b)},c.prototype.readFloatLE=function(b,a){return b+=this.offset,this.data.readFloatLE(b)},c.prototype.readFloatBE=function(b,a){return b+=this.offset,this.data.readFloatBE(b)},c.prototype.readDoubleLE=function(b,a){return b+=this.offset,this.data.readDoubleLE(b)},c.prototype.readDoubleBE=function(b,a){return b+=this.offset,this.data.readDoubleBE(b)},c.prototype.writeUInt8=
function(b,a,c){a+=this.offset;this.data.writeUInt8(a,b)},c.prototype.writeUInt16LE=function(b,a,c){a+=this.offset;this.data.writeUInt16LE(a,b)},c.prototype.writeUInt16BE=function(b,a,c){a+=this.offset;this.data.writeUInt16BE(a,b)},c.prototype.writeUInt32LE=function(b,a,c){a+=this.offset;this.data.writeUInt32LE(a,b)},c.prototype.writeUInt32BE=function(b,a,c){a+=this.offset;this.data.writeUInt32BE(a,b)},c.prototype.writeInt8=function(b,a,c){a+=this.offset;this.data.writeInt8(a,b)},c.prototype.writeInt16LE=
function(b,a,c){a+=this.offset;this.data.writeInt16LE(a,b)},c.prototype.writeInt16BE=function(b,a,c){a+=this.offset;this.data.writeInt16BE(a,b)},c.prototype.writeInt32LE=function(b,a,c){a+=this.offset;this.data.writeInt32LE(a,b)},c.prototype.writeInt32BE=function(b,a,c){a+=this.offset;this.data.writeInt32BE(a,b)},c.prototype.writeFloatLE=function(b,a,c){a+=this.offset;this.data.writeFloatLE(a,b)},c.prototype.writeFloatBE=function(b,a,c){a+=this.offset;this.data.writeFloatBE(a,b)},c.prototype.writeDoubleLE=
function(b,a,c){a+=this.offset;this.data.writeDoubleLE(a,b)},c.prototype.writeDoubleBE=function(b,a,c){a+=this.offset;this.data.writeDoubleBE(a,b)},c.isEncoding=function(b){try{d.FindUtil(b)}catch(a){return!1}return!0},c.isBuffer=function(b){return b instanceof c},c.byteLength=function(b,a){void 0===a&&(a="utf8");return d.FindUtil(a).byteLength(b)},c.concat=function(b,a){var d;if(0===b.length||0===a)return new c(0);if(1===b.length)return b[0];if(null==a)for(var e=a=0;e<b.length;e++)d=b[e],a+=d.length;
for(var e=new c(a),f=0,g=0;g<b.length;g++)d=b[g],f+=d.copy(e,f);return e},c}();l.Buffer=g},{"./buffer_core":17,"./buffer_core_array":18,"./buffer_core_arraybuffer":19,"./buffer_core_imagedata":20,"./string_util":30}],17:[function(g,q,l){var n=Math.pow(2,128),f=-1*n;g=function(){function e(){}return e.prototype.getLength=function(){throw Error("BufferCore implementations should implement getLength.");},e.prototype.writeInt8=function(d,e){this.writeUInt8(d,255&e|(2147483648&e)>>>24)},e.prototype.writeInt16LE=
function(d,e){this.writeUInt8(d,255&e);this.writeUInt8(d+1,e>>>8&255|(2147483648&e)>>>24)},e.prototype.writeInt16BE=function(d,e){this.writeUInt8(d+1,255&e);this.writeUInt8(d,e>>>8&255|(2147483648&e)>>>24)},e.prototype.writeInt32LE=function(d,e){this.writeUInt8(d,255&e);this.writeUInt8(d+1,e>>>8&255);this.writeUInt8(d+2,e>>>16&255);this.writeUInt8(d+3,e>>>24&255)},e.prototype.writeInt32BE=function(d,e){this.writeUInt8(d+3,255&e);this.writeUInt8(d+2,e>>>8&255);this.writeUInt8(d+1,e>>>16&255);this.writeUInt8(d,
e>>>24&255)},e.prototype.writeUInt8=function(d,e){throw Error("BufferCore implementations should implement writeUInt8.");},e.prototype.writeUInt16LE=function(d,e){this.writeUInt8(d,255&e);this.writeUInt8(d+1,e>>8&255)},e.prototype.writeUInt16BE=function(d,e){this.writeUInt8(d+1,255&e);this.writeUInt8(d,e>>8&255)},e.prototype.writeUInt32LE=function(d,e){this.writeInt32LE(d,0|e)},e.prototype.writeUInt32BE=function(d,e){this.writeInt32BE(d,0|e)},e.prototype.writeFloatLE=function(d,e){this.writeInt32LE(d,
this.float2intbits(e))},e.prototype.writeFloatBE=function(d,e){this.writeInt32BE(d,this.float2intbits(e))},e.prototype.writeDoubleLE=function(d,e){var a=this.double2longbits(e);this.writeInt32LE(d,a[0]);this.writeInt32LE(d+4,a[1])},e.prototype.writeDoubleBE=function(d,e){var a=this.double2longbits(e);this.writeInt32BE(d+4,a[0]);this.writeInt32BE(d,a[1])},e.prototype.readInt8=function(d){d=this.readUInt8(d);return 128&d?4294967168|d:d},e.prototype.readInt16LE=function(d){d=this.readUInt16LE(d);return 32768&
d?4294934528|d:d},e.prototype.readInt16BE=function(d){d=this.readUInt16BE(d);return 32768&d?4294934528|d:d},e.prototype.readInt32LE=function(d){return 0|this.readUInt32LE(d)},e.prototype.readInt32BE=function(d){return 0|this.readUInt32BE(d)},e.prototype.readUInt8=function(d){throw Error("BufferCore implementations should implement readUInt8.");},e.prototype.readUInt16LE=function(d){return this.readUInt8(d+1)<<8|this.readUInt8(d)},e.prototype.readUInt16BE=function(d){return this.readUInt8(d)<<8|this.readUInt8(d+
1)},e.prototype.readUInt32LE=function(d){return(this.readUInt8(d+3)<<24|this.readUInt8(d+2)<<16|this.readUInt8(d+1)<<8|this.readUInt8(d))>>>0},e.prototype.readUInt32BE=function(d){return(this.readUInt8(d)<<24|this.readUInt8(d+1)<<16|this.readUInt8(d+2)<<8|this.readUInt8(d+3))>>>0},e.prototype.readFloatLE=function(d){return this.intbits2float(this.readInt32LE(d))},e.prototype.readFloatBE=function(d){return this.intbits2float(this.readInt32BE(d))},e.prototype.readDoubleLE=function(d){return this.longbits2double(this.readInt32LE(d+
4),this.readInt32LE(d))},e.prototype.readDoubleBE=function(d){return this.longbits2double(this.readInt32BE(d),this.readInt32BE(d+4))},e.prototype.copy=function(d,e){throw Error("BufferCore implementations should implement copy.");},e.prototype.fill=function(d,e,a){for(;a>e;e++)this.writeUInt8(e,d)},e.prototype.float2intbits=function(d){var e,a,c;return 0===d?0:d===Number.POSITIVE_INFINITY?2139095040:d===Number.NEGATIVE_INFINITY?-8388608:isNaN(d)?2143289344:(c=0>d?1:0,d=Math.abs(d),1.1754942106924411E-38>=
d&&1.401298464324817E-45<=d?(e=0,a=Math.round(d/Math.pow(2,-126)*Math.pow(2,23)),c<<31|e<<23|a):(e=Math.floor(Math.log(d)/Math.LN2),a=Math.round((d/Math.pow(2,e)-1)*Math.pow(2,23)),c<<31|e+127<<23|a))},e.prototype.double2longbits=function(d){var e,a,c,b;return 0===d?[0,0]:d===Number.POSITIVE_INFINITY?[0,2146435072]:d===Number.NEGATIVE_INFINITY?[0,-1048576]:isNaN(d)?[0,2146959360]:(b=0>d?-2147483648:0,d=Math.abs(d),2.225073858507201E-308>=d&&4.9E-324<=d?(e=0,c=d/Math.pow(2,-1022)*Math.pow(2,52)):(e=
Math.floor(Math.log(d)/Math.LN2),d<Math.pow(2,e)&&--e,c=(d/Math.pow(2,e)-1)*Math.pow(2,52),e=e+1023<<20),a=c*Math.pow(2,-32)|0|b|e,[65535&c,a])},e.prototype.intbits2float=function(d){if(2139095040===d)return Number.POSITIVE_INFINITY;if(-8388608===d)return Number.NEGATIVE_INFINITY;var e,a=(2147483648&d)>>>31,c=(2139095040&d)>>>23;d&=8388607;return e=0===c?Math.pow(-1,a)*d*Math.pow(2,-149):Math.pow(-1,a)*(1+d*Math.pow(2,-23))*Math.pow(2,c-127),(f>e||e>n)&&(e=NaN),e},e.prototype.longbits2double=function(d,
e){var a=(2147483648&d)>>>31,c=(2146435072&d)>>>20,b=(1048575&d)*Math.pow(2,32)+e;return 0===c&&0===b?0:2047===c?0===b?1===a?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:NaN:0===c?Math.pow(-1,a)*b*Math.pow(2,-1074):Math.pow(-1,a)*(1+b*Math.pow(2,-52))*Math.pow(2,c-1023)},e}();l.BufferCoreCommon=g},{}],18:[function(g,q,l){var n=this.__extends||function(e,d){function f(){this.constructor=e}for(var a in d)d.hasOwnProperty(a)&&(e[a]=d[a]);f.prototype=d.prototype;e.prototype=new f},f=[4294967040,
4294902015,4278255615,16777215];g=function(e){function d(d){e.call(this);this.length=d;this.buff=Array(Math.ceil(d/4));d=this.buff.length;for(var a=0;d>a;a++)this.buff[a]=0}return n(d,e),d.isAvailable=function(){return!0},d.prototype.getLength=function(){return this.length},d.prototype.writeUInt8=function(d,a){var c=d>>2,b=3&d;this.buff[c]&=f[b];this.buff[c]|=(a&255)<<(b<<3)},d.prototype.readUInt8=function(d){return this.buff[d>>2]>>((3&d)<<3)&255},d.prototype.copy=function(e,a){for(var c=new d(a-
e),b=e;a>b;b++)c.writeUInt8(b-e,this.readUInt8(b));return c},d}(g("./buffer_core").BufferCoreCommon);l.BufferCoreArray=g},{"./buffer_core":17}],19:[function(g,q,l){var n=this.__extends||function(f,e){function d(){this.constructor=f}for(var g in e)e.hasOwnProperty(g)&&(f[g]=e[g]);d.prototype=e.prototype;f.prototype=new d};g=function(f){function e(d){f.call(this);"number"==typeof d?this.buff=new DataView(new ArrayBuffer(d)):d instanceof DataView?this.buff=d:this.buff=new DataView(d);this.length=this.buff.byteLength}
return n(e,f),e.isAvailable=function(){return"undefined"!=typeof DataView},e.prototype.getLength=function(){return this.length},e.prototype.writeInt8=function(d,e){this.buff.setInt8(d,e)},e.prototype.writeInt16LE=function(d,e){this.buff.setInt16(d,e,!0)},e.prototype.writeInt16BE=function(d,e){this.buff.setInt16(d,e,!1)},e.prototype.writeInt32LE=function(d,e){this.buff.setInt32(d,e,!0)},e.prototype.writeInt32BE=function(d,e){this.buff.setInt32(d,e,!1)},e.prototype.writeUInt8=function(d,e){this.buff.setUint8(d,
e)},e.prototype.writeUInt16LE=function(d,e){this.buff.setUint16(d,e,!0)},e.prototype.writeUInt16BE=function(d,e){this.buff.setUint16(d,e,!1)},e.prototype.writeUInt32LE=function(d,e){this.buff.setUint32(d,e,!0)},e.prototype.writeUInt32BE=function(d,e){this.buff.setUint32(d,e,!1)},e.prototype.writeFloatLE=function(d,e){this.buff.setFloat32(d,e,!0)},e.prototype.writeFloatBE=function(d,e){this.buff.setFloat32(d,e,!1)},e.prototype.writeDoubleLE=function(d,e){this.buff.setFloat64(d,e,!0)},e.prototype.writeDoubleBE=
function(d,e){this.buff.setFloat64(d,e,!1)},e.prototype.readInt8=function(d){return this.buff.getInt8(d)},e.prototype.readInt16LE=function(d){return this.buff.getInt16(d,!0)},e.prototype.readInt16BE=function(d){return this.buff.getInt16(d,!1)},e.prototype.readInt32LE=function(d){return this.buff.getInt32(d,!0)},e.prototype.readInt32BE=function(d){return this.buff.getInt32(d,!1)},e.prototype.readUInt8=function(d){return this.buff.getUint8(d)},e.prototype.readUInt16LE=function(d){return this.buff.getUint16(d,
!0)},e.prototype.readUInt16BE=function(d){return this.buff.getUint16(d,!1)},e.prototype.readUInt32LE=function(d){return this.buff.getUint32(d,!0)},e.prototype.readUInt32BE=function(d){return this.buff.getUint32(d,!1)},e.prototype.readFloatLE=function(d){return this.buff.getFloat32(d,!0)},e.prototype.readFloatBE=function(d){return this.buff.getFloat32(d,!1)},e.prototype.readDoubleLE=function(d){return this.buff.getFloat64(d,!0)},e.prototype.readDoubleBE=function(d){return this.buff.getFloat64(d,!1)},
e.prototype.copy=function(d,f){var a,c=this.buff.buffer;if(ArrayBuffer.prototype.slice)a=c.slice(d,f);else{a=new ArrayBuffer(f-d);var b=new Uint8Array(a),c=new Uint8Array(c);b.set(c.subarray(d,f))}return new e(a)},e.prototype.fill=function(d,e,a){d&=255;var c=a-e,b=4*(c/4|0),k=d<<24|d<<16|d<<8|d;for(a=0;b>a;a+=4)this.writeInt32LE(a+e,k);for(a=b;c>a;a++)this.writeUInt8(a+e,d)},e.prototype.getDataView=function(){return this.buff},e}(g("./buffer_core").BufferCoreCommon);l.BufferCoreArrayBuffer=g},{"./buffer_core":17}],
20:[function(g,q,l){var n=this.__extends||function(f,e){function d(){this.constructor=f}for(var g in e)e.hasOwnProperty(g)&&(f[g]=e[g]);d.prototype=e.prototype;f.prototype=new d};g=function(f){function e(d){f.call(this);this.length=d;this.buff=e.getCanvasPixelArray(d)}return n(e,f),e.getCanvasPixelArray=function(d){var f=e.imageDataFactory;return void 0===f&&(e.imageDataFactory=f=document.createElement("canvas").getContext("2d")),0===d&&(d=1),f.createImageData(Math.ceil(d/4),1).data},e.isAvailable=
function(){return"undefined"!=typeof CanvasPixelArray},e.prototype.getLength=function(){return this.length},e.prototype.writeUInt8=function(d,e){this.buff[d]=e},e.prototype.readUInt8=function(d){return this.buff[d]},e.prototype.copy=function(d,f){for(var a=new e(f-d),c=d;f>c;c++)a.writeUInt8(c-d,this.buff[c]);return a},e}(g("./buffer_core").BufferCoreCommon);l.BufferCoreImageData=g},{"./buffer_core":17}],21:[function(g,q,l){g=g("./api_error");var n=g.ApiError,f=g.ErrorCode;g=function(){function e(){}
return e.prototype.sync=function(d){d(new n(f.ENOTSUP))},e.prototype.syncSync=function(){throw new n(f.ENOTSUP);},e.prototype.datasync=function(d){this.sync(d)},e.prototype.datasyncSync=function(){return this.syncSync()},e.prototype.chown=function(d,e,a){a(new n(f.ENOTSUP))},e.prototype.chownSync=function(d,e){throw new n(f.ENOTSUP);},e.prototype.chmod=function(d,e){e(new n(f.ENOTSUP))},e.prototype.chmodSync=function(d){throw new n(f.ENOTSUP);},e.prototype.utimes=function(d,e,a){a(new n(f.ENOTSUP))},
e.prototype.utimesSync=function(d,e){throw new n(f.ENOTSUP);},e}();l.BaseFile=g},{"./api_error":14}],22:[function(g,q,l){var n=g("./api_error");!function(e){e[e.NOP=0]="NOP";e[e.THROW_EXCEPTION=1]="THROW_EXCEPTION";e[e.TRUNCATE_FILE=2]="TRUNCATE_FILE";e[e.CREATE_FILE=3]="CREATE_FILE"}(l.ActionType||(l.ActionType={}));var f=l.ActionType;g=function(){function e(d){if(this.flagStr=d,0>e.validFlagStrs.indexOf(d))throw new n.ApiError(n.ErrorCode.EINVAL,"Invalid flag: "+d);}return e.getFileFlag=function(d){return e.flagCache.hasOwnProperty(d)?
e.flagCache[d]:e.flagCache[d]=new e(d)},e.prototype.getFlagString=function(){return this.flagStr},e.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},e.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},e.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},e.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},e.prototype.isSynchronous=
function(){return-1!==this.flagStr.indexOf("s")},e.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},e.prototype.pathExistsAction=function(){return this.isExclusive()?f.THROW_EXCEPTION:this.isTruncating()?f.TRUNCATE_FILE:f.NOP},e.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?f.CREATE_FILE:f.THROW_EXCEPTION},e.flagCache={},e.validFlagStrs="r r+ rs rs+ w wx w+ wx+ a ax a+ ax+".split(" "),e}();l.FileFlag=g},{"./api_error":14}],
23:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("./api_error");var f=g("./file_flag"),e=g("./node_path");g=g("./buffer");var d=q.ApiError,p=q.ErrorCode,a=g.Buffer,c=f.ActionType;g=function(){function b(){}return b.prototype.supportsLinks=function(){return!1},b.prototype.diskSpace=function(b,a){a(0,0)},b.prototype.openFile=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.createFile=
function(b,a,c,e){throw new d(p.ENOTSUP);},b.prototype.open=function(b,a,f,g){var l=this;this.stat(b,!1,function(t,m){if(t)switch(a.pathNotExistsAction()){case c.CREATE_FILE:return l.stat(e.dirname(b),!1,function(c,m){c?g(c):m.isDirectory()?l.createFile(b,a,f,g):g(new d(p.ENOTDIR,e.dirname(b)+" is not a directory."))});case c.THROW_EXCEPTION:return g(new d(p.ENOENT,""+b+" doesn't exist."));default:return g(new d(p.EINVAL,"Invalid FileFlag object."))}else{if(m.isDirectory())return g(new d(p.EISDIR,
b+" is a directory."));switch(a.pathExistsAction()){case c.THROW_EXCEPTION:return g(new d(p.EEXIST,b+" already exists."));case c.TRUNCATE_FILE:return l.openFile(b,a,function(b,a){b?g(b):a.truncate(0,function(){a.sync(function(){g(null,a)})})});case c.NOP:return l.openFile(b,a,g);default:return g(new d(p.EINVAL,"Invalid FileFlag object."))}}})},b.prototype.rename=function(b,a,c){c(new d(p.ENOTSUP))},b.prototype.renameSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.stat=function(b,a,c){c(new d(p.ENOTSUP))},
b.prototype.statSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.openFileSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.createFileSync=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.openSync=function(b,a,f){var g;try{g=this.statSync(b,!1)}catch(l){switch(a.pathNotExistsAction()){case c.CREATE_FILE:if(!this.statSync(e.dirname(b),!1).isDirectory())throw new d(p.ENOTDIR,e.dirname(b)+" is not a directory.");return this.createFileSync(b,a,f);case c.THROW_EXCEPTION:throw new d(p.ENOENT,
""+b+" doesn't exist.");default:throw new d(p.EINVAL,"Invalid FileFlag object.");}}if(g.isDirectory())throw new d(p.EISDIR,b+" is a directory.");switch(a.pathExistsAction()){case c.THROW_EXCEPTION:throw new d(p.EEXIST,b+" already exists.");case c.TRUNCATE_FILE:return this.unlinkSync(b),this.createFileSync(b,a,g.mode);case c.NOP:return this.openFileSync(b,a);default:throw new d(p.EINVAL,"Invalid FileFlag object.");}},b.prototype.unlink=function(b,a){a(new d(p.ENOTSUP))},b.prototype.unlinkSync=function(b){throw new d(p.ENOTSUP);
},b.prototype.rmdir=function(b,a){a(new d(p.ENOTSUP))},b.prototype.rmdirSync=function(b){throw new d(p.ENOTSUP);},b.prototype.mkdir=function(b,a,c){c(new d(p.ENOTSUP))},b.prototype.mkdirSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.readdir=function(b,a){a(new d(p.ENOTSUP))},b.prototype.readdirSync=function(b){throw new d(p.ENOTSUP);},b.prototype.exists=function(b,a){this.stat(b,null,function(b){a(null==b)})},b.prototype.existsSync=function(b){try{return this.statSync(b,!0),!0}catch(a){return!1}},
b.prototype.realpath=function(b,a,c){if(this.supportsLinks()){a=b.split(e.sep);for(var f=0;f<a.length;f++){var g=a.slice(0,f+1);a[f]=e.join.apply(null,g)}}else this.exists(b,function(a){a?c(null,b):c(new d(p.ENOENT,"File "+b+" not found."))})},b.prototype.realpathSync=function(b,a){if(!this.supportsLinks()){if(this.existsSync(b))return b;throw new d(p.ENOENT,"File "+b+" not found.");}for(var c=b.split(e.sep),f=0;f<c.length;f++){var g=c.slice(0,f+1);c[f]=e.join.apply(null,g)}},b.prototype.truncate=
function(b,a,c){this.open(b,f.FileFlag.getFileFlag("r+"),420,function(b,d){return b?c(b):void d.truncate(a,function(b){d.close(function(a){c(b||a)})})})},b.prototype.truncateSync=function(b,a){var c=this.openSync(b,f.FileFlag.getFileFlag("r+"),420);try{c.truncateSync(a)}catch(d){throw d;}finally{c.closeSync()}},b.prototype.readFile=function(b,c,d,e){var f=e;this.open(b,d,420,function(b,d){return b?e(b):(e=function(b,a){d.close(function(c){return null==b&&(b=c),f(b,a)})},void d.stat(function(b,f){if(null!=
b)return e(b);var k=new a(f.size);d.read(k,0,f.size,0,function(b){if(null!=b)return e(b);if(null===c)return e(b,k);try{e(null,k.toString(c))}catch(a){e(a)}})}))})},b.prototype.readFileSync=function(b,c,d){b=this.openSync(b,d,420);try{var e=b.statSync(),f=new a(e.size);return b.readSync(f,0,e.size,0),b.closeSync(),null===c?f:f.toString(c)}finally{b.closeSync()}},b.prototype.writeFile=function(b,c,d,e,f,g){var m=g;this.open(b,e,420,function(b,e){if(null!=b)return g(b);g=function(b){e.close(function(a){m(null!=
b?b:a)})};try{"string"==typeof c&&(c=new a(c,d))}catch(f){return g(f)}e.write(c,0,c.length,0,g)})},b.prototype.writeFileSync=function(b,c,d,e,f){b=this.openSync(b,e,f);try{"string"==typeof c&&(c=new a(c,d)),b.writeSync(c,0,c.length,0)}finally{b.closeSync()}},b.prototype.appendFile=function(b,c,d,e,f,g){var m=g;this.open(b,e,f,function(b,e){return null!=b?g(b):(g=function(b){e.close(function(a){m(null!=b?b:a)})},"string"==typeof c&&(c=new a(c,d)),void e.write(c,0,c.length,null,g))})},b.prototype.appendFileSync=
function(b,c,d,e,f){b=this.openSync(b,e,f);try{"string"==typeof c&&(c=new a(c,d)),b.writeSync(c,0,c.length,null)}finally{b.closeSync()}},b.prototype.chmod=function(b,a,c,e){e(new d(p.ENOTSUP))},b.prototype.chmodSync=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.chown=function(b,a,c,e,f){f(new d(p.ENOTSUP))},b.prototype.chownSync=function(b,a,c,e){throw new d(p.ENOTSUP);},b.prototype.utimes=function(b,a,c,e){e(new d(p.ENOTSUP))},b.prototype.utimesSync=function(b,a,c){throw new d(p.ENOTSUP);
},b.prototype.link=function(b,a,c){c(new d(p.ENOTSUP))},b.prototype.linkSync=function(b,a){throw new d(p.ENOTSUP);},b.prototype.symlink=function(b,a,c,e){e(new d(p.ENOTSUP))},b.prototype.symlinkSync=function(b,a,c){throw new d(p.ENOTSUP);},b.prototype.readlink=function(b,a){a(new d(p.ENOTSUP))},b.prototype.readlinkSync=function(b){throw new d(p.ENOTSUP);},b}();l.BaseFileSystem=g;g=function(b){function a(){b.apply(this,arguments)}return n(a,b),a.prototype.supportsSynch=function(){return!0},a.prototype.rename=
function(b,a,c){try{this.renameSync(b,a),c()}catch(d){c(d)}},a.prototype.stat=function(b,a,c){try{c(null,this.statSync(b,a))}catch(d){c(d)}},a.prototype.open=function(b,a,c,d){try{d(null,this.openSync(b,a,c))}catch(e){d(e)}},a.prototype.unlink=function(b,a){try{this.unlinkSync(b),a()}catch(c){a(c)}},a.prototype.rmdir=function(b,a){try{this.rmdirSync(b),a()}catch(c){a(c)}},a.prototype.mkdir=function(b,a,c){try{this.mkdirSync(b,a),c()}catch(d){c(d)}},a.prototype.readdir=function(b,a){try{a(null,this.readdirSync(b))}catch(c){a(c)}},
a.prototype.chmod=function(b,a,c,d){try{this.chmodSync(b,a,c),d()}catch(e){d(e)}},a.prototype.chown=function(b,a,c,d,e){try{this.chownSync(b,a,c,d),e()}catch(f){e(f)}},a.prototype.utimes=function(b,a,c,d){try{this.utimesSync(b,a,c),d()}catch(e){d(e)}},a.prototype.link=function(b,a,c){try{this.linkSync(b,a),c()}catch(d){c(d)}},a.prototype.symlink=function(b,a,c,d){try{this.symlinkSync(b,a,c),d()}catch(e){d(e)}},a.prototype.readlink=function(b,a){try{a(null,this.readlinkSync(b))}catch(c){a(c)}},a}(g);
l.SynchronousFileSystem=g},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],24:[function(g,q,l){q.exports="undefined"!=typeof window?window:"undefined"!=typeof self?self:global},{}],25:[function(g,q,l){var n=this.__extends||function(a,c){function b(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);b.prototype=c.prototype;a.prototype=new b};q=g("./buffer");g=g("./api_error");var f=q.Buffer,e=g.ApiError,d=g.ErrorCode,p=function(){function a(a,b,d){this.data=a;this.encoding=
b;this.cb=d;this.size="string"!=typeof a?a.length:f.byteLength(a,null!=b?b:void 0);"string"!=typeof this.data&&(this.data=this.data.sliceCopy())}return a.prototype.getData=function(a){return null==a?"string"==typeof this.data?new f(this.data,null!=this.encoding?this.encoding:void 0):this.data:"string"==typeof this.data?a===this.encoding?this.data:(new f(this.data,null!=this.encoding?this.encoding:void 0)).toString(a):this.data.toString(a)},a}();g=function(){function a(){this._listeners={};this.maxListeners=
10}return a.prototype.addListener=function(a,b){return"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(b)>this.maxListeners&&process.stdout.write("Warning: Event "+a+" has more than "+this.maxListeners+" listeners.\n"),this.emit("newListener",a,b),this},a.prototype.on=function(a,b){return this.addListener(a,b)},a.prototype.once=function(a,b){var d=!1,e=function(){this.removeListener(a,e);d||(d=!0,b.apply(this,arguments))};return this.addListener(a,e)},a.prototype._emitRemoveListener=
function(a,b){var d;if(this._listeners.removeListener&&0<this._listeners.removeListener.length)for(d=0;d<b.length;d++)this.emit("removeListener",a,b[d])},a.prototype.removeListener=function(a,b){var d=this._listeners[a];if("undefined"!=typeof d){var e=d.indexOf(b);-1<e&&d.splice(e,1)}return this.emit("removeListener",a,b),this},a.prototype.removeAllListeners=function(a){var b;if("undefined"!=typeof a)b=this._listeners[a],this._listeners[a]=[],this._emitRemoveListener(a,b);else for(a=Object.keys(this._listeners),
b=0;b<a.length;b++)this.removeAllListeners(a[b]);return this},a.prototype.setMaxListeners=function(a){this.maxListeners=a},a.prototype.listeners=function(a){return"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].slice(0)},a.prototype.emit=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var d=this._listeners[a],e=!1;if("undefined"!=typeof d){var f;for(f=0;f<d.length;f++)e=!0,d[f].apply(this,b)}return e},a}();l.AbstractEventEmitter=g;g=function(a){function c(b,
c){a.call(this);this.writable=b;this.readable=c;this.encoding=null;this.flowing=!1;this.buffer=[];this.endEvent=null;this.ended=!1;this.drained=!0}return n(c,a),c.prototype.addListener=function(b,c){var d=a.prototype.addListener.call(this,b,c),e=this;return"data"!==b||this.flowing?"readable"===b&&0<this.buffer.length&&setTimeout(function(){e.emit("readable")},0):this.resume(),d},c.prototype._processArgs=function(b,a,c){return"string"==typeof a?new p(b,a,c):new p(b,null,a)},c.prototype._processEvents=
function(){this.drained!==(0===this.buffer.length)&&this.drained&&this.emit("readable");this.flowing&&0!==this.buffer.length&&this.emit("data",this.read());this.drained=0===this.buffer.length},c.prototype.emitEvent=function(b,a){this.emit(b,a.getData(this.encoding));a.cb&&a.cb()},c.prototype.write=function(b,a,c){if(this.ended)throw new e(d.EPERM,"Cannot write to an ended stream.");b=this._processArgs(b,a,c);return this._push(b),this.flowing},c.prototype.end=function(b,a,c){if(this.ended)throw new e(d.EPERM,
"Stream is already closed.");b=this._processArgs(b,a,c);this.ended=!0;this.endEvent=b;this._processEvents()},c.prototype.read=function(b){var a,c,d,e=[],g=[],l=0;d=0;var m="number"!=typeof b;m&&(b=4294967295);for(d=0;d<this.buffer.length&&b>l;d++)a=this.buffer[d],e.push(a.getData()),a.cb&&g.push(a.cb),l+=a.size,a=a.cb;if(!m&&b>l)return null;if(this.buffer=this.buffer.slice(e.length),d=l>b?b:l,c=f.concat(e),l>b&&(a&&g.pop(),this._push(new p(c.slice(b),null,a))),0<g.length&&setTimeout(function(){var b;
for(b=0;b<g.length;b++)g[b]()},0),this.ended&&0===this.buffer.length&&null!==this.endEvent){var n=this.endEvent,B=this;this.endEvent=null;setTimeout(function(){B.emitEvent("end",n)},0)}return 0===e.length?(this.emit("_read"),null):null===this.encoding?c.slice(0,d):c.toString(this.encoding,0,d)},c.prototype.setEncoding=function(b){this.encoding=b},c.prototype.pause=function(){this.flowing=!1},c.prototype.resume=function(){this.flowing=!0;this._processEvents()},c.prototype.pipe=function(b,a){throw new e(d.EPERM,
"Unimplemented.");},c.prototype.unpipe=function(b){},c.prototype.unshift=function(b){if(this.ended)throw new e(d.EPERM,"Stream has ended.");this.buffer.unshift(new p(b,this.encoding));this._processEvents()},c.prototype._push=function(b){this.buffer.push(b);this._processEvents()},c.prototype.wrap=function(b){throw new e(d.EPERM,"Unimplemented.");},c}(g);l.AbstractDuplexStream=g},{"./api_error":14,"./buffer":16}],26:[function(g,q,l){function n(b,a){if("function"!=typeof b)throw new h(z.EINVAL,"Callback must be a function.");
switch("undefined"==typeof __numWaiting&&(__numWaiting=0),__numWaiting++,a){case 1:return function(a){setImmediate(function(){return __numWaiting--,b(a)})};case 2:return function(a,c){setImmediate(function(){return __numWaiting--,b(a,c)})};case 3:return function(a,c,d){setImmediate(function(){return __numWaiting--,b(a,c,d)})};default:throw Error("Invalid invocation of wrapCb.");}}function f(b){if("function"!=typeof b.write)throw new h(z.EBADF,"Invalid file descriptor.");}function e(b,a){switch(typeof b){case "number":return b;
case "string":var c=parseInt(b,8);if(NaN!==c)return c;default:return a}}function d(b){if(0<=b.indexOf("\x00"))throw new h(z.EINVAL,"Path must be a string without null bytes.");if(""===b)throw new h(z.EINVAL,"Path must not be empty.");return k.resolve(b)}function p(b,a,c,d){switch(typeof b){case "object":return{encoding:"undefined"!=typeof b.encoding?b.encoding:a,flag:"undefined"!=typeof b.flag?b.flag:c,mode:e(b.mode,d)};case "string":return{encoding:b,flag:c,mode:d};default:return{encoding:a,flag:c,
mode:d}}}function a(){}l=g("./api_error");var c=g("./file_flag"),b=g("./buffer"),k=g("./node_path"),h=l.ApiError,z=l.ErrorCode,M=c.FileFlag,G=b.Buffer;g=function(){function b(){}return b._initialize=function(a){if(!a.constructor.isAvailable())throw new h(z.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return b.root=a},b._toUnixTimestamp=function(b){if("number"==typeof b)return b;if(b instanceof Date)return b.getTime()/1E3;throw Error("Cannot parse time: "+b);},b.getRootFS=
function(){return b.root?b.root:null},b.rename=function(c,e,h){void 0===h&&(h=a);h=n(h,1);try{b.root.rename(d(c),d(e),h)}catch(f){h(f)}},b.renameSync=function(a,c){b.root.renameSync(d(a),d(c))},b.exists=function(c,e){void 0===e&&(e=a);var h=n(e,1);try{return b.root.exists(d(c),h)}catch(f){return h(!1)}},b.existsSync=function(a){try{return b.root.existsSync(d(a))}catch(c){return!1}},b.stat=function(c,e){void 0===e&&(e=a);var h=n(e,2);try{return b.root.stat(d(c),!1,h)}catch(f){return h(f,null)}},b.statSync=
function(a){return b.root.statSync(d(a),!1)},b.lstat=function(c,e){void 0===e&&(e=a);var h=n(e,2);try{return b.root.stat(d(c),!0,h)}catch(f){return h(f,null)}},b.lstatSync=function(a){return b.root.statSync(d(a),!0)},b.truncate=function(c,e,f){void 0===e&&(e=0);void 0===f&&(f=a);var k=0;"function"==typeof e?f=e:"number"==typeof e&&(k=e);e=n(f,1);try{if(0>k)throw new h(z.EINVAL);return b.root.truncate(d(c),k,e)}catch(g){return e(g)}},b.truncateSync=function(a,c){if(void 0===c&&(c=0),0>c)throw new h(z.EINVAL);
return b.root.truncateSync(d(a),c)},b.unlink=function(c,e){void 0===e&&(e=a);var h=n(e,1);try{return b.root.unlink(d(c),h)}catch(f){return h(f)}},b.unlinkSync=function(a){return b.root.unlinkSync(d(a))},b.open=function(c,h,f,k){void 0===k&&(k=a);var g=e(f,420);f=n("function"==typeof f?f:k,2);try{return b.root.open(d(c),M.getFileFlag(h),g,f)}catch(l){return f(l,null)}},b.openSync=function(a,c,e){return void 0===e&&(e=420),b.root.openSync(d(a),M.getFileFlag(c),e)},b.readFile=function(c,e,f){void 0===
e&&(e={});void 0===f&&(f=a);var k=p(e,null,"r",null);e=n("function"==typeof e?e:f,2);try{var g=M.getFileFlag(k.flag);return g.isReadable()?b.root.readFile(d(c),k.encoding,g,e):e(new h(z.EINVAL,"Flag passed to readFile must allow for reading."))}catch(l){return e(l,null)}},b.readFileSync=function(a,c){void 0===c&&(c={});var e=p(c,null,"r",null),f=M.getFileFlag(e.flag);if(!f.isReadable())throw new h(z.EINVAL,"Flag passed to readFile must allow for reading.");return b.root.readFileSync(d(a),e.encoding,
f)},b.writeFile=function(c,e,f,k){void 0===f&&(f={});void 0===k&&(k=a);var g=p(f,"utf8","w",420);f=n("function"==typeof f?f:k,1);try{var l=M.getFileFlag(g.flag);return l.isWriteable()?b.root.writeFile(d(c),e,g.encoding,l,g.mode,f):f(new h(z.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(q){return f(q)}},b.writeFileSync=function(a,c,e){e=p(e,"utf8","w",420);var f=M.getFileFlag(e.flag);if(!f.isWriteable())throw new h(z.EINVAL,"Flag passed to writeFile must allow for writing.");return b.root.writeFileSync(d(a),
c,e.encoding,f,e.mode)},b.appendFile=function(c,e,f,k){void 0===k&&(k=a);var g=p(f,"utf8","a",420);f=n("function"==typeof f?f:k,1);try{var l=M.getFileFlag(g.flag);if(!l.isAppendable())return f(new h(z.EINVAL,"Flag passed to appendFile must allow for appending."));b.root.appendFile(d(c),e,g.encoding,l,g.mode,f)}catch(q){f(q)}},b.appendFileSync=function(a,c,e){e=p(e,"utf8","a",420);var f=M.getFileFlag(e.flag);if(!f.isAppendable())throw new h(z.EINVAL,"Flag passed to appendFile must allow for appending.");
return b.root.appendFileSync(d(a),c,e.encoding,f,e.mode)},b.fstat=function(b,c){void 0===c&&(c=a);var d=n(c,2);try{f(b),b.stat(d)}catch(e){d(e)}},b.fstatSync=function(b){return f(b),b.statSync()},b.close=function(b,c){void 0===c&&(c=a);var d=n(c,1);try{f(b),b.close(d)}catch(e){d(e)}},b.closeSync=function(b){return f(b),b.closeSync()},b.ftruncate=function(b,c,d){void 0===d&&(d=a);var e="number"==typeof c?c:0;c=n("function"==typeof c?c:d,1);try{if(f(b),0>e)throw new h(z.EINVAL);b.truncate(e,c)}catch(k){c(k)}},
b.ftruncateSync=function(b,a){return void 0===a&&(a=0),f(b),b.truncateSync(a)},b.fsync=function(b,c){void 0===c&&(c=a);var d=n(c,1);try{f(b),b.sync(d)}catch(e){d(e)}},b.fsyncSync=function(b){return f(b),b.syncSync()},b.fdatasync=function(b,c){void 0===c&&(c=a);var d=n(c,1);try{f(b),b.datasync(d)}catch(e){d(e)}},b.fdatasyncSync=function(b){f(b);b.datasyncSync()},b.write=function(b,c,d,e,k,g){void 0===g&&(g=a);var l=null;if("string"==typeof c){var y="utf8";switch(typeof d){case "function":g=d;break;
case "number":l=d;y="string"==typeof e?e:"utf8";g="function"==typeof k?k:g;break;default:return("function"==typeof e?e:"function"==typeof k?k:g)(new h(z.EINVAL,"Invalid arguments."))}c=new G(c,y);d=0;e=c.length}else l="number"==typeof k?k:null,g="function"==typeof k?k:g;k=n(g,3);try{f(b),null==l&&(l=b.getPos()),b.write(c,d,e,l,k)}catch(p){k(p)}},b.writeSync=function(b,a,c,d,e){var h=0;"string"==typeof a?(e="number"==typeof c?c:null,h=0,a=new G(a,"string"==typeof d?d:"utf8"),d=a.length):(h=c,e="number"==
typeof e?e:null);return f(b),null==e&&(e=b.getPos()),b.writeSync(a,h,d,e)},b.read=function(b,c,d,e,h,k){void 0===k&&(k=a);var g,y;"number"==typeof c?(k="function"==typeof h?h:k,g=0,y=new G(c),h=n(function(b,a,c){return b?k(b):void k(b,c.toString(e),a)},3)):(y=c,g=d,c=e,d=h,h=n(k,3));try{f(b),null==d&&(d=b.getPos()),b.read(y,g,c,d,h)}catch(l){h(l)}},b.readSync=function(b,a,c,d,e){var h,k=!1;if("number"==typeof a){h=a;e=c;var g=d;c=0;a=new G(h);k=!0}else h=d;f(b);null==e&&(e=b.getPos());b=b.readSync(a,
c,h,e);return k?[a.toString(g),b]:b},b.fchown=function(b,c,d,e){void 0===e&&(e=a);e=n(e,1);try{f(b),b.chown(c,d,e)}catch(h){e(h)}},b.fchownSync=function(b,a,c){return f(b),b.chownSync(a,c)},b.fchmod=function(b,c,d){void 0===d&&(d=a);d=n(d,1);try{c="string"==typeof c?parseInt(c,8):c,f(b),b.chmod(c,d)}catch(e){d(e)}},b.fchmodSync=function(b,a){return a="string"==typeof a?parseInt(a,8):a,f(b),b.chmodSync(a)},b.futimes=function(b,c,d,e){void 0===e&&(e=a);e=n(e,1);try{f(b),"number"==typeof c&&(c=new Date(1E3*
c)),"number"==typeof d&&(d=new Date(1E3*d)),b.utimes(c,d,e)}catch(h){e(h)}},b.futimesSync=function(b,a,c){return f(b),"number"==typeof a&&(a=new Date(1E3*a)),"number"==typeof c&&(c=new Date(1E3*c)),b.utimesSync(a,c)},b.rmdir=function(c,e){void 0===e&&(e=a);var h=n(e,1);try{c=d(c),b.root.rmdir(c,h)}catch(f){h(f)}},b.rmdirSync=function(a){return a=d(a),b.root.rmdirSync(a)},b.mkdir=function(c,e,h){void 0===h&&(h=a);"function"==typeof e&&(h=e,e=511);h=n(h,1);try{c=d(c),b.root.mkdir(c,e,h)}catch(f){h(f)}},
b.mkdirSync=function(a,c){return void 0===c&&(c=511),c="string"==typeof c?parseInt(c,8):c,a=d(a),b.root.mkdirSync(a,c)},b.readdir=function(c,e){void 0===e&&(e=a);var h=n(e,2);try{c=d(c),b.root.readdir(c,h)}catch(f){h(f)}},b.readdirSync=function(a){return a=d(a),b.root.readdirSync(a)},b.link=function(c,e,h){void 0===h&&(h=a);h=n(h,1);try{c=d(c),e=d(e),b.root.link(c,e,h)}catch(f){h(f)}},b.linkSync=function(a,c){return a=d(a),c=d(c),b.root.linkSync(a,c)},b.symlink=function(c,e,f,k){void 0===k&&(k=a);
var g="string"==typeof f?f:"file";f=n("function"==typeof f?f:k,1);try{if("file"!==g&&"dir"!==g)return f(new h(z.EINVAL,"Invalid type: "+g));c=d(c);e=d(e);b.root.symlink(c,e,g,f)}catch(l){f(l)}},b.symlinkSync=function(a,c,e){if(null==e)e="file";else if("file"!==e&&"dir"!==e)throw new h(z.EINVAL,"Invalid type: "+e);return a=d(a),c=d(c),b.root.symlinkSync(a,c,e)},b.readlink=function(c,e){void 0===e&&(e=a);var h=n(e,2);try{c=d(c),b.root.readlink(c,h)}catch(f){h(f)}},b.readlinkSync=function(a){return a=
d(a),b.root.readlinkSync(a)},b.chown=function(c,e,h,f){void 0===f&&(f=a);f=n(f,1);try{c=d(c),b.root.chown(c,!1,e,h,f)}catch(k){f(k)}},b.chownSync=function(a,c,e){a=d(a);b.root.chownSync(a,!1,c,e)},b.lchown=function(c,e,h,f){void 0===f&&(f=a);f=n(f,1);try{c=d(c),b.root.chown(c,!0,e,h,f)}catch(k){f(k)}},b.lchownSync=function(a,c,e){return a=d(a),b.root.chownSync(a,!0,c,e)},b.chmod=function(c,e,h){void 0===h&&(h=a);h=n(h,1);try{e="string"==typeof e?parseInt(e,8):e,c=d(c),b.root.chmod(c,!1,e,h)}catch(f){h(f)}},
b.chmodSync=function(a,c){return c="string"==typeof c?parseInt(c,8):c,a=d(a),b.root.chmodSync(a,!1,c)},b.lchmod=function(c,e,h){void 0===h&&(h=a);h=n(h,1);try{e="string"==typeof e?parseInt(e,8):e,c=d(c),b.root.chmod(c,!0,e,h)}catch(f){h(f)}},b.lchmodSync=function(a,c){return a=d(a),c="string"==typeof c?parseInt(c,8):c,b.root.chmodSync(a,!0,c)},b.utimes=function(c,e,h,f){void 0===f&&(f=a);f=n(f,1);try{c=d(c),"number"==typeof e&&(e=new Date(1E3*e)),"number"==typeof h&&(h=new Date(1E3*h)),b.root.utimes(c,
e,h,f)}catch(k){f(k)}},b.utimesSync=function(a,c,e){return a=d(a),"number"==typeof c&&(c=new Date(1E3*c)),"number"==typeof e&&(e=new Date(1E3*e)),b.root.utimesSync(a,c,e)},b.realpath=function(c,e,h){var f="object"==typeof e?e:{};h="function"==typeof e?e:a;e=n(h,2);try{c=d(c),b.root.realpath(c,f,e)}catch(k){e(k)}},b.realpathSync=function(a,c){return void 0===c&&(c={}),a=d(a),b.root.realpathSync(a,c)},b.root=null,b}();q.exports=g},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],
27:[function(g,q,l){var n=g("./buffer").Buffer;!function(e){e[e.FILE=32768]="FILE";e[e.DIRECTORY=16384]="DIRECTORY";e[e.SYMLINK=40960]="SYMLINK"}(l.FileType||(l.FileType={}));var f=l.FileType;g=function(){function e(d,e,a,c,b,k){if(void 0===c&&(c=new Date),void 0===b&&(b=new Date),void 0===k&&(k=new Date),this.size=e,this.mode=a,this.atime=c,this.mtime=b,this.ctime=k,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,null==this.mode)switch(d){case f.FILE:this.mode=
420;break;default:this.mode=511}this.blocks=Math.ceil(e/512);4096>this.mode&&(this.mode|=d)}return e.prototype.toBuffer=function(){var d=new n(32);return d.writeUInt32LE(this.size,0),d.writeUInt32LE(this.mode,4),d.writeDoubleLE(this.atime.getTime(),8),d.writeDoubleLE(this.mtime.getTime(),16),d.writeDoubleLE(this.ctime.getTime(),24),d},e.fromBuffer=function(d){var f=d.readUInt32LE(0),a=d.readUInt32LE(4),c=d.readDoubleLE(8),b=d.readDoubleLE(16);d=d.readDoubleLE(24);return new e(61440&a,f,4095&a,new Date(c),
new Date(b),new Date(d))},e.prototype.clone=function(){return new e(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},e.prototype.isFile=function(){return(61440&this.mode)===f.FILE},e.prototype.isDirectory=function(){return(61440&this.mode)===f.DIRECTORY},e.prototype.isSymbolicLink=function(){return(61440&this.mode)===f.SYMLINK},e.prototype.chmod=function(d){this.mode=61440&this.mode|d},e.prototype.isSocket=function(){return!1},e.prototype.isBlockDevice=function(){return!1},
e.prototype.isCharacterDevice=function(){return!1},e.prototype.isFIFO=function(){return!1},e}();l.Stats=g},{"./buffer":16}],28:[function(g,q,l){var n=g("./node_process").process;g=function(){function f(){}return f.normalize=function(e){""===e&&(e=".");var d=e.charAt(0)===f.sep;e=f._removeDuplicateSeps(e);for(var g=e.split(f.sep),a=[],c=0;c<g.length;c++){var b=g[c];"."!==b&&(".."===b&&(d||!d&&0<a.length&&".."!==a[0])?a.pop():a.push(b))}if(!d&&2>a.length)switch(a.length){case 1:""===a[0]&&a.unshift(".");
break;default:a.push(".")}return e=a.join(f.sep),d&&e.charAt(0)!==f.sep&&(e=f.sep+e),e},f.join=function(){for(var e=[],d=0;d<arguments.length;d++)e[d-0]=arguments[d];for(var d=[],g=0;g<e.length;g++){var a=e[g];if("string"!=typeof a)throw new TypeError("Invalid argument type to path.join: "+typeof a);""!==a&&d.push(a)}return f.normalize(d.join(f.sep))},f.resolve=function(){for(var e=[],d=0;d<arguments.length;d++)e[d-0]=arguments[d];for(var d=[],g=0;g<e.length;g++){var a=e[g];if("string"!=typeof a)throw new TypeError("Invalid argument type to path.join: "+
typeof a);""!==a&&(a.charAt(0)===f.sep&&(d=[]),d.push(a))}e=f.normalize(d.join(f.sep));if(1<e.length&&e.charAt(e.length-1)===f.sep)return e.substr(0,e.length-1);e.charAt(0)!==f.sep&&("."!==e.charAt(0)||1!==e.length&&e.charAt(1)!==f.sep||(e=1===e.length?"":e.substr(2)),d=n.cwd(),e=""!==e?this.normalize(d+("/"!==d?f.sep:"")+e):d);return e},f.relative=function(e,d){var g;e=f.resolve(e);d=f.resolve(d);var a=e.split(f.sep),c=d.split(f.sep);c.shift();a.shift();var b=0,k=[];for(g=0;g<a.length;g++)if(a[g]!==
c[g]){b=a.length-g;break}k=c.slice(g);1===a.length&&""===a[0]&&(b=0);b>a.length&&(b=a.length);a="";for(g=0;b>g;g++)a+="../";return a+=k.join(f.sep),1<a.length&&a.charAt(a.length-1)===f.sep&&(a=a.substr(0,a.length-1)),a},f.dirname=function(e){e=f._removeDuplicateSeps(e);var d=e.charAt(0)===f.sep;e=e.split(f.sep);return""===e.pop()&&0<e.length&&e.pop(),1<e.length||1===e.length&&!d?e.join(f.sep):d?f.sep:"."},f.basename=function(e,d){if(void 0===d&&(d=""),""===e)return e;e=f.normalize(e);var g=e.split(f.sep),
a=g[g.length-1];return""===a&&1<g.length?g[g.length-2]:0<d.length&&a.substr(a.length-d.length)===d?a.substr(0,a.length-d.length):a},f.extname=function(e){e=f.normalize(e);var d=e.split(f.sep);if(e=d.pop(),""===e&&0<d.length&&(e=d.pop()),".."===e)return"";d=e.lastIndexOf(".");return-1===d||0===d?"":e.substr(d)},f.isAbsolute=function(e){return 0<e.length&&e.charAt(0)===f.sep},f._makeLong=function(e){return e},f._removeDuplicateSeps=function(e){return e.replace(this._replaceRegex,this.sep)},f.sep="/",
f._replaceRegex=RegExp("//+","g"),f.delimiter=":",f}();q.exports=g},{"./node_process":29}],29:[function(g,q,l){var n=this.__extends||function(d,e){function a(){this.constructor=d}for(var c in e)e.hasOwnProperty(c)&&(d[c]=e[c]);a.prototype=e.prototype;d.prototype=new a},f=null,e=function(d){function e(){d.call(this,!0,!0);this.isRaw=!1;this.columns=80;this.rows=120;this.isTTY=!0}return n(e,d),e.prototype.setReadMode=function(a){this.isRaw!==a&&(this.isRaw=a,this.emit("modeChange"))},e.prototype.changeColumns=
function(a){a!==this.columns&&(this.columns=a,this.emit("resize"))},e.prototype.changeRows=function(a){a!==this.rows&&(this.rows=a,this.emit("resize"))},e.isatty=function(a){return a instanceof e},e}(g("./node_eventemitter").AbstractDuplexStream);l.TTY=e;q=function(){function d(){this.startTime=Date.now();this._cwd="/";this.platform="browser";this.argv=[];this.stdout=new e;this.stderr=new e;this.stdin=new e}return d.prototype.chdir=function(d){null===f&&(f=g("./node_path"));this._cwd=f.resolve(d)},
d.prototype.cwd=function(){return this._cwd},d.prototype.uptime=function(){return(Date.now()-this.startTime)/1E3|0},d}();l.Process=q;l.process=new q},{"./node_eventemitter":25,"./node_path":28}],30:[function(g,q,l){l.FindUtil=function(h){var g;a:switch(typeof h){case "object":g=""+h;break a;case "string":g=h;break a;default:throw Error("Invalid encoding argument specified");}switch(h=g,h=h.toLowerCase()){case "utf8":case "utf-8":return n;case "ascii":return f;case "binary":return d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return a;
case "hex":return c;case "base64":return p;case "binary_string":return b;case "binary_string_ie":return k;case "extended_ascii":return e;default:throw Error("Unknown encoding: "+h);}};var n=function(){function b(){}return b.str2byte=function(b,a){for(var c=0,d=0,e=a.length,h=0;c<b.length&&e>d;){var f=b.charCodeAt(c++),k=b.charCodeAt(c);if(55296<=f&&56319>=f&&56320<=k&&57343>=k){if(d+3>=e)break;h++;f=(1023&f|1024)<<10|1023&k;a.writeUInt8(f>>18|240,d++);a.writeUInt8(f>>12&63|128,d++);a.writeUInt8(f>>
6&63|128,d++);a.writeUInt8(63&f|128,d++);c++}else if(128>f)a.writeUInt8(f,d++),h++;else if(2048>f){if(d+1>=e)break;h++;a.writeUInt8(f>>6|192,d++);a.writeUInt8(63&f|128,d++)}else if(65536>f){if(d+2>=e)break;h++;a.writeUInt8(f>>12|224,d++);a.writeUInt8(f>>6&63|128,d++);a.writeUInt8(63&f|128,d++)}}return d},b.byte2str=function(b){for(var a=[],c=0;c<b.length;){var d=b.readUInt8(c++);if(128>d)a.push(String.fromCharCode(d));else{if(192>d)throw Error("Found incomplete part of character in string.");if(224>
d)a.push(String.fromCharCode((31&d)<<6|63&b.readUInt8(c++)));else if(240>d)a.push(String.fromCharCode((15&d)<<12|(63&b.readUInt8(c++))<<6|63&b.readUInt8(c++)));else{if(!(248>d))throw Error("Unable to represent UTF-8 string as UTF-16 JavaScript string.");var e=b.readUInt8(c+2);a.push(String.fromCharCode(1023&((7&d)<<8|(63&b.readUInt8(c++))<<2|(63&b.readUInt8(c++))>>4)|55296));a.push(String.fromCharCode((15&e)<<6|63&b.readUInt8(c++)|56320))}}}return a.join("")},b.byteLength=function(b){var a=encodeURIComponent(b).match(/%[89ABab]/g);
return b.length+(a?a.length:0)},b}();l.UTF8=n;var f=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,d=0;c>d;d++)a.writeUInt8(b.charCodeAt(d)%256,d);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(127&b.readUInt8(c));return a.join("")},b.byteLength=function(b){return b.length},b}();l.ASCII=f;var e=function(){function b(){}return b.str2byte=function(a,c){for(var d=a.length>c.length?c.length:
a.length,e=0;d>e;e++){var f=a.charCodeAt(e);if(127<f){var k=b.extendedChars.indexOf(a.charAt(e));-1<k&&(f=k+128)}c.writeUInt8(f,e)}return d},b.byte2str=function(a){for(var c=Array(a.length),d=0;d<a.length;d++){var e=a.readUInt8(d);127<e?c[d]=b.extendedChars[e-128]:c[d]=String.fromCharCode(e)}return c.join("")},b.byteLength=function(b){return b.length},b.extendedChars="\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb___\u00a6\u00a6\u00c1\u00c2\u00c0\u00a9\u00a6\u00a6++\u00a2\u00a5++--+-+\u00e3\u00c3++--\u00a6-+\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8i\u00cd\u00ce\u00cf++__\u00a6\u00cc_\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1_\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2_ ".split(""),
b}();l.ExtendedASCII=e;var d=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,d=0;c>d;d++)a.writeUInt8(255&b.charCodeAt(d),d);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(255&b.readUInt8(c));return a.join("")},b.byteLength=function(b){return b.length},b}();l.BINARY=d;var p=function(){function b(){}return b.byte2str=function(a){for(var c="",d=0;d<a.length;){var e=a.readUInt8(d++),f=d<a.length?
a.readUInt8(d++):NaN,k=d<a.length?a.readUInt8(d++):NaN,g=e>>2,e=(3&e)<<4|f>>4,l=(15&f)<<2|k>>6,p=63&k;isNaN(f)?l=p=64:isNaN(k)&&(p=64);c=c+b.num2b64[g]+b.num2b64[e]+b.num2b64[l]+b.num2b64[p]}return c},b.str2byte=function(a,c){var d=c.length,e="",f=0;a=a.replace(/[^A-Za-z0-9\+\/\=\-\_]/g,"");for(var k=0;f<a.length;){var g=b.b642num[a.charAt(f++)],l=b.b642num[a.charAt(f++)],p=b.b642num[a.charAt(f++)],n=b.b642num[a.charAt(f++)],q=(15&l)<<4|p>>2,y=(3&p)<<6|n;if(c.writeUInt8(g<<2|l>>4,k++),k===d)break;
if(64!==p&&(e+=c.writeUInt8(q,k++)),k===d)break;if(64!==n&&(e+=c.writeUInt8(y,k++)),k===d)break}return k},b.byteLength=function(b){return Math.floor(6*b.replace(/[^A-Za-z0-9\+\/\-\_]/g,"").length/8)},b.b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),b.num2b64=function(){for(var a=Array(b.b64chars.length),c=0;c<b.b64chars.length;c++)a[c]=b.b64chars[c];return a}(),b.b642num=function(){for(var a={},c=0;c<b.b64chars.length;c++)a[b.b64chars[c]]=c;return a["-"]=62,
a._=63,a}(),b}();l.BASE64=p;var a=function(){function b(){}return b.str2byte=function(b,a){var c=b.length;2*c>a.length&&(c=1===a.length%2?(a.length-1)/2:a.length/2);for(var d=0;c>d;d++)a.writeUInt16LE(b.charCodeAt(d),2*d);return 2*c},b.byte2str=function(b){if(0!==b.length%2)throw Error("Invalid UCS2 byte array.");for(var a=Array(b.length/2),c=0;c<b.length;c+=2)a[c/2]=String.fromCharCode(b.readUInt8(c)|b.readUInt8(c+1)<<8);return a.join("")},b.byteLength=function(b){return 2*b.length},b}();l.UCS2=
a;var c=function(){function b(){}return b.str2byte=function(b,a){if(1===b.length%2)throw Error("Invalid hex string");var c=b.length>>1;c>a.length&&(c=a.length);for(var d=0;c>d;d++){var e=this.hex2num[b.charAt(d<<1)],f=this.hex2num[b.charAt((d<<1)+1)];a.writeUInt8(e<<4|f,d)}return c},b.byte2str=function(b){for(var a=b.length,c=Array(a<<1),d=0,e=0;a>e;e++){var f=15&b.readUInt8(e),h=b.readUInt8(e)>>4;c[d++]=this.num2hex[h];c[d++]=this.num2hex[f]}return c.join("")},b.byteLength=function(b){return b.length>>
1},b.HEXCHARS="0123456789abcdef",b.num2hex=function(){for(var a=Array(b.HEXCHARS.length),c=0;c<b.HEXCHARS.length;c++)a[c]=b.HEXCHARS[c];return a}(),b.hex2num=function(){var a,c,d={};for(a=0;a<b.HEXCHARS.length;a++)c=b.HEXCHARS[a],d[c]=a;for(a=0;6>a;a++)c="ABCDEF"[a],d[c]=a+10;return d}(),b}();l.HEX=c;var b=function(){function b(){}return b.str2byte=function(a,c){if(0===a.length)return 0;var d=b.byteLength(a);d>c.length&&(d=c.length);var e=0,f=0,k=f+d,g=a.charCodeAt(e++);for(0!==g&&(c.writeUInt8(255&
g,0),f=1);k>f;f+=2)g=a.charCodeAt(e++),1===k-f&&c.writeUInt8(g>>8,f),2<=k-f&&c.writeUInt16BE(g,f);return d},b.byte2str=function(b){var a=b.length;if(0===a)return"";for(var c=Array((a>>1)+1),d=0,e=0;e<c.length;e++)0===e?1===a%2?c[e]=String.fromCharCode(256|b.readUInt8(d++)):c[e]=String.fromCharCode(0):c[e]=String.fromCharCode(b.readUInt8(d++)<<8|b.readUInt8(d++));return c.join("")},b.byteLength=function(b){if(0===b.length)return 0;var a=b.charCodeAt(0);b=b.length-1<<1;return 0!==a&&b++,b},b}();l.BINSTR=
b;var k=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,d=0;c>d;d++)a.writeUInt8(b.charCodeAt(d)-32,d);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(b.readUInt8(c)+32);return a.join("")},b.byteLength=function(b){return b.length},b}();l.BINSTRIE=k},{}],31:[function(g,q,l){l.isIE="undefined"!=typeof navigator&&(null!=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||-1!==navigator.userAgent.indexOf("Trident"));
l.isWebWorker="undefined"==typeof window},{}],32:[function(g,q,l){var n=g("../core/browserfs"),f=g("../core/node_fs");q=g("../core/buffer");g=g("../core/buffer_core_arraybuffer");var e=q.Buffer,d=g.BufferCoreArrayBuffer,p=function(){function a(b){this.fs=b;this.FS=b.getFS();this.PATH=b.getPATH();this.ERRNO_CODES=b.getERRNO_CODES()}return a.prototype.open=function(b){var a=this.fs.realPath(b.node),c=this.FS;try{c.isFile(b.node.mode)&&(b.nfd=f.openSync(a,this.fs.flagsToPermissionString(b.flags)))}catch(d){if(!d.code)throw d;
throw new c.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.close=function(b){var a=this.FS;try{a.isFile(b.node.mode)&&b.nfd&&f.closeSync(b.nfd)}catch(c){if(!c.code)throw c;throw new a.ErrnoError(this.ERRNO_CODES[c.code]);}},a.prototype.read=function(b,a,c,g,l){var p,n=new d(a.buffer);a=new e(n,a.byteOffset+c,a.byteOffset+c+g);try{p=f.readSync(b.nfd,a,0,g,l)}catch(m){throw new this.FS.ErrnoError(this.ERRNO_CODES[m.code]);}return p},a.prototype.write=function(b,a,c,g,l){var p,n=new d(a.buffer);
a=new e(n,a.byteOffset+c,a.byteOffset+c+g);try{p=f.writeSync(b.nfd,a,0,g,l)}catch(m){throw new this.FS.ErrnoError(this.ERRNO_CODES[m.code]);}return p},a.prototype.llseek=function(b,a,c){if(1===c)a+=b.position;else if(2===c&&this.FS.isFile(b.node.mode))try{var d=f.fstatSync(b.nfd);a+=d.size}catch(e){throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}if(0>a)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return b.position=a,a},a}(),a=function(){function a(b){this.fs=b;this.FS=b.getFS();this.PATH=
b.getPATH();this.ERRNO_CODES=b.getERRNO_CODES()}return a.prototype.getattr=function(b){var a;b=this.fs.realPath(b);try{a=f.lstatSync(b)}catch(c){if(!c.code)throw c;throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code]);}return{dev:a.dev,ino:a.ino,mode:a.mode,nlink:a.nlink,uid:a.uid,gid:a.gid,rdev:a.rdev,size:a.size,atime:a.atime,mtime:a.mtime,ctime:a.ctime,blksize:a.blksize,blocks:a.blocks}},a.prototype.setattr=function(b,a){var c=this.fs.realPath(b);try{if(void 0!==a.mode&&(f.chmodSync(c,a.mode),
b.mode=a.mode),void 0!==a.timestamp){var d=new Date(a.timestamp);f.utimesSync(c,d,d)}}catch(e){if(!e.code)throw e;if("ENOTSUP"!==e.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}if(void 0!==a.size)try{f.truncateSync(c,a.size)}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}},a.prototype.lookup=function(b,a){var c=this.PATH.join2(this.fs.realPath(b),a),c=this.fs.getMode(c);return this.fs.createNode(b,a,c)},a.prototype.mknod=function(b,a,c,d){b=this.fs.createNode(b,
a,c,d);a=this.fs.realPath(b);try{this.FS.isDir(b.mode)?f.mkdirSync(a,b.mode):f.writeFileSync(a,"",{mode:b.mode})}catch(e){if(!e.code)throw e;throw new this.FS.ErrnoError(this.ERRNO_CODES[e.code]);}return b},a.prototype.rename=function(b,a,c){b=this.fs.realPath(b);a=this.PATH.join2(this.fs.realPath(a),c);try{f.renameSync(b,a)}catch(d){if(!d.code)throw d;throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.unlink=function(b,a){var c=this.PATH.join2(this.fs.realPath(b),a);try{f.unlinkSync(c)}catch(d){if(!d.code)throw d;
throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.rmdir=function(b,a){var c=this.PATH.join2(this.fs.realPath(b),a);try{f.rmdirSync(c)}catch(d){if(!d.code)throw d;throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.readdir=function(b){b=this.fs.realPath(b);try{return f.readdirSync(b)}catch(a){if(!a.code)throw a;throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code]);}},a.prototype.symlink=function(b,a,c){b=this.PATH.join2(this.fs.realPath(b),a);try{f.symlinkSync(c,
b)}catch(d){if(!d.code)throw d;throw new this.FS.ErrnoError(this.ERRNO_CODES[d.code]);}},a.prototype.readlink=function(b){b=this.fs.realPath(b);try{return f.readlinkSync(b)}catch(a){if(!a.code)throw a;throw new this.FS.ErrnoError(this.ERRNO_CODES[a.code]);}},a}();g=function(){function c(b,c,d){if(void 0===b&&(b=self.FS),void 0===c&&(c=self.PATH),void 0===d&&(d=self.ERRNO_CODES),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",
705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},"undefined"==typeof n)throw Error("BrowserFS is not loaded. Please load it before this library.");this.FS=b;this.PATH=c;this.ERRNO_CODES=d;this.node_ops=new a(this);this.stream_ops=new p(this)}return c.prototype.mount=function(b){return this.createNode(null,"/",this.getMode(b.opts.root),0)},c.prototype.createNode=function(b,a,c,d){d=this.FS;if(!d.isDir(c)&&!d.isFile(c)&&
!d.isLink(c))throw new d.ErrnoError(this.ERRNO_CODES.EINVAL);b=d.createNode(b,a,c);return b.node_ops=this.node_ops,b.stream_ops=this.stream_ops,b},c.prototype.getMode=function(b){var a;try{a=f.lstatSync(b)}catch(c){if(!c.code)throw c;throw new this.FS.ErrnoError(this.ERRNO_CODES[c.code]);}return a.mode},c.prototype.realPath=function(b){for(var a=[];b.parent!==b;)a.push(b.name),b=b.parent;return a.push(b.mount.opts.root),a.reverse(),this.PATH.join.apply(null,a)},c.prototype.flagsToPermissionString=
function(b){return b in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[b]:b},c.prototype.getFS=function(){return this.FS},c.prototype.getPATH=function(){return this.PATH},c.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES},c}();l.BFSEmscriptenFS=g;n.EmscriptenFS=g},{"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/node_fs":26}],33:[function(g,q,l){var n=g("../core/node_fs_stats"),f=g("../core/node_path"),e=n.Stats;g=function(){function a(){this._index=
{};this.addPath("/",new p)}return a.prototype._split_path=function(a){var b=f.dirname(a);a=a.substr(b.length+("/"===b?0:1));return[b,a]},a.prototype.fileIterator=function(a){for(var b in this._index)for(var d=this._index[b],e=d.getListing(),f=0;f<e.length;f++){var g=d.getItem(e[f]);g.isFile()&&a(g.getData())}},a.prototype.addPath=function(a,b){if(null==b)throw Error("Inode must be specified");if("/"!==a[0])throw Error("Path must be absolute, got: "+a);if(this._index.hasOwnProperty(a))return this._index[a]===
b;var d=this._split_path(a),e=d[0],d=d[1],f=this._index[e];return void 0===f&&"/"!==a&&(f=new p,!this.addPath(e,f))||"/"!==a&&!f.addItem(d,b)?!1:(b.isFile()||(this._index[a]=b),!0)},a.prototype.removePath=function(a){var b=this._split_path(a),d=this._index[b[0]];if(void 0===d)return null;b=d.remItem(b[1]);if(null===b)return null;if(!b.isFile()){for(var d=b.getListing(),e=0;e<d.length;e++)this.removePath(a+"/"+d[e]);"/"!==a&&delete this._index[a]}return b},a.prototype.ls=function(a){a=this._index[a];
return void 0===a?null:a.getListing()},a.prototype.getInode=function(a){var b=this._split_path(a),d=b[0],b=b[1],e=this._index[d];return void 0===e?null:d===a?e:e.getItem(b)},a.from_listing=function(c){var b=new a,f=new p;b._index["/"]=f;for(c=[["",c,f]];0<c.length;){var h,g=c.pop(),f=g[0],l=g[1],g=g[2],q;for(q in l){var t=l[q],m=""+f+"/"+q;null!=t?(b._index[m]=h=new p,c.push([m,t,h])):h=new d(new e(n.FileType.FILE,-1,365));null!=g&&(g._ls[q]=h)}}return b},a}();l.FileIndex=g;var d=function(){function a(a){this.data=
a}return a.prototype.isFile=function(){return!0},a.prototype.isDir=function(){return!1},a.prototype.getData=function(){return this.data},a.prototype.setData=function(a){this.data=a},a}();l.FileInode=d;var p=function(){function a(){this._ls={}}return a.prototype.isFile=function(){return!1},a.prototype.isDir=function(){return!0},a.prototype.getStats=function(){return new e(n.FileType.DIRECTORY,4096,365)},a.prototype.getListing=function(){return Object.keys(this._ls)},a.prototype.getItem=function(a){var b;
return null!=(b=this._ls[a])?b:null},a.prototype.addItem=function(a,b){return a in this._ls?!1:(this._ls[a]=b,!0)},a.prototype.remItem=function(a){var b=this._ls[a];return void 0===b?null:(delete this._ls[a],b)},a}();l.DirInode=p},{"../core/node_fs_stats":27,"../core/node_path":28}],34:[function(g,q,l){var n=g("../core/node_fs_stats"),f=g("../core/buffer");g=function(){function e(d,e,a,c,b,f){this.id=d;this.size=e;this.mode=a;this.atime=c;this.mtime=b;this.ctime=f}return e.prototype.toStats=function(){return new n.Stats((61440&
this.mode)===n.FileType.DIRECTORY?n.FileType.DIRECTORY:n.FileType.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},e.prototype.getSize=function(){return 30+this.id.length},e.prototype.toBuffer=function(d){return void 0===d&&(d=new f.Buffer(this.getSize())),d.writeUInt32LE(this.size,0),d.writeUInt16LE(this.mode,4),d.writeDoubleLE(this.atime,6),d.writeDoubleLE(this.mtime,14),d.writeDoubleLE(this.ctime,22),d.write(this.id,30,this.id.length,"ascii"),d},e.prototype.update=
function(d){var e=!1;this.size!==d.size&&(this.size=d.size,e=!0);this.mode!==d.mode&&(this.mode=d.mode,e=!0);var a=d.atime.getTime();this.atime!==a&&(this.atime=a,e=!0);a=d.mtime.getTime();this.mtime!==a&&(this.mtime=a,e=!0);d=d.ctime.getTime();return this.ctime!==d&&(this.ctime=d,e=!0),e},e.fromBuffer=function(d){if(void 0===d)throw Error("NO");return new e(d.toString("ascii",30),d.readUInt32LE(0),d.readUInt16LE(4),d.readDoubleLE(6),d.readDoubleLE(14),d.readDoubleLE(22))},e.prototype.isFile=function(){return(61440&
this.mode)===n.FileType.FILE},e.prototype.isDirectory=function(){return(61440&this.mode)===n.FileType.DIRECTORY},e}();q.exports=g},{"../core/buffer":16,"../core/node_fs_stats":27}],35:[function(g,q,l){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var a=16*Math.random()|0;return("x"==b?a:3&a|8).toString(16)})}function f(b,a){return b?(a(b),!1):!0}function e(b,a,c){return b?(a.abort(function(){c(b)}),!1):!0}var d=this.__extends||function(b,a){function c(){this.constructor=
b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file_system");var p=g("../core/api_error"),a=g("../core/node_fs_stats"),c=g("../core/node_path"),b=g("../generic/inode"),k=g("../core/buffer");g=g("../generic/preload_file");var h=p.ApiError,z=k.Buffer,k=function(){function b(a){this.store=a;this.originalData={};this.modifiedKeys=[]}return b.prototype.stashOldValue=function(b,a){this.originalData.hasOwnProperty(b)||(this.originalData[b]=a)},b.prototype.markModified=
function(b){-1===this.modifiedKeys.indexOf(b)&&(this.modifiedKeys.push(b),this.originalData.hasOwnProperty(b)||(this.originalData[b]=this.store.get(b)))},b.prototype.get=function(b){var a=this.store.get(b);return this.stashOldValue(b,a),a},b.prototype.put=function(b,a,c){return this.markModified(b),this.store.put(b,a,c)},b.prototype["delete"]=function(b){this.markModified(b);this.store["delete"](b)},b.prototype.commit=function(){},b.prototype.abort=function(){var b,a,c;for(b=0;b<this.modifiedKeys.length;b++)a=
this.modifiedKeys[b],c=this.originalData[a],null===c?this.store["delete"](a):this.store.put(a,c,!0)},b}();l.SimpleSyncRWTransaction=k;var M=function(b){function a(c,d,e,f,h){b.call(this,c,d,e,f,h)}return d(a,b),a.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},a.prototype.closeSync=function(){this.syncSync()},a}(g.PreloadFile);l.SyncKeyValueFile=M;k=function(e){function f(b){e.call(this);this.store=b.store;this.makeRootDirectory()}
return d(f,e),f.isAvailable=function(){return!0},f.prototype.getName=function(){return this.store.name()},f.prototype.isReadOnly=function(){return!1},f.prototype.supportsSymlinks=function(){return!1},f.prototype.supportsProps=function(){return!1},f.prototype.supportsSynch=function(){return!0},f.prototype.makeRootDirectory=function(){var c=this.store.beginTransaction("readwrite");if(void 0===c.get("/")){var d=(new Date).getTime(),d=new b(n(),4096,511|a.FileType.DIRECTORY,d,d,d);c.put(d.id,new z("{}"),
!1);c.put("/",d.toBuffer(),!1);c.commit()}},f.prototype._findINode=function(b,a,d){var e=this,f=function(f){f=e.getDirListing(b,a,f);if(f[d])return f[d];throw h.ENOENT(c.resolve(a,d));};return"/"===a?""===d?"/":f(this.getINode(b,a,"/")):f(this.getINode(b,a+c.sep+d,this._findINode(b,c.dirname(a),c.basename(a))))},f.prototype.findINode=function(b,a){return this.getINode(b,a,this._findINode(b,c.dirname(a),c.basename(a)))},f.prototype.getINode=function(a,c,d){a=a.get(d);if(void 0===a)throw h.ENOENT(c);
return b.fromBuffer(a)},f.prototype.getDirListing=function(b,a,c){if(!c.isDirectory())throw h.ENOTDIR(a);b=b.get(c.id);if(void 0===b)throw h.ENOENT(a);return JSON.parse(b.toString())},f.prototype.addNewNode=function(b,a){for(var c;;)try{return c=n(),b.put(c,a,!1),c}catch(d){}throw new h(p.ErrorCode.EIO,"Unable to commit data to key-value store.");},f.prototype.commitNewFile=function(a,d,e,f,k){var g=c.dirname(d),m=c.basename(d),l=this.findINode(a,g),g=this.getDirListing(a,g,l),p=(new Date).getTime();
if("/"===d)throw h.EEXIST(d);if(g[m])throw h.EEXIST(d);try{var n=this.addNewNode(a,k),t=new b(n,k.length,f|e,p,p,p),q=this.addNewNode(a,t.toBuffer());g[m]=q;a.put(l.id,new z(JSON.stringify(g)),!0)}catch(G){throw a.abort(),G;}return a.commit(),t},f.prototype.empty=function(){this.store.clear();this.makeRootDirectory()},f.prototype.renameSync=function(b,a){var d=this.store.beginTransaction("readwrite"),e=c.dirname(b),f=c.basename(b),k=c.dirname(a),g=c.basename(a),m=this.findINode(d,e),l=this.getDirListing(d,
e,m);if(!l[f])throw h.ENOENT(b);var n=l[f];if(delete l[f],0===(k+"/").indexOf(b+"/"))throw new h(p.ErrorCode.EBUSY,e);var t,q;if(k===e?(t=m,q=l):(t=this.findINode(d,k),q=this.getDirListing(d,k,t)),q[g]){e=this.getINode(d,a,q[g]);if(!e.isFile())throw h.EPERM(a);try{d["delete"](e.id),d["delete"](q[g])}catch(G){throw d.abort(),G;}}q[g]=n;try{d.put(m.id,new z(JSON.stringify(l)),!0),d.put(t.id,new z(JSON.stringify(q)),!0)}catch(G){throw d.abort(),G;}d.commit()},f.prototype.statSync=function(b,a){return this.findINode(this.store.beginTransaction("readonly"),
b).toStats()},f.prototype.createFileSync=function(b,c,d){var e=this.store.beginTransaction("readwrite"),f=new z(0);d=this.commitNewFile(e,b,a.FileType.FILE,d,f);return new M(this,b,c,d.toStats(),f)},f.prototype.openFileSync=function(b,a){var c=this.store.beginTransaction("readonly"),d=this.findINode(c,b),c=c.get(d.id);if(void 0===c)throw h.ENOENT(b);return new M(this,b,a,d.toStats(),c)},f.prototype.removeEntry=function(b,a){var d=this.store.beginTransaction("readwrite"),e=c.dirname(b),f=this.findINode(d,
e),e=this.getDirListing(d,e,f),k=c.basename(b);if(!e[k])throw h.ENOENT(b);var g=e[k];delete e[k];k=this.getINode(d,b,g);if(!a&&k.isDirectory())throw h.EISDIR(b);if(a&&!k.isDirectory())throw h.ENOTDIR(b);try{d["delete"](k.id),d["delete"](g),d.put(f.id,new z(JSON.stringify(e)),!0)}catch(m){throw d.abort(),m;}d.commit()},f.prototype.unlinkSync=function(b){this.removeEntry(b,!1)},f.prototype.rmdirSync=function(b){this.removeEntry(b,!0)},f.prototype.mkdirSync=function(b,c){var d=this.store.beginTransaction("readwrite"),
e=new z("{}");this.commitNewFile(d,b,a.FileType.DIRECTORY,c,e)},f.prototype.readdirSync=function(b){var a=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(a,b,this.findINode(a,b)))},f.prototype._syncSync=function(b,a,d){var e=this.store.beginTransaction("readwrite"),f=this._findINode(e,c.dirname(b),c.basename(b));b=this.getINode(e,b,f);d=b.update(d);try{e.put(b.id,a,!0),d&&e.put(f,b.toBuffer(),!0)}catch(h){throw e.abort(),h;}e.commit()},f}(q.SynchronousFileSystem);l.SyncKeyValueFileSystem=
k;var G=function(b){function a(c,d,e,f,h){b.call(this,c,d,e,f,h)}return d(a,b),a.prototype.sync=function(b){var a=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(c){c||a.resetDirty();b(c)}):b()},a.prototype.close=function(b){this.sync(b)},a}(g.PreloadFile);l.AsyncKeyValueFile=G;q=function(k){function g(){k.apply(this,arguments)}return d(g,k),g.prototype.init=function(b,a){this.store=b;this.makeRootDirectory(a)},g.isAvailable=function(){return!0},g.prototype.getName=
function(){return this.store.name()},g.prototype.isReadOnly=function(){return!1},g.prototype.supportsSymlinks=function(){return!1},g.prototype.supportsProps=function(){return!1},g.prototype.supportsSynch=function(){return!1},g.prototype.makeRootDirectory=function(c){var d=this.store.beginTransaction("readwrite");d.get("/",function(f,h){if(f||void 0===h){var k=(new Date).getTime(),g=new b(n(),4096,511|a.FileType.DIRECTORY,k,k,k);d.put(g.id,new z("{}"),!1,function(b){e(b,d,c)&&d.put("/",g.toBuffer(),
!1,function(b){b?d.abort(function(){c(b)}):d.commit(c)})})}else d.commit(c)})},g.prototype._findINode=function(b,a,d,e){var k=this,g=function(b,f,k){b?e(b):k[d]?e(null,k[d]):e(h.ENOENT(c.resolve(a,d)))};"/"===a?""===d?e(null,"/"):this.getINode(b,a,"/",function(c,d){f(c,e)&&k.getDirListing(b,a,d,function(b,a){g(b,d,a)})}):this.findINodeAndDirListing(b,a,g)},g.prototype.findINode=function(b,a,d){var e=this;this._findINode(b,c.dirname(a),c.basename(a),function(c,h){f(c,d)&&e.getINode(b,a,h,d)})},g.prototype.getINode=
function(a,c,d,e){a.get(d,function(a,d){f(a,e)&&(void 0===d?e(h.ENOENT(c)):e(null,b.fromBuffer(d)))})},g.prototype.getDirListing=function(b,a,c,d){c.isDirectory()?b.get(c.id,function(b,c){if(f(b,d))try{d(null,JSON.parse(c.toString()))}catch(e){d(h.ENOENT(a))}}):d(h.ENOTDIR(a))},g.prototype.findINodeAndDirListing=function(b,a,c){var d=this;this.findINode(b,a,function(e,h){f(e,c)&&d.getDirListing(b,a,h,function(b,a){f(b,c)&&c(null,h,a)})})},g.prototype.addNewNode=function(b,a,c){var d,e=0,f=function(){5===
++e?c(new h(p.ErrorCode.EIO,"Unable to commit data to key-value store.")):(d=n(),b.put(d,a,!1,function(b,a){b||!a?f():c(null,d)}))};f()},g.prototype.commitNewFile=function(a,d,f,k,g,l){var m=this,p=c.dirname(d),n=c.basename(d),t=(new Date).getTime();return"/"===d?l(h.EEXIST(d)):void this.findINodeAndDirListing(a,p,function(c,p,q){e(c,a,l)&&(q[n]?a.abort(function(){l(h.EEXIST(d))}):m.addNewNode(a,g,function(c,d){if(e(c,a,l)){var h=new b(d,g.length,k|f,t,t,t);m.addNewNode(a,h.toBuffer(),function(b,
c){e(b,a,l)&&(q[n]=c,a.put(p.id,new z(JSON.stringify(q)),!0,function(b){e(b,a,l)&&a.commit(function(b){e(b,a,l)&&l(null,h)})}))})}}))})},g.prototype.empty=function(b){var a=this;this.store.clear(function(c){f(c,b)&&a.makeRootDirectory(b)})},g.prototype.rename=function(b,a,d){var f=this,k=this.store.beginTransaction("readwrite"),g=c.dirname(b),l=c.basename(b),m=c.dirname(a),n=c.basename(a),t={},q={},G=!1;if(0===(m+"/").indexOf(b+"/"))return d(new h(p.ErrorCode.EBUSY,g));var M=function(){if(!G&&q.hasOwnProperty(g)&&
q.hasOwnProperty(m)){var c=q[g],p=t[g],M=q[m],w=t[m];if(c[l]){var F=c[l];delete c[l];var X=function(){M[n]=F;k.put(p.id,new z(JSON.stringify(c)),!0,function(b){e(b,k,d)&&(g===m?k.commit(d):k.put(w.id,new z(JSON.stringify(M)),!0,function(b){e(b,k,d)&&k.commit(d)}))})};M[n]?f.getINode(k,a,M[n],function(b,c){e(b,k,d)&&(c.isFile()?k["delete"](c.id,function(b){e(b,k,d)&&k["delete"](M[n],function(b){e(b,k,d)&&X()})}):k.abort(function(b){d(h.EPERM(a))}))}):X()}else d(h.ENOENT(b))}},w=function(b){f.findINodeAndDirListing(k,
b,function(a,c,e){a?G||(G=!0,k.abort(function(){d(a)})):(t[b]=c,q[b]=e,M())})};w(g);g!==m&&w(m)},g.prototype.stat=function(b,a,c){a=this.store.beginTransaction("readonly");this.findINode(a,b,function(b,a){f(b,c)&&c(null,a.toStats())})},g.prototype.createFile=function(b,c,d,e){var h=this,k=this.store.beginTransaction("readwrite"),g=new z(0);this.commitNewFile(k,b,a.FileType.FILE,d,g,function(a,d){f(a,e)&&e(null,new G(h,b,c,d.toStats(),g))})},g.prototype.openFile=function(b,a,c){var d=this,e=this.store.beginTransaction("readonly");
this.findINode(e,b,function(k,g){f(k,c)&&e.get(g.id,function(e,k){f(e,c)&&(void 0===k?c(h.ENOENT(b)):c(null,new G(d,b,a,g.toStats(),k)))})})},g.prototype.removeEntry=function(b,a,d){var f=this,k=this.store.beginTransaction("readwrite"),g=c.dirname(b),l=c.basename(b);this.findINodeAndDirListing(k,g,function(c,g,m){if(e(c,k,d))if(m[l]){var p=m[l];delete m[l];f.getINode(k,b,p,function(c,f){e(c,k,d)&&(!a&&f.isDirectory()?k.abort(function(){d(h.EISDIR(b))}):a&&!f.isDirectory()?k.abort(function(){d(h.ENOTDIR(b))}):
k["delete"](f.id,function(b){e(b,k,d)&&k["delete"](p,function(b){e(b,k,d)&&k.put(g.id,new z(JSON.stringify(m)),!0,function(b){e(b,k,d)&&k.commit(d)})})}))})}else k.abort(function(){d(h.ENOENT(b))})})},g.prototype.unlink=function(b,a){this.removeEntry(b,!1,a)},g.prototype.rmdir=function(b,a){this.removeEntry(b,!0,a)},g.prototype.mkdir=function(b,c,d){var e=this.store.beginTransaction("readwrite"),f=new z("{}");this.commitNewFile(e,b,a.FileType.DIRECTORY,c,f,d)},g.prototype.readdir=function(b,a){var c=
this,d=this.store.beginTransaction("readonly");this.findINode(d,b,function(e,h){f(e,a)&&c.getDirListing(d,b,h,function(b,c){f(b,a)&&a(null,Object.keys(c))})})},g.prototype._sync=function(b,a,d,f){var h=this,k=this.store.beginTransaction("readwrite");this._findINode(k,c.dirname(b),c.basename(b),function(c,g){e(c,k,f)&&h.getINode(k,b,g,function(b,c){if(e(b,k,f)){var h=c.update(d);k.put(c.id,a,!0,function(b){e(b,k,f)&&(h?k.put(g,c.toBuffer(),!0,function(b){e(b,k,f)&&k.commit(f)}):k.commit(f))})}})})},
g}(q.BaseFileSystem);l.AsyncKeyValueFileSystem=q},{"../core/api_error":14,"../core/buffer":16,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/inode":34,"../generic/preload_file":36}],36:[function(g,q,l){var n=this.__extends||function(b,a){function c(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);c.prototype=a.prototype;b.prototype=new c};q=g("../core/file");var f=g("../core/buffer"),e=g("../core/api_error"),d=g("../core/node_fs"),p=e.ApiError,
a=e.ErrorCode,c=f.Buffer;g=function(b){function e(a,d,f,k,g){if(b.call(this),this._pos=0,this._dirty=!1,this._fs=a,this._path=d,this._flag=f,this._stat=k,null!=g?this._buffer=g:this._buffer=new c(0),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.");}return n(e,b),e.prototype.isDirty=function(){return this._dirty},e.prototype.resetDirty=function(){this._dirty=
!1},e.prototype.getBuffer=function(){return this._buffer},e.prototype.getStats=function(){return this._stat},e.prototype.getFlag=function(){return this._flag},e.prototype.getPath=function(){return this._path},e.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},e.prototype.advancePos=function(b){return this._pos+=b},e.prototype.setPos=function(b){return this._pos=b},e.prototype.sync=function(b){try{this.syncSync(),b()}catch(a){b(a)}},e.prototype.syncSync=function(){throw new p(a.ENOTSUP);
},e.prototype.close=function(b){try{this.closeSync(),b()}catch(a){b(a)}},e.prototype.closeSync=function(){throw new p(a.ENOTSUP);},e.prototype.stat=function(b){try{b(null,this._stat.clone())}catch(a){b(a)}},e.prototype.statSync=function(){return this._stat.clone()},e.prototype.truncate=function(b,a){try{this.truncateSync(b),this._flag.isSynchronous()&&!d.getRootFS().supportsSynch()&&this.sync(a),a()}catch(c){return a(c)}},e.prototype.truncateSync=function(b){if(this._dirty=!0,!this._flag.isWriteable())throw new p(a.EPERM,
"File not opened with a writeable mode.");if(this._stat.mtime=new Date,b>this._buffer.length)return b=new c(b-this._buffer.length),b.fill(0),this.writeSync(b,0,b.length,this._buffer.length),void(this._flag.isSynchronous()&&d.getRootFS().supportsSynch()&&this.syncSync());this._stat.size=b;var e=new c(b);this._buffer.copy(e,0,0,b);this._buffer=e;this._flag.isSynchronous()&&d.getRootFS().supportsSynch()&&this.syncSync()},e.prototype.write=function(b,a,c,d,e){try{e(null,this.writeSync(b,a,c,d),b)}catch(f){e(f)}},
e.prototype.writeSync=function(b,d,e,f){if(this._dirty=!0,null==f&&(f=this.getPos()),!this._flag.isWriteable())throw new p(a.EPERM,"File not opened with a writeable mode.");var k=f+e;k>this._stat.size&&(this._stat.size=k,k>this._buffer.length)&&(k=new c(k),this._buffer.copy(k),this._buffer=k);b=b.copy(this._buffer,f,d,d+e);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),b):(this.setPos(f+b),b)},e.prototype.read=function(b,a,c,d,e){try{e(null,this.readSync(b,a,c,d),b)}catch(f){e(f)}},
e.prototype.readSync=function(b,c,d,e){if(!this._flag.isReadable())throw new p(a.EPERM,"File not opened with a readable mode.");null==e&&(e=this.getPos());e+d>this._stat.size&&(d=this._stat.size-e);b=this._buffer.copy(b,c,e,e+d);return this._stat.atime=new Date,this._pos=e+d,b},e.prototype.chmod=function(b,a){try{this.chmodSync(b),a()}catch(c){a(c)}},e.prototype.chmodSync=function(b){if(!this._fs.supportsProps())throw new p(a.ENOTSUP);this._dirty=!0;this._stat.chmod(b);this.syncSync()},e}(q.BaseFile);
l.PreloadFile=g;g=function(b){function a(c,d,e,f,k){b.call(this,c,d,e,f,k)}return n(a,b),a.prototype.sync=function(b){b()},a.prototype.syncSync=function(){},a.prototype.close=function(b){b()},a.prototype.closeSync=function(){},a}(g);l.NoSyncFile=g},{"../core/api_error":14,"../core/buffer":16,"../core/file":21,"../core/node_fs":26}],37:[function(g,q,l){function n(b){var a=IEBinaryToArray_ByteStr(b);b=IEBinaryToArray_ByteStr_Last(b);a=a.replace(/[\s\S]/g,function(b){b=b.charCodeAt(0);return String.fromCharCode(255&
b,b>>8)})+b;b=Array(a.length);for(var c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b}function f(b,a,c,d){switch(c){case "buffer":case "json":break;default:return d(new h(z.EINVAL,"Invalid download type: "+c))}var e=new XMLHttpRequest;e.open("GET",a,b);e.setRequestHeader("Accept-Charset","x-user-defined");e.onreadystatechange=function(b){var a;if(4===e.readyState){if(200!==e.status)return d(new h(e.status,"XHR error."));switch(c){case "buffer":return a=n(e.responseBody),d(null,new M(a));case "json":return d(null,
JSON.parse(e.responseText))}}};e.send()}function e(b,a,c){f(!0,b,a,c)}function d(b,a){var c;return f(!1,b,a,function(b,a){if(b)throw b;c=a}),c}function p(b,a,c){var d=new XMLHttpRequest;d.open("GET",b,!0);var e=!0;switch(a){case "buffer":d.responseType="arraybuffer";break;case "json":try{d.responseType="json",e="json"===d.responseType}catch(f){e=!1}break;default:return c(new h(z.EINVAL,"Invalid download type: "+a))}d.onreadystatechange=function(b){if(4===d.readyState){if(200!==d.status)return c(new h(d.status,
"XHR error."));switch(a){case "buffer":return c(null,new M(d.response?d.response:0));case "json":return e?c(null,d.response):c(null,JSON.parse(d.responseText))}}};d.send()}function a(b,a){var c=new XMLHttpRequest;c.open("GET",b,!1);var d=null,e=null;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.onreadystatechange=function(b){if(4===c.readyState){if(200!==c.status)return void(e=new h(c.status,"XHR error."));switch(a){case "buffer":b=c.responseText;d=new M(b.length);for(var f=0;f<b.length;f++)d.writeUInt8(b.charCodeAt(f),
f);break;case "json":return void(d=JSON.parse(c.responseText))}}},c.send(),e)throw e;return d}function c(b,a){var c=new XMLHttpRequest;switch(c.open("GET",b,!1),a){case "buffer":c.responseType="arraybuffer";break;case "json":break;default:throw new h(z.EINVAL,"Invalid download type: "+a);}var d,e;if(c.onreadystatechange=function(b){if(4===c.readyState)if(200===c.status)switch(a){case "buffer":d=new M(c.response);break;case "json":d=JSON.parse(c.response)}else e=new h(c.status,"XHR error.")},c.send(),
e)throw e;return d}function b(b,a,c){var d=new XMLHttpRequest;d.open("HEAD",a,b);d.onreadystatechange=function(b){if(4===d.readyState){if(200!=d.status)return c(new h(d.status,"XHR HEAD error."));try{return c(null,parseInt(d.getResponseHeader("Content-Length"),10))}catch(a){return c(new h(z.EIO,"XHR HEAD error: Could not read content-length."))}}};d.send()}q=g("../core/util");var k=g("../core/buffer");g=g("../core/api_error");var h=g.ApiError,z=g.ErrorCode,M=k.Buffer;l.asyncDownloadFile=q.isIE&&"undefined"==
typeof Blob?e:p;l.syncDownloadFile=q.isIE&&"undefined"==typeof Blob?d:q.isIE&&"undefined"!=typeof Blob?c:a;l.getFileSizeSync=function(a){var c;return b(!1,a,function(b,a){if(b)throw b;c=a}),c};l.getFileSizeAsync=function(a,c){b(!0,a,c)}},{"../core/api_error":14,"../core/buffer":16,"../core/util":31}],38:[function(g,q,l){var n=g("./core/global");if(Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(d){return"[object Array]"===Object.prototype.toString.call(d)}),
Object.keys||(Object.keys=function(){var d=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),a="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),c=a.length;return function(b){if("object"!=typeof b&&("function"!=typeof b||null===b))throw new TypeError("Object.keys called on non-object");var f,h=[];for(f in b)d.call(b,f)&&h.push(f);if(e)for(f=0;c>f;f++)d.call(b,a[f])&&h.push(a[f]);return h}}()),"b"!=="ab".substr(-1)&&
(String.prototype.substr=function(d){return function(e,a){return 0>e&&(e=this.length+e),d.call(this,e,a)}}(String.prototype.substr)),Array.prototype.forEach||(Array.prototype.forEach=function(d,e){for(var a=0;a<this.length;++a)a in this&&d.call(e,this[a],a,this)}),"undefined"==typeof setImmediate){var f=[];if(function(){if("undefined"!=typeof n.importScripts||!n.postMessage)return!1;var d=!0,e=n.onmessage;return n.onmessage=function(){d=!1},n.postMessage("","*"),n.onmessage=e,d}())n.setImmediate=
function(d){f.push(d);n.postMessage("zero-timeout-message","*")},l=function(d){if(d.source===self&&"zero-timeout-message"===d.data&&(d.stopPropagation?d.stopPropagation():d.cancelBubble=!0,0<f.length))return f.shift()()},n.addEventListener?n.addEventListener("message",l,!0):n.attachEvent("onmessage",l);else if(n.MessageChannel){var e=new n.MessageChannel;e.port1.onmessage=function(d){return 0<f.length?f.shift()():void 0};n.setImmediate=function(d){f.push(d);e.port2.postMessage("")}}else n.setImmediate=
function(d){return setTimeout(d,0)}}Array.prototype.indexOf||(Array.prototype.indexOf=function(d,e){if(void 0===e&&(e=0),!this)throw new TypeError;var a=this.length;if(0===a||c>=a)return-1;var c=e;for(0>c&&(c=a+c);a>c;c++)if(this[c]===d)return c;return-1});Array.prototype.forEach||(Array.prototype.forEach=function(d,e){var a,c;a=0;for(c=this.length;c>a;++a)a in this&&d.call(e,this[a],a,this)});Array.prototype.map||(Array.prototype.map=function(d,e){var a,c,b;if(null==this)throw new TypeError(" this is null or not defined");
var f=Object(this),h=f.length>>>0;if("function"!=typeof d)throw new TypeError(d+" is not a function");e&&(a=e);c=Array(h);for(b=0;h>b;){var g,l;b in f&&(g=f[b],l=d.call(a,g,b,f),c[b]=l);b++}return c});"undefined"!=typeof document&&void 0===window.chrome&&document.write("\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n Dim lastIndex\r\n lastIndex = LenB(Binary)\r\n if lastIndex mod 2 Then\r\n IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n Else\r\n IEBinaryToArray_ByteStr_Last = \"\"\r\n End If\r\nEnd Function\r\n\x3c/script>\r\n");
g("./generic/emscripten_fs");g("./backend/IndexedDB");g("./backend/XmlHttpRequest");g("./backend/async_mirror");g("./backend/dropbox");g("./backend/html5fs");g("./backend/in_memory");g("./backend/localStorage");g("./backend/mountable_file_system");g("./backend/overlay");g("./backend/workerfs");g("./backend/zipfs");q.exports=g("./core/browserfs")},{"./backend/IndexedDB":3,"./backend/XmlHttpRequest":4,"./backend/async_mirror":5,"./backend/dropbox":6,"./backend/html5fs":7,"./backend/in_memory":8,"./backend/localStorage":9,
"./backend/mountable_file_system":10,"./backend/overlay":11,"./backend/workerfs":12,"./backend/zipfs":13,"./core/browserfs":15,"./core/global":24,"./generic/emscripten_fs":32}]},{},[38])(38)});
var FS=null,Crazyerics=function(){var r=this;$(document).ready(function(){r._clientdata=r._decompress.json(clientdata);var g=r._clientdata.openonload||{};"system"in g&&"title"in g&&"file"in g&&r._bootstrap(g.system,g.title,g.file);r._buildRecentlyPlayed(r._clientdata.playhistory);$("#searchform select").selectOrDie({customID:"selectordie",customClass:"tooltip",onChange:function(){r.replaceSuggestions($(this).val())}});$("#searchform input").autoComplete({minChars:3,cache:!1,delay:300,source:function(g,
l){var n=$("#searchform select").val();$.getJSON("/search/"+n+"/"+g,function(f){l(r._decompress.json(f))})},renderItem:function(g,l){var n=$('<div class="autocomplete-suggestion" data-title="'+g[0]+'" data-file="'+g[1]+'" data-system="'+g[2]+'" data-searchscore="'+g[3]+'"></div>');n.append(r._getBoxFront(g[2],g[0],50));n.append("<div>"+g[0]+"</div>");return $("<div/>").append(n).html()},onSelect:function(g,l,n){r._bootstrap(n.data("system"),n.data("title"),n.data("file"))}});$("#emulatorwrapperoverlay").on("click",
function(){$("#emulator").focus();$("#emulatorcontrolswrapper").removeClass()}).hover(function(g){g.stopPropagation()},function(g){g.stopPropagation()});$("#emulatorcontrolswrapper").on("mousedown mouseup click",function(g){g.preventDefault();$("#emulator").focus()});$("#emulatorwrapper").hover(function(g){$("#emulatorcontrolswrapper").removeClass()},function(g){$("#emulatorcontrolswrapper").addClass("closed")});$("#gamedetailswrapper").hover(function(g){$("#gamecontrolslist").removeClass()},function(g){$("#gamecontrolslist").addClass("closed")});
$("#emulatorcontrolswrapper li.fullscreen").click(function(){r._simulateEmulatorKeypress(70)});$("#emulatorcontrolswrapper li.savestate").click(function(){r._simulateEmulatorKeypress(49)});$("#emulatorcontrolswrapper li.loadstate").click(function(){r._simulateEmulatorKeypress(52)});$("#emulatorcontrolswrapper li.mute").click(function(){r._simulateEmulatorKeypress(77)});$("#emulatorcontrolswrapper li.decrementslot").click(function(){r._simulateEmulatorKeypress(50)});$("#emulatorcontrolswrapper li.incrementslot").click(function(){r._simulateEmulatorKeypress(51)});
$("#emulatorcontrolswrapper li.fastforward").click(function(){r._simulateEmulatorKeypress(32)});$("#emulatorcontrolswrapper li.pause").click(function(){r._simulateEmulatorKeypress(80)});$("#emulatorcontrolswrapper li.reset").click(function(){r._simulateEmulatorKeypress(72)});$("#emulatorcontrolswrapper li.rewind").click(function(){r._simulateEmulatorKeypress(82,5E3)});$("#gamecontrolslist li.controls").on("mousedown",function(){$("#emulator").is(":focus")&&(r._pauseOverride=!0)}).on("mouseup",function(g){r._pauseOverride&&
($("#emulator").focus(),r._pauseOverride=!1);$("#controlsslider").animate({width:"toggle",padding:"toggle"},500);0==$(this).attr("data-click-state")?($(this).attr("data-click-state",1),$(this).find("img").animateRotate(0,90,500)):($(this).attr("data-click-state",0),$(this).find("img").animateRotate(90,0,500))});r.replaceSuggestions("all");r._toolTips()})};Crazyerics.prototype._clientdata=null;Crazyerics.prototype._Module=null;Crazyerics.prototype._ModuleLoading=!1;
Crazyerics.prototype._pauseOverride=!1;Crazyerics.prototype._activeFile=null;Crazyerics.prototype._activeSaveStateSlot=0;Crazyerics.prototype._keypresslocked=!1;Crazyerics.prototype._tips="Back out of that mistake you made by holding the R key to rewind the game;Press the Space key to fast forward through those boring story scenes;If your browser supports it, you can go fullscreen by pressing the F key;You can save your progress by pressing the 1 key, return to it anytime with the 4 key;We'll store all of your save states as long as you return within two weeks;Pause your game with the P key;Select a system filter to generate a new list of suggested games;To search for more obsurace or forgeign titles, select a system filter first".split(";");
Crazyerics.prototype._playhistory={};Crazyerics.prototype._socket=null;
Crazyerics.prototype.replaceSuggestions=function(r,g){var q=this;g=g||100;$("#suggestionswrapper").hide();$("#loading").removeClass("close");$.getJSON("/suggest/"+r+"/"+g,function(g){g=q._decompress.json(g);$("#suggestionswrapper li").remove();for(var n=$("#suggestionswrapper ul"),f=0;f<g.length;++f){var e=q._buildGameLink(g[f].system,g[f].title,g[f].file,120);$(n[f%n.length]).append(e.li)}$("#suggestionswrapper").waitForImages().progress(function(d,e,a){$("#loading .loadingtext").text(d+"%");d===
e-1&&($("#suggestionswrapper").slideDown(),$("#loading").addClass("close"))});q._toolTips()})};
Crazyerics.prototype._bootstrap=function(r,g,q,l){var n=this;if(!n._ModuleLoading){n._ModuleLoading=!0;n._pauseOverride=!1;$("#gameloadingname").text(g);$("#gamedetailsboxfront img").addClass("close");$("#gamedetailswrapper").fadeOut();$("#startmessage").slideUp(1E3);$("#emulatorwrapper").slideDown(1E3);$("#gameloadingoverlaycontentimage").empty();var f=n._getBoxFront(r,g,170);f.addClass("tada");f.load(function(){$(this).fadeIn(200)});$("#gameloadingoverlaycontentimage").append(f);var e=setInterval(function(){$("#tip").fadeOut(500,
function(){var d=Crazyerics.prototype._tips[Math.floor(Math.random()*Crazyerics.prototype._tips.length)];$("#gameloadingoverlay").is(":animated")||$("#tip").empty().append("Tip: "+d).fadeIn(500)})},5E3);$("#gameloadingoverlay").fadeIn(500,function(){$("#gamecontrolslist li").each(function(){1==$(this).attr("data-click-state")&&$(this).mouseup()});$("#gameloadingoverlaycontent").removeClass();$("#emulatorcontrolswrapper").show();n._cleanupEmulator();$("#emulatorcanvas").append('<canvas tabindex="0" id="emulator"></canvas>');
var d=$.Deferred(),f=$.Deferred(),a=$.Deferred();$.when(d,f,a).done(function(a,b,d){var f=a[0],p=a[1];a=a[2];b=b[1];d=d.states;n._Module=f;FS=p;n.emulatorframe=a;n._setupKeypressInterceptor(r,g,q);n._buildFileSystem(f,r,q,b,d);f.callMain(f.arguments);var M=function(){n._buildGameContent(r,g,function(){});$("#gameloadingoverlaycontent").addClass("close");$("#gameloadingoverlay").fadeOut(1E3,function(){$("#tips").stop().hide();clearInterval(e);setTimeout(function(){n._ModuleLoading=!1;$("#emulatorcontrolswrapper").addClass("closed");
$("#gamecontrolslist li").each(function(){0==$(this).attr("data-click-state")&&$(this).mouseup()})},3E3)});$("#emulator").blur(function(b){n._pauseOverride||(f.pauseMainLoop(),$("#emulatorwrapperoverlay").fadeIn())}).focus(function(){f.resumeMainLoop();$("#emulatorwrapperoverlay").hide()}).focus()};l?n._asyncLoop(parseInt(l,10),function(b){n._simulateEmulatorKeypress(51,10,function(){b.next()})},function(){n._simulateEmulatorKeypress(52);M()}):M()});n._loademulator(r,d);n._loadGame(r,g,q,f);n._loadGameDetails(r,
g,q,a)})}};
Crazyerics.prototype._buildGameContent=function(r,g,q){var l=this._getBoxFront(r,g,170),n=document.createElement("img");n.addEventListener("load",function(){$("#gamedetailsboxfront").empty().append(l);$("#gametitle").empty().hide().append(g);var f=232<this.height?this.height:232;$("#gamedetailsboxfront img").addClass("close");$("#gamedetailsbackground").animate({height:f},1E3,function(){$("#gamedetailswrapper").fadeIn(1E3,function(){$("#gametitle").bigText({textAlign:"left",horizontalAlign:"left"});$("#gametitle").fadeIn(500);
$("#gamedetailsboxfront img").removeClass();$("#controlsslider").empty();$.get("/layout/controls/"+r,function(e){$("#controlsslider").append(e)});q()})})},!0);l.load(function(){n.setAttribute("src",l.attr("src"))})};
Crazyerics.prototype._cleanupEmulator=function(){$(document).unbind("fullscreenchange");$(document).unbind("mozfullscreenchange");$(document).unbind("webkitfullscreenchange");$(document).unbind("pointerlockchange");$(document).unbind("mozpointerlockchange");$(document).unbind("webkitpointerlockchange");this._activeSaveStateSlot=0;FS&&(FS=null);if(this._Module){try{this._Module.exit()}catch(r){}this._Module=null}this.emulatorframe&&(this.emulatorframe.remove(),this.emulatorframe=null);$("#emulator").remove()};
Crazyerics.prototype._simulateEmulatorKeypress=function(r,g,q){var l=this;g=g||10;if(this._Module&&this._Module.RI&&this._Module.RI.eventHandler&&!l._keypresslocked){l._keypresslocked=!0;var n;n=$.Event("keydown");n.keyCode=r;n.which=r;this._Module.RI.eventHandler(n);setTimeout(function(){n=$.Event("keyup");n.keyCode=r;n.which=r;l._Module.RI.eventHandler(n);setTimeout(function(){l._keypresslocked=!1;q&&q()},100)},g);$("#emulator").focus()}};
Crazyerics.prototype._setupKeypressInterceptor=function(r,g,q){var l=this;if(this._Module&&this._Module.RI&&this._Module.RI.eventHandler){var n=this._Module.RI.eventHandler;this._Module.RI.eventHandler=function(f){switch(f.type){case "keyup":switch(f.keyCode){case 70:l._Module.requestFullScreen(!0,!0);break;case 49:setTimeout(function(){l._saveState(r,g,q,l._activeSaveStateSlot,function(){})},100);break;case 50:l._activeSaveStateSlot=0===l._activeSaveStateSlot?0:l._activeSaveStateSlot-1;break;case 51:l._activeSaveStateSlot++}}n(f)}}};
Crazyerics.prototype._loademulator=function(r,g){var q=$("<iframe/>",{src:"/load/emulator/"+r,style:"display:none",load:function(){g.resolve(this.contentWindow.Module,this.contentWindow.FS,q)}});$("body").append(q)};Crazyerics.prototype._loadGame=function(r,g,q,l){var n=this;$.get("/load/game?key="+encodeURIComponent(n._compress.gamekey(r,g,q)),function(f){var e;try{e=pako.inflate(f)}catch(d){l.resolve(d);return}n._addToPlayHistory(n._compress.gamekey(r,g,q),r,g,q);l.resolve(null,e)})};
Crazyerics.prototype._loadGameDetails=function(r,g,q,l){var n=this;$.get("/states/load?key="+encodeURIComponent(n._compress.gamekey(r,g,q)),function(f){l.resolve({states:f.states,files:n._decompress.json(f.files)})})};
Crazyerics.prototype._buildFileSystem=function(r,g,q,l,n){r.FS_createDataFile("/",q,l,!0,!0);r.arguments=["-v","/"+q];r.FS_createFolder("/","etc",!0,!0);this._clientdata.retroarch&&this._clientdata.retroarch[g]&&r.FS_createDataFile("/etc","retroarch.cfg",this._clientdata.retroarch[g],!0,!0);for(var f in n)g=this._decompress.bytearray(n[f]),l="/"+q.replace(RegExp(".[a-z]{1,3}$","gi"),"")+".state"+(0==f?"":f),r.FS_createDataFile("/",l,g,!0,!0)};
Crazyerics.prototype._saveState=function(r,g,q,l,n){var f=this;n=q.replace(RegExp(".[a-z]{1,3}$","gi"),"")+".state"+(0==l?"":l);var e,d=f._compress.gamekey(r,g,q);try{e=FS.open(n)}catch(p){console.log(p);return}e&&e.node&&e.node.contents&&(e=f._compress.bytearray(e.node.contents),$.ajax({url:"/states/save?key="+encodeURIComponent(d)+"&slot="+l,data:e,processData:!1,contentType:"text/plain",type:"POST",complete:function(e){e={};e[l]=Date.now();f._addToPlayHistory(d,r,g,q,null,e)}}))};
Crazyerics.prototype._buildRecentlyPlayed=function(r,g){for(var q in r)this._addToPlayHistory(q,r[q].system,r[q].title,r[q].file,r[q].played,r[q].slots);$.isEmptyObject(r)?$("#startfirst").animate({height:"toggle",opacity:"toggle"},500):$("#startplayed").animate({height:"toggle",opacity:"toggle"},500)};
Crazyerics.prototype._addToPlayHistory=function(r,g,q,l,n,f){var e;if(r in this._playhistory){if(this._playhistory[r].played=Date.now(),f)for(e in f)this._addStateToPlayHistory(this._playhistory[r],this._playhistory[r].stateswrapper,e,f[e])}else{var d=this._buildGameLink(g,q,l,120,!0,f);d.li.addClass("close");d.img.load(function(){d.li.removeClass("close")});d.remove.addClass("tooltip").attr("title","Remove this game and all saved states").on("click",function(){d.li.addClass("slideup");$.ajax({url:"/states/delete?key="+
encodeURIComponent(r),type:"DELETE",complete:function(){setTimeout(function(){d.li.remove()},500)}})});var p=$('<div class="statewrapper"></div>');d.li.append(p);this._playhistory[r]={system:g,title:q,file:l,played:n||Date.now(),slots:f||{},stateswrapper:p};if(f)for(e in f)this._addStateToPlayHistory(this._playhistory[r],p,e,f[e]);g=$("#recentplayedwrapper ul");q=g[0];for(l=0;l<g.length;++l)q=$(g[l]).children().length<$(q).children().length?g[l]:q;$(q).append(d.li);$("#recentplayedwrapper").show()}this._toolTips()};
Crazyerics.prototype._addStateToPlayHistory=function(r,g,q,l){var n=this;l=new Date(l);l=$.format.date(l,"E MM/dd/yyyy h:mm:ss a");var f=$('<div data-slot="'+q+'" class="statebutton zoom tooltip" title="Load State Saved '+l+'">'+q+"</div>").on("mousedown",function(){n._pauseOverride=!0}).on("mouseup",function(){n._bootstrap(r.system,r.title,r.file,q);window.scrollTo(0,0)}),e=!1;g.children().each(function(){var d=parseInt($(this).attr("data-slot"),10);q=parseInt(q,10);if(d===q)return f.insertBefore(this),
$(this).remove(),e=!0,!1;if(d>q)return f.insertBefore(this),e=!0,!1});e||g.append(f)};
Crazyerics.prototype._buildGameLink=function(r,g,q,l,n){var f=this;n=n||!1;var e=$('<li class="gamelink"></li>');l=f._getBoxFront(r,g,l);l.addClass("tooltip close");l.attr("title",g);l.load(function(){$(this).removeClass("close").on("mousedown",function(){f._pauseOverride=!0}).on("mouseup",function(){f._bootstrap(r,g,q);window.scrollTo(0,0)})});var d=$('<div class="box zoom"></div>');d.append(l);e.append(d);var p=null;n&&(p=$('<div class="remove"></div>'),d.append(p).on("mouseover",function(){$(p).show()}).on("mouseout",
function(){$(p).hide()}));return{li:e,img:l,remove:p}};Crazyerics.prototype._getBoxFront=function(r,g,q){return $("<img onerror=\"this.src='/images/blanks/"+r+"_"+q+'.png\'" src="/images/boxes/'+r+"/"+g+"/"+q+'.jpg" />')};Crazyerics.prototype._toolTips=function(){$(".tooltip").tooltipster({theme:"tooltipster-shadow",animation:"grow",delay:100})};Crazyerics.prototype._generateLink=function(r,g,q){return this._compress.string(encodeURI(r+"/"+g+"/"+q))};
Crazyerics.prototype._compress={bytearray:function(r){r=pako.deflate(r,{to:"string"});return btoa(r)},json:function(r){r=JSON.stringify(r);r=pako.deflate(r,{to:"string"});return btoa(r)},string:function(r){r=pako.deflate(r,{to:"string"});return btoa(r)},gamekey:function(r,g,q){return this.json({system:r,title:g,file:q})}};
Crazyerics.prototype._decompress={bytearray:function(r){r=new Uint8Array(atob(r).split("").map(function(g){return g.charCodeAt(0)}));return pako.inflate(r)},json:function(r){r=atob(r);r=pako.inflate(r,{to:"string"});return JSON.parse(r)},string:function(r){r=atob(r);return pako.inflate(r,{to:"string"})}};
$.fn.animateRotate=function(r,g,q,l,n){var f=$.speed(q,l,n),e=f.step;return this.each(function(d,l){f.complete=$.proxy(f.complete,l);f.step=function(a){$.style(l,"transform","rotate("+a+"deg)");if(e)return e.apply(l,arguments)};$({deg:r}).animate({deg:g},f)})};Crazyerics.prototype._asyncLoop=function(r,g,q){var l=0,n=!1,f={next:function(){n||(l<r?(l++,g(f)):(n=!0,q()))},iteration:function(){return l-1},"break":function(){n=!0;q()}};f.next();return f};var crazyerics=new Crazyerics;
!function(r){r.fn.autoComplete=function(g){var q=r.extend({},r.fn.autoComplete.defaults,g);return"string"==typeof g?(this.each(function(){var l=r(this);"destroy"==g&&(r(window).off("resize.autocomplete",l.updateSC),l.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"),l.data("autocomplete")?l.attr("autocomplete",l.data("autocomplete")):l.removeAttr("autocomplete"),r(l.data("sc")).remove(),l.removeData("sc").removeData("autocomplete"))}),this):this.each(function(){function g(f){var e=
n.val();if(n.cache[e]=f,f.length&&e.length>=q.minChars){for(var d="",l=0;l<f.length;l++)d+=q.renderItem(f[l],e);n.sc.html(d);n.updateSC(0)}else n.sc.hide()}var n=r(this);n.sc=r('<div class="autocomplete-suggestions '+q.menuClass+'"></div>');n.data("sc",n.sc).data("autocomplete",n.attr("autocomplete"));n.attr("autocomplete","off");n.cache={};n.last_val="";n.updateSC=function(f,e){if(n.sc.css({top:n.offset().top+n.outerHeight(),left:n.offset().left,width:n.outerWidth()}),!f&&(n.sc.show(),n.sc.maxHeight||
(n.sc.maxHeight=parseInt(n.sc.css("max-height"))),n.sc.suggestionHeight||(n.sc.suggestionHeight=r(".autocomplete-suggestion",n.sc).first().outerHeight()),n.sc.suggestionHeight))if(e){var d=n.sc.scrollTop(),g=e.offset().top-n.sc.offset().top;0<g+n.sc.suggestionHeight-n.sc.maxHeight?n.sc.scrollTop(g+n.sc.suggestionHeight+d-n.sc.maxHeight):0>g&&n.sc.scrollTop(g+d)}else n.sc.scrollTop(0)};r(window).on("resize.autocomplete",n.updateSC);n.sc.appendTo("body");n.sc.on("mouseleave",".autocomplete-suggestion",
function(){r(".autocomplete-suggestion.selected").removeClass("selected")});n.sc.on("mouseenter",".autocomplete-suggestion",function(){r(".autocomplete-suggestion.selected").removeClass("selected");r(this).addClass("selected")});n.sc.on("mousedown",".autocomplete-suggestion",function(f){var e=r(this),d=e.data("val");(d||e.hasClass("autocomplete-suggestion"))&&(n.val(d),q.onSelect(f,d,e),n.sc.hide())});n.on("blur.autocomplete",function(){try{over_sb=r(".autocomplete-suggestions:hover").length}catch(f){over_sb=
0}over_sb?n.is(":focus")||setTimeout(function(){n.focus()},20):(n.last_val=n.val(),n.sc.hide(),setTimeout(function(){n.sc.hide()},350))});q.minChars||n.on("focus.autocomplete",function(){n.last_val="\n";n.trigger("keyup.autocomplete")});n.on("keydown.autocomplete",function(f){if((40==f.which||38==f.which)&&n.sc.html()){var e,d=r(".autocomplete-suggestion.selected",n.sc);return d.length?(e=40==f.which?d.next(".autocomplete-suggestion"):d.prev(".autocomplete-suggestion"),e.length?(d.removeClass("selected"),
n.val(e.addClass("selected").data("val"))):(d.removeClass("selected"),n.val(n.last_val),e=0)):(e=40==f.which?r(".autocomplete-suggestion",n.sc).first():r(".autocomplete-suggestion",n.sc).last(),n.val(e.addClass("selected").data("val"))),n.updateSC(0,e),!1}if(27==f.which)n.val(n.last_val).sc.hide();else if(13==f.which||9==f.which)d=r(".autocomplete-suggestion.selected",n.sc),d.length&&n.sc.is(":visible")&&(q.onSelect(f,d.data("val"),d),setTimeout(function(){n.sc.hide()},20))});n.on("keyup.autocomplete",
function(f){if(!~r.inArray(f.which,[13,27,35,36,37,38,39,40])){var e=n.val();if(e.length>=q.minChars){if(e!=n.last_val){if(n.last_val=e,clearTimeout(n.timer),q.cache){if(e in n.cache)return void g(n.cache[e]);for(f=1;f<e.length-q.minChars;f++){var d=e.slice(0,e.length-f);if(d in n.cache&&!n.cache[d].length)return void g([])}}n.timer=setTimeout(function(){q.source(e,g)},q.delay)}}else n.last_val=e,n.sc.hide()}})})};r.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(g,
q){var l=new RegExp("("+q.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+g+'">'+g.replace(l,"<b>$1</b>")+"</div>"},onSelect:function(g,q,l){}}}(jQuery);
(function(r){var g={rotateText:null,fontSizeFactor:.8,maximumFontSize:null,limitingDimension:"both",horizontalAlign:"center",verticalAlign:"center",textAlign:"center",whiteSpace:"nowrap"};r.fn.bigText=function(q){return this.each(function(){q=r.extend({},g,q);var l=r(this),n=l.parent();l.css("visibility","hidden");l.css({display:"inline-block",clear:"both","float":"left","font-size":1E3*q.fontSizeFactor+"px","line-height":"1000px","white-space":q.whiteSpace,"text-align":q.textAlign,position:"relative",
padding:0,margin:0,left:"50%",top:"50%"});var f=parseInt(n.css("padding-left")),e=parseInt(n.css("padding-top")),d=parseInt(n.css("padding-right")),p=parseInt(n.css("padding-bottom")),a=l.outerWidth(),c=l.outerHeight(),b={};if(null!==q.rotateText){if("number"!==typeof q.rotateText)throw"bigText error: rotateText value must be a number";a="rotate("+q.rotateText+"deg)";b={"-webkit-transform":a,"-ms-transform":a,"-moz-transform":a,"-o-transform":a,transform:a};l.css(b);c=Math.abs(Math.sin(q.rotateText*
Math.PI/180));b=Math.abs(Math.cos(q.rotateText*Math.PI/180));a=l.outerWidth()*b+l.outerHeight()*c;c=l.outerWidth()*c+l.outerHeight()*b}var f=(n.innerWidth()-f-d)/a,e=(n.innerHeight()-e-p)/c,k;"width"===q.limitingDimension.toLowerCase()?(k=Math.floor(1E3*f),n.height(k)):"height"===q.limitingDimension.toLowerCase()?k=Math.floor(1E3*e):f<e?k=Math.floor(1E3*f):f>=e&&(k=Math.floor(1E3*e));e=k*q.fontSizeFactor;null!==q.maximumFontSize&&e>q.maximumFontSize&&(e=q.maximumFontSize,k=e/q.fontSizeFactor);l.css({"font-size":Math.floor(e)+
"px","line-height":Math.ceil(k)+"px","margin-bottom":"0px","margin-right":"0px"});"height"===q.limitingDimension.toLowerCase()&&n.width(l.width()+4+"px");n={};switch(q.verticalAlign.toLowerCase()){case "top":n.top="0%";break;case "bottom":n.top="100%";n["margin-top"]=Math.floor(-l.innerHeight())+"px";break;default:n["margin-top"]=Math.floor(-l.innerHeight()/2)+"px"}switch(q.horizontalAlign.toLowerCase()){case "left":n.left="0%";break;case "right":n.left="100%";n["margin-left"]=Math.floor(-l.innerWidth())+
"px";break;default:n["margin-left"]=Math.floor(-l.innerWidth()/2)+"px"}l.css(n);l.css("visibility","visible")})}})(jQuery);var DateFormat={};
!function(r){var g="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),q="Sun Mon Tue Wed Thu Fri Sat".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),n="January February March April May June July August September October November December".split(" "),f={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/;r.format=function(){function d(a){var c,
b,d,e,f,g="";return-1!==a.indexOf(".")&&(e=a.split("."),a=e[0],g=e[e.length-1]),f=a.split(":"),3===f.length?(c=f[0],b=f[1],d=f[2].replace(/\s.+/,"").replace(/[a-z]/gi,""),a=a.replace(/\s.+/,"").replace(/[a-z]/gi,""),{time:a,hour:c,minute:b,second:d,millis:g}):{time:"",hour:"",minute:"",second:"",millis:""}}function p(a,c){for(var b=c-String(a).length,d=0;b>d;d++)a="0"+a;return a}return{parseDate:function(a){var c,b={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==
typeof a)return this.parseDate(new Date(a));if("function"==typeof a.getFullYear)b.year=String(a.getFullYear()),b.month=String(a.getMonth()+1),b.dayOfMonth=String(a.getDate()),b.time=d(a.toTimeString()+"."+a.getMilliseconds());else if(-1!=a.search(e))c=a.split(/[T\+-]/),b.year=c[0],b.month=c[1],b.dayOfMonth=c[2],b.time=d(c[3].split(".")[0]);else switch(c=a.split(" "),6===c.length&&isNaN(c[5])&&(c[c.length]="()"),c.length){case 6:b.year=c[5];a=c[1];b.month=f[a]||a;b.dayOfMonth=c[2];b.time=d(c[3]);break;
case 2:a=c[0].split("-");b.year=a[0];b.month=a[1];b.dayOfMonth=a[2];b.time=d(c[1]);break;case 7:case 9:case 10:b.year=c[3];a=c[1];b.month=f[a]||a;b.dayOfMonth=c[2];b.time=d(c[4]);break;case 1:a=c[0].split("");b.year=a[0]+a[1]+a[2]+a[3];b.month=a[5]+a[6];b.dayOfMonth=a[8]+a[9];b.time=d(a[13]+a[14]+a[15]+a[16]+a[17]+a[18]+a[19]+a[20]);break;default:return null}return b.date=b.time?new Date(b.year,b.month-1,b.dayOfMonth,b.time.hour,b.time.minute,b.time.second,b.time.millis):new Date(b.year,b.month-1,
b.dayOfMonth),b.dayOfWeek=String(b.date.getDay()),b},date:function(a,c){try{var b=this.parseDate(a);if(null===b)return a;for(var d,e=b.year,f=b.month,r=b.dayOfMonth,G=b.dayOfWeek,t=b.time,m=b="",E="",B=!1,C=0;C<c.length;C++){var T=c.charAt(C),H=c.charAt(C+1);if(B)"'"==T?(m+=""===b?"'":b,b="",B=!1):b+=T;else switch(b+=T,E="",b){case "ddd":var x=m,y,K=G;y=g[parseInt(K,10)]||K;m=x+y;b="";break;case "dd":if("d"===H)break;m+=p(r,2);b="";break;case "d":if("d"===H)break;m+=parseInt(r,10);b="";break;case "D":r=
1==r||21==r||31==r?parseInt(r,10)+"st":2==r||22==r?parseInt(r,10)+"nd":3==r||23==r?parseInt(r,10)+"rd":parseInt(r,10)+"th";m+=r;b="";break;case "MMMM":var x=m,K=f,L=parseInt(K,10)-1,m=x+(n[L]||K),b="";break;case "MMM":if("M"===H)break;var x=m,K=f,O=parseInt(K,10)-1,m=x+(l[O]||K),b="";break;case "MM":if("M"===H)break;m+=p(f,2);b="";break;case "M":if("M"===H)break;m+=parseInt(f,10);b="";break;case "y":case "yyy":if("y"===H)break;m+=b;b="";break;case "yy":if("y"===H)break;m+=String(e).slice(-2);b="";
break;case "yyyy":m+=e;b="";break;case "HH":m+=p(t.hour,2);b="";break;case "H":if("H"===H)break;m+=parseInt(t.hour,10);b="";break;case "hh":d=0===parseInt(t.hour,10)?12:13>t.hour?t.hour:t.hour-12;m+=p(d,2);b="";break;case "h":if("h"===H)break;d=0===parseInt(t.hour,10)?12:13>t.hour?t.hour:t.hour-12;m+=parseInt(d,10);b="";break;case "mm":m+=p(t.minute,2);b="";break;case "m":if("m"===H)break;m+=t.minute;b="";break;case "ss":m+=p(t.second.substring(0,2),2);b="";break;case "s":if("s"===H)break;m+=t.second;
b="";break;case "S":case "SS":if("S"===H)break;m+=b;b="";break;case "SSS":var D="000"+t.millis.substring(0,3),m=m+D.substring(D.length-3),b="";break;case "a":m+=12<=t.hour?"PM":"AM";b="";break;case "p":m+=12<=t.hour?"p.m.":"a.m.";b="";break;case "E":var x=m,S,K=G;S=q[parseInt(K,10)]||K;m=x+S;b="";break;case "'":b="";B=!0;break;default:m+=T,b=""}}return m+E}catch(X){return console&&console.log&&console.log(X),a}},prettyDate:function(a){var c,b,d;return("string"==typeof a||"number"==typeof a)&&(c=new Date(a)),
"object"==typeof a&&(c=new Date(a.toString())),b=((new Date).getTime()-c.getTime())/1E3,d=Math.floor(b/86400),isNaN(d)||0>d?void 0:60>b?"just now":120>b?"1 minute ago":3600>b?Math.floor(b/60)+" minutes ago":7200>b?"1 hour ago":86400>b?Math.floor(b/3600)+" hours ago":1===d?"Yesterday":7>d?d+" days ago":31>d?Math.ceil(d/7)+" weeks ago":31<=d?"more than 5 weeks ago":void 0},toBrowserTimeZone:function(a,c){return this.date(new Date(a),c||"MM/dd/yyyy HH:mm:ss")}}}()}(DateFormat);
(function(r){r.format=DateFormat.format})(jQuery);
(function(r,g,q){function l(a,c){this.bodyOverflowX;this.callbacks={hide:[],show:[]};this.checkInterval=null;this.Content;this.$el=r(a);this.$elProxy;this.elProxyPosition;this.enabled=!0;this.options=r.extend({},e,c);this.mouseIsOverProxy=!1;this.namespace="tooltipster-"+Math.round(1E5*Math.random());this.Status="hidden";this.timerShow=this.timerHide=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");this._init()}
function n(a,c){var b=!0;r.each(a,function(d,e){if("undefined"===typeof c[d]||a[d]!==c[d])return b=!1});return b}function f(){var a=(q.body||q.documentElement).style,c="transition";if("string"==typeof a[c])return!0;v=["Moz","Webkit","Khtml","O","ms"];for(var c=c.charAt(0).toUpperCase()+c.substr(1),b=0;b<v.length;b++)if("string"==typeof a[v[b]+c])return!0;return!1}var e={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,
maxWidth:null,functionInit:function(a,c){},functionBefore:function(a,c){c()},functionReady:function(a,c){},functionAfter:function(a){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(a){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",
touchDevices:!0,trigger:"hover",updateAnimation:!0};l.prototype={_init:function(){var a=this;if(q.querySelector){var c=null;void 0===a.$el.data("tooltipster-initialTitle")&&(c=a.$el.attr("title"),void 0===c&&(c=null),a.$el.data("tooltipster-initialTitle",c));null!==a.options.content?a._content_set(a.options.content):a._content_set(c);c=a.options.functionInit.call(a.$el,a.$el,a.Content);"undefined"!==typeof c&&a._content_set(c);a.$el.removeAttr("title").addClass("tooltipstered");!d&&a.options.iconDesktop||
d&&a.options.iconTouch?("string"===typeof a.options.icon?(a.$elProxy=r('<span class="'+a.options.iconTheme+'"></span>'),a.$elProxy.text(a.options.icon)):a.$elProxy=a.options.iconCloning?a.options.icon.clone(!0):a.options.icon,a.$elProxy.insertAfter(a.$el)):a.$elProxy=a.$el;if("hover"==a.options.trigger){if(a.$elProxy.on("mouseenter."+a.namespace,function(){if(p||!d||a.options.touchDevices)a.mouseIsOverProxy=!0,a._show()}).on("mouseleave."+a.namespace,function(){if(p||!d||a.options.touchDevices)a.mouseIsOverProxy=
!1}),d&&a.options.touchDevices)a.$elProxy.on("touchstart."+a.namespace,function(){a._showNow()})}else if("click"==a.options.trigger)a.$elProxy.on("click."+a.namespace,function(){(p||!d||a.options.touchDevices)&&a._show()})}},_show:function(){var a=this;"shown"!=a.Status&&"appearing"!=a.Status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a._showNow()},a.options.delay):a._showNow())},_showNow:function(a){var c=this;
c.options.functionBefore.call(c.$el,c.$el,function(){if(c.enabled&&null!==c.Content){a&&c.callbacks.show.push(a);c.callbacks.hide=[];clearTimeout(c.timerShow);c.timerShow=null;clearTimeout(c.timerHide);c.timerHide=null;c.options.onlyOne&&r(".tooltipstered").not(c.$el).each(function(b,a){var c=r(a),d=c.data("tooltipster-ns");r.each(d,function(b,a){var d=c.data(a),e=d.status(),f=d.option("autoClose");"hidden"!==e&&"disappearing"!==e&&f&&d.hide()})});var b=function(){c.Status="shown";r.each(c.callbacks.show,
function(b,a){a.call(c.$el)});c.callbacks.show=[]};if("hidden"!==c.Status){var e=0;"disappearing"===c.Status?(c.Status="appearing",f()?(c.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+c.options.animation+"-show"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(b)):c.$tooltip.stop().fadeIn(b)):"shown"===c.Status&&b()}else{c.Status="appearing";e=c.options.speed;c.bodyOverflowX=r("body").css("overflow-x");r("body").css("overflow-x","hidden");var h=
"tooltipster-"+c.options.animation;c.$tooltip=r('<div class="tooltipster-base '+c.options.theme+'" style="'+(c.options.minWidth?"min-width:"+Math.round(c.options.minWidth)+"px;":"")+" "+(c.options.maxWidth?"max-width:"+Math.round(c.options.maxWidth)+"px;":"")+" "+(c.options.interactive?"pointer-events: auto;":"")+" "+("-webkit-transition-duration: "+c.options.speed+"ms; -webkit-animation-duration: "+c.options.speed+"ms; -moz-transition-duration: "+c.options.speed+"ms; -moz-animation-duration: "+c.options.speed+
"ms; -o-transition-duration: "+c.options.speed+"ms; -o-animation-duration: "+c.options.speed+"ms; -ms-transition-duration: "+c.options.speed+"ms; -ms-animation-duration: "+c.options.speed+"ms; transition-duration: "+c.options.speed+"ms; animation-duration: "+c.options.speed+"ms;")+'"><div class="tooltipster-content"></div></div>');f()&&c.$tooltip.addClass(h);c._content_insert();c.$tooltip.appendTo("body");c.reposition();c.options.functionReady.call(c.$el,c.$el,c.$tooltip);f()?(c.$tooltip.addClass(h+
"-show"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(b)):c.$tooltip.css("display","none").fadeIn(c.options.speed,b);c._interval_set();r(g).on("scroll."+c.namespace+" resize."+c.namespace,function(){c.reposition()});if(c.options.autoClose)if(r("body").off("."+c.namespace),"hover"==c.options.trigger){d&&setTimeout(function(){r("body").on("touchstart."+c.namespace,function(){c.hide()})},0);if(c.options.interactive){if(d)c.$tooltip.on("touchstart."+c.namespace,function(b){b.stopPropagation()});
var l=null;c.$elProxy.add(c.$tooltip).on("mouseleave."+c.namespace+"-autoClose",function(){clearTimeout(l);l=setTimeout(function(){c.hide()},c.options.interactiveTolerance)}).on("mouseenter."+c.namespace+"-autoClose",function(){clearTimeout(l)})}else c.$elProxy.on("mouseleave."+c.namespace+"-autoClose",function(){c.hide()});if(c.options.hideOnClick)c.$elProxy.on("click."+c.namespace+"-autoClose",function(){c.hide()})}else if("click"==c.options.trigger&&(setTimeout(function(){r("body").on("click."+
c.namespace+" touchstart."+c.namespace,function(){c.hide()})},0),c.options.interactive))c.$tooltip.on("click."+c.namespace+" touchstart."+c.namespace,function(b){b.stopPropagation()})}0<c.options.timer&&(c.timerHide=setTimeout(function(){c.timerHide=null;c.hide()},c.options.timer+e))}})},_interval_set:function(){var a=this;a.checkInterval=setInterval(function(){if(0===r("body").find(a.$el).length||0===r("body").find(a.$elProxy).length||"hidden"==a.Status||0===r("body").find(a.$tooltip).length)"shown"!=
a.Status&&"appearing"!=a.Status||a.hide(),a._interval_cancel();else if(a.options.positionTracker){var c=a._repositionInfo(a.$elProxy),b=!1;n(c.dimension,a.elProxyPosition.dimension)&&("fixed"===a.$elProxy.css("position")?n(c.position,a.elProxyPosition.position)&&(b=!0):n(c.offset,a.elProxyPosition.offset)&&(b=!0));b||(a.reposition(),a.options.positionTrackerCallback.call(a,a.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval);this.checkInterval=null},_content_set:function(a){"object"===
typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0));this.Content=a},_content_insert:function(){var a=this.$tooltip.find(".tooltipster-content");"string"!==typeof this.Content||this.options.contentAsHTML?a.empty().append(this.Content):a.text(this.Content)},_update:function(a){var c=this;c._content_set(a);null!==c.Content?"hidden"!==c.Status&&(c._content_insert(),c.reposition(),c.options.updateAnimation&&(f()?(c.$tooltip.css({width:"","-webkit-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",
"-moz-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=c.Status&&(c.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==
c.Status&&c.$tooltip.css({"-webkit-transition":c.options.speed+"ms","-moz-transition":c.options.speed+"ms","-o-transition":c.options.speed+"ms","-ms-transition":c.options.speed+"ms",transition:c.options.speed+"ms"})},c.options.speed))},c.options.speed)):c.$tooltip.fadeTo(c.options.speed,.5,function(){"hidden"!=c.Status&&c.$tooltip.fadeTo(c.options.speed,1)}))):c.hide()},_repositionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),
top:parseInt(a.css("top"))}}},hide:function(a){var c=this;a&&c.callbacks.hide.push(a);c.callbacks.show=[];clearTimeout(c.timerShow);c.timerShow=null;clearTimeout(c.timerHide);c.timerHide=null;var b=function(){r.each(c.callbacks.hide,function(b,a){a.call(c.$el)});c.callbacks.hide=[]};"shown"==c.Status||"appearing"==c.Status?(c.Status="disappearing",a=function(){c.Status="hidden";"object"==typeof c.Content&&null!==c.Content&&c.Content.detach();c.$tooltip.remove();c.$tooltip=null;r(g).off("."+c.namespace);
r("body").off("."+c.namespace).css("overflow-x",c.bodyOverflowX);r("body").off("."+c.namespace);c.$elProxy.off("."+c.namespace+"-autoClose");c.options.functionAfter.call(c.$el,c.$el);b()},f()?(c.$tooltip.clearQueue().removeClass("tooltipster-"+c.options.animation+"-show").addClass("tooltipster-dying"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(a)):c.$tooltip.stop().fadeOut(c.options.speed,a)):"hidden"==c.Status&&b();return c},show:function(a){this._showNow(a);return this},
update:function(a){return this.content(a)},content:function(a){if("undefined"===typeof a)return this.Content;this._update(a);return this},reposition:function(){if(0!==r("body").find(this.$tooltip).length){var a=function(b,a){0>e.offset.top-r(g).scrollTop()-l-O-12&&-1<a.indexOf("top")&&(D=b);e.offset.top+e.dimension.height+l+12+O>r(g).scrollTop()+r(g).height()&&-1<a.indexOf("bottom")&&(D=b,L=e.offset.top-l-O-12)},c=function(){var a=r(g).scrollLeft();0>K-a&&(b=K-a,K=a);K+f-a>d&&(b=K-(d+a-f),K=d+a-f)};
this.$tooltip.css("width","");this.elProxyPosition=this._repositionInfo(this.$elProxy);var b=null,d=r(g).width(),e=this.elProxyPosition,f=this.$tooltip.outerWidth(!1);this.$tooltip.innerWidth();var l=this.$tooltip.outerHeight(!1);if(this.$elProxy.is("area")){var n=this.$elProxy.attr("shape"),p=this.$elProxy.parent().attr("name"),m=r('img[usemap="#'+p+'"]'),p=m.offset().left,q=m.offset().top,B=void 0!==this.$elProxy.attr("coords")?this.$elProxy.attr("coords").split(","):void 0;if("circle"==n)n=parseInt(B[0]),
m=parseInt(B[1]),B=parseInt(B[2]),e.dimension.height=2*B,e.dimension.width=2*B,e.offset.top=q+m-B,e.offset.left=p+n-B;else if("rect"==n){var n=parseInt(B[0]),m=parseInt(B[1]),C=parseInt(B[2]),B=parseInt(B[3]);e.dimension.height=B-m;e.dimension.width=C-n;e.offset.top=q+m;e.offset.left=p+n}else if("poly"==n){for(var T=C=m=n=0,H="even",x=0;x<B.length;x++){var y=parseInt(B[x]);"even"==H?(y>C&&(C=y,0===x&&(n=C)),y<n&&(n=y),H="odd"):(y>T&&(T=y,1==x&&(m=T)),y<m&&(m=y),H="even")}e.dimension.height=T-m;e.dimension.width=
C-n;e.offset.top=q+m;e.offset.left=p+n}else e.dimension.height=m.outerHeight(!1),e.dimension.width=m.outerWidth(!1),e.offset.top=q,e.offset.left=p}var K=0,L=q=0,O=parseInt(this.options.offsetY),p=parseInt(this.options.offsetX),D=this.options.position;"top"==D&&(q=e.offset.left+f-(e.offset.left+e.dimension.width),K=e.offset.left+p-q/2,L=e.offset.top-l-O-12,c(),a("bottom","top"));"top-left"==D&&(K=e.offset.left+p,L=e.offset.top-l-O-12,c(),a("bottom-left","top-left"));"top-right"==D&&(K=e.offset.left+
e.dimension.width+p-f,L=e.offset.top-l-O-12,c(),a("bottom-right","top-right"));"bottom"==D&&(q=e.offset.left+f-(e.offset.left+e.dimension.width),K=e.offset.left-q/2+p,L=e.offset.top+e.dimension.height+O+12,c(),a("top","bottom"));"bottom-left"==D&&(K=e.offset.left+p,L=e.offset.top+e.dimension.height+O+12,c(),a("top-left","bottom-left"));"bottom-right"==D&&(K=e.offset.left+e.dimension.width+p-f,L=e.offset.top+e.dimension.height+O+12,c(),a("top-right","bottom-right"));"left"==D&&(K=e.offset.left-p-f-
12,q=e.offset.left+p+e.dimension.width+12,a=e.offset.top+l-(e.offset.top+e.dimension.height),L=e.offset.top-a/2-O,0>K&&q+f>d?(a=2*parseFloat(this.$tooltip.css("border-width")),c=f+K-a,this.$tooltip.css("width",c+"px"),l=this.$tooltip.outerHeight(!1),K=e.offset.left-p-c-12-a,a=e.offset.top+l-(e.offset.top+e.dimension.height),L=e.offset.top-a/2-O):0>K&&(K=e.offset.left+p+e.dimension.width+12,b="left"));"right"==D&&(K=e.offset.left+p+e.dimension.width+12,q=e.offset.left-p-f-12,a=e.offset.top+l-(e.offset.top+
e.dimension.height),L=e.offset.top-a/2-O,K+f>d&&0>q?(a=2*parseFloat(this.$tooltip.css("border-width")),this.$tooltip.css("width",d-K-a+"px"),l=this.$tooltip.outerHeight(!1),a=e.offset.top+l-(e.offset.top+e.dimension.height),L=e.offset.top-a/2-O):K+f>d&&(K=e.offset.left-p-f-12,b="right"));this.options.arrow&&(a="tooltipster-arrow-"+D,c=1>this.options.arrowColor.length?this.$tooltip.css("background-color"):this.options.arrowColor,b?"left"==b?(a="tooltipster-arrow-right",b=""):"right"==b?(a="tooltipster-arrow-left",
b=""):b="left:"+Math.round(b)+"px;":b="","top"==D||"top-left"==D||"top-right"==D?(p=parseFloat(this.$tooltip.css("border-bottom-width")),q=this.$tooltip.css("border-bottom-color")):"bottom"==D||"bottom-left"==D||"bottom-right"==D?(p=parseFloat(this.$tooltip.css("border-top-width")),q=this.$tooltip.css("border-top-color")):"left"==D?(p=parseFloat(this.$tooltip.css("border-right-width")),q=this.$tooltip.css("border-right-color")):"right"==D?(p=parseFloat(this.$tooltip.css("border-left-width")),q=this.$tooltip.css("border-left-color")):
(p=parseFloat(this.$tooltip.css("border-bottom-width")),q=this.$tooltip.css("border-bottom-color")),1<p&&p++,B="",0!==p&&(B="",q="border-color: "+q+";",-1!==a.indexOf("bottom")?B="margin-top: -"+Math.round(p)+"px;":-1!==a.indexOf("top")?B="margin-bottom: -"+Math.round(p)+"px;":-1!==a.indexOf("left")?B="margin-right: -"+Math.round(p)+"px;":-1!==a.indexOf("right")&&(B="margin-left: -"+Math.round(p)+"px;"),B='<span class="tooltipster-arrow-border" style="'+B+" "+q+';"></span>'),this.$tooltip.find(".tooltipster-arrow").remove(),
this.$tooltip.append('<div class="'+a+' tooltipster-arrow" style="'+b+'">'+B+'<span style="border-color:'+c+';"></span></div>'));this.$tooltip.css({top:Math.round(L)+"px",left:Math.round(K)+"px"})}return this},enable:function(){this.enabled=!0;return this},disable:function(){this.hide();this.enabled=!1;return this},destroy:function(){var a=this;a.hide();a.$el[0]!==a.$elProxy[0]&&a.$elProxy.remove();a.$el.removeData(a.namespace).off("."+a.namespace);var c=a.$el.data("tooltipster-ns");1===c.length?
(c=null,"previous"===a.options.restoration?c=a.$el.data("tooltipster-initialTitle"):"current"===a.options.restoration&&(c="string"===typeof a.Content?a.Content:r("<div></div>").append(a.Content).html()),c&&a.$el.attr("title",c),a.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")):(c=r.grep(c,function(b,c){return b!==a.namespace}),a.$el.data("tooltipster-ns",c));return a},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:
void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(a,c){if("undefined"==typeof c)return this.options[a];this.options[a]=c;return this},status:function(){return this.Status}};r.fn.tooltipster=function(){var a=arguments;if(0===this.length){if("string"===typeof a[0]){var c=!0;switch(a[0]){case "setDefaults":r.extend(e,a[1]);break;default:c=!1}return c?!0:this}return this}if("string"===typeof a[0]){var b="#*$~&";this.each(function(){var c=r(this).data("tooltipster-ns");
if(c=c?r(this).data(c[0]):null){if("function"===typeof c[a[0]])var d=c[a[0]](a[1],a[2]);else throw Error('Unknown method .tooltipster("'+a[0]+'")');if(d!==c)return b=d,!1}else throw Error("You called Tooltipster's \""+a[0]+'" method on an uninitialized element');});return"#*$~&"!==b?b:this}var d=[],f=(c=a[0]&&"undefined"!==typeof a[0].multiple)&&a[0].multiple||!c&&e.multiple,g=(c=a[0]&&"undefined"!==typeof a[0].debug)&&a[0].debug||!c&&e.debug;this.each(function(){var b=!1,c=r(this).data("tooltipster-ns"),
e=null;c?f?b=!0:g&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):b=!0;b&&(e=new l(this,a[0]),c||(c=[]),c.push(e.namespace),r(this).data("tooltipster-ns",c),r(this).data(e.namespace,e));d.push(e)});return f?d:this};var d=!!("ontouchstart"in g),p=!1;r("body").one("mousemove",function(){p=!0})})(jQuery,window,document);
!function(r){"function"==typeof define&&define.amd?define(["jquery"],r):r(jQuery)}(function(r){r.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]};r.expr[":"]["has-src"]=function(g){return r(g).is('img[src][src!=""]')};r.expr[":"].uncached=function(g){return r(g).is(":has-src")?!g.complete:!1};r.fn.waitForImages=function(){var g,q,l,n=0,f=0,e=r.Deferred();if(r.isPlainObject(arguments[0])?(l=arguments[0].waitForAll,
q=arguments[0].each,g=arguments[0].finished):1===arguments.length&&"boolean"===r.type(arguments[0])?l=arguments[0]:(g=arguments[0],q=arguments[1],l=arguments[2]),g=g||r.noop,q=q||r.noop,l=!!l,!r.isFunction(g)||!r.isFunction(q))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var d=r(this),p=[],a=r.waitForImages.hasImageProperties||[],c=r.waitForImages.hasImageAttributes||[],b=/url\(\s*(['"]?)(.*?)\1\s*\)/g;l?d.find("*").addBack().each(function(){var d=r(this);d.is("img:has-src")&&
p.push({src:d.attr("src"),element:d[0]});r.each(a,function(a,c){var e,f=d.css(c);if(!f)return!0;for(;e=b.exec(f);)p.push({src:e[2],element:d[0]})});r.each(c,function(b,a){var c,e=d.attr(a);return e?(c=e.split(","),void r.each(c,function(b,a){a=r.trim(a).split(" ")[0];p.push({src:a,element:d[0]})})):!0})}):d.find("img:has-src").each(function(){p.push({src:this.src,element:this})});n=p.length;f=0;0===n&&(g.call(d[0]),e.resolveWith(d[0]));r.each(p,function(b,a){var c=new Image;r(c).one("load.waitForImages error.waitForImages",
function G(b){b=[f,n,"load"==b.type];return f++,q.apply(a.element,b),e.notifyWith(a.element,b),r(this).off("load.waitForImages error.waitForImages",G),f==n?(g.call(d[0]),e.resolveWith(d[0]),!1):void 0});c.src=a.src})}),e.promise()}});
!function(r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=r()}(function(){return function g(q,l,n){function f(d,a){if(!l[d]){if(!q[d]){var c="function"==typeof require&&require;if(!a&&c)return c(d,!0);if(e)return e(d,!0);c=Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c;}c=l[d]={exports:{}};
q[d][0].call(c.exports,function(b){var a=q[d][1][b];return f(a?a:b)},c,c.exports,g,q,l,n)}return l[d].exports}for(var e="function"==typeof require&&require,d=0;d<n.length;d++)f(n[d]);return f}({1:[function(g,q,l){function n(a,c){var d=new b(c);if(d.push(a,!0),d.err)throw d.msg;return d.result}var f=g("./zlib/deflate.js"),e=g("./utils/common"),d=g("./utils/strings"),p=g("./zlib/messages"),a=g("./zlib/zstream"),c=Object.prototype.toString,b=function(b){b=this.options=e.assign({level:-1,method:8,chunkSize:16384,
windowBits:15,memLevel:8,strategy:0,to:""},b||{});b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&16>b.windowBits&&(b.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new a;this.strm.avail_out=0;var c=f.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(0!==c)throw Error(p[c]);b.header&&f.deflateSetHeader(this.strm,b.header)};b.prototype.push=function(b,a){var g,l,n=this.strm,p=this.options.chunkSize;if(this.ended)return!1;
l=a===~~a?a:!0===a?4:0;"string"==typeof b?n.input=d.string2buf(b):"[object ArrayBuffer]"===c.call(b)?n.input=new Uint8Array(b):n.input=b;n.next_in=0;n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new e.Buf8(p),n.next_out=0,n.avail_out=p),g=f.deflate(n,l),1!==g&&0!==g)return this.onEnd(g),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||4!==l&&2!==l)||this.onData("string"===this.options.to?d.buf2binstring(e.shrinkBuf(n.output,n.next_out)):e.shrinkBuf(n.output,n.next_out))}while((0<n.avail_in||
0===n.avail_out)&&1!==g);return 4===l?(g=f.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,0===g):2===l?(this.onEnd(0),n.avail_out=0,!0):!0};b.prototype.onData=function(b){this.chunks.push(b)};b.prototype.onEnd=function(b){0===b&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};l.Deflate=b;l.deflate=n;l.deflateRaw=function(b,a){return a=a||{},a.raw=!0,n(b,a)};l.gzip=function(b,a){return a=a||
{},a.gzip=!0,n(b,a)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate.js":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(g,q,l){function n(b,a){var c=new h(a);if(c.push(b,!0),c.err)throw c.msg;return c.result}var f=g("./zlib/inflate.js"),e=g("./utils/common"),d=g("./utils/strings"),p=g("./zlib/constants"),a=g("./zlib/messages"),c=g("./zlib/zstream"),b=g("./zlib/gzheader"),k=Object.prototype.toString,h=function(d){var h=this.options=e.assign({chunkSize:16384,windowBits:0,to:""},d||
{});h.raw&&0<=h.windowBits&&16>h.windowBits&&(h.windowBits=-h.windowBits,0===h.windowBits&&(h.windowBits=-15));!(0<=h.windowBits&&16>h.windowBits)||d&&d.windowBits||(h.windowBits+=32);15<h.windowBits&&48>h.windowBits&&0===(15&h.windowBits)&&(h.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new c;this.strm.avail_out=0;d=f.inflateInit2(this.strm,h.windowBits);if(d!==p.Z_OK)throw Error(a[d]);this.header=new b;f.inflateGetHeader(this.strm,this.header)};h.prototype.push=
function(b,a){var c,h,g,l,n,q=this.strm,T=this.options.chunkSize,H=!1;if(this.ended)return!1;h=a===~~a?a:!0===a?p.Z_FINISH:p.Z_NO_FLUSH;"string"==typeof b?q.input=d.binstring2buf(b):"[object ArrayBuffer]"===k.call(b)?q.input=new Uint8Array(b):q.input=b;q.next_in=0;q.avail_in=q.input.length;do{if(0===q.avail_out&&(q.output=new e.Buf8(T),q.next_out=0,q.avail_out=T),c=f.inflate(q,p.Z_NO_FLUSH),c===p.Z_BUF_ERROR&&!0===H&&(c=p.Z_OK,H=!1),c!==p.Z_STREAM_END&&c!==p.Z_OK)return this.onEnd(c),this.ended=!0,
!1;q.next_out&&(0===q.avail_out||c===p.Z_STREAM_END||0===q.avail_in&&(h===p.Z_FINISH||h===p.Z_SYNC_FLUSH))&&("string"===this.options.to?(g=d.utf8border(q.output,q.next_out),l=q.next_out-g,n=d.buf2string(q.output,g),q.next_out=l,q.avail_out=T-l,l&&e.arraySet(q.output,q.output,g,l,0),this.onData(n)):this.onData(e.shrinkBuf(q.output,q.next_out)));0===q.avail_in&&0===q.avail_out&&(H=!0)}while((0<q.avail_in||0===q.avail_out)&&c!==p.Z_STREAM_END);return c===p.Z_STREAM_END&&(h=p.Z_FINISH),h===p.Z_FINISH?
(c=f.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p.Z_OK):h===p.Z_SYNC_FLUSH?(this.onEnd(p.Z_OK),q.avail_out=0,!0):!0};h.prototype.onData=function(b){this.chunks.push(b)};h.prototype.onEnd=function(b){b===p.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};l.Inflate=h;l.inflate=n;l.inflateRaw=function(b,a){return a=a||{},a.raw=!0,n(b,a)};l.ungzip=n},{"./utils/common":3,"./utils/strings":4,
"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate.js":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(g,q,l){g="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;l.assign=function(e){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if("object"!=typeof f)throw new TypeError(f+"must be non-object");for(var a in f)f.hasOwnProperty(a)&&(e[a]=f[a])}}return e};l.shrinkBuf=function(e,d){return e.length===d?e:
e.subarray?e.subarray(0,d):(e.length=d,e)};var n={arraySet:function(e,d,f,a,c){if(d.subarray&&e.subarray)return void e.set(d.subarray(f,f+a),c);for(var b=0;a>b;b++)e[c+b]=d[f+b]},flattenChunks:function(e){var d,f,a,c,b;d=a=0;for(f=e.length;f>d;d++)a+=e[d].length;b=new Uint8Array(a);d=a=0;for(f=e.length;f>d;d++)c=e[d],b.set(c,a),a+=c.length;return b}},f={arraySet:function(e,d,f,a,c){for(var b=0;a>b;b++)e[c+b]=d[f+b]},flattenChunks:function(e){return[].concat.apply([],e)}};l.setTyped=function(e){e?
(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,n)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,f))};l.setTyped(g)},{}],4:[function(g,q,l){function n(a,c){if(65537>c&&(a.subarray&&d||!a.subarray&&e))return String.fromCharCode.apply(null,f.shrinkBuf(a,c));for(var b="",g=0;c>g;g++)b+=String.fromCharCode(a[g]);return b}var f=g("./common"),e=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch(a){e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){d=!1}var p=
new f.Buf8(256);for(g=0;256>g;g++)p[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;p[254]=p[254]=1;l.string2buf=function(a){var c,b,d,e,g,l=a.length,n=0;for(e=0;l>e;e++)b=a.charCodeAt(e),55296===(64512&b)&&l>e+1&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(b=65536+(b-55296<<10)+(d-56320),e++)),n+=128>b?1:2048>b?2:65536>b?3:4;c=new f.Buf8(n);for(e=g=0;n>g;e++)b=a.charCodeAt(e),55296===(64512&b)&&l>e+1&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(b=65536+(b-55296<<10)+(d-56320),e++)),128>b?c[g++]=b:2048>
b?(c[g++]=192|b>>>6,c[g++]=128|63&b):65536>b?(c[g++]=224|b>>>12,c[g++]=128|b>>>6&63,c[g++]=128|63&b):(c[g++]=240|b>>>18,c[g++]=128|b>>>12&63,c[g++]=128|b>>>6&63,c[g++]=128|63&b);return c};l.buf2binstring=function(a){return n(a,a.length)};l.binstring2buf=function(a){for(var c=new f.Buf8(a.length),b=0,d=c.length;d>b;b++)c[b]=a.charCodeAt(b);return c};l.buf2string=function(a,c){var b,d,e,f,g=c||a.length,l=Array(2*g);for(b=d=0;g>b;)if(e=a[b++],128>e)l[d++]=e;else if(f=p[e],4<f)l[d++]=65533,b+=f-1;else{for(e&=
2===f?31:3===f?15:7;1<f&&g>b;)e=e<<6|63&a[b++],f--;1<f?l[d++]=65533:65536>e?l[d++]=e:(e-=65536,l[d++]=55296|e>>10&1023,l[d++]=56320|1023&e)}return n(l,d)};l.utf8border=function(a,c){var b;c=c||a.length;c>a.length&&(c=a.length);for(b=c-1;0<=b&&128===(192&a[b]);)b--;return 0>b?c:0===b?c:b+p[a[b]]>c?b:c}},{"./common":3}],5:[function(g,q,l){q.exports=function(g,f,e,d){var l=65535&g|0;g=g>>>16&65535|0;for(var a=0;0!==e;){a=2E3<e?2E3:e;e-=a;do l=l+f[d++]|0,g=g+l|0;while(--a);l%=65521;g%=65521}return l|
g<<16|0}},{}],6:[function(g,q,l){q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(g,q,l){var n=function(){for(var f,e=[],d=0;256>d;d++){f=d;
for(var g=0;8>g;g++)f=1&f?3988292384^f>>>1:f>>>1;e[d]=f}return e}();q.exports=function(f,e,d,g){d=g+d;for(f^=-1;d>g;g++)f=f>>>8^n[255&(f^e[g])];return-1^f}},{}],8:[function(g,q,l){function n(b,a){return b.msg=H[a],a}function f(b){for(var a=b.length;0<=--a;)b[a]=0}function e(b){var a=b.state,c=a.pending;c>b.avail_out&&(c=b.avail_out);0!==c&&(E.arraySet(b.output,a.pending_buf,a.pending_out,c,b.next_out),b.next_out+=c,a.pending_out+=c,b.total_out+=c,b.avail_out-=c,a.pending-=c,0===a.pending&&(a.pending_out=
0))}function d(b,a){B._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,a);b.block_start=b.strstart;e(b.strm)}function p(b,a){b.pending_buf[b.pending++]=a}function a(b,a){b.pending_buf[b.pending++]=a>>>8&255;b.pending_buf[b.pending++]=255&a}function c(b,a){var c,d,e=b.max_chain_length,f=b.strstart,h=b.prev_length,g=b.nice_match,k=b.strstart>b.w_size-W?b.strstart-(b.w_size-W):0,l=b.window,y=b.w_mask,m=b.prev,n=b.strstart+I,p=l[f+h-1],q=l[f+h];b.prev_length>=b.good_match&&
(e>>=2);g>b.lookahead&&(g=b.lookahead);do if(c=a,l[c+h]===q&&l[c+h-1]===p&&l[c]===l[f]&&l[++c]===l[f+1]){f+=2;for(c++;l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&n>f;);if(d=I-(n-f),f=n-I,d>h){if(b.match_start=a,h=d,d>=g)break;p=l[f+h-1];q=l[f+h]}}while((a=m[a&y])>k&&0!==--e);return h<=b.lookahead?h:b.lookahead}function b(b){var a,c,d,e,f=b.w_size;do{if(e=b.window_size-b.lookahead-b.strstart,b.strstart>=f+(f-
W)){E.arraySet(b.window,b.window,f,f,0);b.match_start-=f;b.strstart-=f;b.block_start-=f;a=c=b.hash_size;do d=b.head[--a],b.head[a]=d>=f?d-f:0;while(--c);a=c=f;do d=b.prev[--a],b.prev[a]=d>=f?d-f:0;while(--c);e+=f}if(0===b.strm.avail_in)break;a=b.strm;d=b.window;var h=b.strstart+b.lookahead,g=a.avail_in;if(c=(g>e&&(g=e),0===g?0:(a.avail_in-=g,E.arraySet(d,a.input,a.next_in,g,h),1===a.state.wrap?a.adler=C(a.adler,d,g,h):2===a.state.wrap&&(a.adler=T(a.adler,d,g,h)),a.next_in+=g,a.total_in+=g,g)),b.lookahead+=
c,b.lookahead+b.insert>=J)for(e=b.strstart-b.insert,b.ins_h=b.window[e],b.ins_h=(b.ins_h<<b.hash_shift^b.window[e+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[e+J-1])&b.hash_mask,b.prev[e&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=e,e++,b.insert--,!(b.lookahead+b.insert<J)););}while(b.lookahead<W&&0!==b.strm.avail_in)}function k(a,e){for(var f,h;;){if(a.lookahead<W){if(b(a),a.lookahead<W&&e===x)return P;if(0===a.lookahead)break}if(f=0,a.lookahead>=J&&(a.ins_h=(a.ins_h<<a.hash_shift^
a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==f&&a.strstart-f<=a.w_size-W&&(a.match_length=c(a,f)),a.match_length>=J)if(h=B._tr_tally(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;
while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else h=B._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(h&&(d(a,!1),0===a.strm.avail_out))return P}return a.insert=a.strstart<J-1?a.strstart:J-1,e===y?(d(a,!0),0===a.strm.avail_out?ba:Z):a.last_lit&&(d(a,!1),0===a.strm.avail_out)?P:Y}function h(a,e){for(var f,h,g;;){if(a.lookahead<W){if(b(a),a.lookahead<
W&&e===x)return P;if(0===a.lookahead)break}if(f=0,a.lookahead>=J&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,0!==f&&a.prev_length<a.max_lazy_match&&a.strstart-f<=a.w_size-W&&(a.match_length=c(a,f),5>=a.match_length&&(a.strategy===D||a.match_length===J&&4096<a.strstart-a.match_start)&&(a.match_length=J-1)),a.prev_length>=J&&
a.match_length<=a.prev_length){g=a.strstart+a.lookahead-J;h=B._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-J);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=g&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=J-1,a.strstart++,h&&(d(a,!1),0===a.strm.avail_out))return P}else if(a.match_available){if(h=B._tr_tally(a,0,a.window[a.strstart-
1]),h&&d(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return P}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(B._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,e===y?(d(a,!0),0===a.strm.avail_out?ba:Z):a.last_lit&&(d(a,!1),0===a.strm.avail_out)?P:Y}function z(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=
w;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new E.Buf16(2*F);this.dyn_dtree=new E.Buf16(2*(2*aa+1));this.bl_tree=
new E.Buf16(2*(2*N+1));f(this.dyn_ltree);f(this.dyn_dtree);f(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new E.Buf16(Q+1);this.heap=new E.Buf16(2*A+1);f(this.heap);this.heap_max=this.heap_len=0;this.depth=new E.Buf16(2*A+1);f(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function M(b){var a;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=X,a=b.state,a.pending=0,a.pending_out=
0,0>a.wrap&&(a.wrap=-a.wrap),a.status=a.wrap?R:U,b.adler=2===a.wrap?0:1,a.last_flush=x,B._tr_init(a),K):n(b,L)}function G(b){var a=M(b);a===K&&(b=b.state,b.window_size=2*b.w_size,f(b.head),b.max_lazy_match=m[b.level].max_lazy,b.good_match=m[b.level].good_length,b.nice_match=m[b.level].nice_length,b.max_chain_length=m[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=J-1,b.match_available=0,b.ins_h=0);return a}function t(b,a,c,d,e,f){if(!b)return L;
var h=1;if(a===O&&(a=6),0>d?(h=0,d=-d):15<d&&(h=2,d-=16),1>e||e>u||c!==w||8>d||15<d||0>a||9<a||0>f||f>S)return n(b,L);8===d&&(d=9);var g=new z;return b.state=g,g.strm=b,g.wrap=h,g.gzhead=null,g.w_bits=d,g.w_size=1<<g.w_bits,g.w_mask=g.w_size-1,g.hash_bits=e+7,g.hash_size=1<<g.hash_bits,g.hash_mask=g.hash_size-1,g.hash_shift=~~((g.hash_bits+J-1)/J),g.window=new E.Buf8(2*g.w_size),g.head=new E.Buf16(g.hash_size),g.prev=new E.Buf16(g.w_size),g.lit_bufsize=1<<e+6,g.pending_buf_size=4*g.lit_bufsize,g.pending_buf=
new E.Buf8(g.pending_buf_size),g.d_buf=g.lit_bufsize>>1,g.l_buf=3*g.lit_bufsize,g.level=a,g.strategy=f,g.method=c,G(b)}var m,E=g("../utils/common"),B=g("./trees"),C=g("./adler32"),T=g("./crc32"),H=g("./messages"),x=0,y=4,K=0,L=-2,O=-1,D=1,S=4,X=2,w=8,u=9,A=286,aa=30,N=19,F=2*A+1,Q=15,J=3,I=258,W=I+J+1,R=42,U=113,P=1,Y=2,ba=3,Z=4;g=function(b,a,c,d,e){this.good_length=b;this.max_lazy=a;this.nice_length=c;this.max_chain=d;this.func=e};m=[new g(0,0,0,0,function(a,c){var e=65535;for(e>a.pending_buf_size-
5&&(e=a.pending_buf_size-5);;){if(1>=a.lookahead){if(b(a),0===a.lookahead&&c===x)return P;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var f=a.block_start+e;if((0===a.strstart||a.strstart>=f)&&(a.lookahead=a.strstart-f,a.strstart=f,d(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-W&&(d(a,!1),0===a.strm.avail_out))return P}return a.insert=0,c===y?(d(a,!0),0===a.strm.avail_out?ba:Z):(a.strstart>a.block_start&&d(a,!1),P)}),new g(4,4,8,4,k),new g(4,5,16,8,k),new g(4,
6,32,32,k),new g(4,4,16,16,h),new g(8,16,32,32,h),new g(8,16,128,128,h),new g(8,32,128,256,h),new g(32,128,258,1024,h),new g(32,258,258,4096,h)];l.deflateInit=function(b,a){return t(b,a,w,15,8,0)};l.deflateInit2=t;l.deflateReset=G;l.deflateResetKeep=M;l.deflateSetHeader=function(b,a){return b&&b.state?2!==b.state.wrap?L:(b.state.gzhead=a,K):L};l.deflate=function(c,h){var g,k,l,q;if(!c||!c.state||5<h||0>h)return c?n(c,L):L;if(k=c.state,!c.output||!c.input&&0!==c.avail_in||666===k.status&&h!==y)return n(c,
0===c.avail_out?-5:L);if(k.strm=c,g=k.last_flush,k.last_flush=h,k.status===R)2===k.wrap?(c.adler=0,p(k,31),p(k,139),p(k,8),k.gzhead?(p(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),p(k,255&k.gzhead.time),p(k,k.gzhead.time>>8&255),p(k,k.gzhead.time>>16&255),p(k,k.gzhead.time>>24&255),p(k,9===k.level?2:2<=k.strategy||2>k.level?4:0),p(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(p(k,255&k.gzhead.extra.length),p(k,k.gzhead.extra.length>>
8&255)),k.gzhead.hcrc&&(c.adler=T(c.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(p(k,0),p(k,0),p(k,0),p(k,0),p(k,0),p(k,9===k.level?2:2<=k.strategy||2>k.level?4:0),p(k,3),k.status=U)):(l=w+(k.w_bits-8<<4)<<8,q=2<=k.strategy||2>k.level?0:6>k.level?1:6===k.level?2:3,l|=q<<6,0!==k.strstart&&(l|=32),k.status=U,a(k,l+(31-l%31)),0!==k.strstart&&(a(k,c.adler>>>16),a(k,65535&c.adler)),c.adler=1);if(69===k.status)if(k.gzhead.extra){for(l=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==
k.pending_buf_size||(k.gzhead.hcrc&&k.pending>l&&(c.adler=T(c.adler,k.pending_buf,k.pending-l,l)),e(c),l=k.pending,k.pending!==k.pending_buf_size));)p(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>l&&(c.adler=T(c.adler,k.pending_buf,k.pending-l,l));k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(73===k.status)if(k.gzhead.name){l=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>l&&(c.adler=T(c.adler,k.pending_buf,k.pending-
l,l)),e(c),l=k.pending,k.pending===k.pending_buf_size)){q=1;break}q=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0;p(k,q)}while(0!==q);k.gzhead.hcrc&&k.pending>l&&(c.adler=T(c.adler,k.pending_buf,k.pending-l,l));0===q&&(k.gzindex=0,k.status=91)}else k.status=91;if(91===k.status)if(k.gzhead.comment){l=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>l&&(c.adler=T(c.adler,k.pending_buf,k.pending-l,l)),e(c),l=k.pending,k.pending===k.pending_buf_size)){q=
1;break}q=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0;p(k,q)}while(0!==q);k.gzhead.hcrc&&k.pending>l&&(c.adler=T(c.adler,k.pending_buf,k.pending-l,l));0===q&&(k.status=103)}else k.status=103;if(103===k.status&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&e(c),k.pending+2<=k.pending_buf_size&&(p(k,255&c.adler),p(k,c.adler>>8&255),c.adler=0,k.status=U)):k.status=U),0!==k.pending){if(e(c),0===c.avail_out)return k.last_flush=-1,K}else if(0===c.avail_in&&(h<<1)-
(4<h?9:0)<=(g<<1)-(4<g?9:0)&&h!==y)return n(c,-5);if(666===k.status&&0!==c.avail_in)return n(c,-5);if(0!==c.avail_in||0!==k.lookahead||h!==x&&666!==k.status){var t;if(2===k.strategy)a:{for(var u;;){if(0===k.lookahead&&(b(k),0===k.lookahead)){if(h===x){t=P;break a}break}if(k.match_length=0,u=B._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++,u&&(d(k,!1),0===k.strm.avail_out)){t=P;break a}}t=(k.insert=0,h===y?(d(k,!0),0===k.strm.avail_out?ba:Z):k.last_lit&&(d(k,!1),0===k.strm.avail_out)?
P:Y)}else if(3===k.strategy)a:{var H,z;for(u=k.window;;){if(k.lookahead<=I){if(b(k),k.lookahead<=I&&h===x){t=P;break a}if(0===k.lookahead)break}if(k.match_length=0,k.lookahead>=J&&0<k.strstart&&(z=k.strstart-1,H=u[z],H===u[++z]&&H===u[++z]&&H===u[++z])){for(g=k.strstart+I;H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&g>z;);k.match_length=I-(g-z);k.match_length>k.lookahead&&(k.match_length=k.lookahead)}if(k.match_length>=J?(t=B._tr_tally(k,1,k.match_length-
J),k.lookahead-=k.match_length,k.strstart+=k.match_length,k.match_length=0):(t=B._tr_tally(k,0,k.window[k.strstart]),k.lookahead--,k.strstart++),t&&(d(k,!1),0===k.strm.avail_out)){t=P;break a}}t=(k.insert=0,h===y?(d(k,!0),0===k.strm.avail_out?ba:Z):k.last_lit&&(d(k,!1),0===k.strm.avail_out)?P:Y)}else t=m[k.level].func(k,h);if((t===ba||t===Z)&&(k.status=666),t===P||t===ba)return 0===c.avail_out&&(k.last_flush=-1),K;if(t===Y&&(1===h?B._tr_align(k):5!==h&&(B._tr_stored_block(k,0,0,!1),3===h&&(f(k.head),
0===k.lookahead&&(k.strstart=0,k.block_start=0,k.insert=0))),e(c),0===c.avail_out))return k.last_flush=-1,K}return h!==y?K:0>=k.wrap?1:(2===k.wrap?(p(k,255&c.adler),p(k,c.adler>>8&255),p(k,c.adler>>16&255),p(k,c.adler>>24&255),p(k,255&c.total_in),p(k,c.total_in>>8&255),p(k,c.total_in>>16&255),p(k,c.total_in>>24&255)):(a(k,c.adler>>>16),a(k,65535&c.adler)),e(c),0<k.wrap&&(k.wrap=-k.wrap),0!==k.pending?K:1)};l.deflateEnd=function(b){var a;return b&&b.state?(a=b.state.status,a!==R&&69!==a&&73!==a&&91!==
a&&103!==a&&a!==U&&666!==a?n(b,L):(b.state=null,a===U?n(b,-3):K)):L};l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(g,q,l){q.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],10:[function(g,q,l){q.exports=function(g,f){var e,d,l,a,c,b,k,h,q,M,G,t,m,E,B,C,T,H,x,y,K,L,O,D;e=g.state;d=g.next_in;O=g.input;l=
d+(g.avail_in-5);a=g.next_out;D=g.output;c=a-(f-g.avail_out);b=a+(g.avail_out-257);k=e.dmax;h=e.wsize;q=e.whave;M=e.wnext;G=e.window;t=e.hold;m=e.bits;E=e.lencode;B=e.distcode;C=(1<<e.lenbits)-1;T=(1<<e.distbits)-1;a:do b:for(15>m&&(t+=O[d++]<<m,m+=8,t+=O[d++]<<m,m+=8),H=E[t&C];;){if(x=H>>>24,t>>>=x,m-=x,x=H>>>16&255,0===x)D[a++]=65535&H;else{if(!(16&x)){if(0===(64&x)){H=E[(65535&H)+(t&(1<<x)-1)];continue b}if(32&x){e.mode=12;break a}g.msg="invalid literal/length code";e.mode=30;break a}y=65535&H;
(x&=15)&&(x>m&&(t+=O[d++]<<m,m+=8),y+=t&(1<<x)-1,t>>>=x,m-=x);15>m&&(t+=O[d++]<<m,m+=8,t+=O[d++]<<m,m+=8);H=B[t&T];c:for(;;){if(x=H>>>24,t>>>=x,m-=x,x=H>>>16&255,!(16&x)){if(0===(64&x)){H=B[(65535&H)+(t&(1<<x)-1)];continue c}g.msg="invalid distance code";e.mode=30;break a}if(K=65535&H,x&=15,x>m&&(t+=O[d++]<<m,m+=8,x>m&&(t+=O[d++]<<m,m+=8)),K+=t&(1<<x)-1,K>k){g.msg="invalid distance too far back";e.mode=30;break a}if(t>>>=x,m-=x,x=a-c,K>x){if(x=K-x,x>q&&e.sane){g.msg="invalid distance too far back";
e.mode=30;break a}if(H=0,L=G,0===M){if(H+=h-x,y>x){y-=x;do D[a++]=G[H++];while(--x);H=a-K;L=D}}else if(x>M){if(H+=h+M-x,x-=M,y>x){y-=x;do D[a++]=G[H++];while(--x);if(H=0,y>M){x=M;y-=x;do D[a++]=G[H++];while(--x);H=a-K;L=D}}}else if(H+=M-x,y>x){y-=x;do D[a++]=G[H++];while(--x);H=a-K;L=D}for(;2<y;)D[a++]=L[H++],D[a++]=L[H++],D[a++]=L[H++],y-=3;y&&(D[a++]=L[H++],1<y&&(D[a++]=L[H++]))}else{H=a-K;do D[a++]=D[H++],D[a++]=D[H++],D[a++]=D[H++],y-=3;while(2<y);y&&(D[a++]=D[H++],1<y&&(D[a++]=D[H++]))}break}}break}while(l>
d&&b>a);y=m>>3;d-=y;m-=y<<3;g.next_in=d;g.next_out=a;g.avail_in=l>d?5+(l-d):5-(d-l);g.avail_out=b>a?257+(b-a):257-(a-b);e.hold=t&(1<<m)-1;e.bits=m}},{}],11:[function(g,q,l){function n(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function f(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=
this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new k.Buf16(320);this.work=new k.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function e(b){var a;return b&&b.state?(a=b.state,b.total_in=b.total_out=a.total=0,b.msg="",a.wrap&&(b.adler=1&a.wrap),a.mode=E,a.last=0,a.havedict=0,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new k.Buf32(B),a.distcode=a.distdyn=new k.Buf32(C),a.sane=1,a.back=-1,t):
m}function d(b){var a;return b&&b.state?(a=b.state,a.wsize=0,a.whave=0,a.wnext=0,e(b)):m}function p(b,a){var c,e;return b&&b.state?(e=b.state,0>a?(c=0,a=-a):(c=(a>>4)+1,48>a&&(a&=15)),a&&(8>a||15<a)?m:(null!==e.window&&e.wbits!==a&&(e.window=null),e.wrap=c,e.wbits=a,d(b))):m}function a(b,a){var c,d;return b?(d=new f,b.state=d,d.window=null,c=p(b,a),c!==t&&(b.state=null),c):m}var c,b,k=g("../utils/common"),h=g("./adler32"),z=g("./crc32"),M=g("./inffast"),G=g("./inftrees"),t=0,m=-2,E=1,B=852,C=592,
T=!0;l.inflateReset=d;l.inflateReset2=p;l.inflateResetKeep=e;l.inflateInit=function(b){return a(b,15)};l.inflateInit2=a;l.inflate=function(a,d){var e,f,g,l,p,q,B,w,u,A,C,N,F,Q,J,I,W,R,U,P,Y,ba,Z=0,V=new k.Buf8(4),ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return m;e=a.state;12===e.mode&&(e.mode=13);p=a.next_out;g=a.output;B=a.avail_out;l=a.next_in;f=a.input;q=a.avail_in;w=e.hold;u=e.bits;A=q;C=B;Y=t;a:for(;;)switch(e.mode){case E:if(0===
e.wrap){e.mode=13;break}for(;16>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(2&e.wrap&&35615===w){e.check=0;V[0]=255&w;V[1]=w>>>8&255;e.check=z(e.check,V,2,0);u=w=0;e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&w)<<8)+(w>>8))%31){a.msg="incorrect header check";e.mode=30;break}if(8!==(15&w)){a.msg="unknown compression method";e.mode=30;break}if(w>>>=4,u-=4,P=(15&w)+8,0===e.wbits)e.wbits=P;else if(P>e.wbits){a.msg="invalid window size";e.mode=30;break}e.dmax=1<<P;a.adler=
e.check=1;e.mode=512&w?10:12;u=w=0;break;case 2:for(;16>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(e.flags=w,8!==(255&e.flags)){a.msg="unknown compression method";e.mode=30;break}if(57344&e.flags){a.msg="unknown header flags set";e.mode=30;break}e.head&&(e.head.text=w>>8&1);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,e.check=z(e.check,V,2,0));u=w=0;e.mode=3;case 3:for(;32>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}e.head&&(e.head.time=w);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,V[2]=w>>>16&255,V[3]=
w>>>24&255,e.check=z(e.check,V,4,0));u=w=0;e.mode=4;case 4:for(;16>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}e.head&&(e.head.xflags=255&w,e.head.os=w>>8);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,e.check=z(e.check,V,2,0));u=w=0;e.mode=5;case 5:if(1024&e.flags){for(;16>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}e.length=w;e.head&&(e.head.extra_len=w);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,e.check=z(e.check,V,2,0));u=w=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(N=e.length,
N>q&&(N=q),N&&(e.head&&(P=e.head.extra_len-e.length,e.head.extra||(e.head.extra=Array(e.head.extra_len)),k.arraySet(e.head.extra,f,l,N,P)),512&e.flags&&(e.check=z(e.check,f,N,l)),q-=N,l+=N,e.length-=N),e.length))break a;e.length=0;e.mode=7;case 7:if(2048&e.flags){if(0===q)break a;N=0;do P=f[l+N++],e.head&&P&&65536>e.length&&(e.head.name+=String.fromCharCode(P));while(P&&q>N);if(512&e.flags&&(e.check=z(e.check,f,N,l)),q-=N,l+=N,P)break a}else e.head&&(e.head.name=null);e.length=0;e.mode=8;case 8:if(4096&
e.flags){if(0===q)break a;N=0;do P=f[l+N++],e.head&&P&&65536>e.length&&(e.head.comment+=String.fromCharCode(P));while(P&&q>N);if(512&e.flags&&(e.check=z(e.check,f,N,l)),q-=N,l+=N,P)break a}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;16>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(w!==(65535&e.check)){a.msg="header crc mismatch";e.mode=30;break}u=w=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0);a.adler=e.check=0;e.mode=12;break;case 10:for(;32>u;){if(0===q)break a;
q--;w+=f[l++]<<u;u+=8}a.adler=e.check=n(w);u=w=0;e.mode=11;case 11:if(0===e.havedict)return a.next_out=p,a.avail_out=B,a.next_in=l,a.avail_in=q,e.hold=w,e.bits=u,2;a.adler=e.check=1;e.mode=12;case 12:if(5===d||6===d)break a;case 13:if(e.last){w>>>=7&u;u-=7&u;e.mode=27;break}for(;3>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}switch(e.last=1&w,w>>>=1,--u,3&w){case 0:e.mode=14;break;case 1:Q=e;if(T){c=new k.Buf32(512);b=new k.Buf32(32);for(I=0;144>I;)Q.lens[I++]=8;for(;256>I;)Q.lens[I++]=9;for(;280>I;)Q.lens[I++]=
7;for(;288>I;)Q.lens[I++]=8;G(1,Q.lens,0,288,c,0,Q.work,{bits:9});for(I=0;32>I;)Q.lens[I++]=5;G(2,Q.lens,0,32,b,0,Q.work,{bits:5});T=!1}Q.lencode=c;Q.lenbits=9;Q.distcode=b;Q.distbits=5;if(e.mode=20,6===d){w>>>=2;u-=2;break a}break;case 2:e.mode=17;break;case 3:a.msg="invalid block type",e.mode=30}w>>>=2;u-=2;break;case 14:w>>>=7&u;for(u-=7&u;32>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if((65535&w)!==(w>>>16^65535)){a.msg="invalid stored block lengths";e.mode=30;break}if(e.length=65535&w,w=0,u=
0,e.mode=15,6===d)break a;case 15:e.mode=16;case 16:if(N=e.length){if(N>q&&(N=q),N>B&&(N=B),0===N)break a;k.arraySet(g,f,l,N,p);q-=N;l+=N;B-=N;p+=N;e.length-=N;break}e.mode=12;break;case 17:for(;14>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(e.nlen=(31&w)+257,w>>>=5,u-=5,e.ndist=(31&w)+1,w>>>=5,u-=5,e.ncode=(15&w)+4,w>>>=4,u-=4,286<e.nlen||30<e.ndist){a.msg="too many length or distance symbols";e.mode=30;break}e.have=0;e.mode=18;case 18:for(;e.have<e.ncode;){for(;3>u;){if(0===q)break a;q--;w+=f[l++]<<
u;u+=8}e.lens[ea[e.have++]]=7&w;w>>>=3;u-=3}for(;19>e.have;)e.lens[ea[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,ba={bits:e.lenbits},Y=G(0,e.lens,0,19,e.lencode,0,e.work,ba),e.lenbits=ba.bits,Y){a.msg="invalid code lengths set";e.mode=30;break}e.have=0;e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;Z=e.lencode[w&(1<<e.lenbits)-1],J=Z>>>24,I=65535&Z,!(u>=J);){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(16>I)w>>>=J,u-=J,e.lens[e.have++]=I;else{if(16===I){for(Q=J+2;Q>u;){if(0===q)break a;q--;
w+=f[l++]<<u;u+=8}if(w>>>=J,u-=J,0===e.have){a.msg="invalid bit length repeat";e.mode=30;break}P=e.lens[e.have-1];N=3+(3&w);w>>>=2;u-=2}else if(17===I){for(Q=J+3;Q>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}w>>>=J;u-=J;P=0;N=3+(7&w);w>>>=3;u-=3}else{for(Q=J+7;Q>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}w>>>=J;u-=J;P=0;N=11+(127&w);w>>>=7;u-=7}if(e.have+N>e.nlen+e.ndist){a.msg="invalid bit length repeat";e.mode=30;break}for(;N--;)e.lens[e.have++]=P}}if(30===e.mode)break;if(0===e.lens[256]){a.msg=
"invalid code -- missing end-of-block";e.mode=30;break}if(e.lenbits=9,ba={bits:e.lenbits},Y=G(1,e.lens,0,e.nlen,e.lencode,0,e.work,ba),e.lenbits=ba.bits,Y){a.msg="invalid literal/lengths set";e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,ba={bits:e.distbits},Y=G(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,ba),e.distbits=ba.bits,Y){a.msg="invalid distances set";e.mode=30;break}if(e.mode=20,6===d)break a;case 20:e.mode=21;case 21:if(6<=q&&258<=B){a.next_out=p;a.avail_out=B;a.next_in=l;a.avail_in=
q;e.hold=w;e.bits=u;M(a,C);p=a.next_out;g=a.output;B=a.avail_out;l=a.next_in;f=a.input;q=a.avail_in;w=e.hold;u=e.bits;12===e.mode&&(e.back=-1);break}for(e.back=0;Z=e.lencode[w&(1<<e.lenbits)-1],J=Z>>>24,Q=Z>>>16&255,I=65535&Z,!(u>=J);){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(Q&&0===(240&Q)){W=J;R=Q;for(U=I;Z=e.lencode[U+((w&(1<<W+R)-1)>>W)],J=Z>>>24,Q=Z>>>16&255,I=65535&Z,!(u>=W+J);){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}w>>>=W;u-=W;e.back+=W}if(w>>>=J,u-=J,e.back+=J,e.length=I,0===Q){e.mode=26;
break}if(32&Q){e.back=-1;e.mode=12;break}if(64&Q){a.msg="invalid literal/length code";e.mode=30;break}e.extra=15&Q;e.mode=22;case 22:if(e.extra){for(Q=e.extra;Q>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}e.length+=w&(1<<e.extra)-1;w>>>=e.extra;u-=e.extra;e.back+=e.extra}e.was=e.length;e.mode=23;case 23:for(;Z=e.distcode[w&(1<<e.distbits)-1],J=Z>>>24,Q=Z>>>16&255,I=65535&Z,!(u>=J);){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(0===(240&Q)){W=J;R=Q;for(U=I;Z=e.distcode[U+((w&(1<<W+R)-1)>>W)],J=Z>>>24,
Q=Z>>>16&255,I=65535&Z,!(u>=W+J);){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}w>>>=W;u-=W;e.back+=W}if(w>>>=J,u-=J,e.back+=J,64&Q){a.msg="invalid distance code";e.mode=30;break}e.offset=I;e.extra=15&Q;e.mode=24;case 24:if(e.extra){for(Q=e.extra;Q>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}e.offset+=w&(1<<e.extra)-1;w>>>=e.extra;u-=e.extra;e.back+=e.extra}if(e.offset>e.dmax){a.msg="invalid distance too far back";e.mode=30;break}e.mode=25;case 25:if(0===B)break a;if(N=C-B,e.offset>N){if(N=e.offset-N,N>
e.whave&&e.sane){a.msg="invalid distance too far back";e.mode=30;break}N>e.wnext?(N-=e.wnext,F=e.wsize-N):F=e.wnext-N;N>e.length&&(N=e.length);Q=e.window}else Q=g,F=p-e.offset,N=e.length;N>B&&(N=B);B-=N;e.length-=N;do g[p++]=Q[F++];while(--N);0===e.length&&(e.mode=21);break;case 26:if(0===B)break a;g[p++]=e.length;B--;e.mode=21;break;case 27:if(e.wrap){for(;32>u;){if(0===q)break a;q--;w|=f[l++]<<u;u+=8}if(C-=B,a.total_out+=C,e.total+=C,C&&(a.adler=e.check=e.flags?z(e.check,g,C,p-C):h(e.check,g,C,
p-C)),C=B,(e.flags?w:n(w))!==e.check){a.msg="incorrect data check";e.mode=30;break}u=w=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;32>u;){if(0===q)break a;q--;w+=f[l++]<<u;u+=8}if(w!==(4294967295&e.total)){a.msg="incorrect length check";e.mode=30;break}u=w=0}e.mode=29;case 29:Y=1;break a;case 30:Y=-3;break a;case 31:return-4;default:return m}a.next_out=p;a.avail_out=B;a.next_in=l;a.avail_in=q;e.hold=w;e.bits=u;if(l=e.wsize||C!==a.avail_out&&30>e.mode&&(27>e.mode||4!==d)){l=a.output;p=a.next_out;
f=C-a.avail_out;var da;q=a.state;l=(null===q.window&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new k.Buf8(q.wsize)),f>=q.wsize?(k.arraySet(q.window,l,p-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(da=q.wsize-q.wnext,da>f&&(da=f),k.arraySet(q.window,l,p-f,da,q.wnext),f-=da,f?(k.arraySet(q.window,l,p-f,f,0),q.wnext=f,q.whave=q.wsize):(q.wnext+=da,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=da))),0)}return l?(e.mode=31,-4):(A-=a.avail_in,C-=a.avail_out,a.total_in+=A,a.total_out+=
C,e.total+=C,e.wrap&&C&&(a.adler=e.check=e.flags?z(e.check,g,C,a.next_out-C):h(e.check,g,C,a.next_out-C)),a.data_type=e.bits+(e.last?64:0)+(12===e.mode?128:0)+(20===e.mode||15===e.mode?256:0),(0===A&&0===C||4===d)&&Y===t&&(Y=-5),Y)};l.inflateEnd=function(b){if(!b||!b.state)return m;var a=b.state;return a.window&&(a.window=null),b.state=null,t};l.inflateGetHeader=function(b,a){var c;return b&&b.state?(c=b.state,0===(2&c.wrap)?m:(c.head=a,a.done=!1,t)):m};l.inflateInfo="pako inflate (from Nodeca project)"},
{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(g,q,l){var n=g("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,
25,25,26,26,27,27,28,28,29,29,64,64];q.exports=function(a,c,b,k,h,g,l,q){var t,m,E,B,C,T,H,x;B=q.bits;for(var y=0,K=0,L=0,O=0,D=0,S=0,X=0,w=0,u=0,A=null,aa=0,N=new n.Buf16(16),S=new n.Buf16(16),F=null,Q=0,y=0;15>=y;y++)N[y]=0;for(K=0;k>K;K++)N[c[b+K]]++;D=B;for(O=15;1<=O&&0===N[O];O--);if(D>O&&(D=O),0===O)return h[g++]=20971520,h[g++]=20971520,q.bits=1,0;for(L=1;O>L&&0===N[L];L++);L>D&&(D=L);for(y=t=1;15>=y;y++)if(t<<=1,t-=N[y],0>t)return-1;if(0<t&&(0===a||1!==O))return-1;S[1]=0;for(y=1;15>y;y++)S[y+
1]=S[y]+N[y];for(K=0;k>K;K++)0!==c[b+K]&&(l[S[c[b+K]]++]=K);if(0===a?(A=F=l,C=19):1===a?(A=f,aa-=257,F=e,Q-=257,C=256):(A=d,F=p,C=-1),u=0,K=0,y=L,B=g,S=D,X=0,E=-1,w=1<<D,k=w-1,1===a&&852<w||2===a&&592<w)return 1;for(var J=0;;){J++;T=y-X;l[K]<C?(H=0,x=l[K]):l[K]>C?(H=F[Q+l[K]],x=A[aa+l[K]]):(H=96,x=0);t=1<<y-X;L=m=1<<S;do m-=t,h[B+(u>>X)+m]=T<<24|H<<16|x|0;while(0!==m);for(t=1<<y-1;u&t;)t>>=1;if(0!==t?(u&=t-1,u+=t):u=0,K++,0===--N[y]){if(y===O)break;y=c[b+l[K]]}if(y>D&&(u&k)!==E){0===X&&(X=D);B+=L;
S=y-X;for(t=1<<S;O>S+X&&(t-=N[S+X],!(0>=t));)S++,t<<=1;if(w+=1<<S,1===a&&852<w||2===a&&592<w)return 1;E=u&k;h[E]=D<<24|S<<16|B-g|0}}return 0!==u&&(h[B+u]=y-X<<24|4194304),q.bits=D,0}},{"../utils/common":3}],13:[function(g,q,l){q.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(g,q,l){function n(b){for(var a=b.length;0<=--a;)b[a]=0}function f(b,a){b.pending_buf[b.pending++]=
255&a;b.pending_buf[b.pending++]=a>>>8&255}function e(b,a,c){b.bi_valid>S-c?(b.bi_buf|=a<<b.bi_valid&65535,f(b,b.bi_buf),b.bi_buf=a>>S-b.bi_valid,b.bi_valid+=c-S):(b.bi_buf|=a<<b.bi_valid&65535,b.bi_valid+=c)}function d(b,a,c){e(b,c[2*a],c[2*a+1])}function p(b,a){var c=0;do c|=1&b,b>>>=1,c<<=1;while(0<--a);return c>>>1}function a(b,a,c){var d,e=Array(D+1),f=0;for(d=1;D>=d;d++)e[d]=f=f+c[d-1]<<1;for(c=0;a>=c;c++)d=b[2*c+1],0!==d&&(b[2*c]=p(e[d]++,d))}function c(b){var a;for(a=0;y>a;a++)b.dyn_ltree[2*
a]=0;for(a=0;K>a;a++)b.dyn_dtree[2*a]=0;for(a=0;L>a;a++)b.bl_tree[2*a]=0;b.dyn_ltree[2*X]=1;b.opt_len=b.static_len=0;b.last_lit=b.matches=0}function b(b){8<b.bi_valid?f(b,b.bi_buf):0<b.bi_valid&&(b.pending_buf[b.pending++]=b.bi_buf);b.bi_buf=0;b.bi_valid=0}function k(b,a,c,d){var e=2*a,f=2*c;return b[e]<b[f]||b[e]===b[f]&&d[a]<=d[c]}function h(b,a,c){for(var d=b.heap[c],e=c<<1;e<=b.heap_len&&(e<b.heap_len&&k(a,b.heap[e+1],b.heap[e],b.depth)&&e++,!k(a,d,b.heap[e],b.depth));)b.heap[c]=b.heap[e],c=e,
e<<=1;b.heap[c]=d}function z(b,a,c){var f,k,g,h,l=0;if(0!==b.last_lit){do f=b.pending_buf[b.d_buf+2*l]<<8|b.pending_buf[b.d_buf+2*l+1],k=b.pending_buf[b.l_buf+l],l++,0===f?d(b,k,a):(g=R[k],d(b,g+x+1,a),h=aa[g],0!==h&&(k-=U[g],e(b,k,h)),f--,g=256>f?W[f]:W[256+(f>>>7)],d(b,g,c),h=N[g],0!==h&&(f-=P[g],e(b,f,h)));while(l<b.last_lit)}d(b,X,a)}function M(b,c){var d,e,f,k=c.dyn_tree;e=c.stat_desc.static_tree;var g=c.stat_desc.has_stree,l=c.stat_desc.elems,m=-1;b.heap_len=0;b.heap_max=O;for(d=0;l>d;d++)0!==
k[2*d]?(b.heap[++b.heap_len]=m=d,b.depth[d]=0):k[2*d+1]=0;for(;2>b.heap_len;)f=b.heap[++b.heap_len]=2>m?++m:0,k[2*f]=1,b.depth[f]=0,b.opt_len--,g&&(b.static_len-=e[2*f+1]);c.max_code=m;for(d=b.heap_len>>1;1<=d;d--)h(b,k,d);f=l;do d=b.heap[1],b.heap[1]=b.heap[b.heap_len--],h(b,k,1),e=b.heap[1],b.heap[--b.heap_max]=d,b.heap[--b.heap_max]=e,k[2*f]=k[2*d]+k[2*e],b.depth[f]=(b.depth[d]>=b.depth[e]?b.depth[d]:b.depth[e])+1,k[2*d+1]=k[2*e+1]=f,b.heap[1]=f++,h(b,k,1);while(2<=b.heap_len);b.heap[--b.heap_max]=
b.heap[1];var n,p,g=c.dyn_tree,l=c.max_code,q=c.stat_desc.static_tree,y=c.stat_desc.has_stree,t=c.stat_desc.extra_bits,V=c.stat_desc.extra_base,x=c.stat_desc.max_length,u=0;for(e=0;D>=e;e++)b.bl_count[e]=0;g[2*b.heap[b.heap_max]+1]=0;for(d=b.heap_max+1;O>d;d++)f=b.heap[d],e=g[2*g[2*f+1]+1]+1,e>x&&(e=x,u++),g[2*f+1]=e,f>l||(b.bl_count[e]++,n=0,f>=V&&(n=t[f-V]),p=g[2*f],b.opt_len+=p*(e+n),y&&(b.static_len+=p*(q[2*f+1]+n)));if(0!==u){do{for(e=x-1;0===b.bl_count[e];)e--;b.bl_count[e]--;b.bl_count[e+1]+=
2;b.bl_count[x]--;u-=2}while(0<u);for(e=x;0!==e;e--)for(f=b.bl_count[e];0!==f;)n=b.heap[--d],n>l||(g[2*n+1]!==e&&(b.opt_len+=(e-g[2*n+1])*g[2*n],g[2*n+1]=e),f--)}a(k,m,b.bl_count)}function G(b,a,c){var d,e,f=-1,k=a[1],g=0,h=7,l=4;0===k&&(h=138,l=3);a[2*(c+1)+1]=65535;for(d=0;c>=d;d++)e=k,k=a[2*(d+1)+1],++g<h&&e===k||(l>g?b.bl_tree[2*e]+=g:0!==e?(e!==f&&b.bl_tree[2*e]++,b.bl_tree[2*w]++):10>=g?b.bl_tree[2*u]++:b.bl_tree[2*A]++,g=0,f=e,0===k?(h=138,l=3):e===k?(h=6,l=3):(h=7,l=4))}function t(b,a,c){var f,
k,g=-1,h=a[1],l=0,m=7,n=4;0===h&&(m=138,n=3);for(f=0;c>=f;f++)if(k=h,h=a[2*(f+1)+1],!(++l<m&&k===h)){if(n>l){do d(b,k,b.bl_tree);while(0!==--l)}else 0!==k?(k!==g&&(d(b,k,b.bl_tree),l--),d(b,w,b.bl_tree),e(b,l-3,2)):10>=l?(d(b,u,b.bl_tree),e(b,l-3,3)):(d(b,A,b.bl_tree),e(b,l-11,7));l=0;g=k;0===h?(m=138,n=3):k===h?(m=6,n=3):(m=7,n=4)}}function m(b){var a,c=4093624447;for(a=0;31>=a;a++,c>>>=1)if(1&c&&0!==b.dyn_ltree[2*a])return C;if(0!==b.dyn_ltree[18]||0!==b.dyn_ltree[20]||0!==b.dyn_ltree[26])return T;
for(a=32;x>a;a++)if(0!==b.dyn_ltree[2*a])return T;return C}function E(a,c,d,k){e(a,(H<<1)+(k?1:0),3);b(a);f(a,d);f(a,~d);B.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=d}var B=g("../utils/common"),C=0,T=1,H=0,x=256,y=x+1+29,K=30,L=19,O=2*y+1,D=15,S=16,X=256,w=16,u=17,A=18,aa=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,
2,14,1,15],J=Array(2*(y+2));n(J);var I=Array(2*K);n(I);var W=Array(512);n(W);var R=Array(256);n(R);var U=Array(29);n(U);var P=Array(K);n(P);var Y,ba,Z,V=function(b,a,c,d,e){this.static_tree=b;this.extra_bits=a;this.extra_base=c;this.elems=d;this.max_length=e;this.has_stree=b&&b.length},ea=function(b,a){this.dyn_tree=b;this.max_code=0;this.stat_desc=a},da=!1;l._tr_init=function(b){if(!da){var d,e,f,k=Array(D+1);for(f=e=0;28>f;f++)for(U[f]=e,d=0;d<1<<aa[f];d++)R[e++]=f;R[e-1]=f;for(f=e=0;16>f;f++)for(P[f]=
e,d=0;d<1<<N[f];d++)W[e++]=f;for(e>>=7;K>f;f++)for(P[f]=e<<7,d=0;d<1<<N[f]-7;d++)W[256+e++]=f;for(d=0;D>=d;d++)k[d]=0;for(d=0;143>=d;)J[2*d+1]=8,d++,k[8]++;for(;255>=d;)J[2*d+1]=9,d++,k[9]++;for(;279>=d;)J[2*d+1]=7,d++,k[7]++;for(;287>=d;)J[2*d+1]=8,d++,k[8]++;a(J,y+1,k);for(d=0;K>d;d++)I[2*d+1]=5,I[2*d]=p(d,5);Y=new V(J,aa,x+1,y,D);ba=new V(I,N,0,K,D);Z=new V([],F,0,L,7);da=!0}b.l_desc=new ea(b.dyn_ltree,Y);b.d_desc=new ea(b.dyn_dtree,ba);b.bl_desc=new ea(b.bl_tree,Z);b.bi_buf=0;b.bi_valid=0;c(b)};
l._tr_stored_block=E;l._tr_flush_block=function(a,d,f,k){var g,h,l=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=m(a));M(a,a.l_desc);M(a,a.d_desc);G(a,a.dyn_ltree,a.l_desc.max_code);G(a,a.dyn_dtree,a.d_desc.max_code);M(a,a.bl_desc);for(l=L-1;3<=l&&0===a.bl_tree[2*Q[l]+1];l--);l=(a.opt_len+=3*(l+1)+14,l);g=a.opt_len+3+7>>>3;h=a.static_len+3+7>>>3;g>=h&&(g=h)}else g=h=f+5;if(g>=f+4&&-1!==d)E(a,d,f,k);else if(4===a.strategy||h===g)e(a,2+(k?1:0),3),z(a,J,I);else{e(a,4+(k?1:0),3);d=a.l_desc.max_code+
1;f=a.d_desc.max_code+1;l+=1;e(a,d-257,5);e(a,f-1,5);e(a,l-4,4);for(g=0;l>g;g++)e(a,a.bl_tree[2*Q[g]+1],3);t(a,a.dyn_ltree,d-1);t(a,a.dyn_dtree,f-1);z(a,a.dyn_ltree,a.dyn_dtree)}c(a);k&&b(a)};l._tr_tally=function(b,a,c){return b.pending_buf[b.d_buf+2*b.last_lit]=a>>>8&255,b.pending_buf[b.d_buf+2*b.last_lit+1]=255&a,b.pending_buf[b.l_buf+b.last_lit]=255&c,b.last_lit++,0===a?b.dyn_ltree[2*c]++:(b.matches++,a--,b.dyn_ltree[2*(R[c]+x+1)]++,b.dyn_dtree[2*(256>a?W[a]:W[256+(a>>>7)])]++),b.last_lit===b.lit_bufsize-
1};l._tr_align=function(b){e(b,2,3);d(b,X,J);16===b.bi_valid?(f(b,b.bi_buf),b.bi_buf=0,b.bi_valid=0):8<=b.bi_valid&&(b.pending_buf[b.pending++]=255&b.bi_buf,b.bi_buf>>=8,b.bi_valid-=8)}},{"../utils/common":3}],15:[function(g,q,l){q.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/":[function(g,q,l){l=g("./lib/utils/common").assign;var n=g("./lib/deflate"),
f=g("./lib/inflate");g=g("./lib/zlib/constants");var e={};l(e,n,f,g);q.exports=e},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});
!function(r){r.fn.selectOrDie=function(g){var q,l,n={customID:null,customClass:"",placeholder:null,placeholderOption:!1,prefix:null,cycle:!1,stripEmpty:!1,links:!1,linksExternal:!1,size:0,tabIndex:0,onChange:r.noop},f={},e=!1,d={initSoD:function(a){return f=r.extend({},n,a),this.each(function(){if(r(this).parent().hasClass("sod_select"))console.log("Select or Die: It looks like the SoD already exists");else{var a,b,e,g=r(this);b=g.data("custom-id")?g.data("custom-id"):f.customID;var l=g.data("custom-class")?
g.data("custom-class"):f.customClass,n=g.data("prefix")?g.data("prefix"):f.prefix,p=g.data("placeholder")?g.data("placeholder"):f.placeholder,q=g.data("placeholder-option")?g.data("placeholder-option"):f.placeholderOption,m=g.data("cycle")?g.data("cycle"):f.cycle,E=g.data("links")?g.data("links"):f.links,B=g.data("links-external")?g.data("links-external"):f.linksExternal,C=parseInt(g.data("size"))?g.data("size"):f.size,T=parseInt(g.data("tabindex"))?g.data("tabindex"):f.tabIndex?f.tabIndex:g.attr("tabindex")?
g.attr("tabindex"):f.tabIndex,H=g.data("strip-empty")?g.data("strip-empty"):f.stripEmpty,x=g.prop("title")?g.prop("title"):null,y=g.is(":disabled")?" disabled":"",K="",L=0;n&&(K='<span class="sod_prefix">'+n+"</span> ");a=r("<span/>",{id:b,"class":"sod_select "+l+y,title:x,tabindex:T,html:""+(p&&!n?'<span class="sod_label sod_placeholder">'+p+"</span>":'<span class="sod_label">'+K+"</span>"),"data-cycle":m,"data-links":E,"data-links-external":B,"data-placeholder":p,"data-placeholder-option":q,"data-prefix":n,
"data-filter":""}).insertAfter(this);d.isTouch()&&a.addClass("touch");b=r("<span/>",{"class":"sod_list_wrapper"}).appendTo(a);e=r("<span/>",{"class":"sod_list"}).appendTo(b);r("option, optgroup",g).each(function(b){var f=r(this);H&&!r.trim(f.text())?f.remove():0===b&&q&&!K?d.populateSoD(f,e,a,!0):d.populateSoD(f,e,a,!1)});C&&(b.show(),r(".sod_option:lt("+C+")",e).each(function(){L+=r(this).outerHeight()}),b.removeAttr("style"),e.css({"max-height":L}));g.appendTo(a);a.on("focusin",d.focusSod).on("click",
d.triggerSod).on("click",".sod_option",d.optionClick).on("mousemove",".sod_option",d.optionHover).on("keydown",d.keyboardUse);g.on("change",d.selectChange);r(document).on("click","label[for='"+g.attr("id")+"']",function(b){b.preventDefault();a.focus()})}})},populateSoD:function(a,c,b,d){var e=b.data("placeholder"),f=b.data("placeholder-option"),g=b.data("prefix"),l=b.find(".sod_label"),n=a.parent(),m=a.text(),p=a.val(),q=a.data("custom-id")?a.data("custom-id"):null,C=a.data("custom-class")?a.data("custom-class"):
"",T=a.is(":disabled")?" disabled ":"",H=a.is(":selected")?" selected active ":"",x=a.data("link")?" link ":"",y=a.data("link-external")?" linkexternal":"",K=a.prop("label");a.is("option")?(r("<span/>",{"class":"sod_option "+C+T+H+x+y,id:q,title:m,html:m,"data-value":p}).appendTo(c),d&&!g?(b.data("label",m),b.data("placeholder",m),a.prop("disabled",!0),c.find(".sod_option:last").addClass("is-placeholder disabled"),H&&l.addClass("sod_placeholder")):H&&e&&!f&&!g?b.data("label",e):H&&b.data("label",
m),(H&&!e||H&&f||H&&g)&&l.append(m),n.is("optgroup")&&(c.find(".sod_option:last").addClass("groupchild"),n.is(":disabled")&&c.find(".sod_option:last").addClass("disabled"))):r("<span/>",{"class":"sod_option optgroup "+T,title:K,html:K,"data-label":K}).appendTo(c)},focusSod:function(){var a=r(this);a.hasClass("disabled")?d.blurSod(a):(d.blurSod(r(".sod_select.focus").not(a)),a.addClass("focus"),r("html").on("click.sodBlur",function(){d.blurSod(a)}))},triggerSod:function(a){a.stopPropagation();a=r(this);
var c=a.find(".sod_list"),b=a.data("placeholder"),e=a.find(".active"),f=a.find(".selected");a.hasClass("disabled")||a.hasClass("open")||a.hasClass("touch")?(clearTimeout(l),a.removeClass("open"),b&&(a.find(".sod_label").get(0).lastChild.nodeValue=e.text())):(a.addClass("open"),b&&!a.data("prefix")&&a.find(".sod_label").addClass("sod_placeholder").html(b),d.listScroll(c,f),d.checkViewport(a,c))},keyboardUse:function(a){var c,b,f,g=r(this),l=g.find(".sod_list"),n=g.find(".sod_option"),p=g.find(".sod_label"),
t=g.data("cycle"),m=n.filter(".active");return 36<a.which&&41>a.which?(37===a.which||38===a.which?(b=m.prevAll(":not('.disabled, .optgroup')").first(),f=n.not(".disabled, .optgroup").last()):(39===a.which||40===a.which)&&(b=m.nextAll(":not('.disabled, .optgroup')").first(),f=n.not(".disabled, .optgroup").first()),!b.hasClass("sod_option")&&t&&(b=f),(b.hasClass("sod_option")||t)&&(m.removeClass("active"),b.addClass("active"),p.get(0).lastChild.nodeValue=b.text(),d.listScroll(l,b),g.hasClass("open")||
(e=!0)),!1):(13===a.which||32===a.which&&g.hasClass("open")&&(" "===g.data("filter")[0]||""===g.data("filter"))?(a.preventDefault(),m.click()):32!==a.which||g.hasClass("open")||" "!==g.data("filter")[0]&&""!==g.data("filter")?27===a.which&&d.blurSod(g):(a.preventDefault(),e=!1,g.click()),0!==a.which&&(clearTimeout(q),g.data("filter",g.data("filter")+String.fromCharCode(a.which)),c=n.filter(function(){return 0===r(this).text().toLowerCase().indexOf(g.data("filter").toLowerCase())}).not(".disabled, .optgroup").first(),
c.length&&(m.removeClass("active"),c.addClass("active"),d.listScroll(l,c),p.get(0).lastChild.nodeValue=c.text(),g.hasClass("open")||(e=!0)),q=setTimeout(function(){g.data("filter","")},500)),void 0)},optionHover:function(){var a=r(this);a.hasClass("disabled")||a.hasClass("optgroup")||a.siblings().removeClass("active").end().addClass("active")},optionClick:function(a){a.stopPropagation();a=r(this);var c=a.closest(".sod_select"),b=a.hasClass("disabled"),d=a.hasClass("optgroup"),e=c.find(".sod_option:not('.optgroup')").index(this);
c.hasClass("touch")||(b||d||(c.find(".selected, .sod_placeholder").removeClass("selected sod_placeholder"),a.addClass("selected"),c.find("select option")[e].selected=!0,c.find("select").change()),clearTimeout(l),c.removeClass("open"))},selectChange:function(){var a=r(this),c=a.find(":selected"),b=c.text(),a=a.closest(".sod_select");a.find(".sod_label").get(0).lastChild.nodeValue=b;a.data("label",b);f.onChange.call(this);!a.data("links")&&!c.data("link")||c.data("link-external")?(a.data("links-external")||
c.data("link-external"))&&window.open(c.val(),"_blank"):window.location.href=c.val()},blurSod:function(a){if(r("body").find(a).length){var c=a.data("label"),b=a.data("placeholder"),d=a.find(".active"),f=a.find(".selected"),g=!1;clearTimeout(l);e&&!d.hasClass("selected")?(d.click(),g=!0):d.hasClass("selected")||(d.removeClass("active"),f.addClass("active"));!g&&b?a.find(".sod_label").get(0).lastChild.nodeValue=f.text():g||(a.find(".sod_label").get(0).lastChild.nodeValue=c);e=!1;a.removeClass("open focus");
a.blur();r("html").off(".sodBlur")}},checkViewport:function(a,c){var b=a[0].getBoundingClientRect(),e=c.outerHeight();b.bottom+e+10>r(window).height()&&10<b.top-e?a.addClass("above"):a.removeClass("above");l=setTimeout(function(){d.checkViewport(a,c)},200)},listScroll:function(a,c){var b=a[0].getBoundingClientRect(),d=c[0].getBoundingClientRect();b.top>d.top?a.scrollTop(a.scrollTop()-b.top+d.top):b.bottom<d.bottom&&a.scrollTop(a.scrollTop()-b.bottom+d.bottom)},isTouch:function(){return"ontouchstart"in
window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}},p={destroy:function(){return this.each(function(){var a=r(this),c=a.parent();c.hasClass("sod_select")?(a.off("change"),c.find("span").remove(),a.unwrap()):console.log("Select or Die: There's no SoD to destroy")})},update:function(){return this.each(function(){var a=r(this),c=a.parent(),b=c.find(".sod_list:first");c.hasClass("sod_select")?(b.empty(),c.find(".sod_label").get(0).lastChild.nodeValue="",a.is(":disabled")&&c.addClass("disabled"),
r("option, optgroup",a).each(function(){d.populateSoD(r(this),b,c)})):console.log("Select or Die: There's no SoD to update")})},disable:function(a){return this.each(function(){var c=r(this),b=c.parent();b.hasClass("sod_select")?"undefined"!=typeof a?(b.find(".sod_list:first .sod_option[data-value='"+a+"']").addClass("disabled"),b.find(".sod_list:first .sod_option[data-label='"+a+"']").nextUntil(":not(.groupchild)").addClass("disabled"),r("option[value='"+a+"'], optgroup[label='"+a+"']",this).prop("disabled",
!0)):b.hasClass("sod_select")&&(b.addClass("disabled"),c.prop("disabled",!0)):console.log("Select or Die: There's no SoD to disable")})},enable:function(a){return this.each(function(){var c=r(this),b=c.parent();b.hasClass("sod_select")?"undefined"!=typeof a?(b.find(".sod_list:first .sod_option[data-value='"+a+"']").removeClass("disabled"),b.find(".sod_list:first .sod_option[data-label='"+a+"']").nextUntil(":not(.groupchild)").removeClass("disabled"),r("option[value='"+a+"'], optgroup[label='"+a+"']",
this).prop("disabled",!1)):b.hasClass("sod_select")&&(b.removeClass("disabled"),c.prop("disabled",!1)):console.log("Select or Die: There's no SoD to enable")})}};return p[g]?p[g].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof g&&g?(r.error('Select or Die: Oh no! No such method "'+g+'" for the SoD instance'),void 0):d.initSoD.apply(this,arguments)}}(jQuery);FS=null;
Crazyerics=function(){var r=this;$(document).ready(function(){r._clientdata=r._decompress.json(clientdata);var g=r._clientdata.openonload||{};"system"in g&&"title"in g&&"file"in g&&r._bootstrap(g.system,g.title,g.file);r._buildRecentlyPlayed(r._clientdata.playhistory);$("#searchform select").selectOrDie({customID:"selectordie",customClass:"tooltip",onChange:function(){r.replaceSuggestions($(this).val())}});$("#searchform input").autoComplete({minChars:3,cache:!1,delay:300,source:function(g,l){var n=
$("#searchform select").val();$.getJSON("/search/"+n+"/"+g,function(f){l(r._decompress.json(f))})},renderItem:function(g,l){var n=$('<div class="autocomplete-suggestion" data-title="'+g[0]+'" data-file="'+g[1]+'" data-system="'+g[2]+'" data-searchscore="'+g[3]+'"></div>');n.append(r._getBoxFront(g[2],g[0],50));n.append("<div>"+g[0]+"</div>");return $("<div/>").append(n).html()},onSelect:function(g,l,n){r._bootstrap(n.data("system"),n.data("title"),n.data("file"))}});$("#emulatorwrapperoverlay").on("click",
function(){$("#emulator").focus();$("#emulatorcontrolswrapper").removeClass()}).hover(function(g){g.stopPropagation()},function(g){g.stopPropagation()});$("#emulatorcontrolswrapper").on("mousedown mouseup click",function(g){g.preventDefault();$("#emulator").focus()});$("#emulatorwrapper").hover(function(g){$("#emulatorcontrolswrapper").removeClass()},function(g){$("#emulatorcontrolswrapper").addClass("closed")});$("#gamedetailswrapper").hover(function(g){$("#gamecontrolslist").removeClass()},function(g){$("#gamecontrolslist").addClass("closed")});
$("#emulatorcontrolswrapper li.fullscreen").click(function(){r._simulateEmulatorKeypress(70)});$("#emulatorcontrolswrapper li.savestate").click(function(){r._simulateEmulatorKeypress(49)});$("#emulatorcontrolswrapper li.loadstate").click(function(){r._simulateEmulatorKeypress(52)});$("#emulatorcontrolswrapper li.mute").click(function(){r._simulateEmulatorKeypress(77)});$("#emulatorcontrolswrapper li.decrementslot").click(function(){r._simulateEmulatorKeypress(50)});$("#emulatorcontrolswrapper li.incrementslot").click(function(){r._simulateEmulatorKeypress(51)});
$("#emulatorcontrolswrapper li.fastforward").click(function(){r._simulateEmulatorKeypress(32)});$("#emulatorcontrolswrapper li.pause").click(function(){r._simulateEmulatorKeypress(80)});$("#emulatorcontrolswrapper li.reset").click(function(){r._simulateEmulatorKeypress(72)});$("#emulatorcontrolswrapper li.rewind").click(function(){r._simulateEmulatorKeypress(82,5E3)});$("#gamecontrolslist li.controls").on("mousedown",function(){$("#emulator").is(":focus")&&(r._pauseOverride=!0)}).on("mouseup",function(g){r._pauseOverride&&
($("#emulator").focus(),r._pauseOverride=!1);$("#controlsslider").animate({width:"toggle",padding:"toggle"},500);0==$(this).attr("data-click-state")?($(this).attr("data-click-state",1),$(this).find("img").animateRotate(0,90,500)):($(this).attr("data-click-state",0),$(this).find("img").animateRotate(90,0,500))});r.replaceSuggestions("all");r._toolTips()})};Crazyerics.prototype._clientdata=null;Crazyerics.prototype._Module=null;Crazyerics.prototype._ModuleLoading=!1;
Crazyerics.prototype._pauseOverride=!1;Crazyerics.prototype._activeFile=null;Crazyerics.prototype._activeSaveStateSlot=0;Crazyerics.prototype._keypresslocked=!1;Crazyerics.prototype._tips="Back out of that mistake you made by holding the R key to rewind the game;Press the Space key to fast forward through those boring story scenes;If your browser supports it, you can go fullscreen by pressing the F key;You can save your progress by pressing the 1 key, return to it anytime with the 4 key;We'll store all of your save states as long as you return within two weeks;Pause your game with the P key;Select a system filter to generate a new list of suggested games;To search for more obsurace or forgeign titles, select a system filter first".split(";");
Crazyerics.prototype._playhistory={};Crazyerics.prototype._socket=null;
Crazyerics.prototype.replaceSuggestions=function(r,g){var q=this;g=g||100;$("#suggestionswrapper").hide();$("#loading").removeClass("close");$.getJSON("/suggest/"+r+"/"+g,function(g){g=q._decompress.json(g);$("#suggestionswrapper li").remove();for(var n=$("#suggestionswrapper ul"),f=0;f<g.length;++f){var e=q._buildGameLink(g[f].system,g[f].title,g[f].file,120);$(n[f%n.length]).append(e.li)}$("#suggestionswrapper").waitForImages().progress(function(d,e,a){$("#loading .loadingtext").text(d+"%");d===
e-1&&($("#suggestionswrapper").slideDown(),$("#loading").addClass("close"))});q._toolTips()})};
Crazyerics.prototype._bootstrap=function(r,g,q,l){var n=this;if(!n._ModuleLoading){n._ModuleLoading=!0;n._pauseOverride=!1;$("#gameloadingname").text(g);$("#gamedetailsboxfront img").addClass("close");$("#gamedetailswrapper").fadeOut();$("#startmessage").slideUp(1E3);$("#emulatorwrapper").slideDown(1E3);$("#gameloadingoverlaycontentimage").empty();var f=n._getBoxFront(r,g,170);f.addClass("tada");f.load(function(){$(this).fadeIn(200)});$("#gameloadingoverlaycontentimage").append(f);var e=setInterval(function(){$("#tip").fadeOut(500,
function(){var d=Crazyerics.prototype._tips[Math.floor(Math.random()*Crazyerics.prototype._tips.length)];$("#gameloadingoverlay").is(":animated")||$("#tip").empty().append("Tip: "+d).fadeIn(500)})},5E3);$("#gameloadingoverlay").fadeIn(500,function(){$("#gamecontrolslist li").each(function(){1==$(this).attr("data-click-state")&&$(this).mouseup()});$("#gameloadingoverlaycontent").removeClass();$("#emulatorcontrolswrapper").show();n._cleanupEmulator();$("#emulatorcanvas").append('<canvas tabindex="0" id="emulator"></canvas>');
var d=$.Deferred(),f=$.Deferred(),a=$.Deferred();$.when(d,f,a).done(function(a,b,d){var f=a[0],p=a[1];a=a[2];b=b[1];d=d.states;n._Module=f;FS=p;n.emulatorframe=a;n._setupKeypressInterceptor(r,g,q);n._buildFileSystem(f,r,q,b,d);f.callMain(f.arguments);var M=function(){n._buildGameContent(r,g,function(){});$("#gameloadingoverlaycontent").addClass("close");$("#gameloadingoverlay").fadeOut(1E3,function(){$("#tips").stop().hide();clearInterval(e);setTimeout(function(){n._ModuleLoading=!1;$("#emulatorcontrolswrapper").addClass("closed");
$("#gamecontrolslist li").each(function(){0==$(this).attr("data-click-state")&&$(this).mouseup()})},3E3)});$("#emulator").blur(function(b){n._pauseOverride||(f.pauseMainLoop(),$("#emulatorwrapperoverlay").fadeIn())}).focus(function(){f.resumeMainLoop();$("#emulatorwrapperoverlay").hide()}).focus()};l?n._asyncLoop(parseInt(l,10),function(b){n._simulateEmulatorKeypress(51,10,function(){b.next()})},function(){n._simulateEmulatorKeypress(52);M()}):M()});n._loademulator(r,d);n._loadGame(r,g,q,f);n._loadGameDetails(r,
g,q,a)})}};
Crazyerics.prototype._buildGameContent=function(r,g,q){var l=this._getBoxFront(r,g,170),n=document.createElement("img");n.addEventListener("load",function(){$("#gamedetailsboxfront").empty().append(l);$("#gametitle").empty().hide().append(g);var f=232<this.height?this.height:232;$("#gamedetailsboxfront img").addClass("close");$("#gamedetailsbackground").animate({height:f},1E3,function(){$("#gamedetailswrapper").fadeIn(1E3,function(){$("#gametitle").bigText({textAlign:"left",horizontalAlign:"left"});$("#gametitle").fadeIn(500);
$("#gamedetailsboxfront img").removeClass();$("#controlsslider").empty();$.get("/layout/controls/"+r,function(e){$("#controlsslider").append(e)});q()})})},!0);l.load(function(){n.setAttribute("src",l.attr("src"))})};
Crazyerics.prototype._cleanupEmulator=function(){$(document).unbind("fullscreenchange");$(document).unbind("mozfullscreenchange");$(document).unbind("webkitfullscreenchange");$(document).unbind("pointerlockchange");$(document).unbind("mozpointerlockchange");$(document).unbind("webkitpointerlockchange");this._activeSaveStateSlot=0;FS&&(FS=null);if(this._Module){try{this._Module.exit()}catch(r){}this._Module=null}this.emulatorframe&&(this.emulatorframe.remove(),this.emulatorframe=null);$("#emulator").remove()};
Crazyerics.prototype._simulateEmulatorKeypress=function(r,g,q){var l=this;g=g||10;if(this._Module&&this._Module.RI&&this._Module.RI.eventHandler&&!l._keypresslocked){l._keypresslocked=!0;var n;n=$.Event("keydown");n.keyCode=r;n.which=r;this._Module.RI.eventHandler(n);setTimeout(function(){n=$.Event("keyup");n.keyCode=r;n.which=r;l._Module.RI.eventHandler(n);setTimeout(function(){l._keypresslocked=!1;q&&q()},100)},g);$("#emulator").focus()}};
Crazyerics.prototype._setupKeypressInterceptor=function(r,g,q){var l=this;if(this._Module&&this._Module.RI&&this._Module.RI.eventHandler){var n=this._Module.RI.eventHandler;this._Module.RI.eventHandler=function(f){switch(f.type){case "keyup":switch(f.keyCode){case 70:l._Module.requestFullScreen(!0,!0);break;case 49:setTimeout(function(){l._saveState(r,g,q,l._activeSaveStateSlot,function(){})},100);break;case 50:l._activeSaveStateSlot=0===l._activeSaveStateSlot?0:l._activeSaveStateSlot-1;break;case 51:l._activeSaveStateSlot++}}n(f)}}};
Crazyerics.prototype._loademulator=function(r,g){var q=$("<iframe/>",{src:"/load/emulator/"+r,style:"display:none",load:function(){g.resolve(this.contentWindow.Module,this.contentWindow.FS,q)}});$("body").append(q)};Crazyerics.prototype._loadGame=function(r,g,q,l){var n=this;$.get("/load/game?key="+encodeURIComponent(n._compress.gamekey(r,g,q)),function(f){var e;try{e=pako.inflate(f)}catch(d){l.resolve(d);return}n._addToPlayHistory(n._compress.gamekey(r,g,q),r,g,q);l.resolve(null,e)})};
Crazyerics.prototype._loadGameDetails=function(r,g,q,l){var n=this;$.get("/states/load?key="+encodeURIComponent(n._compress.gamekey(r,g,q)),function(f){l.resolve({states:f.states,files:n._decompress.json(f.files)})})};
Crazyerics.prototype._buildFileSystem=function(r,g,q,l,n){r.FS_createDataFile("/",q,l,!0,!0);r.arguments=["-v","/"+q];r.FS_createFolder("/","etc",!0,!0);this._clientdata.retroarch&&this._clientdata.retroarch[g]&&r.FS_createDataFile("/etc","retroarch.cfg",this._clientdata.retroarch[g],!0,!0);for(var f in n)g=this._decompress.bytearray(n[f]),l="/"+q.replace(RegExp(".[a-z]{1,3}$","gi"),"")+".state"+(0==f?"":f),r.FS_createDataFile("/",l,g,!0,!0)};
Crazyerics.prototype._saveState=function(r,g,q,l,n){var f=this;n=q.replace(RegExp(".[a-z]{1,3}$","gi"),"")+".state"+(0==l?"":l);var e,d=f._compress.gamekey(r,g,q);try{e=FS.open(n)}catch(p){console.log(p);return}e&&e.node&&e.node.contents&&(e=f._compress.bytearray(e.node.contents),$.ajax({url:"/states/save?key="+encodeURIComponent(d)+"&slot="+l,data:e,processData:!1,contentType:"text/plain",type:"POST",complete:function(e){e={};e[l]=Date.now();f._addToPlayHistory(d,r,g,q,null,e)}}))};
Crazyerics.prototype._buildRecentlyPlayed=function(r,g){for(var q in r)this._addToPlayHistory(q,r[q].system,r[q].title,r[q].file,r[q].played,r[q].slots);$.isEmptyObject(r)?$("#startfirst").animate({height:"toggle",opacity:"toggle"},500):$("#startplayed").animate({height:"toggle",opacity:"toggle"},500)};
Crazyerics.prototype._addToPlayHistory=function(r,g,q,l,n,f){var e;if(r in this._playhistory){if(this._playhistory[r].played=Date.now(),f)for(e in f)this._addStateToPlayHistory(this._playhistory[r],this._playhistory[r].stateswrapper,e,f[e])}else{var d=this._buildGameLink(g,q,l,120,!0,f);d.li.addClass("close");d.img.load(function(){d.li.removeClass("close")});d.remove.addClass("tooltip").attr("title","Remove this game and all saved states").on("click",function(){d.li.addClass("slideup");$.ajax({url:"/states/delete?key="+
encodeURIComponent(r),type:"DELETE",complete:function(){setTimeout(function(){d.li.remove()},500)}})});var p=$('<div class="statewrapper"></div>');d.li.append(p);this._playhistory[r]={system:g,title:q,file:l,played:n||Date.now(),slots:f||{},stateswrapper:p};if(f)for(e in f)this._addStateToPlayHistory(this._playhistory[r],p,e,f[e]);g=$("#recentplayedwrapper ul");q=g[0];for(l=0;l<g.length;++l)q=$(g[l]).children().length<$(q).children().length?g[l]:q;$(q).append(d.li);$("#recentplayedwrapper").show()}this._toolTips()};
Crazyerics.prototype._addStateToPlayHistory=function(r,g,q,l){var n=this;l=new Date(l);l=$.format.date(l,"E MM/dd/yyyy h:mm:ss a");var f=$('<div data-slot="'+q+'" class="statebutton zoom tooltip" title="Load State Saved '+l+'">'+q+"</div>").on("mousedown",function(){n._pauseOverride=!0}).on("mouseup",function(){n._bootstrap(r.system,r.title,r.file,q);window.scrollTo(0,0)}),e=!1;g.children().each(function(){var d=parseInt($(this).attr("data-slot"),10);q=parseInt(q,10);if(d===q)return f.insertBefore(this),
$(this).remove(),e=!0,!1;if(d>q)return f.insertBefore(this),e=!0,!1});e||g.append(f)};
Crazyerics.prototype._buildGameLink=function(r,g,q,l,n){var f=this;n=n||!1;var e=$('<li class="gamelink"></li>');l=f._getBoxFront(r,g,l);l.addClass("tooltip close");l.attr("title",g);l.load(function(){$(this).removeClass("close").on("mousedown",function(){f._pauseOverride=!0}).on("mouseup",function(){f._bootstrap(r,g,q);window.scrollTo(0,0)})});var d=$('<div class="box zoom"></div>');d.append(l);e.append(d);var p=null;n&&(p=$('<div class="remove"></div>'),d.append(p).on("mouseover",function(){$(p).show()}).on("mouseout",
function(){$(p).hide()}));return{li:e,img:l,remove:p}};Crazyerics.prototype._getBoxFront=function(r,g,q){return $("<img onerror=\"this.src='/images/blanks/"+r+"_"+q+'.png\'" src="/images/boxes/'+r+"/"+g+"/"+q+'.jpg" />')};Crazyerics.prototype._toolTips=function(){$(".tooltip").tooltipster({theme:"tooltipster-shadow",animation:"grow",delay:100})};Crazyerics.prototype._generateLink=function(r,g,q){return this._compress.string(encodeURI(r+"/"+g+"/"+q))};
Crazyerics.prototype._compress={bytearray:function(r){r=pako.deflate(r,{to:"string"});return btoa(r)},json:function(r){r=JSON.stringify(r);r=pako.deflate(r,{to:"string"});return btoa(r)},string:function(r){r=pako.deflate(r,{to:"string"});return btoa(r)},gamekey:function(r,g,q){return this.json({system:r,title:g,file:q})}};
Crazyerics.prototype._decompress={bytearray:function(r){r=new Uint8Array(atob(r).split("").map(function(g){return g.charCodeAt(0)}));return pako.inflate(r)},json:function(r){r=atob(r);r=pako.inflate(r,{to:"string"});return JSON.parse(r)},string:function(r){r=atob(r);return pako.inflate(r,{to:"string"})}};
$.fn.animateRotate=function(r,g,q,l,n){var f=$.speed(q,l,n),e=f.step;return this.each(function(d,l){f.complete=$.proxy(f.complete,l);f.step=function(a){$.style(l,"transform","rotate("+a+"deg)");if(e)return e.apply(l,arguments)};$({deg:r}).animate({deg:g},f)})};Crazyerics.prototype._asyncLoop=function(r,g,q){var l=0,n=!1,f={next:function(){n||(l<r?(l++,g(f)):(n=!0,q()))},iteration:function(){return l-1},"break":function(){n=!0;q()}};f.next();return f};crazyerics=new Crazyerics;!function(r){r.fn.autoComplete=function(g){var q=r.extend({},r.fn.autoComplete.defaults,g);return"string"==typeof g?(this.each(function(){var l=r(this);"destroy"==g&&(r(window).off("resize.autocomplete",l.updateSC),l.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"),l.data("autocomplete")?l.attr("autocomplete",l.data("autocomplete")):l.removeAttr("autocomplete"),r(l.data("sc")).remove(),l.removeData("sc").removeData("autocomplete"))}),this):this.each(function(){function g(f){var e=
n.val();if(n.cache[e]=f,f.length&&e.length>=q.minChars){for(var d="",l=0;l<f.length;l++)d+=q.renderItem(f[l],e);n.sc.html(d);n.updateSC(0)}else n.sc.hide()}var n=r(this);n.sc=r('<div class="autocomplete-suggestions '+q.menuClass+'"></div>');n.data("sc",n.sc).data("autocomplete",n.attr("autocomplete"));n.attr("autocomplete","off");n.cache={};n.last_val="";n.updateSC=function(f,e){if(n.sc.css({top:n.offset().top+n.outerHeight(),left:n.offset().left,width:n.outerWidth()}),!f&&(n.sc.show(),n.sc.maxHeight||
(n.sc.maxHeight=parseInt(n.sc.css("max-height"))),n.sc.suggestionHeight||(n.sc.suggestionHeight=r(".autocomplete-suggestion",n.sc).first().outerHeight()),n.sc.suggestionHeight))if(e){var d=n.sc.scrollTop(),g=e.offset().top-n.sc.offset().top;0<g+n.sc.suggestionHeight-n.sc.maxHeight?n.sc.scrollTop(g+n.sc.suggestionHeight+d-n.sc.maxHeight):0>g&&n.sc.scrollTop(g+d)}else n.sc.scrollTop(0)};r(window).on("resize.autocomplete",n.updateSC);n.sc.appendTo("body");n.sc.on("mouseleave",".autocomplete-suggestion",
function(){r(".autocomplete-suggestion.selected").removeClass("selected")});n.sc.on("mouseenter",".autocomplete-suggestion",function(){r(".autocomplete-suggestion.selected").removeClass("selected");r(this).addClass("selected")});n.sc.on("mousedown",".autocomplete-suggestion",function(f){var e=r(this),d=e.data("val");(d||e.hasClass("autocomplete-suggestion"))&&(n.val(d),q.onSelect(f,d,e),n.sc.hide())});n.on("blur.autocomplete",function(){try{over_sb=r(".autocomplete-suggestions:hover").length}catch(f){over_sb=
0}over_sb?n.is(":focus")||setTimeout(function(){n.focus()},20):(n.last_val=n.val(),n.sc.hide(),setTimeout(function(){n.sc.hide()},350))});q.minChars||n.on("focus.autocomplete",function(){n.last_val="\n";n.trigger("keyup.autocomplete")});n.on("keydown.autocomplete",function(f){if((40==f.which||38==f.which)&&n.sc.html()){var e,d=r(".autocomplete-suggestion.selected",n.sc);return d.length?(e=40==f.which?d.next(".autocomplete-suggestion"):d.prev(".autocomplete-suggestion"),e.length?(d.removeClass("selected"),
n.val(e.addClass("selected").data("val"))):(d.removeClass("selected"),n.val(n.last_val),e=0)):(e=40==f.which?r(".autocomplete-suggestion",n.sc).first():r(".autocomplete-suggestion",n.sc).last(),n.val(e.addClass("selected").data("val"))),n.updateSC(0,e),!1}if(27==f.which)n.val(n.last_val).sc.hide();else if(13==f.which||9==f.which)d=r(".autocomplete-suggestion.selected",n.sc),d.length&&n.sc.is(":visible")&&(q.onSelect(f,d.data("val"),d),setTimeout(function(){n.sc.hide()},20))});n.on("keyup.autocomplete",
function(f){if(!~r.inArray(f.which,[13,27,35,36,37,38,39,40])){var e=n.val();if(e.length>=q.minChars){if(e!=n.last_val){if(n.last_val=e,clearTimeout(n.timer),q.cache){if(e in n.cache)return void g(n.cache[e]);for(f=1;f<e.length-q.minChars;f++){var d=e.slice(0,e.length-f);if(d in n.cache&&!n.cache[d].length)return void g([])}}n.timer=setTimeout(function(){q.source(e,g)},q.delay)}}else n.last_val=e,n.sc.hide()}})})};r.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(g,
q){var l=new RegExp("("+q.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+g+'">'+g.replace(l,"<b>$1</b>")+"</div>"},onSelect:function(g,q,l){}}}(jQuery);(function(r){var g={rotateText:null,fontSizeFactor:.8,maximumFontSize:null,limitingDimension:"both",horizontalAlign:"center",verticalAlign:"center",textAlign:"center",whiteSpace:"nowrap"};r.fn.bigText=function(q){return this.each(function(){q=r.extend({},g,q);var l=r(this),n=l.parent();l.css("visibility","hidden");l.css({display:"inline-block",clear:"both","float":"left","font-size":1E3*q.fontSizeFactor+"px","line-height":"1000px","white-space":q.whiteSpace,"text-align":q.textAlign,position:"relative",
padding:0,margin:0,left:"50%",top:"50%"});var f=parseInt(n.css("padding-left")),e=parseInt(n.css("padding-top")),d=parseInt(n.css("padding-right")),p=parseInt(n.css("padding-bottom")),a=l.outerWidth(),c=l.outerHeight(),b={};if(null!==q.rotateText){if("number"!==typeof q.rotateText)throw"bigText error: rotateText value must be a number";a="rotate("+q.rotateText+"deg)";b={"-webkit-transform":a,"-ms-transform":a,"-moz-transform":a,"-o-transform":a,transform:a};l.css(b);c=Math.abs(Math.sin(q.rotateText*
Math.PI/180));b=Math.abs(Math.cos(q.rotateText*Math.PI/180));a=l.outerWidth()*b+l.outerHeight()*c;c=l.outerWidth()*c+l.outerHeight()*b}var f=(n.innerWidth()-f-d)/a,e=(n.innerHeight()-e-p)/c,k;"width"===q.limitingDimension.toLowerCase()?(k=Math.floor(1E3*f),n.height(k)):"height"===q.limitingDimension.toLowerCase()?k=Math.floor(1E3*e):f<e?k=Math.floor(1E3*f):f>=e&&(k=Math.floor(1E3*e));e=k*q.fontSizeFactor;null!==q.maximumFontSize&&e>q.maximumFontSize&&(e=q.maximumFontSize,k=e/q.fontSizeFactor);l.css({"font-size":Math.floor(e)+
"px","line-height":Math.ceil(k)+"px","margin-bottom":"0px","margin-right":"0px"});"height"===q.limitingDimension.toLowerCase()&&n.width(l.width()+4+"px");n={};switch(q.verticalAlign.toLowerCase()){case "top":n.top="0%";break;case "bottom":n.top="100%";n["margin-top"]=Math.floor(-l.innerHeight())+"px";break;default:n["margin-top"]=Math.floor(-l.innerHeight()/2)+"px"}switch(q.horizontalAlign.toLowerCase()){case "left":n.left="0%";break;case "right":n.left="100%";n["margin-left"]=Math.floor(-l.innerWidth())+
"px";break;default:n["margin-left"]=Math.floor(-l.innerWidth()/2)+"px"}l.css(n);l.css("visibility","visible")})}})(jQuery);DateFormat={};
!function(r){var g="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),q="Sun Mon Tue Wed Thu Fri Sat".split(" "),l="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),n="January February March April May June July August September October November December".split(" "),f={Jan:"01",Feb:"02",Mar:"03",Apr:"04",May:"05",Jun:"06",Jul:"07",Aug:"08",Sep:"09",Oct:"10",Nov:"11",Dec:"12"},e=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[Z\-+]?(\d{2}:?\d{2})?/;r.format=function(){function d(a){var c,
b,d,e,f,g="";return-1!==a.indexOf(".")&&(e=a.split("."),a=e[0],g=e[e.length-1]),f=a.split(":"),3===f.length?(c=f[0],b=f[1],d=f[2].replace(/\s.+/,"").replace(/[a-z]/gi,""),a=a.replace(/\s.+/,"").replace(/[a-z]/gi,""),{time:a,hour:c,minute:b,second:d,millis:g}):{time:"",hour:"",minute:"",second:"",millis:""}}function p(a,c){for(var b=c-String(a).length,d=0;b>d;d++)a="0"+a;return a}return{parseDate:function(a){var c,b={date:null,year:null,month:null,dayOfMonth:null,dayOfWeek:null,time:null};if("number"==
typeof a)return this.parseDate(new Date(a));if("function"==typeof a.getFullYear)b.year=String(a.getFullYear()),b.month=String(a.getMonth()+1),b.dayOfMonth=String(a.getDate()),b.time=d(a.toTimeString()+"."+a.getMilliseconds());else if(-1!=a.search(e))c=a.split(/[T\+-]/),b.year=c[0],b.month=c[1],b.dayOfMonth=c[2],b.time=d(c[3].split(".")[0]);else switch(c=a.split(" "),6===c.length&&isNaN(c[5])&&(c[c.length]="()"),c.length){case 6:b.year=c[5];a=c[1];b.month=f[a]||a;b.dayOfMonth=c[2];b.time=d(c[3]);break;
case 2:a=c[0].split("-");b.year=a[0];b.month=a[1];b.dayOfMonth=a[2];b.time=d(c[1]);break;case 7:case 9:case 10:b.year=c[3];a=c[1];b.month=f[a]||a;b.dayOfMonth=c[2];b.time=d(c[4]);break;case 1:a=c[0].split("");b.year=a[0]+a[1]+a[2]+a[3];b.month=a[5]+a[6];b.dayOfMonth=a[8]+a[9];b.time=d(a[13]+a[14]+a[15]+a[16]+a[17]+a[18]+a[19]+a[20]);break;default:return null}return b.date=b.time?new Date(b.year,b.month-1,b.dayOfMonth,b.time.hour,b.time.minute,b.time.second,b.time.millis):new Date(b.year,b.month-1,
b.dayOfMonth),b.dayOfWeek=String(b.date.getDay()),b},date:function(a,c){try{var b=this.parseDate(a);if(null===b)return a;for(var d,e=b.year,f=b.month,r=b.dayOfMonth,G=b.dayOfWeek,t=b.time,m=b="",E="",B=!1,C=0;C<c.length;C++){var T=c.charAt(C),H=c.charAt(C+1);if(B)"'"==T?(m+=""===b?"'":b,b="",B=!1):b+=T;else switch(b+=T,E="",b){case "ddd":var x=m,y,K=G;y=g[parseInt(K,10)]||K;m=x+y;b="";break;case "dd":if("d"===H)break;m+=p(r,2);b="";break;case "d":if("d"===H)break;m+=parseInt(r,10);b="";break;case "D":r=
1==r||21==r||31==r?parseInt(r,10)+"st":2==r||22==r?parseInt(r,10)+"nd":3==r||23==r?parseInt(r,10)+"rd":parseInt(r,10)+"th";m+=r;b="";break;case "MMMM":var x=m,K=f,L=parseInt(K,10)-1,m=x+(n[L]||K),b="";break;case "MMM":if("M"===H)break;var x=m,K=f,O=parseInt(K,10)-1,m=x+(l[O]||K),b="";break;case "MM":if("M"===H)break;m+=p(f,2);b="";break;case "M":if("M"===H)break;m+=parseInt(f,10);b="";break;case "y":case "yyy":if("y"===H)break;m+=b;b="";break;case "yy":if("y"===H)break;m+=String(e).slice(-2);b="";
break;case "yyyy":m+=e;b="";break;case "HH":m+=p(t.hour,2);b="";break;case "H":if("H"===H)break;m+=parseInt(t.hour,10);b="";break;case "hh":d=0===parseInt(t.hour,10)?12:13>t.hour?t.hour:t.hour-12;m+=p(d,2);b="";break;case "h":if("h"===H)break;d=0===parseInt(t.hour,10)?12:13>t.hour?t.hour:t.hour-12;m+=parseInt(d,10);b="";break;case "mm":m+=p(t.minute,2);b="";break;case "m":if("m"===H)break;m+=t.minute;b="";break;case "ss":m+=p(t.second.substring(0,2),2);b="";break;case "s":if("s"===H)break;m+=t.second;
b="";break;case "S":case "SS":if("S"===H)break;m+=b;b="";break;case "SSS":var D="000"+t.millis.substring(0,3),m=m+D.substring(D.length-3),b="";break;case "a":m+=12<=t.hour?"PM":"AM";b="";break;case "p":m+=12<=t.hour?"p.m.":"a.m.";b="";break;case "E":var x=m,S,K=G;S=q[parseInt(K,10)]||K;m=x+S;b="";break;case "'":b="";B=!0;break;default:m+=T,b=""}}return m+E}catch(X){return console&&console.log&&console.log(X),a}},prettyDate:function(a){var c,b,d;return("string"==typeof a||"number"==typeof a)&&(c=new Date(a)),
"object"==typeof a&&(c=new Date(a.toString())),b=((new Date).getTime()-c.getTime())/1E3,d=Math.floor(b/86400),isNaN(d)||0>d?void 0:60>b?"just now":120>b?"1 minute ago":3600>b?Math.floor(b/60)+" minutes ago":7200>b?"1 hour ago":86400>b?Math.floor(b/3600)+" hours ago":1===d?"Yesterday":7>d?d+" days ago":31>d?Math.ceil(d/7)+" weeks ago":31<=d?"more than 5 weeks ago":void 0},toBrowserTimeZone:function(a,c){return this.date(new Date(a),c||"MM/dd/yyyy HH:mm:ss")}}}()}(DateFormat);
(function(r){r.format=DateFormat.format})(jQuery);(function(r,g,q){function l(a,c){this.bodyOverflowX;this.callbacks={hide:[],show:[]};this.checkInterval=null;this.Content;this.$el=r(a);this.$elProxy;this.elProxyPosition;this.enabled=!0;this.options=r.extend({},e,c);this.mouseIsOverProxy=!1;this.namespace="tooltipster-"+Math.round(1E5*Math.random());this.Status="hidden";this.timerShow=this.timerHide=null;this.$tooltip;this.options.iconTheme=this.options.iconTheme.replace(".","");this.options.theme=this.options.theme.replace(".","");this._init()}
function n(a,c){var b=!0;r.each(a,function(d,e){if("undefined"===typeof c[d]||a[d]!==c[d])return b=!1});return b}function f(){var a=(q.body||q.documentElement).style,c="transition";if("string"==typeof a[c])return!0;v=["Moz","Webkit","Khtml","O","ms"];for(var c=c.charAt(0).toUpperCase()+c.substr(1),b=0;b<v.length;b++)if("string"==typeof a[v[b]+c])return!0;return!1}var e={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,
maxWidth:null,functionInit:function(a,c){},functionBefore:function(a,c){c()},functionReady:function(a,c){},functionAfter:function(a){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(a){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",
touchDevices:!0,trigger:"hover",updateAnimation:!0};l.prototype={_init:function(){var a=this;if(q.querySelector){var c=null;void 0===a.$el.data("tooltipster-initialTitle")&&(c=a.$el.attr("title"),void 0===c&&(c=null),a.$el.data("tooltipster-initialTitle",c));null!==a.options.content?a._content_set(a.options.content):a._content_set(c);c=a.options.functionInit.call(a.$el,a.$el,a.Content);"undefined"!==typeof c&&a._content_set(c);a.$el.removeAttr("title").addClass("tooltipstered");!d&&a.options.iconDesktop||
d&&a.options.iconTouch?("string"===typeof a.options.icon?(a.$elProxy=r('<span class="'+a.options.iconTheme+'"></span>'),a.$elProxy.text(a.options.icon)):a.$elProxy=a.options.iconCloning?a.options.icon.clone(!0):a.options.icon,a.$elProxy.insertAfter(a.$el)):a.$elProxy=a.$el;if("hover"==a.options.trigger){if(a.$elProxy.on("mouseenter."+a.namespace,function(){if(p||!d||a.options.touchDevices)a.mouseIsOverProxy=!0,a._show()}).on("mouseleave."+a.namespace,function(){if(p||!d||a.options.touchDevices)a.mouseIsOverProxy=
!1}),d&&a.options.touchDevices)a.$elProxy.on("touchstart."+a.namespace,function(){a._showNow()})}else if("click"==a.options.trigger)a.$elProxy.on("click."+a.namespace,function(){(p||!d||a.options.touchDevices)&&a._show()})}},_show:function(){var a=this;"shown"!=a.Status&&"appearing"!=a.Status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a._showNow()},a.options.delay):a._showNow())},_showNow:function(a){var c=this;
c.options.functionBefore.call(c.$el,c.$el,function(){if(c.enabled&&null!==c.Content){a&&c.callbacks.show.push(a);c.callbacks.hide=[];clearTimeout(c.timerShow);c.timerShow=null;clearTimeout(c.timerHide);c.timerHide=null;c.options.onlyOne&&r(".tooltipstered").not(c.$el).each(function(b,a){var c=r(a),d=c.data("tooltipster-ns");r.each(d,function(b,a){var d=c.data(a),e=d.status(),f=d.option("autoClose");"hidden"!==e&&"disappearing"!==e&&f&&d.hide()})});var b=function(){c.Status="shown";r.each(c.callbacks.show,
function(b,a){a.call(c.$el)});c.callbacks.show=[]};if("hidden"!==c.Status){var e=0;"disappearing"===c.Status?(c.Status="appearing",f()?(c.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+c.options.animation+"-show"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(b)):c.$tooltip.stop().fadeIn(b)):"shown"===c.Status&&b()}else{c.Status="appearing";e=c.options.speed;c.bodyOverflowX=r("body").css("overflow-x");r("body").css("overflow-x","hidden");var h=
"tooltipster-"+c.options.animation;c.$tooltip=r('<div class="tooltipster-base '+c.options.theme+'" style="'+(c.options.minWidth?"min-width:"+Math.round(c.options.minWidth)+"px;":"")+" "+(c.options.maxWidth?"max-width:"+Math.round(c.options.maxWidth)+"px;":"")+" "+(c.options.interactive?"pointer-events: auto;":"")+" "+("-webkit-transition-duration: "+c.options.speed+"ms; -webkit-animation-duration: "+c.options.speed+"ms; -moz-transition-duration: "+c.options.speed+"ms; -moz-animation-duration: "+c.options.speed+
"ms; -o-transition-duration: "+c.options.speed+"ms; -o-animation-duration: "+c.options.speed+"ms; -ms-transition-duration: "+c.options.speed+"ms; -ms-animation-duration: "+c.options.speed+"ms; transition-duration: "+c.options.speed+"ms; animation-duration: "+c.options.speed+"ms;")+'"><div class="tooltipster-content"></div></div>');f()&&c.$tooltip.addClass(h);c._content_insert();c.$tooltip.appendTo("body");c.reposition();c.options.functionReady.call(c.$el,c.$el,c.$tooltip);f()?(c.$tooltip.addClass(h+
"-show"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(b)):c.$tooltip.css("display","none").fadeIn(c.options.speed,b);c._interval_set();r(g).on("scroll."+c.namespace+" resize."+c.namespace,function(){c.reposition()});if(c.options.autoClose)if(r("body").off("."+c.namespace),"hover"==c.options.trigger){d&&setTimeout(function(){r("body").on("touchstart."+c.namespace,function(){c.hide()})},0);if(c.options.interactive){if(d)c.$tooltip.on("touchstart."+c.namespace,function(b){b.stopPropagation()});
var l=null;c.$elProxy.add(c.$tooltip).on("mouseleave."+c.namespace+"-autoClose",function(){clearTimeout(l);l=setTimeout(function(){c.hide()},c.options.interactiveTolerance)}).on("mouseenter."+c.namespace+"-autoClose",function(){clearTimeout(l)})}else c.$elProxy.on("mouseleave."+c.namespace+"-autoClose",function(){c.hide()});if(c.options.hideOnClick)c.$elProxy.on("click."+c.namespace+"-autoClose",function(){c.hide()})}else if("click"==c.options.trigger&&(setTimeout(function(){r("body").on("click."+
c.namespace+" touchstart."+c.namespace,function(){c.hide()})},0),c.options.interactive))c.$tooltip.on("click."+c.namespace+" touchstart."+c.namespace,function(b){b.stopPropagation()})}0<c.options.timer&&(c.timerHide=setTimeout(function(){c.timerHide=null;c.hide()},c.options.timer+e))}})},_interval_set:function(){var a=this;a.checkInterval=setInterval(function(){if(0===r("body").find(a.$el).length||0===r("body").find(a.$elProxy).length||"hidden"==a.Status||0===r("body").find(a.$tooltip).length)"shown"!=
a.Status&&"appearing"!=a.Status||a.hide(),a._interval_cancel();else if(a.options.positionTracker){var c=a._repositionInfo(a.$elProxy),b=!1;n(c.dimension,a.elProxyPosition.dimension)&&("fixed"===a.$elProxy.css("position")?n(c.position,a.elProxyPosition.position)&&(b=!0):n(c.offset,a.elProxyPosition.offset)&&(b=!0));b||(a.reposition(),a.options.positionTrackerCallback.call(a,a.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval);this.checkInterval=null},_content_set:function(a){"object"===
typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0));this.Content=a},_content_insert:function(){var a=this.$tooltip.find(".tooltipster-content");"string"!==typeof this.Content||this.options.contentAsHTML?a.empty().append(this.Content):a.text(this.Content)},_update:function(a){var c=this;c._content_set(a);null!==c.Content?"hidden"!==c.Status&&(c._content_insert(),c.reposition(),c.options.updateAnimation&&(f()?(c.$tooltip.css({width:"","-webkit-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",
"-moz-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+c.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=c.Status&&(c.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==
c.Status&&c.$tooltip.css({"-webkit-transition":c.options.speed+"ms","-moz-transition":c.options.speed+"ms","-o-transition":c.options.speed+"ms","-ms-transition":c.options.speed+"ms",transition:c.options.speed+"ms"})},c.options.speed))},c.options.speed)):c.$tooltip.fadeTo(c.options.speed,.5,function(){"hidden"!=c.Status&&c.$tooltip.fadeTo(c.options.speed,1)}))):c.hide()},_repositionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),
top:parseInt(a.css("top"))}}},hide:function(a){var c=this;a&&c.callbacks.hide.push(a);c.callbacks.show=[];clearTimeout(c.timerShow);c.timerShow=null;clearTimeout(c.timerHide);c.timerHide=null;var b=function(){r.each(c.callbacks.hide,function(b,a){a.call(c.$el)});c.callbacks.hide=[]};"shown"==c.Status||"appearing"==c.Status?(c.Status="disappearing",a=function(){c.Status="hidden";"object"==typeof c.Content&&null!==c.Content&&c.Content.detach();c.$tooltip.remove();c.$tooltip=null;r(g).off("."+c.namespace);
r("body").off("."+c.namespace).css("overflow-x",c.bodyOverflowX);r("body").off("."+c.namespace);c.$elProxy.off("."+c.namespace+"-autoClose");c.options.functionAfter.call(c.$el,c.$el);b()},f()?(c.$tooltip.clearQueue().removeClass("tooltipster-"+c.options.animation+"-show").addClass("tooltipster-dying"),0<c.options.speed&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(a)):c.$tooltip.stop().fadeOut(c.options.speed,a)):"hidden"==c.Status&&b();return c},show:function(a){this._showNow(a);return this},
update:function(a){return this.content(a)},content:function(a){if("undefined"===typeof a)return this.Content;this._update(a);return this},reposition:function(){if(0!==r("body").find(this.$tooltip).length){var a=function(b,a){0>e.offset.top-r(g).scrollTop()-l-O-12&&-1<a.indexOf("top")&&(D=b);e.offset.top+e.dimension.height+l+12+O>r(g).scrollTop()+r(g).height()&&-1<a.indexOf("bottom")&&(D=b,L=e.offset.top-l-O-12)},c=function(){var a=r(g).scrollLeft();0>K-a&&(b=K-a,K=a);K+f-a>d&&(b=K-(d+a-f),K=d+a-f)};
this.$tooltip.css("width","");this.elProxyPosition=this._repositionInfo(this.$elProxy);var b=null,d=r(g).width(),e=this.elProxyPosition,f=this.$tooltip.outerWidth(!1);this.$tooltip.innerWidth();var l=this.$tooltip.outerHeight(!1);if(this.$elProxy.is("area")){var n=this.$elProxy.attr("shape"),p=this.$elProxy.parent().attr("name"),m=r('img[usemap="#'+p+'"]'),p=m.offset().left,q=m.offset().top,B=void 0!==this.$elProxy.attr("coords")?this.$elProxy.attr("coords").split(","):void 0;if("circle"==n)n=parseInt(B[0]),
m=parseInt(B[1]),B=parseInt(B[2]),e.dimension.height=2*B,e.dimension.width=2*B,e.offset.top=q+m-B,e.offset.left=p+n-B;else if("rect"==n){var n=parseInt(B[0]),m=parseInt(B[1]),C=parseInt(B[2]),B=parseInt(B[3]);e.dimension.height=B-m;e.dimension.width=C-n;e.offset.top=q+m;e.offset.left=p+n}else if("poly"==n){for(var T=C=m=n=0,H="even",x=0;x<B.length;x++){var y=parseInt(B[x]);"even"==H?(y>C&&(C=y,0===x&&(n=C)),y<n&&(n=y),H="odd"):(y>T&&(T=y,1==x&&(m=T)),y<m&&(m=y),H="even")}e.dimension.height=T-m;e.dimension.width=
C-n;e.offset.top=q+m;e.offset.left=p+n}else e.dimension.height=m.outerHeight(!1),e.dimension.width=m.outerWidth(!1),e.offset.top=q,e.offset.left=p}var K=0,L=q=0,O=parseInt(this.options.offsetY),p=parseInt(this.options.offsetX),D=this.options.position;"top"==D&&(q=e.offset.left+f-(e.offset.left+e.dimension.width),K=e.offset.left+p-q/2,L=e.offset.top-l-O-12,c(),a("bottom","top"));"top-left"==D&&(K=e.offset.left+p,L=e.offset.top-l-O-12,c(),a("bottom-left","top-left"));"top-right"==D&&(K=e.offset.left+
e.dimension.width+p-f,L=e.offset.top-l-O-12,c(),a("bottom-right","top-right"));"bottom"==D&&(q=e.offset.left+f-(e.offset.left+e.dimension.width),K=e.offset.left-q/2+p,L=e.offset.top+e.dimension.height+O+12,c(),a("top","bottom"));"bottom-left"==D&&(K=e.offset.left+p,L=e.offset.top+e.dimension.height+O+12,c(),a("top-left","bottom-left"));"bottom-right"==D&&(K=e.offset.left+e.dimension.width+p-f,L=e.offset.top+e.dimension.height+O+12,c(),a("top-right","bottom-right"));"left"==D&&(K=e.offset.left-p-f-
12,q=e.offset.left+p+e.dimension.width+12,a=e.offset.top+l-(e.offset.top+e.dimension.height),L=e.offset.top-a/2-O,0>K&&q+f>d?(a=2*parseFloat(this.$tooltip.css("border-width")),c=f+K-a,this.$tooltip.css("width",c+"px"),l=this.$tooltip.outerHeight(!1),K=e.offset.left-p-c-12-a,a=e.offset.top+l-(e.offset.top+e.dimension.height),L=e.offset.top-a/2-O):0>K&&(K=e.offset.left+p+e.dimension.width+12,b="left"));"right"==D&&(K=e.offset.left+p+e.dimension.width+12,q=e.offset.left-p-f-12,a=e.offset.top+l-(e.offset.top+
e.dimension.height),L=e.offset.top-a/2-O,K+f>d&&0>q?(a=2*parseFloat(this.$tooltip.css("border-width")),this.$tooltip.css("width",d-K-a+"px"),l=this.$tooltip.outerHeight(!1),a=e.offset.top+l-(e.offset.top+e.dimension.height),L=e.offset.top-a/2-O):K+f>d&&(K=e.offset.left-p-f-12,b="right"));this.options.arrow&&(a="tooltipster-arrow-"+D,c=1>this.options.arrowColor.length?this.$tooltip.css("background-color"):this.options.arrowColor,b?"left"==b?(a="tooltipster-arrow-right",b=""):"right"==b?(a="tooltipster-arrow-left",
b=""):b="left:"+Math.round(b)+"px;":b="","top"==D||"top-left"==D||"top-right"==D?(p=parseFloat(this.$tooltip.css("border-bottom-width")),q=this.$tooltip.css("border-bottom-color")):"bottom"==D||"bottom-left"==D||"bottom-right"==D?(p=parseFloat(this.$tooltip.css("border-top-width")),q=this.$tooltip.css("border-top-color")):"left"==D?(p=parseFloat(this.$tooltip.css("border-right-width")),q=this.$tooltip.css("border-right-color")):"right"==D?(p=parseFloat(this.$tooltip.css("border-left-width")),q=this.$tooltip.css("border-left-color")):
(p=parseFloat(this.$tooltip.css("border-bottom-width")),q=this.$tooltip.css("border-bottom-color")),1<p&&p++,B="",0!==p&&(B="",q="border-color: "+q+";",-1!==a.indexOf("bottom")?B="margin-top: -"+Math.round(p)+"px;":-1!==a.indexOf("top")?B="margin-bottom: -"+Math.round(p)+"px;":-1!==a.indexOf("left")?B="margin-right: -"+Math.round(p)+"px;":-1!==a.indexOf("right")&&(B="margin-left: -"+Math.round(p)+"px;"),B='<span class="tooltipster-arrow-border" style="'+B+" "+q+';"></span>'),this.$tooltip.find(".tooltipster-arrow").remove(),
this.$tooltip.append('<div class="'+a+' tooltipster-arrow" style="'+b+'">'+B+'<span style="border-color:'+c+';"></span></div>'));this.$tooltip.css({top:Math.round(L)+"px",left:Math.round(K)+"px"})}return this},enable:function(){this.enabled=!0;return this},disable:function(){this.hide();this.enabled=!1;return this},destroy:function(){var a=this;a.hide();a.$el[0]!==a.$elProxy[0]&&a.$elProxy.remove();a.$el.removeData(a.namespace).off("."+a.namespace);var c=a.$el.data("tooltipster-ns");1===c.length?
(c=null,"previous"===a.options.restoration?c=a.$el.data("tooltipster-initialTitle"):"current"===a.options.restoration&&(c="string"===typeof a.Content?a.Content:r("<div></div>").append(a.Content).html()),c&&a.$el.attr("title",c),a.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")):(c=r.grep(c,function(b,c){return b!==a.namespace}),a.$el.data("tooltipster-ns",c));return a},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:
void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(a,c){if("undefined"==typeof c)return this.options[a];this.options[a]=c;return this},status:function(){return this.Status}};r.fn.tooltipster=function(){var a=arguments;if(0===this.length){if("string"===typeof a[0]){var c=!0;switch(a[0]){case "setDefaults":r.extend(e,a[1]);break;default:c=!1}return c?!0:this}return this}if("string"===typeof a[0]){var b="#*$~&";this.each(function(){var c=r(this).data("tooltipster-ns");
if(c=c?r(this).data(c[0]):null){if("function"===typeof c[a[0]])var d=c[a[0]](a[1],a[2]);else throw Error('Unknown method .tooltipster("'+a[0]+'")');if(d!==c)return b=d,!1}else throw Error("You called Tooltipster's \""+a[0]+'" method on an uninitialized element');});return"#*$~&"!==b?b:this}var d=[],f=(c=a[0]&&"undefined"!==typeof a[0].multiple)&&a[0].multiple||!c&&e.multiple,g=(c=a[0]&&"undefined"!==typeof a[0].debug)&&a[0].debug||!c&&e.debug;this.each(function(){var b=!1,c=r(this).data("tooltipster-ns"),
e=null;c?f?b=!0:g&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):b=!0;b&&(e=new l(this,a[0]),c||(c=[]),c.push(e.namespace),r(this).data("tooltipster-ns",c),r(this).data(e.namespace,e));d.push(e)});return f?d:this};var d=!!("ontouchstart"in g),p=!1;r("body").one("mousemove",function(){p=!0})})(jQuery,window,document);!function(r){"function"==typeof define&&define.amd?define(["jquery"],r):r(jQuery)}(function(r){r.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]};r.expr[":"]["has-src"]=function(g){return r(g).is('img[src][src!=""]')};r.expr[":"].uncached=function(g){return r(g).is(":has-src")?!g.complete:!1};r.fn.waitForImages=function(){var g,q,l,n=0,f=0,e=r.Deferred();if(r.isPlainObject(arguments[0])?(l=arguments[0].waitForAll,
q=arguments[0].each,g=arguments[0].finished):1===arguments.length&&"boolean"===r.type(arguments[0])?l=arguments[0]:(g=arguments[0],q=arguments[1],l=arguments[2]),g=g||r.noop,q=q||r.noop,l=!!l,!r.isFunction(g)||!r.isFunction(q))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var d=r(this),p=[],a=r.waitForImages.hasImageProperties||[],c=r.waitForImages.hasImageAttributes||[],b=/url\(\s*(['"]?)(.*?)\1\s*\)/g;l?d.find("*").addBack().each(function(){var d=r(this);d.is("img:has-src")&&
p.push({src:d.attr("src"),element:d[0]});r.each(a,function(a,c){var e,f=d.css(c);if(!f)return!0;for(;e=b.exec(f);)p.push({src:e[2],element:d[0]})});r.each(c,function(b,a){var c,e=d.attr(a);return e?(c=e.split(","),void r.each(c,function(b,a){a=r.trim(a).split(" ")[0];p.push({src:a,element:d[0]})})):!0})}):d.find("img:has-src").each(function(){p.push({src:this.src,element:this})});n=p.length;f=0;0===n&&(g.call(d[0]),e.resolveWith(d[0]));r.each(p,function(b,a){var c=new Image;r(c).one("load.waitForImages error.waitForImages",
function G(b){b=[f,n,"load"==b.type];return f++,q.apply(a.element,b),e.notifyWith(a.element,b),r(this).off("load.waitForImages error.waitForImages",G),f==n?(g.call(d[0]),e.resolveWith(d[0]),!1):void 0});c.src=a.src})}),e.promise()}});!function(r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=r()}(function(){return function g(q,l,n){function f(d,a){if(!l[d]){if(!q[d]){var c="function"==typeof require&&require;if(!a&&c)return c(d,!0);if(e)return e(d,!0);c=Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c;}c=l[d]={exports:{}};
q[d][0].call(c.exports,function(b){var a=q[d][1][b];return f(a?a:b)},c,c.exports,g,q,l,n)}return l[d].exports}for(var e="function"==typeof require&&require,d=0;d<n.length;d++)f(n[d]);return f}({1:[function(g,q,l){function n(a,c){var d=new b(c);if(d.push(a,!0),d.err)throw d.msg;return d.result}var f=g("./zlib/deflate.js"),e=g("./utils/common"),d=g("./utils/strings"),p=g("./zlib/messages"),a=g("./zlib/zstream"),c=Object.prototype.toString,b=function(b){b=this.options=e.assign({level:-1,method:8,chunkSize:16384,
windowBits:15,memLevel:8,strategy:0,to:""},b||{});b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&16>b.windowBits&&(b.windowBits+=16);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new a;this.strm.avail_out=0;var c=f.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(0!==c)throw Error(p[c]);b.header&&f.deflateSetHeader(this.strm,b.header)};b.prototype.push=function(b,a){var g,l,n=this.strm,p=this.options.chunkSize;if(this.ended)return!1;
l=a===~~a?a:!0===a?4:0;"string"==typeof b?n.input=d.string2buf(b):"[object ArrayBuffer]"===c.call(b)?n.input=new Uint8Array(b):n.input=b;n.next_in=0;n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new e.Buf8(p),n.next_out=0,n.avail_out=p),g=f.deflate(n,l),1!==g&&0!==g)return this.onEnd(g),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||4!==l&&2!==l)||this.onData("string"===this.options.to?d.buf2binstring(e.shrinkBuf(n.output,n.next_out)):e.shrinkBuf(n.output,n.next_out))}while((0<n.avail_in||
0===n.avail_out)&&1!==g);return 4===l?(g=f.deflateEnd(this.strm),this.onEnd(g),this.ended=!0,0===g):2===l?(this.onEnd(0),n.avail_out=0,!0):!0};b.prototype.onData=function(b){this.chunks.push(b)};b.prototype.onEnd=function(b){0===b&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};l.Deflate=b;l.deflate=n;l.deflateRaw=function(b,a){return a=a||{},a.raw=!0,n(b,a)};l.gzip=function(b,a){return a=a||
{},a.gzip=!0,n(b,a)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate.js":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(g,q,l){function n(b,a){var c=new h(a);if(c.push(b,!0),c.err)throw c.msg;return c.result}var f=g("./zlib/inflate.js"),e=g("./utils/common"),d=g("./utils/strings"),p=g("./zlib/constants"),a=g("./zlib/messages"),c=g("./zlib/zstream"),b=g("./zlib/gzheader"),k=Object.prototype.toString,h=function(d){var g=this.options=e.assign({chunkSize:16384,windowBits:0,to:""},d||
{});g.raw&&0<=g.windowBits&&16>g.windowBits&&(g.windowBits=-g.windowBits,0===g.windowBits&&(g.windowBits=-15));!(0<=g.windowBits&&16>g.windowBits)||d&&d.windowBits||(g.windowBits+=32);15<g.windowBits&&48>g.windowBits&&0===(15&g.windowBits)&&(g.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new c;this.strm.avail_out=0;d=f.inflateInit2(this.strm,g.windowBits);if(d!==p.Z_OK)throw Error(a[d]);this.header=new b;f.inflateGetHeader(this.strm,this.header)};h.prototype.push=
function(b,a){var c,g,h,l,n,q=this.strm,T=this.options.chunkSize,H=!1;if(this.ended)return!1;g=a===~~a?a:!0===a?p.Z_FINISH:p.Z_NO_FLUSH;"string"==typeof b?q.input=d.binstring2buf(b):"[object ArrayBuffer]"===k.call(b)?q.input=new Uint8Array(b):q.input=b;q.next_in=0;q.avail_in=q.input.length;do{if(0===q.avail_out&&(q.output=new e.Buf8(T),q.next_out=0,q.avail_out=T),c=f.inflate(q,p.Z_NO_FLUSH),c===p.Z_BUF_ERROR&&!0===H&&(c=p.Z_OK,H=!1),c!==p.Z_STREAM_END&&c!==p.Z_OK)return this.onEnd(c),this.ended=!0,
!1;q.next_out&&(0===q.avail_out||c===p.Z_STREAM_END||0===q.avail_in&&(g===p.Z_FINISH||g===p.Z_SYNC_FLUSH))&&("string"===this.options.to?(h=d.utf8border(q.output,q.next_out),l=q.next_out-h,n=d.buf2string(q.output,h),q.next_out=l,q.avail_out=T-l,l&&e.arraySet(q.output,q.output,h,l,0),this.onData(n)):this.onData(e.shrinkBuf(q.output,q.next_out)));0===q.avail_in&&0===q.avail_out&&(H=!0)}while((0<q.avail_in||0===q.avail_out)&&c!==p.Z_STREAM_END);return c===p.Z_STREAM_END&&(g=p.Z_FINISH),g===p.Z_FINISH?
(c=f.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===p.Z_OK):g===p.Z_SYNC_FLUSH?(this.onEnd(p.Z_OK),q.avail_out=0,!0):!0};h.prototype.onData=function(b){this.chunks.push(b)};h.prototype.onEnd=function(b){b===p.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=e.flattenChunks(this.chunks));this.chunks=[];this.err=b;this.msg=this.strm.msg};l.Inflate=h;l.inflate=n;l.inflateRaw=function(b,a){return a=a||{},a.raw=!0,n(b,a)};l.ungzip=n},{"./utils/common":3,"./utils/strings":4,
"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate.js":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(g,q,l){g="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;l.assign=function(e){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var f=d.shift();if(f){if("object"!=typeof f)throw new TypeError(f+"must be non-object");for(var a in f)f.hasOwnProperty(a)&&(e[a]=f[a])}}return e};l.shrinkBuf=function(e,d){return e.length===d?e:
e.subarray?e.subarray(0,d):(e.length=d,e)};var n={arraySet:function(e,d,f,a,c){if(d.subarray&&e.subarray)return void e.set(d.subarray(f,f+a),c);for(var b=0;a>b;b++)e[c+b]=d[f+b]},flattenChunks:function(e){var d,f,a,c,b;d=a=0;for(f=e.length;f>d;d++)a+=e[d].length;b=new Uint8Array(a);d=a=0;for(f=e.length;f>d;d++)c=e[d],b.set(c,a),a+=c.length;return b}},f={arraySet:function(e,d,f,a,c){for(var b=0;a>b;b++)e[c+b]=d[f+b]},flattenChunks:function(e){return[].concat.apply([],e)}};l.setTyped=function(e){e?
(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,n)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,f))};l.setTyped(g)},{}],4:[function(g,q,l){function n(a,c){if(65537>c&&(a.subarray&&d||!a.subarray&&e))return String.fromCharCode.apply(null,f.shrinkBuf(a,c));for(var b="",g=0;c>g;g++)b+=String.fromCharCode(a[g]);return b}var f=g("./common"),e=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch(a){e=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){d=!1}var p=
new f.Buf8(256);for(g=0;256>g;g++)p[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;p[254]=p[254]=1;l.string2buf=function(a){var c,b,d,e,g,l=a.length,n=0;for(e=0;l>e;e++)b=a.charCodeAt(e),55296===(64512&b)&&l>e+1&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(b=65536+(b-55296<<10)+(d-56320),e++)),n+=128>b?1:2048>b?2:65536>b?3:4;c=new f.Buf8(n);for(e=g=0;n>g;e++)b=a.charCodeAt(e),55296===(64512&b)&&l>e+1&&(d=a.charCodeAt(e+1),56320===(64512&d)&&(b=65536+(b-55296<<10)+(d-56320),e++)),128>b?c[g++]=b:2048>
b?(c[g++]=192|b>>>6,c[g++]=128|63&b):65536>b?(c[g++]=224|b>>>12,c[g++]=128|b>>>6&63,c[g++]=128|63&b):(c[g++]=240|b>>>18,c[g++]=128|b>>>12&63,c[g++]=128|b>>>6&63,c[g++]=128|63&b);return c};l.buf2binstring=function(a){return n(a,a.length)};l.binstring2buf=function(a){for(var c=new f.Buf8(a.length),b=0,d=c.length;d>b;b++)c[b]=a.charCodeAt(b);return c};l.buf2string=function(a,c){var b,d,e,f,g=c||a.length,l=Array(2*g);for(b=d=0;g>b;)if(e=a[b++],128>e)l[d++]=e;else if(f=p[e],4<f)l[d++]=65533,b+=f-1;else{for(e&=
2===f?31:3===f?15:7;1<f&&g>b;)e=e<<6|63&a[b++],f--;1<f?l[d++]=65533:65536>e?l[d++]=e:(e-=65536,l[d++]=55296|e>>10&1023,l[d++]=56320|1023&e)}return n(l,d)};l.utf8border=function(a,c){var b;c=c||a.length;c>a.length&&(c=a.length);for(b=c-1;0<=b&&128===(192&a[b]);)b--;return 0>b?c:0===b?c:b+p[a[b]]>c?b:c}},{"./common":3}],5:[function(g,q,l){q.exports=function(g,f,e,d){var l=65535&g|0;g=g>>>16&65535|0;for(var a=0;0!==e;){a=2E3<e?2E3:e;e-=a;do l=l+f[d++]|0,g=g+l|0;while(--a);l%=65521;g%=65521}return l|
g<<16|0}},{}],6:[function(g,q,l){q.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(g,q,l){var n=function(){for(var f,e=[],d=0;256>d;d++){f=d;
for(var g=0;8>g;g++)f=1&f?3988292384^f>>>1:f>>>1;e[d]=f}return e}();q.exports=function(f,e,d,g){d=g+d;for(f^=-1;d>g;g++)f=f>>>8^n[255&(f^e[g])];return-1^f}},{}],8:[function(g,q,l){function n(b,a){return b.msg=H[a],a}function f(b){for(var a=b.length;0<=--a;)b[a]=0}function e(b){var a=b.state,c=a.pending;c>b.avail_out&&(c=b.avail_out);0!==c&&(E.arraySet(b.output,a.pending_buf,a.pending_out,c,b.next_out),b.next_out+=c,a.pending_out+=c,b.total_out+=c,b.avail_out-=c,a.pending-=c,0===a.pending&&(a.pending_out=
0))}function d(b,a){B._tr_flush_block(b,0<=b.block_start?b.block_start:-1,b.strstart-b.block_start,a);b.block_start=b.strstart;e(b.strm)}function p(b,a){b.pending_buf[b.pending++]=a}function a(b,a){b.pending_buf[b.pending++]=a>>>8&255;b.pending_buf[b.pending++]=255&a}function c(b,a){var c,d,e=b.max_chain_length,f=b.strstart,g=b.prev_length,k=b.nice_match,h=b.strstart>b.w_size-W?b.strstart-(b.w_size-W):0,l=b.window,m=b.w_mask,n=b.prev,q=b.strstart+I,p=l[f+g-1],y=l[f+g];b.prev_length>=b.good_match&&
(e>>=2);k>b.lookahead&&(k=b.lookahead);do if(c=a,l[c+g]===y&&l[c+g-1]===p&&l[c]===l[f]&&l[++c]===l[f+1]){f+=2;for(c++;l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&l[++f]===l[++c]&&q>f;);if(d=I-(q-f),f=q-I,d>g){if(b.match_start=a,g=d,d>=k)break;p=l[f+g-1];y=l[f+g]}}while((a=n[a&m])>h&&0!==--e);return g<=b.lookahead?g:b.lookahead}function b(b){var a,c,d,e,f=b.w_size;do{if(e=b.window_size-b.lookahead-b.strstart,b.strstart>=f+(f-
W)){E.arraySet(b.window,b.window,f,f,0);b.match_start-=f;b.strstart-=f;b.block_start-=f;a=c=b.hash_size;do d=b.head[--a],b.head[a]=d>=f?d-f:0;while(--c);a=c=f;do d=b.prev[--a],b.prev[a]=d>=f?d-f:0;while(--c);e+=f}if(0===b.strm.avail_in)break;a=b.strm;d=b.window;var g=b.strstart+b.lookahead,k=a.avail_in;if(c=(k>e&&(k=e),0===k?0:(a.avail_in-=k,E.arraySet(d,a.input,a.next_in,k,g),1===a.state.wrap?a.adler=C(a.adler,d,k,g):2===a.state.wrap&&(a.adler=T(a.adler,d,k,g)),a.next_in+=k,a.total_in+=k,k)),b.lookahead+=
c,b.lookahead+b.insert>=J)for(e=b.strstart-b.insert,b.ins_h=b.window[e],b.ins_h=(b.ins_h<<b.hash_shift^b.window[e+1])&b.hash_mask;b.insert&&(b.ins_h=(b.ins_h<<b.hash_shift^b.window[e+J-1])&b.hash_mask,b.prev[e&b.w_mask]=b.head[b.ins_h],b.head[b.ins_h]=e,e++,b.insert--,!(b.lookahead+b.insert<J)););}while(b.lookahead<W&&0!==b.strm.avail_in)}function k(a,e){for(var f,g;;){if(a.lookahead<W){if(b(a),a.lookahead<W&&e===x)return P;if(0===a.lookahead)break}if(f=0,a.lookahead>=J&&(a.ins_h=(a.ins_h<<a.hash_shift^
a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==f&&a.strstart-f<=a.w_size-W&&(a.match_length=c(a,f)),a.match_length>=J)if(g=B._tr_tally(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;
while(0!==--a.match_length);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+1])&a.hash_mask;else g=B._tr_tally(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(g&&(d(a,!1),0===a.strm.avail_out))return P}return a.insert=a.strstart<J-1?a.strstart:J-1,e===y?(d(a,!0),0===a.strm.avail_out?ba:Z):a.last_lit&&(d(a,!1),0===a.strm.avail_out)?P:Y}function h(a,e){for(var f,g,k;;){if(a.lookahead<W){if(b(a),a.lookahead<
W&&e===x)return P;if(0===a.lookahead)break}if(f=0,a.lookahead>=J&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,0!==f&&a.prev_length<a.max_lazy_match&&a.strstart-f<=a.w_size-W&&(a.match_length=c(a,f),5>=a.match_length&&(a.strategy===D||a.match_length===J&&4096<a.strstart-a.match_start)&&(a.match_length=J-1)),a.prev_length>=J&&
a.match_length<=a.prev_length){k=a.strstart+a.lookahead-J;g=B._tr_tally(a,a.strstart-1-a.prev_match,a.prev_length-J);a.lookahead-=a.prev_length-1;a.prev_length-=2;do++a.strstart<=k&&(a.ins_h=(a.ins_h<<a.hash_shift^a.window[a.strstart+J-1])&a.hash_mask,f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!==--a.prev_length);if(a.match_available=0,a.match_length=J-1,a.strstart++,g&&(d(a,!1),0===a.strm.avail_out))return P}else if(a.match_available){if(g=B._tr_tally(a,0,a.window[a.strstart-
1]),g&&d(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return P}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(B._tr_tally(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,e===y?(d(a,!0),0===a.strm.avail_out?ba:Z):a.last_lit&&(d(a,!1),0===a.strm.avail_out)?P:Y}function z(){this.strm=null;this.status=0;this.pending_buf=null;this.wrap=this.pending=this.pending_out=this.pending_buf_size=0;this.gzhead=null;this.gzindex=0;this.method=
w;this.last_flush=-1;this.w_mask=this.w_bits=this.w_size=0;this.window=null;this.window_size=0;this.head=this.prev=null;this.nice_match=this.good_match=this.strategy=this.level=this.max_lazy_match=this.max_chain_length=this.prev_length=this.lookahead=this.match_start=this.strstart=this.match_available=this.prev_match=this.match_length=this.block_start=this.hash_shift=this.hash_mask=this.hash_bits=this.hash_size=this.ins_h=0;this.dyn_ltree=new E.Buf16(2*F);this.dyn_dtree=new E.Buf16(2*(2*aa+1));this.bl_tree=
new E.Buf16(2*(2*N+1));f(this.dyn_ltree);f(this.dyn_dtree);f(this.bl_tree);this.bl_desc=this.d_desc=this.l_desc=null;this.bl_count=new E.Buf16(Q+1);this.heap=new E.Buf16(2*A+1);f(this.heap);this.heap_max=this.heap_len=0;this.depth=new E.Buf16(2*A+1);f(this.depth);this.bi_valid=this.bi_buf=this.insert=this.matches=this.static_len=this.opt_len=this.d_buf=this.last_lit=this.lit_bufsize=this.l_buf=0}function M(b){var a;return b&&b.state?(b.total_in=b.total_out=0,b.data_type=X,a=b.state,a.pending=0,a.pending_out=
0,0>a.wrap&&(a.wrap=-a.wrap),a.status=a.wrap?R:U,b.adler=2===a.wrap?0:1,a.last_flush=x,B._tr_init(a),K):n(b,L)}function G(b){var a=M(b);a===K&&(b=b.state,b.window_size=2*b.w_size,f(b.head),b.max_lazy_match=m[b.level].max_lazy,b.good_match=m[b.level].good_length,b.nice_match=m[b.level].nice_length,b.max_chain_length=m[b.level].max_chain,b.strstart=0,b.block_start=0,b.lookahead=0,b.insert=0,b.match_length=b.prev_length=J-1,b.match_available=0,b.ins_h=0);return a}function t(b,a,c,d,e,f){if(!b)return L;
var g=1;if(a===O&&(a=6),0>d?(g=0,d=-d):15<d&&(g=2,d-=16),1>e||e>u||c!==w||8>d||15<d||0>a||9<a||0>f||f>S)return n(b,L);8===d&&(d=9);var k=new z;return b.state=k,k.strm=b,k.wrap=g,k.gzhead=null,k.w_bits=d,k.w_size=1<<k.w_bits,k.w_mask=k.w_size-1,k.hash_bits=e+7,k.hash_size=1<<k.hash_bits,k.hash_mask=k.hash_size-1,k.hash_shift=~~((k.hash_bits+J-1)/J),k.window=new E.Buf8(2*k.w_size),k.head=new E.Buf16(k.hash_size),k.prev=new E.Buf16(k.w_size),k.lit_bufsize=1<<e+6,k.pending_buf_size=4*k.lit_bufsize,k.pending_buf=
new E.Buf8(k.pending_buf_size),k.d_buf=k.lit_bufsize>>1,k.l_buf=3*k.lit_bufsize,k.level=a,k.strategy=f,k.method=c,G(b)}var m,E=g("../utils/common"),B=g("./trees"),C=g("./adler32"),T=g("./crc32"),H=g("./messages"),x=0,y=4,K=0,L=-2,O=-1,D=1,S=4,X=2,w=8,u=9,A=286,aa=30,N=19,F=2*A+1,Q=15,J=3,I=258,W=I+J+1,R=42,U=113,P=1,Y=2,ba=3,Z=4;g=function(b,a,c,d,e){this.good_length=b;this.max_lazy=a;this.nice_length=c;this.max_chain=d;this.func=e};m=[new g(0,0,0,0,function(a,c){var e=65535;for(e>a.pending_buf_size-
5&&(e=a.pending_buf_size-5);;){if(1>=a.lookahead){if(b(a),0===a.lookahead&&c===x)return P;if(0===a.lookahead)break}a.strstart+=a.lookahead;a.lookahead=0;var f=a.block_start+e;if((0===a.strstart||a.strstart>=f)&&(a.lookahead=a.strstart-f,a.strstart=f,d(a,!1),0===a.strm.avail_out)||a.strstart-a.block_start>=a.w_size-W&&(d(a,!1),0===a.strm.avail_out))return P}return a.insert=0,c===y?(d(a,!0),0===a.strm.avail_out?ba:Z):(a.strstart>a.block_start&&d(a,!1),P)}),new g(4,4,8,4,k),new g(4,5,16,8,k),new g(4,
6,32,32,k),new g(4,4,16,16,h),new g(8,16,32,32,h),new g(8,16,128,128,h),new g(8,32,128,256,h),new g(32,128,258,1024,h),new g(32,258,258,4096,h)];l.deflateInit=function(b,a){return t(b,a,w,15,8,0)};l.deflateInit2=t;l.deflateReset=G;l.deflateResetKeep=M;l.deflateSetHeader=function(b,a){return b&&b.state?2!==b.state.wrap?L:(b.state.gzhead=a,K):L};l.deflate=function(c,g){var k,h,l,q;if(!c||!c.state||5<g||0>g)return c?n(c,L):L;if(h=c.state,!c.output||!c.input&&0!==c.avail_in||666===h.status&&g!==y)return n(c,
0===c.avail_out?-5:L);if(h.strm=c,k=h.last_flush,h.last_flush=g,h.status===R)2===h.wrap?(c.adler=0,p(h,31),p(h,139),p(h,8),h.gzhead?(p(h,(h.gzhead.text?1:0)+(h.gzhead.hcrc?2:0)+(h.gzhead.extra?4:0)+(h.gzhead.name?8:0)+(h.gzhead.comment?16:0)),p(h,255&h.gzhead.time),p(h,h.gzhead.time>>8&255),p(h,h.gzhead.time>>16&255),p(h,h.gzhead.time>>24&255),p(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),p(h,255&h.gzhead.os),h.gzhead.extra&&h.gzhead.extra.length&&(p(h,255&h.gzhead.extra.length),p(h,h.gzhead.extra.length>>
8&255)),h.gzhead.hcrc&&(c.adler=T(c.adler,h.pending_buf,h.pending,0)),h.gzindex=0,h.status=69):(p(h,0),p(h,0),p(h,0),p(h,0),p(h,0),p(h,9===h.level?2:2<=h.strategy||2>h.level?4:0),p(h,3),h.status=U)):(l=w+(h.w_bits-8<<4)<<8,q=-1,q=2<=h.strategy||2>h.level?0:6>h.level?1:6===h.level?2:3,l|=q<<6,0!==h.strstart&&(l|=32),h.status=U,a(h,l+(31-l%31)),0!==h.strstart&&(a(h,c.adler>>>16),a(h,65535&c.adler)),c.adler=1);if(69===h.status)if(h.gzhead.extra){for(l=h.pending;h.gzindex<(65535&h.gzhead.extra.length)&&
(h.pending!==h.pending_buf_size||(h.gzhead.hcrc&&h.pending>l&&(c.adler=T(c.adler,h.pending_buf,h.pending-l,l)),e(c),l=h.pending,h.pending!==h.pending_buf_size));)p(h,255&h.gzhead.extra[h.gzindex]),h.gzindex++;h.gzhead.hcrc&&h.pending>l&&(c.adler=T(c.adler,h.pending_buf,h.pending-l,l));h.gzindex===h.gzhead.extra.length&&(h.gzindex=0,h.status=73)}else h.status=73;if(73===h.status)if(h.gzhead.name){l=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>l&&(c.adler=T(c.adler,h.pending_buf,
h.pending-l,l)),e(c),l=h.pending,h.pending===h.pending_buf_size)){q=1;break}q=h.gzindex<h.gzhead.name.length?255&h.gzhead.name.charCodeAt(h.gzindex++):0;p(h,q)}while(0!==q);h.gzhead.hcrc&&h.pending>l&&(c.adler=T(c.adler,h.pending_buf,h.pending-l,l));0===q&&(h.gzindex=0,h.status=91)}else h.status=91;if(91===h.status)if(h.gzhead.comment){l=h.pending;do{if(h.pending===h.pending_buf_size&&(h.gzhead.hcrc&&h.pending>l&&(c.adler=T(c.adler,h.pending_buf,h.pending-l,l)),e(c),l=h.pending,h.pending===h.pending_buf_size)){q=
1;break}q=h.gzindex<h.gzhead.comment.length?255&h.gzhead.comment.charCodeAt(h.gzindex++):0;p(h,q)}while(0!==q);h.gzhead.hcrc&&h.pending>l&&(c.adler=T(c.adler,h.pending_buf,h.pending-l,l));0===q&&(h.status=103)}else h.status=103;if(103===h.status&&(h.gzhead.hcrc?(h.pending+2>h.pending_buf_size&&e(c),h.pending+2<=h.pending_buf_size&&(p(h,255&c.adler),p(h,c.adler>>8&255),c.adler=0,h.status=U)):h.status=U),0!==h.pending){if(e(c),0===c.avail_out)return h.last_flush=-1,K}else if(0===c.avail_in&&(g<<1)-
(4<g?9:0)<=(k<<1)-(4<k?9:0)&&g!==y)return n(c,-5);if(666===h.status&&0!==c.avail_in)return n(c,-5);if(0!==c.avail_in||0!==h.lookahead||g!==x&&666!==h.status){var t;if(2===h.strategy)a:{for(var u;;){if(0===h.lookahead&&(b(h),0===h.lookahead)){if(g===x){t=P;break a}break}if(h.match_length=0,u=B._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++,u&&(d(h,!1),0===h.strm.avail_out)){t=P;break a}}t=(h.insert=0,g===y?(d(h,!0),0===h.strm.avail_out?ba:Z):h.last_lit&&(d(h,!1),0===h.strm.avail_out)?
P:Y)}else if(3===h.strategy)a:{var H,z;for(u=h.window;;){if(h.lookahead<=I){if(b(h),h.lookahead<=I&&g===x){t=P;break a}if(0===h.lookahead)break}if(h.match_length=0,h.lookahead>=J&&0<h.strstart&&(z=h.strstart-1,H=u[z],H===u[++z]&&H===u[++z]&&H===u[++z])){for(k=h.strstart+I;H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&H===u[++z]&&k>z;);h.match_length=I-(k-z);h.match_length>h.lookahead&&(h.match_length=h.lookahead)}if(h.match_length>=J?(t=B._tr_tally(h,1,h.match_length-
J),h.lookahead-=h.match_length,h.strstart+=h.match_length,h.match_length=0):(t=B._tr_tally(h,0,h.window[h.strstart]),h.lookahead--,h.strstart++),t&&(d(h,!1),0===h.strm.avail_out)){t=P;break a}}t=(h.insert=0,g===y?(d(h,!0),0===h.strm.avail_out?ba:Z):h.last_lit&&(d(h,!1),0===h.strm.avail_out)?P:Y)}else t=m[h.level].func(h,g);if((t===ba||t===Z)&&(h.status=666),t===P||t===ba)return 0===c.avail_out&&(h.last_flush=-1),K;if(t===Y&&(1===g?B._tr_align(h):5!==g&&(B._tr_stored_block(h,0,0,!1),3===g&&(f(h.head),
0===h.lookahead&&(h.strstart=0,h.block_start=0,h.insert=0))),e(c),0===c.avail_out))return h.last_flush=-1,K}return g!==y?K:0>=h.wrap?1:(2===h.wrap?(p(h,255&c.adler),p(h,c.adler>>8&255),p(h,c.adler>>16&255),p(h,c.adler>>24&255),p(h,255&c.total_in),p(h,c.total_in>>8&255),p(h,c.total_in>>16&255),p(h,c.total_in>>24&255)):(a(h,c.adler>>>16),a(h,65535&c.adler)),e(c),0<h.wrap&&(h.wrap=-h.wrap),0!==h.pending?K:1)};l.deflateEnd=function(b){var a;return b&&b.state?(a=b.state.status,a!==R&&69!==a&&73!==a&&91!==
a&&103!==a&&a!==U&&666!==a?n(b,L):(b.state=null,a===U?n(b,-3):K)):L};l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(g,q,l){q.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],10:[function(g,q,l){q.exports=function(g,f){var e,d,l,a,c,b,k,h,q,M,G,t,m,E,B,C,T,H,x,y,K,L,O,D;e=g.state;d=g.next_in;O=g.input;l=
d+(g.avail_in-5);a=g.next_out;D=g.output;c=a-(f-g.avail_out);b=a+(g.avail_out-257);k=e.dmax;h=e.wsize;q=e.whave;M=e.wnext;G=e.window;t=e.hold;m=e.bits;E=e.lencode;B=e.distcode;C=(1<<e.lenbits)-1;T=(1<<e.distbits)-1;a:do b:for(15>m&&(t+=O[d++]<<m,m+=8,t+=O[d++]<<m,m+=8),H=E[t&C];;){if(x=H>>>24,t>>>=x,m-=x,x=H>>>16&255,0===x)D[a++]=65535&H;else{if(!(16&x)){if(0===(64&x)){H=E[(65535&H)+(t&(1<<x)-1)];continue b}if(32&x){e.mode=12;break a}g.msg="invalid literal/length code";e.mode=30;break a}y=65535&H;
(x&=15)&&(x>m&&(t+=O[d++]<<m,m+=8),y+=t&(1<<x)-1,t>>>=x,m-=x);15>m&&(t+=O[d++]<<m,m+=8,t+=O[d++]<<m,m+=8);H=B[t&T];c:for(;;){if(x=H>>>24,t>>>=x,m-=x,x=H>>>16&255,!(16&x)){if(0===(64&x)){H=B[(65535&H)+(t&(1<<x)-1)];continue c}g.msg="invalid distance code";e.mode=30;break a}if(K=65535&H,x&=15,x>m&&(t+=O[d++]<<m,m+=8,x>m&&(t+=O[d++]<<m,m+=8)),K+=t&(1<<x)-1,K>k){g.msg="invalid distance too far back";e.mode=30;break a}if(t>>>=x,m-=x,x=a-c,K>x){if(x=K-x,x>q&&e.sane){g.msg="invalid distance too far back";
e.mode=30;break a}if(H=0,L=G,0===M){if(H+=h-x,y>x){y-=x;do D[a++]=G[H++];while(--x);H=a-K;L=D}}else if(x>M){if(H+=h+M-x,x-=M,y>x){y-=x;do D[a++]=G[H++];while(--x);if(H=0,y>M){x=M;y-=x;do D[a++]=G[H++];while(--x);H=a-K;L=D}}}else if(H+=M-x,y>x){y-=x;do D[a++]=G[H++];while(--x);H=a-K;L=D}for(;2<y;)D[a++]=L[H++],D[a++]=L[H++],D[a++]=L[H++],y-=3;y&&(D[a++]=L[H++],1<y&&(D[a++]=L[H++]))}else{H=a-K;do D[a++]=D[H++],D[a++]=D[H++],D[a++]=D[H++],y-=3;while(2<y);y&&(D[a++]=D[H++],1<y&&(D[a++]=D[H++]))}break}}break}while(l>
d&&b>a);y=m>>3;d-=y;m-=y<<3;g.next_in=d;g.next_out=a;g.avail_in=l>d?5+(l-d):5-(d-l);g.avail_out=b>a?257+(b-a):257-(a-b);e.hold=t&(1<<m)-1;e.bits=m}},{}],11:[function(g,q,l){function n(b){return(b>>>24&255)+(b>>>8&65280)+((65280&b)<<8)+((255&b)<<24)}function f(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=
this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new k.Buf16(320);this.work=new k.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function e(b){var a;return b&&b.state?(a=b.state,b.total_in=b.total_out=a.total=0,b.msg="",a.wrap&&(b.adler=1&a.wrap),a.mode=E,a.last=0,a.havedict=0,a.dmax=32768,a.head=null,a.hold=0,a.bits=0,a.lencode=a.lendyn=new k.Buf32(B),a.distcode=a.distdyn=new k.Buf32(C),a.sane=1,a.back=-1,t):
m}function d(b){var a;return b&&b.state?(a=b.state,a.wsize=0,a.whave=0,a.wnext=0,e(b)):m}function p(b,a){var c,e;return b&&b.state?(e=b.state,0>a?(c=0,a=-a):(c=(a>>4)+1,48>a&&(a&=15)),a&&(8>a||15<a)?m:(null!==e.window&&e.wbits!==a&&(e.window=null),e.wrap=c,e.wbits=a,d(b))):m}function a(b,a){var c,d;return b?(d=new f,b.state=d,d.window=null,c=p(b,a),c!==t&&(b.state=null),c):m}var c,b,k=g("../utils/common"),h=g("./adler32"),z=g("./crc32"),M=g("./inffast"),G=g("./inftrees"),t=0,m=-2,E=1,B=852,C=592,
T=!0;l.inflateReset=d;l.inflateReset2=p;l.inflateResetKeep=e;l.inflateInit=function(b){return a(b,15)};l.inflateInit2=a;l.inflate=function(a,d){var e,f,g,l,q,p,B,w,u,A,C,N,F,Q,J,I,W,R,U,P,Y,ba,Z=0,V=new k.Buf8(4),ea=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return m;e=a.state;12===e.mode&&(e.mode=13);q=a.next_out;g=a.output;B=a.avail_out;l=a.next_in;f=a.input;p=a.avail_in;w=e.hold;u=e.bits;A=p;C=B;Y=t;a:for(;;)switch(e.mode){case E:if(0===
e.wrap){e.mode=13;break}for(;16>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(2&e.wrap&&35615===w){e.check=0;V[0]=255&w;V[1]=w>>>8&255;e.check=z(e.check,V,2,0);u=w=0;e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&w)<<8)+(w>>8))%31){a.msg="incorrect header check";e.mode=30;break}if(8!==(15&w)){a.msg="unknown compression method";e.mode=30;break}if(w>>>=4,u-=4,P=(15&w)+8,0===e.wbits)e.wbits=P;else if(P>e.wbits){a.msg="invalid window size";e.mode=30;break}e.dmax=1<<P;a.adler=
e.check=1;e.mode=512&w?10:12;u=w=0;break;case 2:for(;16>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(e.flags=w,8!==(255&e.flags)){a.msg="unknown compression method";e.mode=30;break}if(57344&e.flags){a.msg="unknown header flags set";e.mode=30;break}e.head&&(e.head.text=w>>8&1);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,e.check=z(e.check,V,2,0));u=w=0;e.mode=3;case 3:for(;32>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}e.head&&(e.head.time=w);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,V[2]=w>>>16&255,V[3]=
w>>>24&255,e.check=z(e.check,V,4,0));u=w=0;e.mode=4;case 4:for(;16>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}e.head&&(e.head.xflags=255&w,e.head.os=w>>8);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,e.check=z(e.check,V,2,0));u=w=0;e.mode=5;case 5:if(1024&e.flags){for(;16>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}e.length=w;e.head&&(e.head.extra_len=w);512&e.flags&&(V[0]=255&w,V[1]=w>>>8&255,e.check=z(e.check,V,2,0));u=w=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(N=e.length,
N>p&&(N=p),N&&(e.head&&(P=e.head.extra_len-e.length,e.head.extra||(e.head.extra=Array(e.head.extra_len)),k.arraySet(e.head.extra,f,l,N,P)),512&e.flags&&(e.check=z(e.check,f,N,l)),p-=N,l+=N,e.length-=N),e.length))break a;e.length=0;e.mode=7;case 7:if(2048&e.flags){if(0===p)break a;N=0;do P=f[l+N++],e.head&&P&&65536>e.length&&(e.head.name+=String.fromCharCode(P));while(P&&p>N);if(512&e.flags&&(e.check=z(e.check,f,N,l)),p-=N,l+=N,P)break a}else e.head&&(e.head.name=null);e.length=0;e.mode=8;case 8:if(4096&
e.flags){if(0===p)break a;N=0;do P=f[l+N++],e.head&&P&&65536>e.length&&(e.head.comment+=String.fromCharCode(P));while(P&&p>N);if(512&e.flags&&(e.check=z(e.check,f,N,l)),p-=N,l+=N,P)break a}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;16>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(w!==(65535&e.check)){a.msg="header crc mismatch";e.mode=30;break}u=w=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0);a.adler=e.check=0;e.mode=12;break;case 10:for(;32>u;){if(0===p)break a;
p--;w+=f[l++]<<u;u+=8}a.adler=e.check=n(w);u=w=0;e.mode=11;case 11:if(0===e.havedict)return a.next_out=q,a.avail_out=B,a.next_in=l,a.avail_in=p,e.hold=w,e.bits=u,2;a.adler=e.check=1;e.mode=12;case 12:if(5===d||6===d)break a;case 13:if(e.last){w>>>=7&u;u-=7&u;e.mode=27;break}for(;3>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}switch(e.last=1&w,w>>>=1,--u,3&w){case 0:e.mode=14;break;case 1:Q=e;if(T){I=void 0;c=new k.Buf32(512);b=new k.Buf32(32);for(I=0;144>I;)Q.lens[I++]=8;for(;256>I;)Q.lens[I++]=9;for(;280>
I;)Q.lens[I++]=7;for(;288>I;)Q.lens[I++]=8;G(1,Q.lens,0,288,c,0,Q.work,{bits:9});for(I=0;32>I;)Q.lens[I++]=5;G(2,Q.lens,0,32,b,0,Q.work,{bits:5});T=!1}Q.lencode=c;Q.lenbits=9;Q.distcode=b;Q.distbits=5;if(e.mode=20,6===d){w>>>=2;u-=2;break a}break;case 2:e.mode=17;break;case 3:a.msg="invalid block type",e.mode=30}w>>>=2;u-=2;break;case 14:w>>>=7&u;for(u-=7&u;32>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if((65535&w)!==(w>>>16^65535)){a.msg="invalid stored block lengths";e.mode=30;break}if(e.length=
65535&w,w=0,u=0,e.mode=15,6===d)break a;case 15:e.mode=16;case 16:if(N=e.length){if(N>p&&(N=p),N>B&&(N=B),0===N)break a;k.arraySet(g,f,l,N,q);p-=N;l+=N;B-=N;q+=N;e.length-=N;break}e.mode=12;break;case 17:for(;14>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(e.nlen=(31&w)+257,w>>>=5,u-=5,e.ndist=(31&w)+1,w>>>=5,u-=5,e.ncode=(15&w)+4,w>>>=4,u-=4,286<e.nlen||30<e.ndist){a.msg="too many length or distance symbols";e.mode=30;break}e.have=0;e.mode=18;case 18:for(;e.have<e.ncode;){for(;3>u;){if(0===p)break a;
p--;w+=f[l++]<<u;u+=8}e.lens[ea[e.have++]]=7&w;w>>>=3;u-=3}for(;19>e.have;)e.lens[ea[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,ba={bits:e.lenbits},Y=G(0,e.lens,0,19,e.lencode,0,e.work,ba),e.lenbits=ba.bits,Y){a.msg="invalid code lengths set";e.mode=30;break}e.have=0;e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;Z=e.lencode[w&(1<<e.lenbits)-1],J=Z>>>24,I=65535&Z,!(u>=J);){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(16>I)w>>>=J,u-=J,e.lens[e.have++]=I;else{if(16===I){for(Q=J+2;Q>u;){if(0===
p)break a;p--;w+=f[l++]<<u;u+=8}if(w>>>=J,u-=J,0===e.have){a.msg="invalid bit length repeat";e.mode=30;break}P=e.lens[e.have-1];N=3+(3&w);w>>>=2;u-=2}else if(17===I){for(Q=J+3;Q>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}w>>>=J;u-=J;P=0;N=3+(7&w);w>>>=3;u-=3}else{for(Q=J+7;Q>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}w>>>=J;u-=J;P=0;N=11+(127&w);w>>>=7;u-=7}if(e.have+N>e.nlen+e.ndist){a.msg="invalid bit length repeat";e.mode=30;break}for(;N--;)e.lens[e.have++]=P}}if(30===e.mode)break;if(0===e.lens[256]){a.msg=
"invalid code -- missing end-of-block";e.mode=30;break}if(e.lenbits=9,ba={bits:e.lenbits},Y=G(1,e.lens,0,e.nlen,e.lencode,0,e.work,ba),e.lenbits=ba.bits,Y){a.msg="invalid literal/lengths set";e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,ba={bits:e.distbits},Y=G(2,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,ba),e.distbits=ba.bits,Y){a.msg="invalid distances set";e.mode=30;break}if(e.mode=20,6===d)break a;case 20:e.mode=21;case 21:if(6<=p&&258<=B){a.next_out=q;a.avail_out=B;a.next_in=l;a.avail_in=
p;e.hold=w;e.bits=u;M(a,C);q=a.next_out;g=a.output;B=a.avail_out;l=a.next_in;f=a.input;p=a.avail_in;w=e.hold;u=e.bits;12===e.mode&&(e.back=-1);break}for(e.back=0;Z=e.lencode[w&(1<<e.lenbits)-1],J=Z>>>24,Q=Z>>>16&255,I=65535&Z,!(u>=J);){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(Q&&0===(240&Q)){W=J;R=Q;for(U=I;Z=e.lencode[U+((w&(1<<W+R)-1)>>W)],J=Z>>>24,Q=Z>>>16&255,I=65535&Z,!(u>=W+J);){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}w>>>=W;u-=W;e.back+=W}if(w>>>=J,u-=J,e.back+=J,e.length=I,0===Q){e.mode=26;
break}if(32&Q){e.back=-1;e.mode=12;break}if(64&Q){a.msg="invalid literal/length code";e.mode=30;break}e.extra=15&Q;e.mode=22;case 22:if(e.extra){for(Q=e.extra;Q>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}e.length+=w&(1<<e.extra)-1;w>>>=e.extra;u-=e.extra;e.back+=e.extra}e.was=e.length;e.mode=23;case 23:for(;Z=e.distcode[w&(1<<e.distbits)-1],J=Z>>>24,Q=Z>>>16&255,I=65535&Z,!(u>=J);){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(0===(240&Q)){W=J;R=Q;for(U=I;Z=e.distcode[U+((w&(1<<W+R)-1)>>W)],J=Z>>>24,
Q=Z>>>16&255,I=65535&Z,!(u>=W+J);){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}w>>>=W;u-=W;e.back+=W}if(w>>>=J,u-=J,e.back+=J,64&Q){a.msg="invalid distance code";e.mode=30;break}e.offset=I;e.extra=15&Q;e.mode=24;case 24:if(e.extra){for(Q=e.extra;Q>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}e.offset+=w&(1<<e.extra)-1;w>>>=e.extra;u-=e.extra;e.back+=e.extra}if(e.offset>e.dmax){a.msg="invalid distance too far back";e.mode=30;break}e.mode=25;case 25:if(0===B)break a;if(N=C-B,e.offset>N){if(N=e.offset-N,N>
e.whave&&e.sane){a.msg="invalid distance too far back";e.mode=30;break}N>e.wnext?(N-=e.wnext,F=e.wsize-N):F=e.wnext-N;N>e.length&&(N=e.length);Q=e.window}else Q=g,F=q-e.offset,N=e.length;N>B&&(N=B);B-=N;e.length-=N;do g[q++]=Q[F++];while(--N);0===e.length&&(e.mode=21);break;case 26:if(0===B)break a;g[q++]=e.length;B--;e.mode=21;break;case 27:if(e.wrap){for(;32>u;){if(0===p)break a;p--;w|=f[l++]<<u;u+=8}if(C-=B,a.total_out+=C,e.total+=C,C&&(a.adler=e.check=e.flags?z(e.check,g,C,q-C):h(e.check,g,C,
q-C)),C=B,(e.flags?w:n(w))!==e.check){a.msg="incorrect data check";e.mode=30;break}u=w=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;32>u;){if(0===p)break a;p--;w+=f[l++]<<u;u+=8}if(w!==(4294967295&e.total)){a.msg="incorrect length check";e.mode=30;break}u=w=0}e.mode=29;case 29:Y=1;break a;case 30:Y=-3;break a;case 31:return-4;default:return m}a.next_out=q;a.avail_out=B;a.next_in=l;a.avail_in=p;e.hold=w;e.bits=u;if(l=e.wsize||C!==a.avail_out&&30>e.mode&&(27>e.mode||4!==d)){l=a.output;q=a.next_out;
f=C-a.avail_out;var da;p=a.state;l=(null===p.window&&(p.wsize=1<<p.wbits,p.wnext=0,p.whave=0,p.window=new k.Buf8(p.wsize)),f>=p.wsize?(k.arraySet(p.window,l,q-p.wsize,p.wsize,0),p.wnext=0,p.whave=p.wsize):(da=p.wsize-p.wnext,da>f&&(da=f),k.arraySet(p.window,l,q-f,da,p.wnext),f-=da,f?(k.arraySet(p.window,l,q-f,f,0),p.wnext=f,p.whave=p.wsize):(p.wnext+=da,p.wnext===p.wsize&&(p.wnext=0),p.whave<p.wsize&&(p.whave+=da))),0)}return l?(e.mode=31,-4):(A-=a.avail_in,C-=a.avail_out,a.total_in+=A,a.total_out+=
C,e.total+=C,e.wrap&&C&&(a.adler=e.check=e.flags?z(e.check,g,C,a.next_out-C):h(e.check,g,C,a.next_out-C)),a.data_type=e.bits+(e.last?64:0)+(12===e.mode?128:0)+(20===e.mode||15===e.mode?256:0),(0===A&&0===C||4===d)&&Y===t&&(Y=-5),Y)};l.inflateEnd=function(a){if(!a||!a.state)return m;var b=a.state;return b.window&&(b.window=null),a.state=null,t};l.inflateGetHeader=function(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?m:(c.head=b,b.done=!1,t)):m};l.inflateInfo="pako inflate (from Nodeca project)"},
{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(g,q,l){var n=g("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],e=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,
25,25,26,26,27,27,28,28,29,29,64,64];q.exports=function(a,c,b,g,h,l,q,G){var t,m,E,B,C,T,H,x;B=G.bits;for(var y=0,K=0,L=0,O=0,D=0,S=0,X=0,w=t=0,u=0,A=null,aa=0,N=new n.Buf16(16),S=new n.Buf16(16),F=null,Q=0,y=0;15>=y;y++)N[y]=0;for(K=0;g>K;K++)N[c[b+K]]++;D=B;for(O=15;1<=O&&0===N[O];O--);if(D>O&&(D=O),0===O)return h[l++]=20971520,h[l++]=20971520,G.bits=1,0;for(L=1;O>L&&0===N[L];L++);L>D&&(D=L);for(y=t=1;15>=y;y++)if(t<<=1,t-=N[y],0>t)return-1;if(0<t&&(0===a||1!==O))return-1;S[1]=0;for(y=1;15>y;y++)S[y+
1]=S[y]+N[y];for(K=0;g>K;K++)0!==c[b+K]&&(q[S[c[b+K]]++]=K);if(0===a?(A=F=q,C=19):1===a?(A=f,aa-=257,F=e,Q-=257,C=256):(A=d,F=p,C=-1),u=0,K=0,y=L,B=l,S=D,X=0,E=-1,w=1<<D,g=w-1,1===a&&852<w||2===a&&592<w)return 1;for(var J=0;;){J++;T=y-X;q[K]<C?(H=0,x=q[K]):q[K]>C?(H=F[Q+q[K]],x=A[aa+q[K]]):(H=96,x=0);t=1<<y-X;L=m=1<<S;do m-=t,h[B+(u>>X)+m]=T<<24|H<<16|x|0;while(0!==m);for(t=1<<y-1;u&t;)t>>=1;if(0!==t?(u&=t-1,u+=t):u=0,K++,0===--N[y]){if(y===O)break;y=c[b+q[K]]}if(y>D&&(u&g)!==E){0===X&&(X=D);B+=L;
S=y-X;for(t=1<<S;O>S+X&&(t-=N[S+X],!(0>=t));)S++,t<<=1;if(w+=1<<S,1===a&&852<w||2===a&&592<w)return 1;E=u&g;h[E]=D<<24|S<<16|B-l|0}}return 0!==u&&(h[B+u]=y-X<<24|4194304),G.bits=D,0}},{"../utils/common":3}],13:[function(g,q,l){q.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(g,q,l){function n(a){for(var b=a.length;0<=--b;)a[b]=0}function f(a,b){a.pending_buf[a.pending++]=
255&b;a.pending_buf[a.pending++]=b>>>8&255}function e(a,b,c){a.bi_valid>S-c?(a.bi_buf|=b<<a.bi_valid&65535,f(a,a.bi_buf),a.bi_buf=b>>S-a.bi_valid,a.bi_valid+=c-S):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)}function d(a,b,c){e(a,c[2*b],c[2*b+1])}function p(a,b){var c=0;do c|=1&a,a>>>=1,c<<=1;while(0<--b);return c>>>1}function a(a,b,c){var d,e=Array(D+1),f=0;for(d=1;D>=d;d++)e[d]=f=f+c[d-1]<<1;for(c=0;b>=c;c++)d=a[2*c+1],0!==d&&(a[2*c]=p(e[d]++,d))}function c(a){var b;for(b=0;y>b;b++)a.dyn_ltree[2*
b]=0;for(b=0;K>b;b++)a.dyn_dtree[2*b]=0;for(b=0;L>b;b++)a.bl_tree[2*b]=0;a.dyn_ltree[2*X]=1;a.opt_len=a.static_len=0;a.last_lit=a.matches=0}function b(a){8<a.bi_valid?f(a,a.bi_buf):0<a.bi_valid&&(a.pending_buf[a.pending++]=a.bi_buf);a.bi_buf=0;a.bi_valid=0}function k(a,b,c,d){var e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]}function h(a,b,c){for(var d=a.heap[c],e=c<<1;e<=a.heap_len&&(e<a.heap_len&&k(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!k(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,
e<<=1;a.heap[c]=d}function z(a,b,c){var f,g,h,k,l=0;if(0!==a.last_lit){do f=a.pending_buf[a.d_buf+2*l]<<8|a.pending_buf[a.d_buf+2*l+1],g=a.pending_buf[a.l_buf+l],l++,0===f?d(a,g,b):(h=R[g],d(a,h+x+1,b),k=aa[h],0!==k&&(g-=U[h],e(a,g,k)),f--,h=256>f?W[f]:W[256+(f>>>7)],d(a,h,c),k=N[h],0!==k&&(f-=P[h],e(a,f,k)));while(l<a.last_lit)}d(a,X,b)}function M(b,c){var d,e,f,g=c.dyn_tree;e=c.stat_desc.static_tree;var k=c.stat_desc.has_stree,l=c.stat_desc.elems,m=-1;b.heap_len=0;b.heap_max=O;for(d=0;l>d;d++)0!==
g[2*d]?(b.heap[++b.heap_len]=m=d,b.depth[d]=0):g[2*d+1]=0;for(;2>b.heap_len;)f=b.heap[++b.heap_len]=2>m?++m:0,g[2*f]=1,b.depth[f]=0,b.opt_len--,k&&(b.static_len-=e[2*f+1]);c.max_code=m;for(d=b.heap_len>>1;1<=d;d--)h(b,g,d);f=l;do d=b.heap[1],b.heap[1]=b.heap[b.heap_len--],h(b,g,1),e=b.heap[1],b.heap[--b.heap_max]=d,b.heap[--b.heap_max]=e,g[2*f]=g[2*d]+g[2*e],b.depth[f]=(b.depth[d]>=b.depth[e]?b.depth[d]:b.depth[e])+1,g[2*d+1]=g[2*e+1]=f,b.heap[1]=f++,h(b,g,1);while(2<=b.heap_len);b.heap[--b.heap_max]=
b.heap[1];var n,p,k=c.dyn_tree,l=c.max_code,q=c.stat_desc.static_tree,t=c.stat_desc.has_stree,u=c.stat_desc.extra_bits,w=c.stat_desc.extra_base,x=c.stat_desc.max_length,y=0;for(e=0;D>=e;e++)b.bl_count[e]=0;k[2*b.heap[b.heap_max]+1]=0;for(d=b.heap_max+1;O>d;d++)f=b.heap[d],e=k[2*k[2*f+1]+1]+1,e>x&&(e=x,y++),k[2*f+1]=e,f>l||(b.bl_count[e]++,n=0,f>=w&&(n=u[f-w]),p=k[2*f],b.opt_len+=p*(e+n),t&&(b.static_len+=p*(q[2*f+1]+n)));if(0!==y){do{for(e=x-1;0===b.bl_count[e];)e--;b.bl_count[e]--;b.bl_count[e+1]+=
2;b.bl_count[x]--;y-=2}while(0<y);for(e=x;0!==e;e--)for(f=b.bl_count[e];0!==f;)n=b.heap[--d],n>l||(k[2*n+1]!==e&&(b.opt_len+=(e-k[2*n+1])*k[2*n],k[2*n+1]=e),f--)}a(g,m,b.bl_count)}function G(a,b,c){var d,e,f=-1,g=b[1],h=0,k=7,l=4;0===g&&(k=138,l=3);b[2*(c+1)+1]=65535;for(d=0;c>=d;d++)e=g,g=b[2*(d+1)+1],++h<k&&e===g||(l>h?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[2*w]++):10>=h?a.bl_tree[2*u]++:a.bl_tree[2*A]++,h=0,f=e,0===g?(k=138,l=3):e===g?(k=6,l=3):(k=7,l=4))}function t(a,b,c){var f,
g,h=-1,k=b[1],l=0,m=7,n=4;0===k&&(m=138,n=3);for(f=0;c>=f;f++)if(g=k,k=b[2*(f+1)+1],!(++l<m&&g===k)){if(n>l){do d(a,g,a.bl_tree);while(0!==--l)}else 0!==g?(g!==h&&(d(a,g,a.bl_tree),l--),d(a,w,a.bl_tree),e(a,l-3,2)):10>=l?(d(a,u,a.bl_tree),e(a,l-3,3)):(d(a,A,a.bl_tree),e(a,l-11,7));l=0;h=g;0===k?(m=138,n=3):g===k?(m=6,n=3):(m=7,n=4)}}function m(a){var b,c=4093624447;for(b=0;31>=b;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return C;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return T;
for(b=32;x>b;b++)if(0!==a.dyn_ltree[2*b])return T;return C}function E(a,c,d,g){e(a,(H<<1)+(g?1:0),3);b(a);f(a,d);f(a,~d);B.arraySet(a.pending_buf,a.window,c,d,a.pending);a.pending+=d}var B=g("../utils/common"),C=0,T=1,H=0,x=256,y=x+1+29,K=30,L=19,O=2*y+1,D=15,S=16,X=256,w=16,u=17,A=18,aa=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,
2,14,1,15],J=Array(2*(y+2));n(J);var I=Array(2*K);n(I);var W=Array(512);n(W);var R=Array(256);n(R);var U=Array(29);n(U);var P=Array(K);n(P);var Y,ba,Z,V=function(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e;this.has_stree=a&&a.length},ea=function(a,b){this.dyn_tree=a;this.max_code=0;this.stat_desc=b},da=!1;l._tr_init=function(b){if(!da){var d,e,f,g=Array(D+1);for(f=e=0;28>f;f++)for(U[f]=e,d=0;d<1<<aa[f];d++)R[e++]=f;R[e-1]=f;for(f=e=0;16>f;f++)for(P[f]=
e,d=0;d<1<<N[f];d++)W[e++]=f;for(e>>=7;K>f;f++)for(P[f]=e<<7,d=0;d<1<<N[f]-7;d++)W[256+e++]=f;for(d=0;D>=d;d++)g[d]=0;for(d=0;143>=d;)J[2*d+1]=8,d++,g[8]++;for(;255>=d;)J[2*d+1]=9,d++,g[9]++;for(;279>=d;)J[2*d+1]=7,d++,g[7]++;for(;287>=d;)J[2*d+1]=8,d++,g[8]++;a(J,y+1,g);for(d=0;K>d;d++)I[2*d+1]=5,I[2*d]=p(d,5);Y=new V(J,aa,x+1,y,D);ba=new V(I,N,0,K,D);Z=new V([],F,0,L,7);da=!0}b.l_desc=new ea(b.dyn_ltree,Y);b.d_desc=new ea(b.dyn_dtree,ba);b.bl_desc=new ea(b.bl_tree,Z);b.bi_buf=0;b.bi_valid=0;c(b)};
l._tr_stored_block=E;l._tr_flush_block=function(a,d,f,g){var h,k,l=0;if(0<a.level){2===a.strm.data_type&&(a.strm.data_type=m(a));M(a,a.l_desc);M(a,a.d_desc);G(a,a.dyn_ltree,a.l_desc.max_code);G(a,a.dyn_dtree,a.d_desc.max_code);M(a,a.bl_desc);for(l=L-1;3<=l&&0===a.bl_tree[2*Q[l]+1];l--);l=(a.opt_len+=3*(l+1)+14,l);h=a.opt_len+3+7>>>3;k=a.static_len+3+7>>>3;h>=k&&(h=k)}else h=k=f+5;if(h>=f+4&&-1!==d)E(a,d,f,g);else if(4===a.strategy||k===h)e(a,2+(g?1:0),3),z(a,J,I);else{e(a,4+(g?1:0),3);d=a.l_desc.max_code+
1;f=a.d_desc.max_code+1;l+=1;e(a,d-257,5);e(a,f-1,5);e(a,l-4,4);for(h=0;l>h;h++)e(a,a.bl_tree[2*Q[h]+1],3);t(a,a.dyn_ltree,d-1);t(a,a.dyn_dtree,f-1);z(a,a.dyn_ltree,a.dyn_dtree)}c(a);g&&b(a)};l._tr_tally=function(a,b,c){return a.pending_buf[a.d_buf+2*a.last_lit]=b>>>8&255,a.pending_buf[a.d_buf+2*a.last_lit+1]=255&b,a.pending_buf[a.l_buf+a.last_lit]=255&c,a.last_lit++,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[2*(R[c]+x+1)]++,a.dyn_dtree[2*(256>b?W[b]:W[256+(b>>>7)])]++),a.last_lit===a.lit_bufsize-
1};l._tr_align=function(a){e(a,2,3);d(a,X,J);16===a.bi_valid?(f(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):8<=a.bi_valid&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)}},{"../utils/common":3}],15:[function(g,q,l){q.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/":[function(g,q,l){l=g("./lib/utils/common").assign;var n=g("./lib/deflate"),
f=g("./lib/inflate");g=g("./lib/zlib/constants");var e={};l(e,n,f,g);q.exports=e},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});!function(r){r.fn.selectOrDie=function(g){var q,l,n={customID:null,customClass:"",placeholder:null,placeholderOption:!1,prefix:null,cycle:!1,stripEmpty:!1,links:!1,linksExternal:!1,size:0,tabIndex:0,onChange:r.noop},f={},e=!1,d={initSoD:function(a){return f=r.extend({},n,a),this.each(function(){if(r(this).parent().hasClass("sod_select"))console.log("Select or Die: It looks like the SoD already exists");else{var a,b,e,g=r(this);b=g.data("custom-id")?g.data("custom-id"):f.customID;var l=g.data("custom-class")?
g.data("custom-class"):f.customClass,n=g.data("prefix")?g.data("prefix"):f.prefix,p=g.data("placeholder")?g.data("placeholder"):f.placeholder,q=g.data("placeholder-option")?g.data("placeholder-option"):f.placeholderOption,m=g.data("cycle")?g.data("cycle"):f.cycle,E=g.data("links")?g.data("links"):f.links,B=g.data("links-external")?g.data("links-external"):f.linksExternal,C=parseInt(g.data("size"))?g.data("size"):f.size,T=parseInt(g.data("tabindex"))?g.data("tabindex"):f.tabIndex?f.tabIndex:g.attr("tabindex")?
g.attr("tabindex"):f.tabIndex,H=g.data("strip-empty")?g.data("strip-empty"):f.stripEmpty,x=g.prop("title")?g.prop("title"):null,y=g.is(":disabled")?" disabled":"",K="",L=0;n&&(K='<span class="sod_prefix">'+n+"</span> ");a=r("<span/>",{id:b,"class":"sod_select "+l+y,title:x,tabindex:T,html:""+(p&&!n?'<span class="sod_label sod_placeholder">'+p+"</span>":'<span class="sod_label">'+K+"</span>"),"data-cycle":m,"data-links":E,"data-links-external":B,"data-placeholder":p,"data-placeholder-option":q,"data-prefix":n,
"data-filter":""}).insertAfter(this);d.isTouch()&&a.addClass("touch");b=r("<span/>",{"class":"sod_list_wrapper"}).appendTo(a);e=r("<span/>",{"class":"sod_list"}).appendTo(b);r("option, optgroup",g).each(function(b){var f=r(this);H&&!r.trim(f.text())?f.remove():0===b&&q&&!K?d.populateSoD(f,e,a,!0):d.populateSoD(f,e,a,!1)});C&&(b.show(),r(".sod_option:lt("+C+")",e).each(function(){L+=r(this).outerHeight()}),b.removeAttr("style"),e.css({"max-height":L}));g.appendTo(a);a.on("focusin",d.focusSod).on("click",
d.triggerSod).on("click",".sod_option",d.optionClick).on("mousemove",".sod_option",d.optionHover).on("keydown",d.keyboardUse);g.on("change",d.selectChange);r(document).on("click","label[for='"+g.attr("id")+"']",function(b){b.preventDefault();a.focus()})}})},populateSoD:function(a,c,b,d){var e=b.data("placeholder"),f=b.data("placeholder-option"),g=b.data("prefix"),l=b.find(".sod_label"),n=a.parent(),m=a.text(),p=a.val(),q=a.data("custom-id")?a.data("custom-id"):null,C=a.data("custom-class")?a.data("custom-class"):
"",T=a.is(":disabled")?" disabled ":"",H=a.is(":selected")?" selected active ":"",x=a.data("link")?" link ":"",y=a.data("link-external")?" linkexternal":"",K=a.prop("label");a.is("option")?(r("<span/>",{"class":"sod_option "+C+T+H+x+y,id:q,title:m,html:m,"data-value":p}).appendTo(c),d&&!g?(b.data("label",m),b.data("placeholder",m),a.prop("disabled",!0),c.find(".sod_option:last").addClass("is-placeholder disabled"),H&&l.addClass("sod_placeholder")):H&&e&&!f&&!g?b.data("label",e):H&&b.data("label",
m),(H&&!e||H&&f||H&&g)&&l.append(m),n.is("optgroup")&&(c.find(".sod_option:last").addClass("groupchild"),n.is(":disabled")&&c.find(".sod_option:last").addClass("disabled"))):r("<span/>",{"class":"sod_option optgroup "+T,title:K,html:K,"data-label":K}).appendTo(c)},focusSod:function(){var a=r(this);a.hasClass("disabled")?d.blurSod(a):(d.blurSod(r(".sod_select.focus").not(a)),a.addClass("focus"),r("html").on("click.sodBlur",function(){d.blurSod(a)}))},triggerSod:function(a){a.stopPropagation();a=r(this);
var c=a.find(".sod_list"),b=a.data("placeholder"),e=a.find(".active"),f=a.find(".selected");a.hasClass("disabled")||a.hasClass("open")||a.hasClass("touch")?(clearTimeout(l),a.removeClass("open"),b&&(a.find(".sod_label").get(0).lastChild.nodeValue=e.text())):(a.addClass("open"),b&&!a.data("prefix")&&a.find(".sod_label").addClass("sod_placeholder").html(b),d.listScroll(c,f),d.checkViewport(a,c))},keyboardUse:function(a){var c,b,f,g=r(this),l=g.find(".sod_list"),n=g.find(".sod_option"),p=g.find(".sod_label"),
t=g.data("cycle"),m=n.filter(".active");return 36<a.which&&41>a.which?(37===a.which||38===a.which?(b=m.prevAll(":not('.disabled, .optgroup')").first(),f=n.not(".disabled, .optgroup").last()):(39===a.which||40===a.which)&&(b=m.nextAll(":not('.disabled, .optgroup')").first(),f=n.not(".disabled, .optgroup").first()),!b.hasClass("sod_option")&&t&&(b=f),(b.hasClass("sod_option")||t)&&(m.removeClass("active"),b.addClass("active"),p.get(0).lastChild.nodeValue=b.text(),d.listScroll(l,b),g.hasClass("open")||
(e=!0)),!1):(13===a.which||32===a.which&&g.hasClass("open")&&(" "===g.data("filter")[0]||""===g.data("filter"))?(a.preventDefault(),m.click()):32!==a.which||g.hasClass("open")||" "!==g.data("filter")[0]&&""!==g.data("filter")?27===a.which&&d.blurSod(g):(a.preventDefault(),e=!1,g.click()),0!==a.which&&(clearTimeout(q),g.data("filter",g.data("filter")+String.fromCharCode(a.which)),c=n.filter(function(){return 0===r(this).text().toLowerCase().indexOf(g.data("filter").toLowerCase())}).not(".disabled, .optgroup").first(),
c.length&&(m.removeClass("active"),c.addClass("active"),d.listScroll(l,c),p.get(0).lastChild.nodeValue=c.text(),g.hasClass("open")||(e=!0)),q=setTimeout(function(){g.data("filter","")},500)),void 0)},optionHover:function(){var a=r(this);a.hasClass("disabled")||a.hasClass("optgroup")||a.siblings().removeClass("active").end().addClass("active")},optionClick:function(a){a.stopPropagation();a=r(this);var c=a.closest(".sod_select"),b=a.hasClass("disabled"),d=a.hasClass("optgroup"),e=c.find(".sod_option:not('.optgroup')").index(this);
c.hasClass("touch")||(b||d||(c.find(".selected, .sod_placeholder").removeClass("selected sod_placeholder"),a.addClass("selected"),c.find("select option")[e].selected=!0,c.find("select").change()),clearTimeout(l),c.removeClass("open"))},selectChange:function(){var a=r(this),c=a.find(":selected"),b=c.text(),a=a.closest(".sod_select");a.find(".sod_label").get(0).lastChild.nodeValue=b;a.data("label",b);f.onChange.call(this);!a.data("links")&&!c.data("link")||c.data("link-external")?(a.data("links-external")||
c.data("link-external"))&&window.open(c.val(),"_blank"):window.location.href=c.val()},blurSod:function(a){if(r("body").find(a).length){var c=a.data("label"),b=a.data("placeholder"),d=a.find(".active"),f=a.find(".selected"),g=!1;clearTimeout(l);e&&!d.hasClass("selected")?(d.click(),g=!0):d.hasClass("selected")||(d.removeClass("active"),f.addClass("active"));!g&&b?a.find(".sod_label").get(0).lastChild.nodeValue=f.text():g||(a.find(".sod_label").get(0).lastChild.nodeValue=c);e=!1;a.removeClass("open focus");
a.blur();r("html").off(".sodBlur")}},checkViewport:function(a,c){var b=a[0].getBoundingClientRect(),e=c.outerHeight();b.bottom+e+10>r(window).height()&&10<b.top-e?a.addClass("above"):a.removeClass("above");l=setTimeout(function(){d.checkViewport(a,c)},200)},listScroll:function(a,c){var b=a[0].getBoundingClientRect(),d=c[0].getBoundingClientRect();b.top>d.top?a.scrollTop(a.scrollTop()-b.top+d.top):b.bottom<d.bottom&&a.scrollTop(a.scrollTop()-b.bottom+d.bottom)},isTouch:function(){return"ontouchstart"in
window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints}},p={destroy:function(){return this.each(function(){var a=r(this),c=a.parent();c.hasClass("sod_select")?(a.off("change"),c.find("span").remove(),a.unwrap()):console.log("Select or Die: There's no SoD to destroy")})},update:function(){return this.each(function(){var a=r(this),c=a.parent(),b=c.find(".sod_list:first");c.hasClass("sod_select")?(b.empty(),c.find(".sod_label").get(0).lastChild.nodeValue="",a.is(":disabled")&&c.addClass("disabled"),
r("option, optgroup",a).each(function(){d.populateSoD(r(this),b,c)})):console.log("Select or Die: There's no SoD to update")})},disable:function(a){return this.each(function(){var c=r(this),b=c.parent();b.hasClass("sod_select")?"undefined"!=typeof a?(b.find(".sod_list:first .sod_option[data-value='"+a+"']").addClass("disabled"),b.find(".sod_list:first .sod_option[data-label='"+a+"']").nextUntil(":not(.groupchild)").addClass("disabled"),r("option[value='"+a+"'], optgroup[label='"+a+"']",this).prop("disabled",
!0)):b.hasClass("sod_select")&&(b.addClass("disabled"),c.prop("disabled",!0)):console.log("Select or Die: There's no SoD to disable")})},enable:function(a){return this.each(function(){var c=r(this),b=c.parent();b.hasClass("sod_select")?"undefined"!=typeof a?(b.find(".sod_list:first .sod_option[data-value='"+a+"']").removeClass("disabled"),b.find(".sod_list:first .sod_option[data-label='"+a+"']").nextUntil(":not(.groupchild)").removeClass("disabled"),r("option[value='"+a+"'], optgroup[label='"+a+"']",
this).prop("disabled",!1)):b.hasClass("sod_select")&&(b.removeClass("disabled"),c.prop("disabled",!1)):console.log("Select or Die: There's no SoD to enable")})}};return p[g]?p[g].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof g&&g?(r.error('Select or Die: Oh no! No such method "'+g+'" for the SoD instance'),void 0):d.initSoD.apply(this,arguments)}}(jQuery);
