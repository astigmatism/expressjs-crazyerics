!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]};a.expr[":"]["has-src"]=function(b){return a(b).is('img[src][src!=""]')};a.expr[":"].uncached=function(b){return a(b).is(":has-src")?!b.complete:!1};a.fn.waitForImages=function(){var b,d,c,h=0,k=0,l=a.Deferred();if(a.isPlainObject(arguments[0])?(c=arguments[0].waitForAll,
d=arguments[0].each,b=arguments[0].finished):1===arguments.length&&"boolean"===a.type(arguments[0])?c=arguments[0]:(b=arguments[0],d=arguments[1],c=arguments[2]),b=b||a.noop,d=d||a.noop,c=!!c,!a.isFunction(b)||!a.isFunction(d))throw new TypeError("An invalid callback was supplied.");return this.each(function(){var f=a(this),e=[],n=a.waitForImages.hasImageProperties||[],p=a.waitForImages.hasImageAttributes||[],q=/url\(\s*(['"]?)(.*?)\1\s*\)/g;c?f.find("*").addBack().each(function(){var b=a(this);b.is("img:has-src")&&
e.push({src:b.attr("src"),element:b[0]});a.each(n,function(a,d){var c,g=b.css(d);if(!g)return!0;for(;c=q.exec(g);)e.push({src:c[2],element:b[0]})});a.each(p,function(c,d){var f,g=b.attr(d);return g?(f=g.split(","),void a.each(f,function(d,c){c=a.trim(c).split(" ")[0];e.push({src:c,element:b[0]})})):!0})}):f.find("img:has-src").each(function(){e.push({src:this.src,element:this})});h=e.length;k=0;0===h&&(b.call(f[0]),l.resolveWith(f[0]));a.each(e,function(c,e){var m=new Image;a(m).one("load.waitForImages error.waitForImages",
function g(c){c=[k,h,"load"==c.type];return k++,d.apply(e.element,c),l.notifyWith(e.element,c),a(this).off("load.waitForImages error.waitForImages",g),k==h?(b.call(f[0]),l.resolveWith(f[0]),!1):void 0});m.src=e.src})}),l.promise()}});