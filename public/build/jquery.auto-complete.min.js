!function(b){b.fn.autoComplete=function(h){var g=b.extend({},b.fn.autoComplete.defaults,h);return"string"==typeof h?(this.each(function(){var f=b(this);"destroy"==h&&(b(window).off("resize.autocomplete",f.updateSC),f.off("blur.autocomplete focus.autocomplete keydown.autocomplete keyup.autocomplete"),f.data("autocomplete")?f.attr("autocomplete",f.data("autocomplete")):f.removeAttr("autocomplete"),b(f.data("sc")).remove(),f.removeData("sc").removeData("autocomplete"))}),this):this.each(function(){function f(d){var c=
a.val();if(a.cache[c]=d,d.length&&c.length>=g.minChars){for(var e="",b=0;b<d.length;b++)e+=g.renderItem(d[b],c);a.sc.html(e);a.updateSC(0)}else a.sc.hide()}var a=b(this);a.sc=b('<div class="autocomplete-suggestions '+g.menuClass+'"></div>');a.data("sc",a.sc).data("autocomplete",a.attr("autocomplete"));a.attr("autocomplete","off");a.cache={};a.last_val="";a.updateSC=function(d,c){if(a.sc.css({top:a.offset().top+a.outerHeight(),left:a.offset().left,width:a.outerWidth()}),!d&&(a.sc.show(),a.sc.maxHeight||
(a.sc.maxHeight=parseInt(a.sc.css("max-height"))),a.sc.suggestionHeight||(a.sc.suggestionHeight=b(".autocomplete-suggestion",a.sc).first().outerHeight()),a.sc.suggestionHeight))if(c){var e=a.sc.scrollTop(),f=c.offset().top-a.sc.offset().top;0<f+a.sc.suggestionHeight-a.sc.maxHeight?a.sc.scrollTop(f+a.sc.suggestionHeight+e-a.sc.maxHeight):0>f&&a.sc.scrollTop(f+e)}else a.sc.scrollTop(0)};b(window).on("resize.autocomplete",a.updateSC);a.sc.appendTo("body");a.sc.on("mouseleave",".autocomplete-suggestion",
function(){b(".autocomplete-suggestion.selected").removeClass("selected")});a.sc.on("mouseenter",".autocomplete-suggestion",function(){b(".autocomplete-suggestion.selected").removeClass("selected");b(this).addClass("selected")});a.sc.on("mousedown",".autocomplete-suggestion",function(d){var c=b(this),e=c.data("val");(e||c.hasClass("autocomplete-suggestion"))&&(a.val(e),g.onSelect(d,e,c),a.sc.hide())});a.on("blur.autocomplete",function(){try{over_sb=b(".autocomplete-suggestions:hover").length}catch(d){over_sb=
0}over_sb?a.is(":focus")||setTimeout(function(){a.focus()},20):(a.last_val=a.val(),a.sc.hide(),setTimeout(function(){a.sc.hide()},350))});g.minChars||a.on("focus.autocomplete",function(){a.last_val="\n";a.trigger("keyup.autocomplete")});a.on("keydown.autocomplete",function(d){if((40==d.which||38==d.which)&&a.sc.html()){var c,e=b(".autocomplete-suggestion.selected",a.sc);return e.length?(c=40==d.which?e.next(".autocomplete-suggestion"):e.prev(".autocomplete-suggestion"),c.length?(e.removeClass("selected"),
a.val(c.addClass("selected").data("val"))):(e.removeClass("selected"),a.val(a.last_val),c=0)):(c=40==d.which?b(".autocomplete-suggestion",a.sc).first():b(".autocomplete-suggestion",a.sc).last(),a.val(c.addClass("selected").data("val"))),a.updateSC(0,c),!1}if(27==d.which)a.val(a.last_val).sc.hide();else if(13==d.which||9==d.which)e=b(".autocomplete-suggestion.selected",a.sc),e.length&&a.sc.is(":visible")&&(g.onSelect(d,e.data("val"),e),setTimeout(function(){a.sc.hide()},20))});a.on("keyup.autocomplete",
function(d){if(!~b.inArray(d.which,[13,27,35,36,37,38,39,40])){var c=a.val();if(c.length>=g.minChars){if(c!=a.last_val){if(a.last_val=c,clearTimeout(a.timer),g.cache){if(c in a.cache)return void f(a.cache[c]);for(d=1;d<c.length-g.minChars;d++){var e=c.slice(0,c.length-d);if(e in a.cache&&!a.cache[e].length)return void f([])}}a.timer=setTimeout(function(){g.source(c,f)},g.delay)}}else a.last_val=c,a.sc.hide()}})})};b.fn.autoComplete.defaults={source:0,minChars:3,delay:150,cache:1,menuClass:"",renderItem:function(b,
g){var f=new RegExp("("+g.split(" ").join("|")+")","gi");return'<div class="autocomplete-suggestion" data-val="'+b+'">'+b.replace(f,"<b>$1</b>")+"</div>"},onSelect:function(b,g,f){}}}(jQuery);