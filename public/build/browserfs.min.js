!function(ea){"object"==typeof exports&&"undefined"!=typeof module?module.exports=ea():"function"==typeof define&&define.amd?define([],ea):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).BrowserFS=ea()}(function(){return function n(u,p,v){function e(a,h){if(!p[a]){if(!u[a]){var g="function"==typeof require&&require;if(!h&&g)return g(a,!0);if(l)return l(a,!0);g=Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g;}g=p[a]={exports:{}};
u[a][0].call(g.exports,function(c){var b=u[a][1][c];return e(b?b:c)},g,g.exports,n,u,p,v)}return p[a].exports}for(var l="function"==typeof require&&require,a=0;a<v.length;a++)e(v[a]);return e}({1:[function(n,u,p){!function(){function n(){}function e(d){var f=!1;return function(){if(f)throw Error("Callback was already called.");f=!0;d.apply(this,arguments)}}function l(d){var f=!1;return function(){f||(f=!0,d.apply(this,arguments))}}function a(d){return N(d)||"number"==typeof d.length&&0<=d.length&&
0===d.length%1}function w(d,f){return a(d)?h(d,f):m(d,f)}function h(d,f){for(var k=-1,a=d.length;++k<a;)f(d[k],k,d)}function g(d,f){for(var k=-1,a=d.length,c=Array(a);++k<a;)c[k]=f(d[k],k,d);return c}function c(d){return g(Array(d),function(d,f){return f})}function b(d,f,k){return h(d,function(d,a,c){k=f(k,d,a,c)}),k}function m(d,f){h(W(d),function(k){f(d[k],k)})}function r(d){var f,k,c=-1;return a(d)?(f=d.length,function(){return c++,f>c?c:null}):(k=W(d),f=k.length,function(){return c++,f>c?k[c]:
null})}function z(d,f){f=f||0;var k=-1,c=d.length;f&&(c-=f,c=0>c?0:c);for(var a=Array(c);++k<c;)a[k]=d[k+f];return a}function A(d){return function(f,k,c){return d(f,c)}}function q(d){return function(f,k,c){c=l(c||n);f=f||[];var a=r(f);if(0>=d)return c(null);var q=!1,b=0,m=!1;!function M(){if(q&&0>=b)return c(null);for(;d>b&&!m;){var B=a();if(null===B)return q=!0,void(0>=b&&c(null));b+=1;k(f[B],B,e(function(d){--b;d?(c(d),m=!0):M()}))}}()}}function k(d){return function(f,k,c){return d(x.eachOf,f,k,
c)}}function d(d,f){return function(k,c,a){return f(q(d),k,c,a)}}function f(d){return function(f,k,c){return d(x.eachOfSeries,f,k,c)}}function B(d,f,k,c){c=l(c||n);var a=[];d(f,function(d,f,c){k(d,function(d,k){a[f]=k;c(d)})},function(d){c(d,a)})}function C(d,f,k,c){var a=[];f=g(f,function(d,f){return{index:f,value:d}});d(f,function(d,f,c){k(d.value,function(f){f&&a.push(d);c()})},function(){c(g(a.sort(function(d,f){return d.index-f.index}),function(d){return d.value}))})}function V(d,f,k,c){var a=
[];f=g(f,function(d,f){return{index:f,value:d}});d(f,function(d,f,c){k(d.value,function(f){f||a.push(d);c()})},function(){c(g(a.sort(function(d,f){return d.index-f.index}),function(d){return d.value}))})}function y(d,f,k,c){d(f,function(d,f,a){k(d,function(f){f?(c(d),c=n):a()})},function(){c()})}function t(d,f,k){k=k||n;var c=a(f)?[]:{};d(f,function(d,f,k){d(function(d){var a=z(arguments,1);1>=a.length&&(a=a[0]);c[f]=a;k(d)})},function(d){k(d,c)})}function aa(d,f,k,c){var a=[];d(f,function(d,f,c){k(d,
function(d,f){a=a.concat(f||[]);c(d)})},function(d){c(d,a)})}function F(d,f,k){function c(d,f,k,a){if(null!=a&&"function"!=typeof a)throw Error("task callback must be a function");return d.started=!0,N(f)||(f=[f]),0===f.length&&d.idle()?x.setImmediate(function(){d.drain()}):(h(f,function(f){f={data:f,callback:a||n};k?d.tasks.unshift(f):d.tasks.push(f);d.tasks.length===d.concurrency&&d.saturated()}),void x.setImmediate(d.process))}function a(d,f){return function(){--q;var k=arguments;h(f,function(d){d.callback.apply(d,
k)});0===d.tasks.length+q&&d.drain();d.process()}}if(null==f)f=1;else if(0===f)throw Error("Concurrency must not be zero");var q=0,b={tasks:[],concurrency:f,saturated:n,empty:n,drain:n,started:!1,paused:!1,push:function(d,f){c(b,d,!1,f)},kill:function(){b.drain=n;b.tasks=[]},unshift:function(d,f){c(b,d,!0,f)},process:function(){if(!b.paused&&q<b.concurrency&&b.tasks.length)for(;q<b.concurrency&&b.tasks.length;){var f=k?b.tasks.splice(0,k):b.tasks.splice(0,b.tasks.length),c=g(f,function(d){return d.data});
0===b.tasks.length&&b.empty();q+=1;f=e(a(b,f));d(c,f)}},length:function(){return b.tasks.length},running:function(){return q},idle:function(){return 0===b.tasks.length+q},pause:function(){b.paused=!0},resume:function(){if(!1!==b.paused){b.paused=!1;for(var d=Math.min(b.concurrency,b.tasks.length),f=1;d>=f;f++)x.setImmediate(b.process)}}};return b}function E(d){return function(f){var k=z(arguments,1);f.apply(null,k.concat([function(f){var k=z(arguments,1);"undefined"!=typeof console&&(f?console.error&&
console.error(f):console[d]&&h(k,function(f){console[d](f)}))}]))}}function I(d){return function(f,k,a){d(c(f),k,a)}}function S(d,f){function k(){var c=this,a=z(arguments),b=a.pop();return d(f,function(d,f,k){d.apply(c,a.concat([k]))},b)}if(2<arguments.length){var c=z(arguments,2);return k.apply(this,c)}return k}function p(d){return function(){var f=z(arguments),k=f.pop();f.push(function(){var d=arguments;c?x.setImmediate(function(){k.apply(null,d)}):k.apply(null,d)});var c=!0;d.apply(this,f);c=!1}}
var K,H,x={};K="object"==typeof window&&this===window?window:"object"==typeof global&&this===global?global:this;null!=K&&(H=K.async);x.noConflict=function(){return K.async=H,x};var Q,X=Object.prototype.toString,N=Array.isArray||function(d){return"[object Array]"===X.call(d)},W=Object.keys||function(d){var f=[],k;for(k in d)d.hasOwnProperty(k)&&f.push(k);return f};"function"==typeof setImmediate&&(Q=setImmediate);"undefined"!=typeof process&&process.nextTick?(x.nextTick=process.nextTick,Q?x.setImmediate=
function(d){Q(d)}:x.setImmediate=x.nextTick):Q?(x.nextTick=function(d){Q(d)},x.setImmediate=x.nextTick):(x.nextTick=function(d){setTimeout(d,0)},x.setImmediate=x.nextTick);x.forEach=x.each=function(d,f,k){return x.eachOf(d,A(f),k)};x.forEachSeries=x.eachSeries=function(d,f,k){return x.eachOfSeries(d,A(f),k)};x.forEachLimit=x.eachLimit=function(d,f,k,c){return q(f)(d,A(k),c)};x.forEachOf=x.eachOf=function(d,f,k){function c(d){d?k(d):(q+=1,q>=b&&k(null))}k=l(k||n);d=d||[];var b=a(d)?d.length:W(d).length,
q=0;return b?void w(d,function(k,a){f(d[a],a,e(c))}):k(null)};x.forEachOfSeries=x.eachOfSeries=function(d,f,k){function c(){var q=!0;return null===b?k(null):(f(d[b],b,e(function(d){if(d)k(d);else{if(b=a(),null===b)return k(null);q?x.nextTick(c):c()}})),void(q=!1))}k=l(k||n);d=d||[];var a=r(d),b=a();c()};x.forEachOfLimit=x.eachOfLimit=function(d,f,k,c){q(f)(d,k,c)};x.map=k(B);x.mapSeries=f(B);x.mapLimit=function(f,k,c,a){return d(k,B)(f,c,a)};x.inject=x.foldl=x.reduce=function(d,f,k,c){x.eachOfSeries(d,
function(d,c,a){k(f,d,function(d,k){f=k;a(d)})},function(d){c(d||null,f)})};x.foldr=x.reduceRight=function(d,f,k,c){d=g(d,function(d){return d}).reverse();x.reduce(d,f,k,c)};x.select=x.filter=k(C);x.selectSeries=x.filterSeries=f(C);x.reject=k(V);x.rejectSeries=f(V);x.detect=k(y);x.detectSeries=f(y);x.any=x.some=function(d,f,k){x.eachOf(d,function(d,c,a){f(d,function(d){d&&(k(!0),k=n);a()})},function(){k(!1)})};x.all=x.every=function(d,f,k){x.eachOf(d,function(d,c,a){f(d,function(d){d||(k(!1),k=n);
a()})},function(){k(!0)})};x.sortBy=function(d,f,k){function c(d,f){var k=d.criteria,a=f.criteria;return a>k?-1:k>a?1:0}x.map(d,function(d,k){f(d,function(f,c){f?k(f):k(null,{value:d,criteria:c})})},function(d,f){return d?k(d):void k(null,g(f.sort(c),function(d){return d.value}))})};x.auto=function(d,f){function k(d){B.unshift(d)}function c(){q--;h(B.slice(0),function(d){d()})}f=l(f||n);var a=W(d),q=a.length;if(!q)return f(null);var m={},B=[];k(function(){q||f(null,m)});h(a,function(a){function q(d){var k=
z(arguments,1);if(1>=k.length&&(k=k[0]),d){var b={};h(W(m),function(d){b[d]=m[d]});b[a]=k;f(d,b)}else m[a]=k,x.setImmediate(c)}function r(){return b(A,function(d,f){return d&&m.hasOwnProperty(f)},!0)&&!m.hasOwnProperty(a)}function g(){if(r()){a:for(var d=0;d<B.length;d+=1)if(B[d]===g){B.splice(d,1);break a}w[w.length-1](q,m)}}for(var I,w=N(d[a])?d[a]:[d[a]],A=w.slice(0,Math.abs(w.length-1))||[],C=A.length;C--;){if(!(I=d[A[C]]))throw Error("Has inexistant dependency");if(N(I)&&~I.indexOf(a))throw Error("Has cyclic dependencies");
}r()?w[w.length-1](q,m):k(g)})};x.retry=function(d,f,k){function c(b,q){function m(d,f){return function(k){d(function(d,c){k(!d||f,{err:d,result:c})},q)}}for(;d;)a.push(m(f,!--d));x.series(a,function(d,f){f=f[f.length-1];(b||k)(f.err,f.result)})}var a=[];return"function"==typeof d&&(k=f,f=d,d=5),d=parseInt(d,10)||5,k?c():c};x.waterfall=function(d,f){function k(d){return function(c){if(c)f.apply(null,arguments);else{var a=z(arguments,1),b=d.next();b?a.push(k(b)):a.push(f);p(d).apply(null,a)}}}return(f=
l(f||n),N(d))?d.length?void k(x.iterator(d))():f():f(Error("First argument to waterfall must be an array of functions"))};x.parallel=function(d,f){t(x.eachOf,d,f)};x.parallelLimit=function(d,f,k){t(q(f),d,k)};x.series=function(d,f){f=f||n;var k=a(d)?[]:{};x.eachOfSeries(d,function(d,f,c){d(function(d){var a=z(arguments,1);1>=a.length&&(a=a[0]);k[f]=a;c(d)})},function(d){f(d,k)})};x.iterator=function(d){function f(k){function c(){return d.length&&d[k].apply(null,arguments),c.next()}return c.next=function(){return k<
d.length-1?f(k+1):null},c}return f(0)};x.apply=function(d){var f=z(arguments,1);return function(){return d.apply(null,f.concat(z(arguments)))}};x.concat=k(aa);x.concatSeries=f(aa);x.whilst=function(d,f,k){d()?f(function(c){return c?k(c):void x.whilst(d,f,k)}):k(null)};x.doWhilst=function(d,f,k){d(function(c){if(c)return k(c);var a=z(arguments,1);f.apply(null,a)?x.doWhilst(d,f,k):k(null)})};x.until=function(d,f,k){d()?k(null):f(function(c){return c?k(c):void x.until(d,f,k)})};x.doUntil=function(d,
f,k){d(function(c){if(c)return k(c);var a=z(arguments,1);f.apply(null,a)?k(null):x.doUntil(d,f,k)})};x.queue=function(d,f){return F(function(f,k){d(f[0],k)},f,1)};x.priorityQueue=function(d,f){function k(d,f){return d.priority-f.priority}function c(d,f,k){for(var a=-1,b=d.length-1;b>a;){var q=a+(b-a+1>>>1);0<=k(f,d[q])?a=q:b=q-1}return a}function a(d,f,b,q){if(null!=q&&"function"!=typeof q)throw Error("task callback must be a function");return d.started=!0,N(f)||(f=[f]),0===f.length?x.setImmediate(function(){d.drain()}):
void h(f,function(f){f={data:f,priority:b,callback:"function"==typeof q?q:n};d.tasks.splice(c(d.tasks,f,k)+1,0,f);d.tasks.length===d.concurrency&&d.saturated();x.setImmediate(d.process)})}var b=x.queue(d,f);return b.push=function(d,f,k){a(b,d,f,k)},delete b.unshift,b};x.cargo=function(d,f){return F(d,1,f)};x.log=E("log");x.dir=E("dir");x.memoize=function(d,f){function k(){var b=z(arguments),q=b.pop(),m=f.apply(null,b);m in c?x.nextTick(function(){q.apply(null,c[m])}):m in a?a[m].push(q):(a[m]=[q],
d.apply(null,b.concat([function(){c[m]=z(arguments);var d=a[m];delete a[m];for(var f=0,k=d.length;k>f;f++)d[f].apply(null,arguments)}])))}var c={},a={};return f=f||function(d){return d},k.memo=c,k.unmemoized=d,k};x.unmemoize=function(d){return function(){return(d.unmemoized||d).apply(null,arguments)}};x.times=I(x.map);x.timesSeries=I(x.mapSeries);x.timesLimit=function(d,f,k,a){return x.mapLimit(c(d),f,k,a)};x.seq=function(){var d=arguments;return function(){var f=this,k=z(arguments),c=k.slice(-1)[0];
"function"==typeof c?k.pop():c=n;x.reduce(d,k,function(d,k,c){k.apply(f,d.concat([function(){var d=arguments[0],f=z(arguments,1);c(d,f)}]))},function(d,k){c.apply(f,[d].concat(k))})}};x.compose=function(){return x.seq.apply(null,Array.prototype.reverse.call(arguments))};x.applyEach=function(){var d=z(arguments);return S.apply(null,[x.eachOf].concat(d))};x.applyEachSeries=function(){var d=z(arguments);return S.apply(null,[x.eachOfSeries].concat(d))};x.forever=function(d,f){function k(d){return d?c(d):
void a(k)}var c=e(f||n),a=p(d);k()};x.ensureAsync=p;"undefined"!=typeof u&&u.exports?u.exports=x:K.async=x}()},{}],2:[function(n,u,p){!function(n){"object"==typeof p&&"undefined"!=typeof u?u.exports=n():("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=n()}(function(){return function e(l,a,w){function h(c,m){if(!a[c]){if(!l[c]){var r="function"==typeof n&&n;if(!m&&r)return r(c,!0);if(g)return g(c,!0);r=Error("Cannot find module '"+c+"'");
throw r.code="MODULE_NOT_FOUND",r;}r=a[c]={exports:{}};l[c][0].call(r.exports,function(a){var m=l[c][1][a];return h(m?m:a)},r,r.exports,e,l,a,w)}return a[c].exports}for(var g="function"==typeof n&&n,c=0;c<w.length;c++)h(w[c]);return h}({1:[function(n,l,a){n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(a){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var b=c.shift();if(b){if("object"!=typeof b)throw new TypeError(b+
"must be non-object");for(var m in b)b.hasOwnProperty(m)&&(a[m]=b[m])}}return a};a.shrinkBuf=function(a,c){return a.length===c?a:a.subarray?a.subarray(0,c):(a.length=c,a)};var w={arraySet:function(a,c,b,m,r){if(c.subarray&&a.subarray)return void a.set(c.subarray(b,b+m),r);for(var z=0;m>z;z++)a[r+z]=c[b+z]},flattenChunks:function(a){var c,b,m,r,z;c=m=0;for(b=a.length;b>c;c++)m+=a[c].length;z=new Uint8Array(m);c=m=0;for(b=a.length;b>c;c++)r=a[c],z.set(r,m),m+=r.length;return z}},h={arraySet:function(a,
c,b,m,r){for(var z=0;m>z;z++)a[r+z]=c[b+z]},flattenChunks:function(a){return[].concat.apply([],a)}};a.setTyped=function(g){g?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,w)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,h))};a.setTyped(n)},{}],2:[function(n,l,a){function w(a,b){if(65537>b&&(a.subarray&&c||!a.subarray&&g))return String.fromCharCode.apply(null,h.shrinkBuf(a,b));for(var z="",w=0;b>w;w++)z+=String.fromCharCode(a[w]);return z}var h=n("./common"),g=!0,c=!0;
try{String.fromCharCode.apply(null,[0])}catch(m){g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(m){c=!1}var b=new h.Buf8(256);for(n=0;256>n;n++)b[n]=252<=n?6:248<=n?5:240<=n?4:224<=n?3:192<=n?2:1;b[254]=b[254]=1;a.string2buf=function(c){var a,b,g,q,k,d=c.length,f=0;for(q=0;d>q;q++)b=c.charCodeAt(q),55296===(64512&b)&&d>q+1&&(g=c.charCodeAt(q+1),56320===(64512&g)&&(b=65536+(b-55296<<10)+(g-56320),q++)),f+=128>b?1:2048>b?2:65536>b?3:4;a=new h.Buf8(f);for(q=k=0;f>k;q++)b=c.charCodeAt(q),
55296===(64512&b)&&d>q+1&&(g=c.charCodeAt(q+1),56320===(64512&g)&&(b=65536+(b-55296<<10)+(g-56320),q++)),128>b?a[k++]=b:2048>b?(a[k++]=192|b>>>6,a[k++]=128|63&b):65536>b?(a[k++]=224|b>>>12,a[k++]=128|b>>>6&63,a[k++]=128|63&b):(a[k++]=240|b>>>18,a[k++]=128|b>>>12&63,a[k++]=128|b>>>6&63,a[k++]=128|63&b);return a};a.buf2binstring=function(a){return w(a,a.length)};a.binstring2buf=function(a){for(var c=new h.Buf8(a.length),b=0,g=c.length;g>b;b++)c[b]=a.charCodeAt(b);return c};a.buf2string=function(a,c){var g,
h,q,k,d=c||a.length,f=Array(2*d);for(g=h=0;d>g;)if(q=a[g++],128>q)f[h++]=q;else if(k=b[q],4<k)f[h++]=65533,g+=k-1;else{for(q&=2===k?31:3===k?15:7;1<k&&d>g;)q=q<<6|63&a[g++],k--;1<k?f[h++]=65533:65536>q?f[h++]=q:(q-=65536,f[h++]=55296|q>>10&1023,f[h++]=56320|1023&q)}return w(f,h)};a.utf8border=function(a,c){var g;c=c||a.length;c>a.length&&(c=a.length);for(g=c-1;0<=g&&128===(192&a[g]);)g--;return 0>g?c:0===g?c:g+b[a[g]]>c?g:c}},{"./common":1}],3:[function(n,l,a){l.exports=function(a,h,g,c){var b=65535&
a|0;a=a>>>16&65535|0;for(var m=0;0!==g;){m=2E3<g?2E3:g;g-=m;do b=b+h[c++]|0,a=a+b|0;while(--m);b%=65521;a%=65521}return b|a<<16|0}},{}],4:[function(n,l,a){l.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,
Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(n,l,a){var w=function(){for(var a,g=[],c=0;256>c;c++){a=c;for(var b=0;8>b;b++)a=1&a?3988292384^a>>>1:a>>>1;g[c]=a}return g}();l.exports=function(a,g,c,b){c=b+c;for(a^=-1;c>b;b++)a=a>>>8^w[255&(a^g[b])];return-1^a}},{}],6:[function(n,l,a){l.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],7:[function(n,l,a){l.exports=function(a,h){var g,
c,b,m,r,z,A,q,k,d,f,B,C,l,y,n,e,F,E,I,S,p,K,H;g=a.state;c=a.next_in;K=a.input;b=c+(a.avail_in-5);m=a.next_out;H=a.output;r=m-(h-a.avail_out);z=m+(a.avail_out-257);A=g.dmax;q=g.wsize;k=g.whave;d=g.wnext;f=g.window;B=g.hold;C=g.bits;l=g.lencode;y=g.distcode;n=(1<<g.lenbits)-1;e=(1<<g.distbits)-1;a:do b:for(15>C&&(B+=K[c++]<<C,C+=8,B+=K[c++]<<C,C+=8),F=l[B&n];;){if(E=F>>>24,B>>>=E,C-=E,E=F>>>16&255,0===E)H[m++]=65535&F;else{if(!(16&E)){if(0===(64&E)){F=l[(65535&F)+(B&(1<<E)-1)];continue b}if(32&E){g.mode=
12;break a}a.msg="invalid literal/length code";g.mode=30;break a}I=65535&F;(E&=15)&&(E>C&&(B+=K[c++]<<C,C+=8),I+=B&(1<<E)-1,B>>>=E,C-=E);15>C&&(B+=K[c++]<<C,C+=8,B+=K[c++]<<C,C+=8);F=y[B&e];c:for(;;){if(E=F>>>24,B>>>=E,C-=E,E=F>>>16&255,!(16&E)){if(0===(64&E)){F=y[(65535&F)+(B&(1<<E)-1)];continue c}a.msg="invalid distance code";g.mode=30;break a}if(S=65535&F,E&=15,E>C&&(B+=K[c++]<<C,C+=8,E>C&&(B+=K[c++]<<C,C+=8)),S+=B&(1<<E)-1,S>A){a.msg="invalid distance too far back";g.mode=30;break a}if(B>>>=E,
C-=E,E=m-r,S>E){if(E=S-E,E>k&&g.sane){a.msg="invalid distance too far back";g.mode=30;break a}if(F=0,p=f,0===d){if(F+=q-E,I>E){I-=E;do H[m++]=f[F++];while(--E);F=m-S;p=H}}else if(E>d){if(F+=q+d-E,E-=d,I>E){I-=E;do H[m++]=f[F++];while(--E);if(F=0,I>d){E=d;I-=E;do H[m++]=f[F++];while(--E);F=m-S;p=H}}}else if(F+=d-E,I>E){I-=E;do H[m++]=f[F++];while(--E);F=m-S;p=H}for(;2<I;)H[m++]=p[F++],H[m++]=p[F++],H[m++]=p[F++],I-=3;I&&(H[m++]=p[F++],1<I&&(H[m++]=p[F++]))}else{F=m-S;do H[m++]=H[F++],H[m++]=H[F++],
H[m++]=H[F++],I-=3;while(2<I);I&&(H[m++]=H[F++],1<I&&(H[m++]=H[F++]))}break}}break}while(b>c&&z>m);I=C>>3;c-=I;C-=I<<3;a.next_in=c;a.next_out=m;a.avail_in=b>c?5+(b-c):5-(c-b);a.avail_out=z>m?257+(z-m):257-(m-z);g.hold=B&(1<<C)-1;g.bits=C}},{}],8:[function(n,l,a){function w(d){return(d>>>24&255)+(d>>>8&65280)+((65280&d)<<8)+((255&d)<<24)}function h(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=
0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new A.Buf16(320);this.work=new A.Buf16(288);this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function g(d){var f;return d&&d.state?(f=d.state,d.total_in=d.total_out=f.total=0,d.msg="",f.wrap&&(d.adler=1&f.wrap),f.mode=V,f.last=0,f.havedict=0,f.dmax=32768,f.head=null,f.hold=0,f.bits=0,
f.lencode=f.lendyn=new A.Buf32(y),f.distcode=f.distdyn=new A.Buf32(t),f.sane=1,f.back=-1,B):C}function c(d){var f;return d&&d.state?(f=d.state,f.wsize=0,f.whave=0,f.wnext=0,g(d)):C}function b(d,f){var k,a;return d&&d.state?(a=d.state,0>f?(k=0,f=-f):(k=(f>>4)+1,48>f&&(f&=15)),f&&(8>f||15<f)?C:(null!==a.window&&a.wbits!==f&&(a.window=null),a.wrap=k,a.wbits=f,c(d))):C}function m(d,f){var k,a;return d?(a=new h,d.state=a,a.window=null,k=b(d,f),k!==B&&(d.state=null),k):C}var r,z,A=n("../utils/common"),
q=n("./adler32"),k=n("./crc32"),d=n("./inffast"),f=n("./inftrees"),B=0,C=-2,V=1,y=852,t=592,aa=!0;a.inflateReset=c;a.inflateReset2=b;a.inflateResetKeep=g;a.inflateInit=function(d){return m(d,15)};a.inflateInit2=m;a.inflate=function(a,c){var b,m,g,h,l,y,n,t,e,p,u,D,Y,G,J,L,R,ca,da,M,T,Z,O=0,P=new A.Buf8(4),ga=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return C;b=a.state;12===b.mode&&(b.mode=13);l=a.next_out;g=a.output;n=a.avail_out;h=a.next_in;
m=a.input;y=a.avail_in;t=b.hold;e=b.bits;p=y;u=n;T=B;a:for(;;)switch(b.mode){case V:if(0===b.wrap){b.mode=13;break}for(;16>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(2&b.wrap&&35615===t){b.check=0;P[0]=255&t;P[1]=t>>>8&255;b.check=k(b.check,P,2,0);e=t=0;b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&t)<<8)+(t>>8))%31){a.msg="incorrect header check";b.mode=30;break}if(8!==(15&t)){a.msg="unknown compression method";b.mode=30;break}if(t>>>=4,e-=4,M=(15&t)+8,0===b.wbits)b.wbits=
M;else if(M>b.wbits){a.msg="invalid window size";b.mode=30;break}b.dmax=1<<M;a.adler=b.check=1;b.mode=512&t?10:12;e=t=0;break;case 2:for(;16>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(b.flags=t,8!==(255&b.flags)){a.msg="unknown compression method";b.mode=30;break}if(57344&b.flags){a.msg="unknown header flags set";b.mode=30;break}b.head&&(b.head.text=t>>8&1);512&b.flags&&(P[0]=255&t,P[1]=t>>>8&255,b.check=k(b.check,P,2,0));e=t=0;b.mode=3;case 3:for(;32>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}b.head&&
(b.head.time=t);512&b.flags&&(P[0]=255&t,P[1]=t>>>8&255,P[2]=t>>>16&255,P[3]=t>>>24&255,b.check=k(b.check,P,4,0));e=t=0;b.mode=4;case 4:for(;16>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}b.head&&(b.head.xflags=255&t,b.head.os=t>>8);512&b.flags&&(P[0]=255&t,P[1]=t>>>8&255,b.check=k(b.check,P,2,0));e=t=0;b.mode=5;case 5:if(1024&b.flags){for(;16>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}b.length=t;b.head&&(b.head.extra_len=t);512&b.flags&&(P[0]=255&t,P[1]=t>>>8&255,b.check=k(b.check,P,2,0));e=t=0}else b.head&&
(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(D=b.length,D>y&&(D=y),D&&(b.head&&(M=b.head.extra_len-b.length,b.head.extra||(b.head.extra=Array(b.head.extra_len)),A.arraySet(b.head.extra,m,h,D,M)),512&b.flags&&(b.check=k(b.check,m,D,h)),y-=D,h+=D,b.length-=D),b.length))break a;b.length=0;b.mode=7;case 7:if(2048&b.flags){if(0===y)break a;D=0;do M=m[h+D++],b.head&&M&&65536>b.length&&(b.head.name+=String.fromCharCode(M));while(M&&y>D);if(512&b.flags&&(b.check=k(b.check,m,D,h)),y-=D,h+=D,M)break a}else b.head&&
(b.head.name=null);b.length=0;b.mode=8;case 8:if(4096&b.flags){if(0===y)break a;D=0;do M=m[h+D++],b.head&&M&&65536>b.length&&(b.head.comment+=String.fromCharCode(M));while(M&&y>D);if(512&b.flags&&(b.check=k(b.check,m,D,h)),y-=D,h+=D,M)break a}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;16>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(t!==(65535&b.check)){a.msg="header crc mismatch";b.mode=30;break}e=t=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0);a.adler=b.check=
0;b.mode=12;break;case 10:for(;32>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}a.adler=b.check=w(t);e=t=0;b.mode=11;case 11:if(0===b.havedict)return a.next_out=l,a.avail_out=n,a.next_in=h,a.avail_in=y,b.hold=t,b.bits=e,2;a.adler=b.check=1;b.mode=12;case 12:if(5===c||6===c)break a;case 13:if(b.last){t>>>=7&e;e-=7&e;b.mode=27;break}for(;3>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}switch(b.last=1&t,t>>>=1,--e,3&t){case 0:b.mode=14;break;case 1:G=b;if(aa){L=void 0;r=new A.Buf32(512);z=new A.Buf32(32);
for(L=0;144>L;)G.lens[L++]=8;for(;256>L;)G.lens[L++]=9;for(;280>L;)G.lens[L++]=7;for(;288>L;)G.lens[L++]=8;f(1,G.lens,0,288,r,0,G.work,{bits:9});for(L=0;32>L;)G.lens[L++]=5;f(2,G.lens,0,32,z,0,G.work,{bits:5});aa=!1}G.lencode=r;G.lenbits=9;G.distcode=z;G.distbits=5;if(b.mode=20,6===c){t>>>=2;e-=2;break a}break;case 2:b.mode=17;break;case 3:a.msg="invalid block type",b.mode=30}t>>>=2;e-=2;break;case 14:t>>>=7&e;for(e-=7&e;32>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if((65535&t)!==(t>>>16^65535)){a.msg=
"invalid stored block lengths";b.mode=30;break}if(b.length=65535&t,t=0,e=0,b.mode=15,6===c)break a;case 15:b.mode=16;case 16:if(D=b.length){if(D>y&&(D=y),D>n&&(D=n),0===D)break a;A.arraySet(g,m,h,D,l);y-=D;h+=D;n-=D;l+=D;b.length-=D;break}b.mode=12;break;case 17:for(;14>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(b.nlen=(31&t)+257,t>>>=5,e-=5,b.ndist=(31&t)+1,t>>>=5,e-=5,b.ncode=(15&t)+4,t>>>=4,e-=4,286<b.nlen||30<b.ndist){a.msg="too many length or distance symbols";b.mode=30;break}b.have=0;b.mode=
18;case 18:for(;b.have<b.ncode;){for(;3>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}b.lens[ga[b.have++]]=7&t;t>>>=3;e-=3}for(;19>b.have;)b.lens[ga[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,Z={bits:b.lenbits},T=f(0,b.lens,0,19,b.lencode,0,b.work,Z),b.lenbits=Z.bits,T){a.msg="invalid code lengths set";b.mode=30;break}b.have=0;b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;O=b.lencode[t&(1<<b.lenbits)-1],J=O>>>24,L=65535&O,!(e>=J);){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(16>L)t>>>=J,e-=J,
b.lens[b.have++]=L;else{if(16===L){for(G=J+2;G>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(t>>>=J,e-=J,0===b.have){a.msg="invalid bit length repeat";b.mode=30;break}M=b.lens[b.have-1];D=3+(3&t);t>>>=2;e-=2}else if(17===L){for(G=J+3;G>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}t>>>=J;e-=J;M=0;D=3+(7&t);t>>>=3;e-=3}else{for(G=J+7;G>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}t>>>=J;e-=J;M=0;D=11+(127&t);t>>>=7;e-=7}if(b.have+D>b.nlen+b.ndist){a.msg="invalid bit length repeat";b.mode=30;break}for(;D--;)b.lens[b.have++]=
M}}if(30===b.mode)break;if(0===b.lens[256]){a.msg="invalid code -- missing end-of-block";b.mode=30;break}if(b.lenbits=9,Z={bits:b.lenbits},T=f(1,b.lens,0,b.nlen,b.lencode,0,b.work,Z),b.lenbits=Z.bits,T){a.msg="invalid literal/lengths set";b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,Z={bits:b.distbits},T=f(2,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,Z),b.distbits=Z.bits,T){a.msg="invalid distances set";b.mode=30;break}if(b.mode=20,6===c)break a;case 20:b.mode=21;case 21:if(6<=y&&258<=n){a.next_out=
l;a.avail_out=n;a.next_in=h;a.avail_in=y;b.hold=t;b.bits=e;d(a,u);l=a.next_out;g=a.output;n=a.avail_out;h=a.next_in;m=a.input;y=a.avail_in;t=b.hold;e=b.bits;12===b.mode&&(b.back=-1);break}for(b.back=0;O=b.lencode[t&(1<<b.lenbits)-1],J=O>>>24,G=O>>>16&255,L=65535&O,!(e>=J);){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(G&&0===(240&G)){R=J;ca=G;for(da=L;O=b.lencode[da+((t&(1<<R+ca)-1)>>R)],J=O>>>24,G=O>>>16&255,L=65535&O,!(e>=R+J);){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}t>>>=R;e-=R;b.back+=R}if(t>>>=
J,e-=J,b.back+=J,b.length=L,0===G){b.mode=26;break}if(32&G){b.back=-1;b.mode=12;break}if(64&G){a.msg="invalid literal/length code";b.mode=30;break}b.extra=15&G;b.mode=22;case 22:if(b.extra){for(G=b.extra;G>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}b.length+=t&(1<<b.extra)-1;t>>>=b.extra;e-=b.extra;b.back+=b.extra}b.was=b.length;b.mode=23;case 23:for(;O=b.distcode[t&(1<<b.distbits)-1],J=O>>>24,G=O>>>16&255,L=65535&O,!(e>=J);){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(0===(240&G)){R=J;ca=G;for(da=
L;O=b.distcode[da+((t&(1<<R+ca)-1)>>R)],J=O>>>24,G=O>>>16&255,L=65535&O,!(e>=R+J);){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}t>>>=R;e-=R;b.back+=R}if(t>>>=J,e-=J,b.back+=J,64&G){a.msg="invalid distance code";b.mode=30;break}b.offset=L;b.extra=15&G;b.mode=24;case 24:if(b.extra){for(G=b.extra;G>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}b.offset+=t&(1<<b.extra)-1;t>>>=b.extra;e-=b.extra;b.back+=b.extra}if(b.offset>b.dmax){a.msg="invalid distance too far back";b.mode=30;break}b.mode=25;case 25:if(0===
n)break a;if(D=u-n,b.offset>D){if(D=b.offset-D,D>b.whave&&b.sane){a.msg="invalid distance too far back";b.mode=30;break}D>b.wnext?(D-=b.wnext,Y=b.wsize-D):Y=b.wnext-D;D>b.length&&(D=b.length);G=b.window}else G=g,Y=l-b.offset,D=b.length;D>n&&(D=n);n-=D;b.length-=D;do g[l++]=G[Y++];while(--D);0===b.length&&(b.mode=21);break;case 26:if(0===n)break a;g[l++]=b.length;n--;b.mode=21;break;case 27:if(b.wrap){for(;32>e;){if(0===y)break a;y--;t|=m[h++]<<e;e+=8}if(u-=n,a.total_out+=u,b.total+=u,u&&(a.adler=
b.check=b.flags?k(b.check,g,u,l-u):q(b.check,g,u,l-u)),u=n,(b.flags?t:w(t))!==b.check){a.msg="incorrect data check";b.mode=30;break}e=t=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;32>e;){if(0===y)break a;y--;t+=m[h++]<<e;e+=8}if(t!==(4294967295&b.total)){a.msg="incorrect length check";b.mode=30;break}e=t=0}b.mode=29;case 29:T=1;break a;case 30:T=-3;break a;case 31:return-4;default:return C}a.next_out=l;a.avail_out=n;a.next_in=h;a.avail_in=y;b.hold=t;b.bits=e;if(h=b.wsize||u!==a.avail_out&&30>b.mode&&
(27>b.mode||4!==c)){h=a.output;l=a.next_out;m=u-a.avail_out;var ba;y=a.state;h=(null===y.window&&(y.wsize=1<<y.wbits,y.wnext=0,y.whave=0,y.window=new A.Buf8(y.wsize)),m>=y.wsize?(A.arraySet(y.window,h,l-y.wsize,y.wsize,0),y.wnext=0,y.whave=y.wsize):(ba=y.wsize-y.wnext,ba>m&&(ba=m),A.arraySet(y.window,h,l-m,ba,y.wnext),m-=ba,m?(A.arraySet(y.window,h,l-m,m,0),y.wnext=m,y.whave=y.wsize):(y.wnext+=ba,y.wnext===y.wsize&&(y.wnext=0),y.whave<y.wsize&&(y.whave+=ba))),0)}return h?(b.mode=31,-4):(p-=a.avail_in,
u-=a.avail_out,a.total_in+=p,a.total_out+=u,b.total+=u,b.wrap&&u&&(a.adler=b.check=b.flags?k(b.check,g,u,a.next_out-u):q(b.check,g,u,a.next_out-u)),a.data_type=b.bits+(b.last?64:0)+(12===b.mode?128:0)+(20===b.mode||15===b.mode?256:0),(0===p&&0===u||4===c)&&T===B&&(T=-5),T)};a.inflateEnd=function(d){if(!d||!d.state)return C;var b=d.state;return b.window&&(b.window=null),d.state=null,B};a.inflateGetHeader=function(d,b){var f;return d&&d.state?(f=d.state,0===(2&f.wrap)?C:(f.head=b,b.done=!1,B)):C};a.inflateInfo=
"pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,l,a){var w=e("../utils/common"),h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],g=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],c=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,
19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];l.exports=function(a,r,e,l,q,k,d,f){var B,C,n,y,t,aa,F,E;y=f.bits;for(var p=0,u=0,U=0,K=0,H=0,x=0,Q=0,X=B=0,N=0,W=null,fa=0,D=new w.Buf16(16),x=new w.Buf16(16),Y=null,G=0,p=0;15>=p;p++)D[p]=0;for(u=0;l>u;u++)D[r[e+u]]++;H=y;for(K=15;1<=K&&0===D[K];K--);if(H>K&&(H=K),0===K)return q[k++]=20971520,q[k++]=20971520,f.bits=1,0;for(U=1;K>U&&0===D[U];U++);U>H&&(H=U);for(p=B=1;15>=p;p++)if(B<<=1,B-=D[p],0>B)return-1;if(0<B&&(0===a||1!==
K))return-1;x[1]=0;for(p=1;15>p;p++)x[p+1]=x[p]+D[p];for(u=0;l>u;u++)0!==r[e+u]&&(d[x[r[e+u]]++]=u);if(0===a?(W=Y=d,t=19):1===a?(W=h,fa-=257,Y=g,G-=257,t=256):(W=c,Y=b,t=-1),N=0,u=0,p=U,y=k,x=H,Q=0,n=-1,X=1<<H,l=X-1,1===a&&852<X||2===a&&592<X)return 1;for(var J=0;;){J++;aa=p-Q;d[u]<t?(F=0,E=d[u]):d[u]>t?(F=Y[G+d[u]],E=W[fa+d[u]]):(F=96,E=0);B=1<<p-Q;U=C=1<<x;do C-=B,q[y+(N>>Q)+C]=aa<<24|F<<16|E|0;while(0!==C);for(B=1<<p-1;N&B;)B>>=1;if(0!==B?(N&=B-1,N+=B):N=0,u++,0===--D[p]){if(p===K)break;p=r[e+
d[u]]}if(p>H&&(N&l)!==n){0===Q&&(Q=H);y+=U;x=p-Q;for(B=1<<x;K>x+Q&&(B-=D[x+Q],!(0>=B));)x++,B<<=1;if(X+=1<<x,1===a&&852<X||2===a&&592<X)return 1;n=N&l;q[n]=H<<24|x<<16|y-k|0}}return 0!==N&&(q[y+N]=p-Q<<24|4194304),f.bits=H,0}},{"../utils/common":1}],10:[function(e,l,a){l.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,l,a){l.exports=function(){this.input=
null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/lib/inflate.js":[function(e,l,a){function w(b,d){var f=new q(d);if(f.push(b,!0),f.err)throw f.msg;return f.result}var h=e("./zlib/inflate.js"),g=e("./utils/common"),c=e("./utils/strings"),b=e("./zlib/constants"),m=e("./zlib/messages"),r=e("./zlib/zstream"),z=e("./zlib/gzheader"),A=Object.prototype.toString,q=function(a){var d=
this.options=g.assign({chunkSize:16384,windowBits:0,to:""},a||{});d.raw&&0<=d.windowBits&&16>d.windowBits&&(d.windowBits=-d.windowBits,0===d.windowBits&&(d.windowBits=-15));!(0<=d.windowBits&&16>d.windowBits)||a&&a.windowBits||(d.windowBits+=32);15<d.windowBits&&48>d.windowBits&&0===(15&d.windowBits)&&(d.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new r;this.strm.avail_out=0;a=h.inflateInit2(this.strm,d.windowBits);if(a!==b.Z_OK)throw Error(m[a]);this.header=new z;
h.inflateGetHeader(this.strm,this.header)};q.prototype.push=function(a,d){var f,q,m,r,y,t=this.strm,e=this.options.chunkSize;if(this.ended)return!1;q=d===~~d?d:!0===d?b.Z_FINISH:b.Z_NO_FLUSH;"string"==typeof a?t.input=c.binstring2buf(a):"[object ArrayBuffer]"===A.call(a)?t.input=new Uint8Array(a):t.input=a;t.next_in=0;t.avail_in=t.input.length;do{if(0===t.avail_out&&(t.output=new g.Buf8(e),t.next_out=0,t.avail_out=e),f=h.inflate(t,b.Z_NO_FLUSH),f!==b.Z_STREAM_END&&f!==b.Z_OK)return this.onEnd(f),
this.ended=!0,!1;t.next_out&&(0===t.avail_out||f===b.Z_STREAM_END||0===t.avail_in&&(q===b.Z_FINISH||q===b.Z_SYNC_FLUSH))&&("string"===this.options.to?(m=c.utf8border(t.output,t.next_out),r=t.next_out-m,y=c.buf2string(t.output,m),t.next_out=r,t.avail_out=e-r,r&&g.arraySet(t.output,t.output,m,r,0),this.onData(y)):this.onData(g.shrinkBuf(t.output,t.next_out)))}while(0<t.avail_in&&f!==b.Z_STREAM_END);return f===b.Z_STREAM_END&&(q=b.Z_FINISH),q===b.Z_FINISH?(f=h.inflateEnd(this.strm),this.onEnd(f),this.ended=
!0,f===b.Z_OK):q===b.Z_SYNC_FLUSH?(this.onEnd(b.Z_OK),t.avail_out=0,!0):!0};q.prototype.onData=function(b){this.chunks.push(b)};q.prototype.onEnd=function(a){a===b.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks));this.chunks=[];this.err=a;this.msg=this.strm.msg};a.Inflate=q;a.inflate=w;a.inflateRaw=function(b,d){return d=d||{},d.raw=!0,w(b,d)};a.ungzip=w},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate.js":8,
"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")})},{}],3:[function(n,u,p){function v(d,b){switch(void 0===b&&(b=d.toString()),d.name){case "NotFoundError":return new m(r.ENOENT,b);case "QuotaExceededError":return new m(r.ENOSPC,b);default:return new m(r.EIO,b)}}function e(d,b,a){return void 0===b&&(b=r.EIO),void 0===a&&(a=null),function(k){k.preventDefault();d(new m(b,a))}}function l(d){var f=d.getBufferCore();f instanceof c.BufferCoreArrayBuffer||(d=new b(this._buffer.length),
this._buffer.copy(d),f=d.getBufferCore());return f.getDataView().buffer}var a=this.__extends||function(d,b){function a(){this.constructor=d}for(var k in b)b.hasOwnProperty(k)&&(d[k]=b[k]);a.prototype=b.prototype;d.prototype=new a},w=n("../core/buffer");u=n("../core/browserfs");var h=n("../generic/key_value_filesystem"),g=n("../core/api_error"),c=n("../core/buffer_core_arraybuffer");n=n("../core/global");var b=w.Buffer,m=g.ApiError,r=g.ErrorCode,z=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,
A=function(){function d(d,b){this.tx=d;this.store=b}return d.prototype.get=function(d,a){try{var k=this.store.get(d);k.onerror=e(a);k.onsuccess=function(d){d=d.target.result;void 0===d?a(null,d):a(null,new b(d))}}catch(c){a(v(c))}},d}();p.IndexedDBROTransaction=A;var q=function(d){function b(f,a){d.call(this,f,a)}return a(b,d),b.prototype.put=function(d,b,f,a){try{var k,c=l(b);k=f?this.store.put(c,d):this.store.add(c,d);k.onerror=e(a);k.onsuccess=function(d){a(null,!0)}}catch(q){a(v(q))}},b.prototype["delete"]=
function(d,b){try{var f=this.store["delete"](d);f.onerror=e(b);f.onsuccess=function(d){b()}}catch(a){b(v(a))}},b.prototype.commit=function(d){setTimeout(d,0)},b.prototype.abort=function(d){var b;try{this.tx.abort()}catch(f){b=v(f)}finally{d(b)}},b}(A);p.IndexedDBRWTransaction=q;var k=function(){function d(d,b){var a=this;void 0===b&&(b="browserfs");this.storeName=b;var k=z.open(this.storeName,1);k.onupgradeneeded=function(d){d=d.target.result;d.objectStoreNames.contains(a.storeName)&&d.deleteObjectStore(a.storeName);
d.createObjectStore(a.storeName)};k.onsuccess=function(b){a.db=b.target.result;d(null,a)};k.onerror=e(d,r.EACCES)}return d.prototype.name=function(){return"IndexedDB - "+this.storeName},d.prototype.clear=function(d){try{var b=this.db.transaction(this.storeName,"readwrite").objectStore(this.storeName).clear();b.onsuccess=function(b){setTimeout(d,0)};b.onerror=e(d)}catch(a){d(v(a))}},d.prototype.beginTransaction=function(d){void 0===d&&(d="readonly");var b=this.db.transaction(this.storeName,d),a=b.objectStore(this.storeName);
if("readwrite"===d)return new q(b,a);if("readonly"===d)return new A(b,a);throw new m(r.EINVAL,"Invalid transaction type.");},d}();p.IndexedDBStore=k;n=function(d){function b(a,f){var c=this;d.call(this);new k(function(d,b){d?a(d):c.init(b,function(d){a(d,c)})},f)}return a(b,d),b.isAvailable=function(){try{return"undefined"!=typeof z&&null!==z.open("__browserfs_test__")}catch(d){return!1}},b}(h.AsyncKeyValueFileSystem);p.IndexedDBFileSystem=n;u.registerFileSystem("IndexedDB",n)},{"../core/api_error":14,
"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/global":24,"../generic/key_value_filesystem":35}],4:[function(n,u,p){var v=this.__extends||function(b,a){function c(){this.constructor=b}for(var k in a)a.hasOwnProperty(k)&&(b[k]=a[k]);c.prototype=a.prototype;b.prototype=new c},e=n("../core/file_system"),l=n("../generic/file_index"),a=n("../core/buffer"),w=n("../core/api_error"),h=n("../core/file_flag"),g=n("../generic/preload_file");u=n("../core/browserfs");
var c=n("../generic/xhr"),b=(a.Buffer,w.ApiError),m=w.ErrorCode,r=(h.FileFlag,h.ActionType);n=function(h){function e(b,a){void 0===a&&(a="");h.call(this);null==b&&(b="index.json");0<a.length&&"/"!==a.charAt(a.length-1)&&(a+="/");this.prefix_url=a;var d=this._requestFileSync(b,"json");if(null==d)throw Error("Unable to find listing at URL: "+b);this._index=l.FileIndex.from_listing(d)}return v(e,h),e.prototype.empty=function(){this._index.fileIterator(function(b){b.file_data=null})},e.prototype.getXhrPath=
function(b){return"/"===b.charAt(0)&&(b=b.slice(1)),this.prefix_url+b},e.prototype._requestFileSizeAsync=function(b,a){c.getFileSizeAsync(this.getXhrPath(b),a)},e.prototype._requestFileSizeSync=function(b){return c.getFileSizeSync(this.getXhrPath(b))},e.prototype._requestFileAsync=function(b,a,d){c.asyncDownloadFile(this.getXhrPath(b),a,d)},e.prototype._requestFileSync=function(b,a){return c.syncDownloadFile(this.getXhrPath(b),a)},e.prototype.getName=function(){return"XmlHttpRequest"},e.isAvailable=
function(){return"undefined"!=typeof XMLHttpRequest&&null!==XMLHttpRequest},e.prototype.diskSpace=function(b,a){a(0,0)},e.prototype.isReadOnly=function(){return!0},e.prototype.supportsLinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.preloadFile=function(a,k){var d=this._index.getInode(a);if(null===d)throw b.ENOENT(a);d=d.getData();d.size=k.length;d.file_data=k},e.prototype.stat=function(a,k,d){k=this._index.getInode(a);
if(null===k)return d(b.ENOENT(a));var f;k.isFile()?(f=k.getData(),0>f.size?this._requestFileSizeAsync(a,function(b,a){return b?d(b):(f.size=a,void d(null,f.clone()))}):d(null,f.clone())):(f=k.getStats(),d(null,f))},e.prototype.statSync=function(a,k){var d=this._index.getInode(a);if(null===d)throw b.ENOENT(a);var f;return d.isFile()?(f=d.getData(),0>f.size&&(f.size=this._requestFileSizeSync(a))):f=d.getStats(),f},e.prototype.open=function(a,k,d,f){if(k.isWriteable())return f(new b(m.EPERM,a));var c=
this;d=this._index.getInode(a);if(null===d)return f(b.ENOENT(a));if(d.isDir())return f(b.EISDIR(a));var h=d.getData();switch(k.pathExistsAction()){case r.THROW_EXCEPTION:case r.TRUNCATE_FILE:return f(b.EEXIST(a));case r.NOP:if(null!=h.file_data)return f(null,new g.NoSyncFile(c,a,k,h.clone(),h.file_data));this._requestFileAsync(a,"buffer",function(d,b){return d?f(d):(h.size=b.length,h.file_data=b,f(null,new g.NoSyncFile(c,a,k,h.clone(),b)))});break;default:return f(new b(m.EINVAL,"Invalid FileMode object."))}},
e.prototype.openSync=function(a,k,d){if(k.isWriteable())throw new b(m.EPERM,a);d=this._index.getInode(a);if(null===d)throw b.ENOENT(a);if(d.isDir())throw b.EISDIR(a);d=d.getData();switch(k.pathExistsAction()){case r.THROW_EXCEPTION:case r.TRUNCATE_FILE:throw b.EEXIST(a);case r.NOP:if(null!=d.file_data)return new g.NoSyncFile(this,a,k,d.clone(),d.file_data);var f=this._requestFileSync(a,"buffer");return d.size=f.length,d.file_data=f,new g.NoSyncFile(this,a,k,d.clone(),f);default:throw new b(m.EINVAL,
"Invalid FileMode object.");}},e.prototype.readdir=function(b,a){try{a(null,this.readdirSync(b))}catch(d){a(d)}},e.prototype.readdirSync=function(a){var k=this._index.getInode(a);if(null===k)throw b.ENOENT(a);if(k.isFile())throw b.ENOTDIR(a);return k.getListing()},e.prototype.readFile=function(b,k,d,f){var c=f;this.open(b,d,420,function(d,b){if(d)return f(d);f=function(d,a){b.close(function(b){return null==d&&(d=b),c(d,a)})};var m=b.getBuffer();if(null===k)return 0<m.length?f(d,m.sliceCopy()):f(d,
new a.Buffer(0));try{f(null,m.toString(k))}catch(q){f(q)}})},e.prototype.readFileSync=function(b,k,d){b=this.openSync(b,d,420);try{var f=b.getBuffer();return null===k?0<f.length?f.sliceCopy():new a.Buffer(0):f.toString(k)}finally{b.closeSync()}},e}(e.BaseFileSystem);p.XmlHttpRequest=n;u.registerFileSystem("XmlHttpRequest",n)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,"../generic/file_index":33,"../generic/preload_file":36,"../generic/xhr":37}],
5:[function(n,u,p){var v=this.__extends||function(a,h){function g(){this.constructor=a}for(var c in h)h.hasOwnProperty(c)&&(a[c]=h[c]);g.prototype=h.prototype;a.prototype=new g};p=n("../core/file_system");var e=n("../core/file_flag"),l=n("../generic/preload_file");n=n("../core/browserfs");var a=function(a){function h(g,c,b,m,r){a.call(this,g,c,b,m,r)}return v(h,a),h.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},h.prototype.closeSync=function(){this.syncSync()},
h}(l.PreloadFile);p=function(w){function h(a,c){if(w.call(this),this._queue=[],this._queueRunning=!1,this._isInitialized=!1,this._sync=a,this._async=c,!a.supportsSynch())throw Error("Expected synchronous storage.");if(c.supportsSynch())throw Error("Expected asynchronous storage.");}return v(h,w),h.prototype.getName=function(){return"AsyncMirror"},h.isAvailable=function(){return!0},h.prototype._syncSync=function(a){this._sync.writeFileSync(a.getPath(),a.getBuffer(),null,e.FileFlag.getFileFlag("w"),
a.getStats().mode);this.enqueueOp({apiMethod:"writeFile",arguments:[a.getPath(),a.getBuffer(),null,a.getFlag(),a.getStats().mode]})},h.prototype.initialize=function(a){var c=this;if(this._isInitialized)a();else{var b=function(b,a,m){"/"!==b&&c._sync.mkdirSync(b,a);c._async.readdir(b,function(a,d){function f(a){a?m(a):c<d.length?(r(b+"/"+d[c],f),c++):m()}if(a)m(a);else{var c=0;f()}})},m=function(b,a,m){c._async.readFile(b,null,e.FileFlag.getFileFlag("r"),function(k,d){if(k)m(k);else try{c._sync.writeFileSync(b,
d,null,e.FileFlag.getFileFlag("w"),a)}catch(f){k=f}finally{m(k)}})},r=function(a,g){c._async.stat(a,!1,function(c,k){c?g(c):k.isDirectory()?b(a,k.mode,g):m(a,k.mode,g)})};b("/",0,function(b){b?a(b):(c._isInitialized=!0,a())})}},h.prototype.isReadOnly=function(){return!1},h.prototype.supportsSynch=function(){return!0},h.prototype.supportsLinks=function(){return!1},h.prototype.supportsProps=function(){return this._sync.supportsProps()&&this._async.supportsProps()},h.prototype.enqueueOp=function(a){var c=
this;if(this._queue.push(a),!this._queueRunning){this._queueRunning=!0;var b=function(a){if(a&&console.error("WARNING: File system has desynchronized. Received following error: "+a+"\n$"),0<c._queue.length){a=c._queue.shift();var g=a.arguments;g.push(b);c._async[a.apiMethod].apply(c._async,g)}else c._queueRunning=!1};b()}},h.prototype.renameSync=function(a,c){this._sync.renameSync(a,c);this.enqueueOp({apiMethod:"rename",arguments:[a,c]})},h.prototype.statSync=function(a,c){return this._sync.statSync(a,
c)},h.prototype.openSync=function(g,c,b){return this._sync.openSync(g,c,b).closeSync(),new a(this,g,c,this._sync.statSync(g,!1),this._sync.readFileSync(g,null,e.FileFlag.getFileFlag("r")))},h.prototype.unlinkSync=function(a){this._sync.unlinkSync(a);this.enqueueOp({apiMethod:"unlink",arguments:[a]})},h.prototype.rmdirSync=function(a){this._sync.rmdirSync(a);this.enqueueOp({apiMethod:"rmdir",arguments:[a]})},h.prototype.mkdirSync=function(a,c){this._sync.mkdirSync(a,c);this.enqueueOp({apiMethod:"mkdir",
arguments:[a,c]})},h.prototype.readdirSync=function(a){return this._sync.readdirSync(a)},h.prototype.existsSync=function(a){return this._sync.existsSync(a)},h.prototype.chmodSync=function(a,c,b){this._sync.chmodSync(a,c,b);this.enqueueOp({apiMethod:"chmod",arguments:[a,c,b]})},h.prototype.chownSync=function(a,c,b,m){this._sync.chownSync(a,c,b,m);this.enqueueOp({apiMethod:"chown",arguments:[a,c,b,m]})},h.prototype.utimesSync=function(a,c,b){this._sync.utimesSync(a,c,b);this.enqueueOp({apiMethod:"utimes",
arguments:[a,c,b]})},h}(p.SynchronousFileSystem);n.registerFileSystem("AsyncMirrorFS",p);u.exports=p},{"../core/browserfs":15,"../core/file_flag":22,"../core/file_system":23,"../generic/preload_file":36}],6:[function(n,u,p){var v=this.__extends||function(d,b){function a(){this.constructor=d}for(var k in b)b.hasOwnProperty(k)&&(d[k]=b[k]);a.prototype=b.prototype;d.prototype=new a},e=n("../generic/preload_file"),l=n("../core/file_system"),a=n("../core/node_fs_stats"),w=n("../core/buffer"),h=n("../core/api_error"),
g=n("../core/node_path");u=n("../core/browserfs");var c=n("../core/buffer_core_arraybuffer"),b=n("async"),m=w.Buffer,r=a.Stats,z=h.ApiError,A=h.ErrorCode,q=a.FileType,k=function(d){function b(a,f,k,c,m){d.call(this,a,f,k,c,m)}return v(b,d),b.prototype.sync=function(d){var b=this;if(this.isDirty()){var a=this.getBuffer(),f=a.getBufferCore();f instanceof c.BufferCoreArrayBuffer||(a=new m(a.length),this.getBuffer().copy(a),f=a.getBufferCore());f=f.getDataView();a=new DataView(f.buffer,f.byteOffset+a.getOffset(),
a.length);this._fs._writeFileStrict(this.getPath(),a,function(a){a||b.resetDirty();d(a)})}else d()},b.prototype.close=function(d){this.sync(d)},b}(e.PreloadFile);p.DropboxFile=k;n=function(d){function a(b){d.call(this);this.client=b}return v(a,d),a.prototype.getName=function(){return"Dropbox"},a.isAvailable=function(){return"undefined"!=typeof Dropbox},a.prototype.isReadOnly=function(){return!1},a.prototype.supportsSymlinks=function(){return!1},a.prototype.supportsProps=function(){return!1},a.prototype.supportsSynch=
function(){return!1},a.prototype.empty=function(d){var a=this;this.client.readdir("/",function(f,k,c,m){f?d(a.convert(f)):b.each(m,function(d,b){a.client.remove(d.path,function(d,f){b(d?a.convert(d):d)})},function(b){b?d(a.convert(b)):d()})})},a.prototype.rename=function(d,a,b){this.client.move(d,a,function(f,k){if(f){var c=-1<f.response.error.indexOf(d)?d:a;b(new z(A.ENOENT,c+" doesn't exist"))}else b()})},a.prototype.stat=function(d,a,b){var f=this;this.client.stat(d,function(a,k){if(!(a||null!=
k&&k.isRemoved)){var c=new r(f._statType(k),k.size);return b(null,c)}b(new z(A.ENOENT,d+" doesn't exist"))})},a.prototype.open=function(d,a,b,f){var k=this;this.client.readFile(d,{arrayBuffer:!0},function(b,c,q,r){if(!b)return b=new m(null===c?0:c),q=k._makeFile(d,a,q,b),f(null,q);if(a.isReadable())f(new z(A.ENOENT,d+" doesn't exist"));else switch(b.status){case 0:return console.error("No connection");case 404:var g=new ArrayBuffer(0);return k._writeFileStrict(d,g,function(b,c){if(b)f(b);else{var q=
k._makeFile(d,a,c,new m(g));f(null,q)}});default:return console.log("Unhandled error: "+b)}})},a.prototype._writeFileStrict=function(d,b,a){var f=this,k=g.dirname(d);this.stat(k,!1,function(c,m){c?a(new z(A.ENOENT,"Can't create "+d+" because "+k+" doesn't exist")):f.client.writeFile(d,b,function(d,b){d?a(f.convert(d)):a(null,b)})})},a.prototype._statType=function(d){return d.isFile?q.FILE:q.DIRECTORY},a.prototype._makeFile=function(d,b,a,f){var c=this._statType(a);a=new r(c,a.size);return new k(this,
d,b,a,f)},a.prototype._remove=function(d,a,b){var f=this;this.client.stat(d,function(k,c){k?a(new z(A.ENOENT,d+" doesn't exist")):c.isFile&&!b?a(new z(A.ENOTDIR,d+" is a file.")):!c.isFile&&b?a(new z(A.EISDIR,d+" is a directory.")):f.client.remove(d,function(b,f){a(b?new z(A.EIO,"Failed to remove "+d):null)})})},a.prototype.unlink=function(d,a){this._remove(d,a,!0)},a.prototype.rmdir=function(d,a){this._remove(d,a,!1)},a.prototype.mkdir=function(d,a,b){var f=this,k=g.dirname(d);this.client.stat(k,
function(a,c){a?b(new z(A.ENOENT,"Can't create "+d+" because "+k+" doesn't exist")):f.client.mkdir(d,function(a,f){b(a?new z(A.EEXIST,d+" already exists"):null)})})},a.prototype.readdir=function(d,a){var b=this;this.client.readdir(d,function(d,f,k,c){return d?a(b.convert(d)):a(null,f)})},a.prototype.convert=function(d,a){switch(void 0===a&&(a=""),d.status){case 400:return new z(A.EINVAL,a);case 401:case 403:return new z(A.EIO,a);case 404:return new z(A.ENOENT,a);case 405:return new z(A.ENOTSUP,a);
default:return new z(A.EIO,a)}},a}(l.BaseFileSystem);p.DropboxFileSystem=n;u.registerFileSystem("Dropbox",n)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],7:[function(n,u,p){function v(d,a,b,f){if("undefined"!=typeof navigator.webkitPersistentStorage)switch(d){case r.PERSISTENT:navigator.webkitPersistentStorage.requestQuota(a,
b,f);break;case r.TEMPORARY:navigator.webkitTemporaryStorage.requestQuota(a,b,f);break;default:f(null)}else r.webkitStorageInfo.requestQuota(d,a,b,f)}var e=this.__extends||function(d,a){function b(){this.constructor=d}for(var f in a)a.hasOwnProperty(f)&&(d[f]=a[f]);b.prototype=a.prototype;d.prototype=new b},l=n("../generic/preload_file"),a=n("../core/file_system"),w=n("../core/api_error"),h=n("../core/file_flag"),g=n("../core/node_fs_stats"),c=n("../core/buffer");u=n("../core/browserfs");var b=n("../core/buffer_core_arraybuffer"),
m=n("../core/node_path"),r=n("../core/global"),z=n("async"),A=c.Buffer,q=g.Stats,k=g.FileType,d=w.ApiError,f=w.ErrorCode,B=h.ActionType,C=r.webkitRequestFileSystem||r.requestFileSystem||null,V=function(d){function a(b,f,k,c,m){d.call(this,b,f,k,c,m)}return e(a,d),a.prototype.sync=function(d){var a=this;if(this.isDirty()){var f=this._fs;f.fs.root.getFile(this.getPath(),{create:!1},function(k){k.createWriter(function(k){var c=a.getBuffer(),m=c.getBufferCore();m instanceof b.BufferCoreArrayBuffer||(c=
new A(c.length),a.getBuffer().copy(c),m=c.getBufferCore());var m=m.getDataView(),c=new DataView(m.buffer,m.byteOffset+c.getOffset(),c.length),c=new Blob([c]),q=c.size;k.onwriteend=function(){k.onwriteend=null;k.truncate(q);a.resetDirty();d()};k.onerror=function(a){d(f.convert(a))};k.write(c)})},function(a){d(f.convert(a))})}else d()},a.prototype.close=function(d){this.sync(d)},a}(l.PreloadFile);p.HTML5FSFile=V;n=function(a){function b(d,f){a.call(this);this.size=null!=d?d:5;this.type=null!=f?f:r.PERSISTENT;
this.size*=1048576}return e(b,a),b.prototype.getName=function(){return"HTML5 FileSystem"},b.isAvailable=function(){return null!=C},b.prototype.isReadOnly=function(){return!1},b.prototype.supportsSymlinks=function(){return!1},b.prototype.supportsProps=function(){return!1},b.prototype.supportsSynch=function(){return!1},b.prototype.convert=function(a,b){switch(void 0===b&&(b=""),a.name){case "QuotaExceededError":return new d(f.ENOSPC,b);case "NotFoundError":return new d(f.ENOENT,b);case "SecurityError":return new d(f.EACCES,
b);case "InvalidModificationError":return new d(f.EPERM,b);case "SyntaxError":case "TypeMismatchError":return new d(f.EINVAL,b);default:return new d(f.EINVAL,b)}},b.prototype.convertErrorEvent=function(a,b){return void 0===b&&(b=""),new d(f.ENOENT,a.message+"; "+b)},b.prototype.allocate=function(d){var a=this;void 0===d&&(d=function(){});var b=function(b){a.fs=b;d()},f=function(b){d(a.convert(b))};this.type===r.PERSISTENT?v(this.type,this.size,function(d){C(a.type,d,b,f)},f):C(this.type,this.size,
b,f)},b.prototype.empty=function(d){var b=this;this._readdir("/",function(a,f){a?(console.error("Failed to empty FS"),d(a)):z.each(f,function(d,a){var f=function(){a()},k=function(f){a(b.convert(f,d.fullPath))};d.isFile?d.remove(f,k):d.removeRecursively(f,k)},function(b){a?(console.error("Failed to empty FS"),d(a)):d()})})},b.prototype.rename=function(d,a,b){var f=this,k=2,c=0,q=this.fs.root,r=function(c){0===--k&&b(f.convert(c,"Failed to rename "+d+" to "+a+"."))},g=function(k){return 2===++c?void console.error("Something was identified as both a file and a directory. This should never happen."):
d===a?b():void q.getDirectory(m.dirname(a),{},function(c){k.moveTo(c,m.basename(a),function(d){b()},function(c){k.isDirectory?f.unlink(a,function(k){k?r(c):f.rename(d,a,b)}):r(c)})},r)};q.getFile(d,{},g,r);q.getDirectory(d,{},g,r)},b.prototype.stat=function(d,a,b){var f=this,c={create:!1},m=function(d){d=new q(k.DIRECTORY,4096);b(null,d)},r=function(a){b(f.convert(a,d))};this.fs.root.getFile(d,c,function(d){d.file(function(d){d=new q(k.FILE,d.size);b(null,d)},r)},function(){f.fs.root.getDirectory(d,
c,m,r)})},b.prototype.open=function(d,a,b,f){var k=this;b={create:a.pathNotExistsAction()===B.CREATE_FILE,exclusive:a.isExclusive()};var c=function(a){f(k.convertErrorEvent(a,d))},m=function(a){f(k.convert(a,d))};this.fs.root.getFile(d,b,function(b){b.file(function(b){var m=new FileReader;m.onloadend=function(c){c=k._makeFile(d,a,b,m.result);f(null,c)};m.onerror=c;m.readAsArrayBuffer(b)},m)},c)},b.prototype._statType=function(d){return d.isFile?k.FILE:k.DIRECTORY},b.prototype._makeFile=function(d,
a,b,f){void 0===f&&(f=new ArrayBuffer(0));b=new q(k.FILE,b.size);f=new A(f);return new V(this,d,a,b,f)},b.prototype._remove=function(d,a,b){var f=this,k=function(b){b.remove(function(){a()},function(b){a(f.convert(b,d))})},c=function(b){a(f.convert(b,d))},m={create:!1};b?this.fs.root.getFile(d,m,k,c):this.fs.root.getDirectory(d,m,k,c)},b.prototype.unlink=function(d,b){this._remove(d,b,!0)},b.prototype.rmdir=function(d,b){this._remove(d,b,!1)},b.prototype.mkdir=function(d,b,a){var f=this;this.fs.root.getDirectory(d,
{create:!0,exclusive:!0},function(d){a()},function(b){a(f.convert(b,d))})},b.prototype._readdir=function(d,b){var a=this;this.fs.root.getDirectory(d,{create:!1},function(f){var k=f.createReader(),c=[],m=function(f){b(a.convert(f,d))},q=function(){k.readEntries(function(d){d.length?(c=c.concat(Array.prototype.slice.call(d||[],0)),q()):b(null,c)},m)};q()})},b.prototype.readdir=function(d,b){this._readdir(d,function(d,a){if(null!=d)return b(d);for(var f=[],k=0;k<a.length;k++)f.push(a[k].name);b(null,
f)})},b}(a.BaseFileSystem);p.HTML5FS=n;u.registerFileSystem("HTML5FS",n)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/global":24,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/preload_file":36,async:1}],8:[function(n,u,p){var v=this.__extends||function(a,e){function h(){this.constructor=a}for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g]);h.prototype=e.prototype;a.prototype=
new h},e=n("../generic/key_value_filesystem");n=n("../core/browserfs");var l=function(){function a(){this.store={}}return a.prototype.name=function(){return"In-memory"},a.prototype.clear=function(){this.store={}},a.prototype.beginTransaction=function(a){return new e.SimpleSyncRWTransaction(this)},a.prototype.get=function(a){return this.store[a]},a.prototype.put=function(a,h,g){return!g&&this.store.hasOwnProperty(a)?!1:(this.store[a]=h,!0)},a.prototype["delete"]=function(a){delete this.store[a]},a}();
p.InMemoryStore=l;u=function(a){function e(){a.call(this,{store:new l})}return v(e,a),e}(e.SyncKeyValueFileSystem);p.InMemoryFileSystem=u;n.registerFileSystem("InMemory",u)},{"../core/browserfs":15,"../generic/key_value_filesystem":35}],9:[function(n,u,p){var v,e=this.__extends||function(a,b){function c(){this.constructor=a}for(var m in b)b.hasOwnProperty(m)&&(a[m]=b[m]);c.prototype=b.prototype;a.prototype=new c},l=n("../core/buffer");u=n("../core/browserfs");var a=n("../generic/key_value_filesystem"),
w=n("../core/api_error"),h=n("../core/global"),g=l.Buffer,c=w.ApiError,b=w.ErrorCode;n=!1;try{h.localStorage.setItem("__test__",String.fromCharCode(55296)),n=h.localStorage.getItem("__test__")===String.fromCharCode(55296)}catch(r){n=!1}v=n?"binary_string":"binary_string_ie";var m=function(){function m(){}return m.prototype.name=function(){return"LocalStorage"},m.prototype.clear=function(){h.localStorage.clear()},m.prototype.beginTransaction=function(b){return new a.SimpleSyncRWTransaction(this)},
m.prototype.get=function(b){try{var a=h.localStorage.getItem(b);if(null!==a)return new g(a,v)}catch(c){}},m.prototype.put=function(a,m,q){try{return q||null===h.localStorage.getItem(a)?(h.localStorage.setItem(a,m.toString(v)),!0):!1}catch(k){throw new c(b.ENOSPC,"LocalStorage is full.");}},m.prototype["delete"]=function(a){try{h.localStorage.removeItem(a)}catch(m){throw new c(b.EIO,"Unable to delete key "+a+": "+m);}},m}();p.LocalStorageStore=m;n=function(a){function b(){a.call(this,{store:new m})}
return e(b,a),b.isAvailable=function(){return"undefined"!=typeof h.localStorage},b}(a.SyncKeyValueFileSystem);p.LocalStorageFileSystem=n;u.registerFileSystem("LocalStorage",n)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/global":24,"../generic/key_value_filesystem":35}],10:[function(n,u,p){function v(b,c,m){return c?function(){for(var a=[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];var d=a[0],f=this._get_fs(d);a[0]=f.path;try{return f.fs[b].apply(f.fs,a)}catch(c){throw this.standardizeError(c,
f.path,d),c;}}:function(){for(var c=[],d=0;d<arguments.length;d++)c[d-0]=arguments[d];var f=c[0],m=this._get_fs(f);if(c[0]=m.path,"function"==typeof c[c.length-1]){var q=c[c.length-1],r=this;c[c.length-1]=function(){for(var d=[],b=0;b<arguments.length;b++)d[b-0]=arguments[b];0<d.length&&d[0]instanceof a.ApiError&&r.standardizeError(d[0],m.path,f);q.apply(null,d)}}return m.fs[b].apply(m.fs,c)}}var e=this.__extends||function(a,b){function c(){this.constructor=a}for(var k in b)b.hasOwnProperty(k)&&(a[k]=
b[k]);c.prototype=b.prototype;a.prototype=new c};u=n("../core/file_system");var l=n("./in_memory"),a=n("../core/api_error"),w=n("../core/node_fs");n=n("../core/browserfs");var h=a.ApiError,g=a.ErrorCode;u=function(a){function b(){a.call(this);this.mntMap={};this.rootFs=new l.InMemoryFileSystem}return e(b,a),b.prototype.mount=function(b,a){if(this.mntMap[b])throw new h(g.EINVAL,"Mount point "+b+" is already taken.");this.rootFs.mkdirSync(b,511);this.mntMap[b]=a},b.prototype.umount=function(b){if(!this.mntMap[b])throw new h(g.EINVAL,
"Mount point "+b+" is already unmounted.");delete this.mntMap[b];this.rootFs.rmdirSync(b)},b.prototype._get_fs=function(b){for(var a in this.mntMap){var d=this.mntMap[a];if(0===b.indexOf(a))return b=b.substr(1<a.length?a.length:0),""===b&&(b="/"),{fs:d,path:b}}return{fs:this.rootFs,path:b}},b.prototype.getName=function(){return"MountableFileSystem"},b.isAvailable=function(){return!0},b.prototype.diskSpace=function(b,a){a(0,0)},b.prototype.isReadOnly=function(){return!1},b.prototype.supportsLinks=
function(){return!1},b.prototype.supportsProps=function(){return!1},b.prototype.supportsSynch=function(){return!0},b.prototype.standardizeError=function(b,a,d){var f;return-1!==(f=b.message.indexOf(a))&&(b.message=b.message.substr(0,f)+d+b.message.substr(f+a.length)),b},b.prototype.rename=function(b,a,d){var f=this._get_fs(b),c=this._get_fs(a);if(f.fs===c.fs){var m=this;return f.fs.rename(f.path,c.path,function(r){r&&m.standardizeError(m.standardizeError(r,f.path,b),c.path,a);d(r)})}return w.readFile(b,
function(f,c){return f?d(f):void w.writeFile(a,c,function(a){return a?d(a):void w.unlink(b,d)})})},b.prototype.renameSync=function(b,a){var d=this._get_fs(b),f=this._get_fs(a);if(d.fs===f.fs)try{return d.fs.renameSync(d.path,f.path)}catch(c){throw this.standardizeError(this.standardizeError(c,d.path,b),f.path,a),c;}d=w.readFileSync(b);return w.writeFileSync(a,d),w.unlinkSync(b)},b}(u.BaseFileSystem);p.MountableFileSystem=u;p=[["readdir","exists","unlink","rmdir","readlink"],["stat","mkdir","realpath",
"truncate"],["open","readFile","chmod","utimes"],["chown"],["writeFile","appendFile"]];for(var c=0;c<p.length;c++)for(var b=p[c],m=0;m<b.length;m++){var r=b[m];u.prototype[r]=v(r,!1,c+1);u.prototype[r+"Sync"]=v(r+"Sync",!0,c+1)}n.registerFileSystem("MountableFileSystem",u)},{"../core/api_error":14,"../core/browserfs":15,"../core/file_system":23,"../core/node_fs":26,"./in_memory":8}],11:[function(n,u,p){var v=this.__extends||function(b,a){function c(){this.constructor=b}for(var k in a)a.hasOwnProperty(k)&&
(b[k]=a[k]);c.prototype=a.prototype;b.prototype=new c},e=n("../core/file_system"),l=n("../core/buffer"),a=n("../core/api_error"),w=n("../core/file_flag"),h=n("../generic/preload_file");p=n("../core/browserfs");var g=n("../core/node_path"),c=a.ApiError,b=l.Buffer,m=a.ErrorCode,r=function(b){function a(c,k,d,f,m){b.call(this,c,k,d,f,m)}return v(a,b),a.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this),this.resetDirty())},a.prototype.closeSync=function(){this.syncSync()},a}(h.PreloadFile);
n=function(a){function h(b,k){if(a.call(this),this._isInitialized=!1,this._deletedFiles={},this._deleteLog=null,this._writable=b,this._readable=k,this._writable.isReadOnly())throw new c(m.EINVAL,"Writable file system must be writable.");if(!this._writable.supportsSynch()||!this._readable.supportsSynch())throw new c(m.EINVAL,"OverlayFS currently only operates on synchronous file systems.");}return v(h,a),h.prototype.getOverlayedFileSystems=function(){return{readable:this._readable,writable:this._writable}},
h.prototype.createParentDirectories=function(b){var a=this;b=g.dirname(b);for(var d=[];!this._writable.existsSync(b);)d.push(b),b=g.dirname(b);d=d.reverse();d.forEach(function(b){a._writable.mkdirSync(b,a.statSync(b,!1).mode)})},h.isAvailable=function(){return!0},h.prototype._syncSync=function(b){this.createParentDirectories(b.getPath());this._writable.writeFileSync(b.getPath(),b.getBuffer(),null,w.FileFlag.getFileFlag("w"),b.getStats().mode)},h.prototype.getName=function(){return"OverlayFS"},h.prototype.initialize=
function(b){var a=this;this._isInitialized?b():this._writable.readFile("/.deletedFiles.log","utf8",w.FileFlag.getFileFlag("r"),function(d,f){if(d){if(d.type!==m.ENOENT)return b(d)}else f.split("\n").forEach(function(b){a._deletedFiles[b.slice(1)]="d"===b.slice(0,1)});a._writable.open("/.deletedFiles.log",w.FileFlag.getFileFlag("a"),420,function(d,f){d?b(d):(a._deleteLog=f,b())})})},h.prototype.isReadOnly=function(){return!1},h.prototype.supportsSynch=function(){return!0},h.prototype.supportsLinks=
function(){return!1},h.prototype.supportsProps=function(){return this._readable.supportsProps()&&this._writable.supportsProps()},h.prototype.deletePath=function(a){this._deletedFiles[a]=!0;a=new b("d"+a+"\n");this._deleteLog.writeSync(a,0,a.length,null);this._deleteLog.syncSync()},h.prototype.undeletePath=function(a){this._deletedFiles[a]&&(this._deletedFiles[a]=!1,a=new b("u"+a),this._deleteLog.writeSync(a,0,a.length,null),this._deleteLog.syncSync())},h.prototype.renameSync=function(b,a){var d=this,
f=this.statSync(b,!1);if(f.isDirectory()){if(b===a)return;f=511;if(this.existsSync(a)){var r=this.statSync(a,!1),f=r.mode;if(!r.isDirectory())throw new c(m.ENOTDIR,"Path "+a+" is a file.");if(0<this.readdirSync(a).length)throw new c(m.ENOTEMPTY,"Path "+a+" not empty.");}this._writable.existsSync(b)?this._writable.renameSync(b,a):this._writable.existsSync(a)||this._writable.mkdirSync(a,f);this._readable.existsSync(b)&&this._readable.readdirSync(b).forEach(function(f){d.renameSync(g.resolve(b,f),g.resolve(a,
f))})}else{if(this.existsSync(a)&&this.statSync(a,!1).isDirectory())throw new c(m.EISDIR,"Path "+a+" is a directory.");this.writeFileSync(a,this.readFileSync(b,null,w.FileFlag.getFileFlag("r")),null,w.FileFlag.getFileFlag("w"),f.mode)}b!==a&&this.existsSync(b)&&this.unlinkSync(b)},h.prototype.statSync=function(b,a){try{return this._writable.statSync(b,a)}catch(f){if(this._deletedFiles[b])throw new c(m.ENOENT,"Path "+b+" does not exist.");var d=this._readable.statSync(b,a).clone();return d.mode|=146,
d}},h.prototype.openSync=function(b,a,d){if(this.existsSync(b))switch(a.pathExistsAction()){case w.ActionType.TRUNCATE_FILE:return this.createParentDirectories(b),this._writable.openSync(b,a,d);case w.ActionType.NOP:if(this._writable.existsSync(b))return this._writable.openSync(b,a,d);var f=this._readable.statSync(b,!1).clone();return f.mode=d,new r(this,b,a,f,this._readable.readFileSync(b,null,w.FileFlag.getFileFlag("r")));default:throw new c(m.EEXIST,"Path "+b+" exists.");}else switch(a.pathNotExistsAction()){case w.ActionType.CREATE_FILE:return this.createParentDirectories(b),
this._writable.openSync(b,a,d);default:throw new c(m.ENOENT,"Path "+b+" does not exist.");}},h.prototype.unlinkSync=function(b){if(!this.existsSync(b))throw new c(m.ENOENT,"Path "+b+" does not exist.");this._writable.existsSync(b)&&this._writable.unlinkSync(b);this.existsSync(b)&&this.deletePath(b)},h.prototype.rmdirSync=function(b){if(!this.existsSync(b))throw new c(m.ENOENT,"Path "+b+" does not exist.");if(this._writable.existsSync(b)&&this._writable.rmdirSync(b),this.existsSync(b)){if(0<this.readdirSync(b).length)throw new c(m.ENOTEMPTY,
"Directory "+b+" is not empty.");this.deletePath(b)}},h.prototype.mkdirSync=function(b,a){if(this.existsSync(b))throw new c(m.EEXIST,"Path "+b+" already exists.");this.createParentDirectories(b);this._writable.mkdirSync(b,a)},h.prototype.readdirSync=function(b){var a=this;if(!this.statSync(b,!1).isDirectory())throw new c(m.ENOTDIR,"Path "+b+" is not a directory.");var d=[];try{d=d.concat(this._writable.readdirSync(b))}catch(r){}try{d=d.concat(this._readable.readdirSync(b))}catch(r){}var f={};return d.filter(function(d){var c=
void 0===f[d]&&!0!==a._deletedFiles[b+"/"+d];return f[d]=!0,c})},h.prototype.existsSync=function(b){return this._writable.existsSync(b)||this._readable.existsSync(b)&&!0!==this._deletedFiles[b]},h.prototype.chmodSync=function(b,a,d){var f=this;this.operateOnWritable(b,function(){f._writable.chmodSync(b,a,d)})},h.prototype.chownSync=function(b,a,d,f){var c=this;this.operateOnWritable(b,function(){c._writable.chownSync(b,a,d,f)})},h.prototype.utimesSync=function(b,a,d){var f=this;this.operateOnWritable(b,
function(){f._writable.utimesSync(b,a,d)})},h.prototype.operateOnWritable=function(b,a){if(!this.existsSync(b))throw new c(m.ENOENT,"Path "+b+" does not exist.");this._writable.existsSync(b)||this.copyToWritable(b);a()},h.prototype.copyToWritable=function(b){var a=this.statSync(b,!1);a.isDirectory()?this._writable.mkdirSync(b,a.mode):this.writeFileSync(b,this._readable.readFileSync(b,null,w.FileFlag.getFileFlag("r")),null,w.FileFlag.getFileFlag("w"),this.statSync(b,!1).mode)},h}(e.SynchronousFileSystem);
p.registerFileSystem("OverlayFS",n);u.exports=n},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/file_flag":22,"../core/file_system":23,"../core/node_path":28,"../generic/preload_file":36}],12:[function(n,u,p){function v(b){return{type:e.ERROR,errorData:b.writeToBuffer().toArrayBuffer()}}var e,l=this.__extends||function(b,a){function f(){this.constructor=b}for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);f.prototype=a.prototype;b.prototype=new f};u=n("../core/file_system");
var a=n("../core/buffer"),w=n("../core/api_error"),h=n("../core/file_flag"),g=n("../core/file"),c=n("../core/node_fs_stats"),b=n("../generic/preload_file"),m=n("../core/browserfs"),r=a.Buffer;!function(b){b[b.CB=0]="CB";b[b.FD=1]="FD";b[b.ERROR=2]="ERROR";b[b.STATS=3]="STATS";b[b.PROBE=4]="PROBE";b[b.FILEFLAG=5]="FILEFLAG";b[b.BUFFER=6]="BUFFER"}(e||(e={}));var z=function(){function b(){this._callbacks={};this._nextId=0}return b.prototype.toRemoteArg=function(b){var a=this._nextId++;return this._callbacks[a]=
b,{type:e.CB,id:a}},b.prototype.toLocalArg=function(b){var a=this._callbacks[b];return delete this._callbacks[b],a},b}(),A=function(){function b(){this._fileDescriptors={};this._nextId=0}return b.prototype.toRemoteArg=function(b,a,c,k){var m,h,g=this._nextId++;this._fileDescriptors[g]=b;b.stat(function(q,l){q?k(q):(h=l.toBuffer().toArrayBuffer(),c.isReadable()?b.read(new r(l.size),0,l.size,0,function(b,d,r){b?k(b):(m=r.toArrayBuffer(),k(null,{type:e.FD,id:g,data:m,stat:h,path:a,flag:c.getFlagString()}))}):
k(null,{type:e.FD,id:g,data:new ArrayBuffer(0),stat:h,path:a,flag:c.getFlagString()}))})},b.prototype._applyFdChanges=function(b,a){var k=this._fileDescriptors[b.id],m=new r(b.data),g=c.Stats.fromBuffer(new r(b.stat)),q=h.FileFlag.getFileFlag(b.flag);q.isWriteable()?k.write(m,0,m.length,q.isAppendable()?k.getPos():0,function(b){function d(){k.stat(function(b,d){b?a(b):d.mode!==g.mode?k.chmod(g.mode,function(b){a(b,k)}):a(b,k)})}b?a(b):q.isAppendable()?d():k.truncate(m.length,function(){d()})}):a(null,
k)},b.prototype.applyFdAPIRequest=function(b,a){var c=this,k=b.args[0];this._applyFdChanges(k,function(m,r){m?a(m):r[b.method](function(m){"close"===b.method&&delete c._fileDescriptors[k.id];a(m)})})},b}(),q=function(b){function a(d,c,m,r,h,g){b.call(this,d,c,m,r,g);this._remoteFdId=h}return l(a,b),a.prototype.getRemoteFdId=function(){return this._remoteFdId},a.prototype.toRemoteArg=function(){return{type:e.FD,id:this._remoteFdId,data:this.getBuffer().toArrayBuffer(),stat:this.getStats().toBuffer().toArrayBuffer(),
path:this.getPath(),flag:this.getFlag().getFlagString()}},a.prototype._syncClose=function(b,a){var d=this;this.isDirty()?this._fs.syncClose(b,this,function(b){b||d.resetDirty();a(b)}):a()},a.prototype.sync=function(b){this._syncClose("sync",b)},a.prototype.close=function(b){this._syncClose("close",b)},a}(b.PreloadFile);n=function(b){function a(d){var c=this;b.call(this);this._callbackConverter=new z;this._supportProps=this._supportLinks=this._isReadOnly=this._isInitialized=!1;this._outstandingRequests=
{};this._worker=d;this._worker.addEventListener("message",function(b){if(null!=b.data&&"object"==typeof b.data&&b.data.hasOwnProperty("browserfsMessage")&&b.data.browserfsMessage){var a=b.data,d=a.args,f=Array(d.length);for(b=0;b<f.length;b++)f[b]=c._argRemote2Local(d[b]);c._callbackConverter.toLocalArg(a.cbId).apply(null,f)}})}return l(a,b),a.isAvailable=function(){return"undefined"!=typeof Worker},a.prototype.getName=function(){return"WorkerFS"},a.prototype._argRemote2Local=function(b){if(null==
b)return b;switch(typeof b){case "object":if(null==b.type||"number"!=typeof b.type)return b;switch(b.type){case e.ERROR:return w.ApiError.fromBuffer(new r(b.errorData));case e.FD:return new q(this,b.path,h.FileFlag.getFileFlag(b.flag),c.Stats.fromBuffer(new r(b.stat)),b.id,new r(b.data));case e.STATS:return c.Stats.fromBuffer(new r(b.statsData));case e.FILEFLAG:return h.FileFlag.getFileFlag(b.flagStr);case e.BUFFER:return new r(b.data);default:return b}default:return b}},a.prototype._argLocal2Remote=
function(b){if(null==b)return b;switch(typeof b){case "object":return b instanceof c.Stats?{type:e.STATS,statsData:b.toBuffer().toArrayBuffer()}:b instanceof w.ApiError?v(b):b instanceof q?b.toRemoteArg():b instanceof h.FileFlag?{type:e.FILEFLAG,flagStr:b.getFlagString()}:b instanceof r?{type:e.BUFFER,data:b.toArrayBuffer()}:b;case "function":return this._callbackConverter.toRemoteArg(b);default:return b}},a.prototype.initialize=function(b){var a=this;if(this._isInitialized)b();else{var d={browserfsMessage:!0,
method:"probe",args:[this._callbackConverter.toRemoteArg(function(d){a._isInitialized=!0;a._isReadOnly=d.isReadOnly;a._supportLinks=d.supportsLinks;a._supportProps=d.supportsProps;b()})]};this._worker.postMessage(d)}},a.prototype.isReadOnly=function(){return this._isReadOnly},a.prototype.supportsSynch=function(){return!1},a.prototype.supportsLinks=function(){return this._supportLinks},a.prototype.supportsProps=function(){return this._supportProps},a.prototype._rpc=function(b,a){var d,c={browserfsMessage:!0,
method:b,args:null},k=Array(a.length);for(d=0;d<a.length;d++)k[d]=this._argLocal2Remote(a[d]);c.args=k;this._worker.postMessage(c)},a.prototype.rename=function(b,a,d){this._rpc("rename",arguments)},a.prototype.stat=function(b,a,d){this._rpc("stat",arguments)},a.prototype.open=function(b,a,d,c){this._rpc("open",arguments)},a.prototype.unlink=function(b,a){this._rpc("unlink",arguments)},a.prototype.rmdir=function(b,a){this._rpc("rmdir",arguments)},a.prototype.mkdir=function(b,a,d){this._rpc("mkdir",
arguments)},a.prototype.readdir=function(b,a){this._rpc("readdir",arguments)},a.prototype.exists=function(b,a){this._rpc("exists",arguments)},a.prototype.realpath=function(b,a,d){this._rpc("realpath",arguments)},a.prototype.truncate=function(b,a,d){this._rpc("truncate",arguments)},a.prototype.readFile=function(b,a,d,c){this._rpc("readFile",arguments)},a.prototype.writeFile=function(b,a,d,c,k,m){this._rpc("writeFile",arguments)},a.prototype.appendFile=function(b,a,d,c,k,m){this._rpc("appendFile",arguments)},
a.prototype.chmod=function(b,a,d,c){this._rpc("chmod",arguments)},a.prototype.chown=function(b,a,d,c,k){this._rpc("chown",arguments)},a.prototype.utimes=function(b,a,d,c){this._rpc("utimes",arguments)},a.prototype.link=function(b,a,d){this._rpc("link",arguments)},a.prototype.symlink=function(b,a,d,c){this._rpc("symlink",arguments)},a.prototype.readlink=function(b,a){this._rpc("readlink",arguments)},a.prototype.syncClose=function(b,a,d){this._worker.postMessage({browserfsMessage:!0,method:b,args:[a.toRemoteArg(),
this._callbackConverter.toRemoteArg(d)]})},a.attachRemoteListener=function(b){function a(b,d,f){switch(typeof b){case "object":b instanceof c.Stats?f(null,{type:e.STATS,statsData:b.toBuffer().toArrayBuffer()}):b instanceof w.ApiError?f(null,v(b)):b instanceof g.BaseFile?f(null,k.toRemoteArg(b,d[0],d[1],f)):b instanceof h.FileFlag?f(null,{type:e.FILEFLAG,flagStr:b.getFlagString()}):b instanceof r?f(null,{type:e.BUFFER,data:b.toArrayBuffer()}):f(null,b);break;default:f(null,b)}}function d(k,m){if(null==
k)return k;switch(typeof k){case "object":if("number"!=typeof k.type)return k;switch(k.type){case e.CB:var g=k.id;return function(){var d,c,k=Array(arguments.length),r=arguments.length;for(d=0;d<arguments.length;d++)!function(d,h){a(h,m,function(a,m){k[d]=m;a?0<r&&(r=-1,c={browserfsMessage:!0,cbId:g,args:[v(a)]},b.postMessage(c)):0===--r&&(c={browserfsMessage:!0,cbId:g,args:k},b.postMessage(c))})}(d,arguments[d]);0===arguments.length&&(c={browserfsMessage:!0,cbId:g,args:k},b.postMessage(c))};case e.ERROR:return w.ApiError.fromBuffer(new r(k.errorData));
case e.STATS:return c.Stats.fromBuffer(new r(k.statsData));case e.FILEFLAG:return h.FileFlag.getFileFlag(k.flagStr);case e.BUFFER:return new r(k.data);default:return k}default:return k}}var k=new A,q=m.BFSRequire("fs");b.addEventListener("message",function(a){if(null!=a.data&&"object"==typeof a.data&&a.data.hasOwnProperty("browserfsMessage")&&a.data.browserfsMessage){var c,m=a.data,r=m.args;a=Array(r.length);switch(m.method){case "close":case "sync":!function(){var a=r[1];k.applyFdAPIRequest(m,function(d){d=
{browserfsMessage:!0,cbId:a.id,args:d?[v(d)]:[]};b.postMessage(d)})}();break;case "probe":!function(){var a=q.getRootFS(),a={browserfsMessage:!0,cbId:r[0].id,args:[{type:e.PROBE,isReadOnly:a.isReadOnly(),supportsLinks:a.supportsLinks(),supportsProps:a.supportsProps()}]};b.postMessage(a)}();break;default:for(c=0;c<r.length;c++)a[c]=d(r[c],a);c=q.getRootFS();c[m.method].apply(c,a)}}})},a}(u.BaseFileSystem);p.WorkerFS=n;m.registerFileSystem("WorkerFS",n)},{"../core/api_error":14,"../core/browserfs":15,
"../core/buffer":16,"../core/file":21,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/preload_file":36}],13:[function(n,u,p){function v(b,a){return new Date((a>>9)+1980,(a>>5&15)-1,31&a,b>>11,b>>5&63,31&b)}function e(b,a,d,c){return 0===c?"":b.toString(a?"utf8":"extended_ascii",d,d+c)}var l=this.__extends||function(b,a){function d(){this.constructor=b}for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);d.prototype=a.prototype;b.prototype=new d},a=n("../core/buffer"),
w=n("../core/api_error"),h=n("../generic/file_index");u=n("../core/browserfs");var g=n("../core/node_fs_stats"),c=n("../core/file_system"),b=n("../core/file_flag"),m=n("../core/buffer_core_arraybuffer"),r=n("../generic/preload_file"),z=n("zlib-inflate").inflateRaw,A=w.ApiError,q=w.ErrorCode,k=b.ActionType;!function(b){b[b.MSDOS=0]="MSDOS";b[b.AMIGA=1]="AMIGA";b[b.OPENVMS=2]="OPENVMS";b[b.UNIX=3]="UNIX";b[b.VM_CMS=4]="VM_CMS";b[b.ATARI_ST=5]="ATARI_ST";b[b.OS2_HPFS=6]="OS2_HPFS";b[b.MAC=7]="MAC";b[b.Z_SYSTEM=
8]="Z_SYSTEM";b[b.CP_M=9]="CP_M";b[b.NTFS=10]="NTFS";b[b.MVS=11]="MVS";b[b.VSE=12]="VSE";b[b.ACORN_RISC=13]="ACORN_RISC";b[b.VFAT=14]="VFAT";b[b.ALT_MVS=15]="ALT_MVS";b[b.BEOS=16]="BEOS";b[b.TANDEM=17]="TANDEM";b[b.OS_400=18]="OS_400";b[b.OSX=19]="OSX"}(p.ExternalFileAttributeType||(p.ExternalFileAttributeType={}));p.ExternalFileAttributeType;!function(b){b[b.STORED=0]="STORED";b[b.SHRUNK=1]="SHRUNK";b[b.REDUCED_1=2]="REDUCED_1";b[b.REDUCED_2=3]="REDUCED_2";b[b.REDUCED_3=4]="REDUCED_3";b[b.REDUCED_4=
5]="REDUCED_4";b[b.IMPLODE=6]="IMPLODE";b[b.DEFLATE=8]="DEFLATE";b[b.DEFLATE64=9]="DEFLATE64";b[b.TERSE_OLD=10]="TERSE_OLD";b[b.BZIP2=12]="BZIP2";b[b.LZMA=14]="LZMA";b[b.TERSE_NEW=18]="TERSE_NEW";b[b.LZ77=19]="LZ77";b[b.WAVPACK=97]="WAVPACK";b[b.PPMD=98]="PPMD"}(p.CompressionMethod||(p.CompressionMethod={}));var d=p.CompressionMethod,f=function(){function b(a){if(this.data=a,67324752!==a.readUInt32LE(0))throw new A(q.EINVAL,"Invalid Zip file: Local file header has invalid signature: "+this.data.readUInt32LE(0));
}return b.prototype.versionNeeded=function(){return this.data.readUInt16LE(4)},b.prototype.flags=function(){return this.data.readUInt16LE(6)},b.prototype.compressionMethod=function(){return this.data.readUInt16LE(8)},b.prototype.lastModFileTime=function(){return v(this.data.readUInt16LE(10),this.data.readUInt16LE(12))},b.prototype.crc32=function(){return this.data.readUInt32LE(14)},b.prototype.fileNameLength=function(){return this.data.readUInt16LE(26)},b.prototype.extraFieldLength=function(){return this.data.readUInt16LE(28)},
b.prototype.fileName=function(){return e(this.data,this.useUTF8(),30,this.fileNameLength())},b.prototype.extraField=function(){var b=30+this.fileNameLength();return this.data.slice(b,b+this.extraFieldLength())},b.prototype.totalSize=function(){return 30+this.fileNameLength()+this.extraFieldLength()},b.prototype.useUTF8=function(){return 2048===(2048&this.flags())},b}();p.FileHeader=f;var B=function(){function b(a,d,c){this.header=a;this.record=d;this.data=c}return b.prototype.decompress=function(){var b=
this.data,c=this.header.compressionMethod();switch(c){case d.DEFLATE:if(b.getBufferCore()instanceof m.BufferCoreArrayBuffer)return c=b.getBufferCore().getDataView(),b=c.byteOffset+b.getOffset(),b=(new Uint8Array(c.buffer)).subarray(b,b+this.record.compressedSize()),b=z(b,{chunkSize:this.record.uncompressedSize()}),new a.Buffer(new m.BufferCoreArrayBuffer(b.buffer),b.byteOffset,b.byteOffset+b.length);b=b.slice(0,this.record.compressedSize());return new a.Buffer(z(b.toJSON().data,{chunkSize:this.record.uncompressedSize()}));
case d.STORED:return b.sliceCopy(0,this.record.uncompressedSize());default:throw b=d[c],b=b?b:"Unknown: "+c,new A(q.EINVAL,"Invalid compression method on file '"+this.header.fileName()+"': "+b);}},b}();p.FileData=B;n=function(){function b(a){this.data=a}return b.prototype.crc32=function(){return this.data.readUInt32LE(0)},b.prototype.compressedSize=function(){return this.data.readUInt32LE(4)},b.prototype.uncompressedSize=function(){return this.data.readUInt32LE(8)},b}();p.DataDescriptor=n;n=function(){function b(a){if(this.data=
a,134630224!==this.data.readUInt32LE(0))throw new A(q.EINVAL,"Invalid archive extra data record signature: "+this.data.readUInt32LE(0));}return b.prototype.length=function(){return this.data.readUInt32LE(4)},b.prototype.extraFieldData=function(){return this.data.slice(8,8+this.length())},b}();p.ArchiveExtraDataRecord=n;n=function(){function b(a){if(this.data=a,84233040!==this.data.readUInt32LE(0))throw new A(q.EINVAL,"Invalid digital signature signature: "+this.data.readUInt32LE(0));}return b.prototype.size=
function(){return this.data.readUInt16LE(4)},b.prototype.signatureData=function(){return this.data.slice(6,6+this.size())},b}();p.DigitalSignature=n;var C=function(){function b(a,d){if(this.zipData=a,this.data=d,33639248!==this.data.readUInt32LE(0))throw new A(q.EINVAL,"Invalid Zip file: Central directory record has invalid signature: "+this.data.readUInt32LE(0));}return b.prototype.versionMadeBy=function(){return this.data.readUInt16LE(4)},b.prototype.versionNeeded=function(){return this.data.readUInt16LE(6)},
b.prototype.flag=function(){return this.data.readUInt16LE(8)},b.prototype.compressionMethod=function(){return this.data.readUInt16LE(10)},b.prototype.lastModFileTime=function(){return v(this.data.readUInt16LE(12),this.data.readUInt16LE(14))},b.prototype.crc32=function(){return this.data.readUInt32LE(16)},b.prototype.compressedSize=function(){return this.data.readUInt32LE(20)},b.prototype.uncompressedSize=function(){return this.data.readUInt32LE(24)},b.prototype.fileNameLength=function(){return this.data.readUInt16LE(28)},
b.prototype.extraFieldLength=function(){return this.data.readUInt16LE(30)},b.prototype.fileCommentLength=function(){return this.data.readUInt16LE(32)},b.prototype.diskNumberStart=function(){return this.data.readUInt16LE(34)},b.prototype.internalAttributes=function(){return this.data.readUInt16LE(36)},b.prototype.externalAttributes=function(){return this.data.readUInt32LE(38)},b.prototype.headerRelativeOffset=function(){return this.data.readUInt32LE(42)},b.prototype.fileName=function(){return e(this.data,
this.useUTF8(),46,this.fileNameLength()).replace(/\\/g,"/")},b.prototype.extraField=function(){var b=44+this.fileNameLength();return this.data.slice(b,b+this.extraFieldLength())},b.prototype.fileComment=function(){var b=46+this.fileNameLength()+this.extraFieldLength();return e(this.data,this.useUTF8(),b,this.fileCommentLength())},b.prototype.totalSize=function(){return 46+this.fileNameLength()+this.extraFieldLength()+this.fileCommentLength()},b.prototype.isDirectory=function(){var b=this.fileName();
return(16&this.externalAttributes()?!0:!1)||"/"===b.charAt(b.length-1)},b.prototype.isFile=function(){return!this.isDirectory()},b.prototype.useUTF8=function(){return 2048===(2048&this.flag())},b.prototype.isEncrypted=function(){return 1===(1&this.flag())},b.prototype.getData=function(){var b=this.headerRelativeOffset(),a=new f(this.zipData.slice(b));return(new B(a,this,this.zipData.slice(b+a.totalSize()))).decompress()},b.prototype.getStats=function(){return new g.Stats(g.FileType.FILE,this.uncompressedSize(),
365,new Date,this.lastModFileTime())},b}();p.CentralDirectory=C;var V=function(){function b(a){if(this.data=a,101010256!==this.data.readUInt32LE(0))throw new A(q.EINVAL,"Invalid Zip file: End of central directory record has invalid signature: "+this.data.readUInt32LE(0));}return b.prototype.diskNumber=function(){return this.data.readUInt16LE(4)},b.prototype.cdDiskNumber=function(){return this.data.readUInt16LE(6)},b.prototype.cdDiskEntryCount=function(){return this.data.readUInt16LE(8)},b.prototype.cdTotalEntryCount=
function(){return this.data.readUInt16LE(10)},b.prototype.cdSize=function(){return this.data.readUInt32LE(12)},b.prototype.cdOffset=function(){return this.data.readUInt32LE(16)},b.prototype.cdZipComment=function(){return e(this.data,!0,22,this.data.readUInt16LE(20))},b}();p.EndOfCentralDirectory=V;c=function(b){function d(a,c){void 0===c&&(c="");b.call(this);this.data=a;this.name=c;this._index=new h.FileIndex;this.populateIndex()}return l(d,b),d.prototype.getName=function(){return"ZipFS"+(""!==this.name?
" "+this.name:"")},d.isAvailable=function(){return!0},d.prototype.diskSpace=function(b,a){a(this.data.length,0)},d.prototype.isReadOnly=function(){return!0},d.prototype.supportsLinks=function(){return!1},d.prototype.supportsProps=function(){return!1},d.prototype.supportsSynch=function(){return!0},d.prototype.statSync=function(b,a){var d=this._index.getInode(b);if(null===d)throw new A(q.ENOENT,""+b+" not found.");return d.isFile()?d.getData().getStats():d.getStats()},d.prototype.openSync=function(b,
a,d){if(a.isWriteable())throw new A(q.EPERM,b);d=this._index.getInode(b);if(null===d)throw new A(q.ENOENT,""+b+" is not in the FileIndex.");if(d.isDir())throw new A(q.EISDIR,""+b+" is a directory.");d=d.getData();var c=d.getStats();switch(a.pathExistsAction()){case k.THROW_EXCEPTION:case k.TRUNCATE_FILE:throw new A(q.EEXIST,""+b+" already exists.");case k.NOP:return new r.NoSyncFile(this,b,a,c,d.getData());default:throw new A(q.EINVAL,"Invalid FileMode object.");}},d.prototype.readdirSync=function(b){var a=
this._index.getInode(b);if(null===a)throw new A(q.ENOENT,""+b+" not found.");if(a.isFile())throw new A(q.ENOTDIR,""+b+" is a file, not a directory.");return a.getListing()},d.prototype.readFileSync=function(b,d,c){b=this.openSync(b,c,420);try{var f=b.getBuffer();return null===d?0<f.length?f.sliceCopy():new a.Buffer(0):f.toString(d)}finally{b.closeSync()}},d.prototype.getEOCD=function(){for(var b=Math.min(65557,this.data.length-1),a=22;b>a;a++)if(101010256===this.data.readUInt32LE(this.data.length-
a))return new V(this.data.slice(this.data.length-a));throw new A(q.EINVAL,"Invalid ZIP file: Could not locate End of Central Directory signature.");},d.prototype.populateIndex=function(){var b=this.getEOCD();if(b.diskNumber()!==b.cdDiskNumber())throw new A(q.EINVAL,"ZipFS does not support spanned zip files.");var a=b.cdOffset();if(4294967295===a)throw new A(q.EINVAL,"ZipFS does not support Zip64.");for(b=a+b.cdSize();b>a;){var d=new C(this.data,this.data.slice(a)),a=a+d.totalSize(),c=d.fileName();
if("/"===c.charAt(0))throw Error("WHY IS THIS ABSOLUTE");"/"===c.charAt(c.length-1)&&(c=c.substr(0,c.length-1));d.isDirectory()?this._index.addPath("/"+c,new h.DirInode):this._index.addPath("/"+c,new h.FileInode(d))}},d}(c.SynchronousFileSystem);p.ZipFS=c;u.registerFileSystem("ZipFS",c)},{"../core/api_error":14,"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/file_flag":22,"../core/file_system":23,"../core/node_fs_stats":27,"../generic/file_index":33,"../generic/preload_file":36,
"zlib-inflate":2}],14:[function(n,u,p){var v=n("./buffer").Buffer;!function(a){a[a.EPERM=0]="EPERM";a[a.ENOENT=1]="ENOENT";a[a.EIO=2]="EIO";a[a.EBADF=3]="EBADF";a[a.EACCES=4]="EACCES";a[a.EBUSY=5]="EBUSY";a[a.EEXIST=6]="EEXIST";a[a.ENOTDIR=7]="ENOTDIR";a[a.EISDIR=8]="EISDIR";a[a.EINVAL=9]="EINVAL";a[a.EFBIG=10]="EFBIG";a[a.ENOSPC=11]="ENOSPC";a[a.EROFS=12]="EROFS";a[a.ENOTEMPTY=13]="ENOTEMPTY";a[a.ENOTSUP=14]="ENOTSUP"}(p.ErrorCode||(p.ErrorCode={}));var e=p.ErrorCode,l={};l[e.EPERM]="Operation not permitted.";
l[e.ENOENT]="No such file or directory.";l[e.EIO]="Input/output error.";l[e.EBADF]="Bad file descriptor.";l[e.EACCES]="Permission denied.";l[e.EBUSY]="Resource busy or locked.";l[e.EEXIST]="File exists.";l[e.ENOTDIR]="File is not a directory.";l[e.EISDIR]="File is a directory.";l[e.EINVAL]="Invalid argument.";l[e.EFBIG]="File is too big.";l[e.ENOSPC]="No space left on disk.";l[e.EROFS]="Cannot modify a read-only file system.";l[e.ENOTEMPTY]="Directory is not empty.";l[e.ENOTSUP]="Operation is not supported.";
n=function(){function a(a,h){this.type=a;this.code=e[a];null!=h?this.message=h:this.message=l[a]}return a.prototype.toString=function(){return this.code+": "+l[this.type]+" "+this.message},a.prototype.writeToBuffer=function(a,h){void 0===a&&(a=new v(this.bufferSize()));void 0===h&&(h=0);a.writeUInt8(this.type,h);var g=a.write(this.message,h+5);return a.writeUInt32LE(g,h+1),a},a.fromBuffer=function(e,h){return void 0===h&&(h=0),new a(e.readUInt8(h),e.toString("utf8",h+5,h+5+e.readUInt32LE(h+1)))},
a.prototype.bufferSize=function(){return 5+v.byteLength(this.message)},a.FileError=function(e,h){return new a(e,h+": "+l[e])},a.ENOENT=function(a){return this.FileError(e.ENOENT,a)},a.EEXIST=function(a){return this.FileError(e.EEXIST,a)},a.EISDIR=function(a){return this.FileError(e.EISDIR,a)},a.ENOTDIR=function(a){return this.FileError(e.ENOTDIR,a)},a.EPERM=function(a){return this.FileError(e.EPERM,a)},a}();p.ApiError=n},{"./buffer":16}],15:[function(n,u,p){function v(h){switch(h){case "fs":return l;
case "path":return a;case "buffer":return e;case "process":return w.process;default:return p.FileSystem[h]}}var e=n("./buffer"),l=n("./node_fs"),a=n("./node_path"),w=n("./node_process");p.install=function(a){a.Buffer=e.Buffer;a.process=w.process;var g=null!=a.require?a.require:null;a.require=function(a){var b=v(a);return null==b?g.apply(null,Array.prototype.slice.call(arguments,0)):b}};p.FileSystem={};p.registerFileSystem=function(a,g){p.FileSystem[a]=g};p.BFSRequire=v;p.initialize=function(a){return l._initialize(a)}},
{"./buffer":16,"./node_fs":26,"./node_path":28,"./node_process":29}],16:[function(n,u,p){var v=n("./buffer_core");u=n("./buffer_core_array");var e=n("./buffer_core_arraybuffer"),l=n("./buffer_core_imagedata"),a=n("./string_util"),w=[e.BufferCoreArrayBuffer,l.BufferCoreImageData,u.BufferCoreArray],h=function(){var a,c;for(a=0;a<w.length;a++)if(c=w[a],c.isAvailable())return c;throw Error("This browser does not support any available BufferCore implementations.");}();n=function(){function g(a,b,m){void 0===
b&&(b="utf8");this.offset=0;if(!(this instanceof g))return new g(a,b);if(a instanceof v.BufferCoreCommon)this.data=a,a="number"==typeof b?b:0,m="number"==typeof m?m:this.data.getLength(),this.offset=a,this.length=m-a;else if("number"==typeof a){if(a!==a>>>0)throw new TypeError("Buffer size must be a uint32.");this.length=a;this.data=new h(a)}else if("undefined"!=typeof DataView&&a instanceof DataView)this.data=new e.BufferCoreArrayBuffer(a),this.length=a.byteLength;else if("undefined"!=typeof ArrayBuffer&&
"number"==typeof a.byteLength)this.data=new e.BufferCoreArrayBuffer(a),this.length=a.byteLength;else if(a instanceof g)this.data=new h(a.length),this.length=a.length,a.copy(this);else if(Array.isArray(a)||null!=a&&"object"==typeof a&&"number"==typeof a[0]){this.data=new h(a.length);for(m=0;m<a.length;m++)this.data.writeUInt8(m,a[m]);this.length=a.length}else{if("string"!=typeof a)throw Error("Invalid argument to Buffer constructor: "+a);this.length=g.byteLength(a,b);this.data=new h(this.length);this.write(a,
0,this.length,b)}}return g.prototype.getBufferCore=function(){return this.data},g.prototype.getOffset=function(){return this.offset},g.prototype.set=function(a,b){return 0>b?this.writeInt8(b,a):this.writeUInt8(b,a)},g.prototype.get=function(a){return this.readUInt8(a)},g.prototype.write=function(c,b,m,r){if(void 0===b&&(b=0),void 0===m&&(m=this.length),void 0===r&&(r="utf8"),"string"==typeof b?(r=""+b,b=0,m=this.length):"string"==typeof m&&(r=""+m,m=this.length),b>=this.length)return 0;r=a.FindUtil(r);
return m=m+b>this.length?this.length-b:m,b+=this.offset,r.str2byte(c,0===b&&m===this.length?this:new g(this.data,b,m+b))},g.prototype.toString=function(c,b,m){if(void 0===c&&(c="utf8"),void 0===b&&(b=0),void 0===m&&(m=this.length),!(m>=b))throw Error("Invalid start/end positions: "+b+" - "+m);if(b===m)return"";m>this.length&&(m=this.length);return a.FindUtil(c).byte2str(0===b&&m===this.length?this:new g(this.data,b+this.offset,m+this.offset))},g.prototype.toJSON=function(){for(var a=this.length,b=
Array(a),m=0;a>m;m++)b[m]=this.readUInt8(m);return{type:"Buffer",data:b}},g.prototype.toArrayBuffer=function(){var a=this.getBufferCore();if(a instanceof e.BufferCoreArrayBuffer){var b=a.getDataView(),a=b.buffer;return 0===b.byteOffset&&b.byteLength===a.byteLength?a:a.slice(b.byteOffset,b.byteLength)}a=new ArrayBuffer(this.length);b=new g(a);return this.copy(b,0,0,this.length),a},g.prototype.copy=function(a,b,m,r){if(void 0===b&&(b=0),void 0===m&&(m=0),void 0===r&&(r=this.length),b=0>b?0:b,m=0>m?
0:m,m>r)throw new RangeError("sourceEnd < sourceStart");if(r===m)return 0;if(b>=a.length)throw new RangeError("targetStart out of bounds");if(m>=this.length)throw new RangeError("sourceStart out of bounds");if(r>this.length)throw new RangeError("sourceEnd out of bounds");var g=Math.min(r-m,a.length-b,this.length-m);for(r=0;g-3>r;r+=4)a.writeInt32LE(this.readInt32LE(m+r),b+r);for(r=4294967292&g;g>r;r++)a.writeUInt8(this.readUInt8(m+r),b+r);return g},g.prototype.slice=function(a,b){if(void 0===a&&(a=
0),void 0===b&&(b=this.length),0>a&&(a+=this.length,0>a&&(a=0)),0>b&&(b+=this.length,0>b&&(b=0)),b>this.length&&(b=this.length),a>b&&(a=b),0>a||0>b||a>=this.length||b>this.length)throw Error("Invalid slice indices.");return new g(this.data,a+this.offset,b+this.offset)},g.prototype.sliceCopy=function(a,b){if(void 0===a&&(a=0),void 0===b&&(b=this.length),0>a&&(a+=this.length,0>a&&(a=0)),0>b&&(b+=this.length,0>b&&(b=0)),b>this.length&&(b=this.length),a>b&&(a=b),0>a||0>b||a>=this.length||b>this.length)throw Error("Invalid slice indices.");
return new g(this.data.copy(a+this.offset,b+this.offset))},g.prototype.fill=function(a,b,m){void 0===b&&(b=0);void 0===m&&(m=this.length);switch(typeof a){case "string":a=255&a.charCodeAt(0);break;case "number":break;default:throw Error("Invalid argument to fill.");}b+=this.offset;m+=this.offset;this.data.fill(a,b,m)},g.prototype.readUInt8=function(a,b){return a+=this.offset,this.data.readUInt8(a)},g.prototype.readUInt16LE=function(a,b){return a+=this.offset,this.data.readUInt16LE(a)},g.prototype.readUInt16BE=
function(a,b){return a+=this.offset,this.data.readUInt16BE(a)},g.prototype.readUInt32LE=function(a,b){return a+=this.offset,this.data.readUInt32LE(a)},g.prototype.readUInt32BE=function(a,b){return a+=this.offset,this.data.readUInt32BE(a)},g.prototype.readInt8=function(a,b){return a+=this.offset,this.data.readInt8(a)},g.prototype.readInt16LE=function(a,b){return a+=this.offset,this.data.readInt16LE(a)},g.prototype.readInt16BE=function(a,b){return a+=this.offset,this.data.readInt16BE(a)},g.prototype.readInt32LE=
function(a,b){return a+=this.offset,this.data.readInt32LE(a)},g.prototype.readInt32BE=function(a,b){return a+=this.offset,this.data.readInt32BE(a)},g.prototype.readFloatLE=function(a,b){return a+=this.offset,this.data.readFloatLE(a)},g.prototype.readFloatBE=function(a,b){return a+=this.offset,this.data.readFloatBE(a)},g.prototype.readDoubleLE=function(a,b){return a+=this.offset,this.data.readDoubleLE(a)},g.prototype.readDoubleBE=function(a,b){return a+=this.offset,this.data.readDoubleBE(a)},g.prototype.writeUInt8=
function(a,b,m){b+=this.offset;this.data.writeUInt8(b,a)},g.prototype.writeUInt16LE=function(a,b,m){b+=this.offset;this.data.writeUInt16LE(b,a)},g.prototype.writeUInt16BE=function(a,b,m){b+=this.offset;this.data.writeUInt16BE(b,a)},g.prototype.writeUInt32LE=function(a,b,m){b+=this.offset;this.data.writeUInt32LE(b,a)},g.prototype.writeUInt32BE=function(a,b,m){b+=this.offset;this.data.writeUInt32BE(b,a)},g.prototype.writeInt8=function(a,b,m){b+=this.offset;this.data.writeInt8(b,a)},g.prototype.writeInt16LE=
function(a,b,m){b+=this.offset;this.data.writeInt16LE(b,a)},g.prototype.writeInt16BE=function(a,b,m){b+=this.offset;this.data.writeInt16BE(b,a)},g.prototype.writeInt32LE=function(a,b,m){b+=this.offset;this.data.writeInt32LE(b,a)},g.prototype.writeInt32BE=function(a,b,m){b+=this.offset;this.data.writeInt32BE(b,a)},g.prototype.writeFloatLE=function(a,b,m){b+=this.offset;this.data.writeFloatLE(b,a)},g.prototype.writeFloatBE=function(a,b,m){b+=this.offset;this.data.writeFloatBE(b,a)},g.prototype.writeDoubleLE=
function(a,b,m){b+=this.offset;this.data.writeDoubleLE(b,a)},g.prototype.writeDoubleBE=function(a,b,m){b+=this.offset;this.data.writeDoubleBE(b,a)},g.isEncoding=function(c){try{a.FindUtil(c)}catch(b){return!1}return!0},g.isBuffer=function(a){return a instanceof g},g.byteLength=function(c,b){void 0===b&&(b="utf8");return a.FindUtil(b).byteLength(c)},g.concat=function(a,b){var m;if(0===a.length||0===b)return new g(0);if(1===a.length)return a[0];if(null==b)for(var r=b=0;r<a.length;r++)m=a[r],b+=m.length;
for(var r=new g(b),h=0,e=0;e<a.length;e++)m=a[e],h+=m.copy(r,h);return r},g}();p.Buffer=n},{"./buffer_core":17,"./buffer_core_array":18,"./buffer_core_arraybuffer":19,"./buffer_core_imagedata":20,"./string_util":30}],17:[function(n,u,p){var v=Math.pow(2,128),e=-1*v;n=function(){function l(){}return l.prototype.getLength=function(){throw Error("BufferCore implementations should implement getLength.");},l.prototype.writeInt8=function(a,e){this.writeUInt8(a,255&e|(2147483648&e)>>>24)},l.prototype.writeInt16LE=
function(a,e){this.writeUInt8(a,255&e);this.writeUInt8(a+1,e>>>8&255|(2147483648&e)>>>24)},l.prototype.writeInt16BE=function(a,e){this.writeUInt8(a+1,255&e);this.writeUInt8(a,e>>>8&255|(2147483648&e)>>>24)},l.prototype.writeInt32LE=function(a,e){this.writeUInt8(a,255&e);this.writeUInt8(a+1,e>>>8&255);this.writeUInt8(a+2,e>>>16&255);this.writeUInt8(a+3,e>>>24&255)},l.prototype.writeInt32BE=function(a,e){this.writeUInt8(a+3,255&e);this.writeUInt8(a+2,e>>>8&255);this.writeUInt8(a+1,e>>>16&255);this.writeUInt8(a,
e>>>24&255)},l.prototype.writeUInt8=function(a,e){throw Error("BufferCore implementations should implement writeUInt8.");},l.prototype.writeUInt16LE=function(a,e){this.writeUInt8(a,255&e);this.writeUInt8(a+1,e>>8&255)},l.prototype.writeUInt16BE=function(a,e){this.writeUInt8(a+1,255&e);this.writeUInt8(a,e>>8&255)},l.prototype.writeUInt32LE=function(a,e){this.writeInt32LE(a,0|e)},l.prototype.writeUInt32BE=function(a,e){this.writeInt32BE(a,0|e)},l.prototype.writeFloatLE=function(a,e){this.writeInt32LE(a,
this.float2intbits(e))},l.prototype.writeFloatBE=function(a,e){this.writeInt32BE(a,this.float2intbits(e))},l.prototype.writeDoubleLE=function(a,e){var h=this.double2longbits(e);this.writeInt32LE(a,h[0]);this.writeInt32LE(a+4,h[1])},l.prototype.writeDoubleBE=function(a,e){var h=this.double2longbits(e);this.writeInt32BE(a+4,h[0]);this.writeInt32BE(a,h[1])},l.prototype.readInt8=function(a){a=this.readUInt8(a);return 128&a?4294967168|a:a},l.prototype.readInt16LE=function(a){a=this.readUInt16LE(a);return 32768&
a?4294934528|a:a},l.prototype.readInt16BE=function(a){a=this.readUInt16BE(a);return 32768&a?4294934528|a:a},l.prototype.readInt32LE=function(a){return 0|this.readUInt32LE(a)},l.prototype.readInt32BE=function(a){return 0|this.readUInt32BE(a)},l.prototype.readUInt8=function(a){throw Error("BufferCore implementations should implement readUInt8.");},l.prototype.readUInt16LE=function(a){return this.readUInt8(a+1)<<8|this.readUInt8(a)},l.prototype.readUInt16BE=function(a){return this.readUInt8(a)<<8|this.readUInt8(a+
1)},l.prototype.readUInt32LE=function(a){return(this.readUInt8(a+3)<<24|this.readUInt8(a+2)<<16|this.readUInt8(a+1)<<8|this.readUInt8(a))>>>0},l.prototype.readUInt32BE=function(a){return(this.readUInt8(a)<<24|this.readUInt8(a+1)<<16|this.readUInt8(a+2)<<8|this.readUInt8(a+3))>>>0},l.prototype.readFloatLE=function(a){return this.intbits2float(this.readInt32LE(a))},l.prototype.readFloatBE=function(a){return this.intbits2float(this.readInt32BE(a))},l.prototype.readDoubleLE=function(a){return this.longbits2double(this.readInt32LE(a+
4),this.readInt32LE(a))},l.prototype.readDoubleBE=function(a){return this.longbits2double(this.readInt32BE(a),this.readInt32BE(a+4))},l.prototype.copy=function(a,e){throw Error("BufferCore implementations should implement copy.");},l.prototype.fill=function(a,e,h){for(;h>e;e++)this.writeUInt8(e,a)},l.prototype.float2intbits=function(a){var e,h,g;return 0===a?0:a===Number.POSITIVE_INFINITY?2139095040:a===Number.NEGATIVE_INFINITY?-8388608:isNaN(a)?2143289344:(g=0>a?1:0,a=Math.abs(a),1.1754942106924411E-38>=
a&&1.401298464324817E-45<=a?(e=0,h=Math.round(a/Math.pow(2,-126)*Math.pow(2,23)),g<<31|e<<23|h):(e=Math.floor(Math.log(a)/Math.LN2),h=Math.round((a/Math.pow(2,e)-1)*Math.pow(2,23)),g<<31|e+127<<23|h))},l.prototype.double2longbits=function(a){var e,h,g,c;return 0===a?[0,0]:a===Number.POSITIVE_INFINITY?[0,2146435072]:a===Number.NEGATIVE_INFINITY?[0,-1048576]:isNaN(a)?[0,2146959360]:(c=0>a?-2147483648:0,a=Math.abs(a),2.225073858507201E-308>=a&&4.9E-324<=a?(e=0,g=a/Math.pow(2,-1022)*Math.pow(2,52)):(e=
Math.floor(Math.log(a)/Math.LN2),a<Math.pow(2,e)&&--e,g=(a/Math.pow(2,e)-1)*Math.pow(2,52),e=e+1023<<20),h=g*Math.pow(2,-32)|0|c|e,[65535&g,h])},l.prototype.intbits2float=function(a){if(2139095040===a)return Number.POSITIVE_INFINITY;if(-8388608===a)return Number.NEGATIVE_INFINITY;var l,h=(2147483648&a)>>>31,g=(2139095040&a)>>>23;a&=8388607;return l=0===g?Math.pow(-1,h)*a*Math.pow(2,-149):Math.pow(-1,h)*(1+a*Math.pow(2,-23))*Math.pow(2,g-127),(e>l||l>v)&&(l=NaN),l},l.prototype.longbits2double=function(a,
e){var h=(2147483648&a)>>>31,g=(2146435072&a)>>>20,c=(1048575&a)*Math.pow(2,32)+e;return 0===g&&0===c?0:2047===g?0===c?1===h?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY:NaN:0===g?Math.pow(-1,h)*c*Math.pow(2,-1074):Math.pow(-1,h)*(1+c*Math.pow(2,-52))*Math.pow(2,g-1023)},l}();p.BufferCoreCommon=n},{}],18:[function(n,u,p){var v=this.__extends||function(e,a){function n(){this.constructor=e}for(var h in a)a.hasOwnProperty(h)&&(e[h]=a[h]);n.prototype=a.prototype;e.prototype=new n},e=[4294967040,
4294902015,4278255615,16777215];n=function(l){function a(a){l.call(this);this.length=a;this.buff=Array(Math.ceil(a/4));a=this.buff.length;for(var e=0;a>e;e++)this.buff[e]=0}return v(a,l),a.isAvailable=function(){return!0},a.prototype.getLength=function(){return this.length},a.prototype.writeUInt8=function(a,h){var g=a>>2,c=3&a;this.buff[g]&=e[c];this.buff[g]|=(h&255)<<(c<<3)},a.prototype.readUInt8=function(a){return this.buff[a>>2]>>((3&a)<<3)&255},a.prototype.copy=function(e,h){for(var g=new a(h-
e),c=e;h>c;c++)g.writeUInt8(c-e,this.readUInt8(c));return g},a}(n("./buffer_core").BufferCoreCommon);p.BufferCoreArray=n},{"./buffer_core":17}],19:[function(n,u,p){var v=this.__extends||function(e,l){function a(){this.constructor=e}for(var n in l)l.hasOwnProperty(n)&&(e[n]=l[n]);a.prototype=l.prototype;e.prototype=new a};n=function(e){function l(a){e.call(this);"number"==typeof a?this.buff=new DataView(new ArrayBuffer(a)):a instanceof DataView?this.buff=a:this.buff=new DataView(a);this.length=this.buff.byteLength}
return v(l,e),l.isAvailable=function(){return"undefined"!=typeof DataView},l.prototype.getLength=function(){return this.length},l.prototype.writeInt8=function(a,e){this.buff.setInt8(a,e)},l.prototype.writeInt16LE=function(a,e){this.buff.setInt16(a,e,!0)},l.prototype.writeInt16BE=function(a,e){this.buff.setInt16(a,e,!1)},l.prototype.writeInt32LE=function(a,e){this.buff.setInt32(a,e,!0)},l.prototype.writeInt32BE=function(a,e){this.buff.setInt32(a,e,!1)},l.prototype.writeUInt8=function(a,e){this.buff.setUint8(a,
e)},l.prototype.writeUInt16LE=function(a,e){this.buff.setUint16(a,e,!0)},l.prototype.writeUInt16BE=function(a,e){this.buff.setUint16(a,e,!1)},l.prototype.writeUInt32LE=function(a,e){this.buff.setUint32(a,e,!0)},l.prototype.writeUInt32BE=function(a,e){this.buff.setUint32(a,e,!1)},l.prototype.writeFloatLE=function(a,e){this.buff.setFloat32(a,e,!0)},l.prototype.writeFloatBE=function(a,e){this.buff.setFloat32(a,e,!1)},l.prototype.writeDoubleLE=function(a,e){this.buff.setFloat64(a,e,!0)},l.prototype.writeDoubleBE=
function(a,e){this.buff.setFloat64(a,e,!1)},l.prototype.readInt8=function(a){return this.buff.getInt8(a)},l.prototype.readInt16LE=function(a){return this.buff.getInt16(a,!0)},l.prototype.readInt16BE=function(a){return this.buff.getInt16(a,!1)},l.prototype.readInt32LE=function(a){return this.buff.getInt32(a,!0)},l.prototype.readInt32BE=function(a){return this.buff.getInt32(a,!1)},l.prototype.readUInt8=function(a){return this.buff.getUint8(a)},l.prototype.readUInt16LE=function(a){return this.buff.getUint16(a,
!0)},l.prototype.readUInt16BE=function(a){return this.buff.getUint16(a,!1)},l.prototype.readUInt32LE=function(a){return this.buff.getUint32(a,!0)},l.prototype.readUInt32BE=function(a){return this.buff.getUint32(a,!1)},l.prototype.readFloatLE=function(a){return this.buff.getFloat32(a,!0)},l.prototype.readFloatBE=function(a){return this.buff.getFloat32(a,!1)},l.prototype.readDoubleLE=function(a){return this.buff.getFloat64(a,!0)},l.prototype.readDoubleBE=function(a){return this.buff.getFloat64(a,!1)},
l.prototype.copy=function(a,e){var h,g=this.buff.buffer;if(ArrayBuffer.prototype.slice)h=g.slice(a,e);else{h=new ArrayBuffer(e-a);var c=new Uint8Array(h),g=new Uint8Array(g);c.set(g.subarray(a,e))}return new l(h)},l.prototype.fill=function(a,e,h){a&=255;var g=h-e,c=4*(g/4|0),b=a<<24|a<<16|a<<8|a;for(h=0;c>h;h+=4)this.writeInt32LE(h+e,b);for(h=c;g>h;h++)this.writeUInt8(h+e,a)},l.prototype.getDataView=function(){return this.buff},l}(n("./buffer_core").BufferCoreCommon);p.BufferCoreArrayBuffer=n},{"./buffer_core":17}],
20:[function(n,u,p){var v=this.__extends||function(e,l){function a(){this.constructor=e}for(var n in l)l.hasOwnProperty(n)&&(e[n]=l[n]);a.prototype=l.prototype;e.prototype=new a};n=function(e){function l(a){e.call(this);this.length=a;this.buff=l.getCanvasPixelArray(a)}return v(l,e),l.getCanvasPixelArray=function(a){var e=l.imageDataFactory;return void 0===e&&(l.imageDataFactory=e=document.createElement("canvas").getContext("2d")),0===a&&(a=1),e.createImageData(Math.ceil(a/4),1).data},l.isAvailable=
function(){return"undefined"!=typeof CanvasPixelArray},l.prototype.getLength=function(){return this.length},l.prototype.writeUInt8=function(a,e){this.buff[a]=e},l.prototype.readUInt8=function(a){return this.buff[a]},l.prototype.copy=function(a,e){for(var h=new l(e-a),g=a;e>g;g++)h.writeUInt8(g-a,this.buff[g]);return h},l}(n("./buffer_core").BufferCoreCommon);p.BufferCoreImageData=n},{"./buffer_core":17}],21:[function(n,u,p){n=n("./api_error");var v=n.ApiError,e=n.ErrorCode;n=function(){function l(){}
return l.prototype.sync=function(a){a(new v(e.ENOTSUP))},l.prototype.syncSync=function(){throw new v(e.ENOTSUP);},l.prototype.datasync=function(a){this.sync(a)},l.prototype.datasyncSync=function(){return this.syncSync()},l.prototype.chown=function(a,l,h){h(new v(e.ENOTSUP))},l.prototype.chownSync=function(a,l){throw new v(e.ENOTSUP);},l.prototype.chmod=function(a,l){l(new v(e.ENOTSUP))},l.prototype.chmodSync=function(a){throw new v(e.ENOTSUP);},l.prototype.utimes=function(a,l,h){h(new v(e.ENOTSUP))},
l.prototype.utimesSync=function(a,l){throw new v(e.ENOTSUP);},l}();p.BaseFile=n},{"./api_error":14}],22:[function(n,u,p){var v=n("./api_error");!function(e){e[e.NOP=0]="NOP";e[e.THROW_EXCEPTION=1]="THROW_EXCEPTION";e[e.TRUNCATE_FILE=2]="TRUNCATE_FILE";e[e.CREATE_FILE=3]="CREATE_FILE"}(p.ActionType||(p.ActionType={}));var e=p.ActionType;n=function(){function l(a){if(this.flagStr=a,0>l.validFlagStrs.indexOf(a))throw new v.ApiError(v.ErrorCode.EINVAL,"Invalid flag: "+a);}return l.getFileFlag=function(a){return l.flagCache.hasOwnProperty(a)?
l.flagCache[a]:l.flagCache[a]=new l(a)},l.prototype.getFlagString=function(){return this.flagStr},l.prototype.isReadable=function(){return-1!==this.flagStr.indexOf("r")||-1!==this.flagStr.indexOf("+")},l.prototype.isWriteable=function(){return-1!==this.flagStr.indexOf("w")||-1!==this.flagStr.indexOf("a")||-1!==this.flagStr.indexOf("+")},l.prototype.isTruncating=function(){return-1!==this.flagStr.indexOf("w")},l.prototype.isAppendable=function(){return-1!==this.flagStr.indexOf("a")},l.prototype.isSynchronous=
function(){return-1!==this.flagStr.indexOf("s")},l.prototype.isExclusive=function(){return-1!==this.flagStr.indexOf("x")},l.prototype.pathExistsAction=function(){return this.isExclusive()?e.THROW_EXCEPTION:this.isTruncating()?e.TRUNCATE_FILE:e.NOP},l.prototype.pathNotExistsAction=function(){return(this.isWriteable()||this.isAppendable())&&"r+"!==this.flagStr?e.CREATE_FILE:e.THROW_EXCEPTION},l.flagCache={},l.validFlagStrs="r r+ rs rs+ w wx w+ wx+ a ax a+ ax+".split(" "),l}();p.FileFlag=n},{"./api_error":14}],
23:[function(n,u,p){var v=this.__extends||function(a,b){function m(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);m.prototype=b.prototype;a.prototype=new m};u=n("./api_error");var e=n("./file_flag"),l=n("./node_path");n=n("./buffer");var a=u.ApiError,w=u.ErrorCode,h=n.Buffer,g=e.ActionType;n=function(){function c(){}return c.prototype.supportsLinks=function(){return!1},c.prototype.diskSpace=function(b,a){a(0,0)},c.prototype.openFile=function(b,c,e){throw new a(w.ENOTSUP);},c.prototype.createFile=
function(b,c,e,g){throw new a(w.ENOTSUP);},c.prototype.open=function(b,c,e,h){var n=this;this.stat(b,!1,function(q,k){if(q)switch(c.pathNotExistsAction()){case g.CREATE_FILE:return n.stat(l.dirname(b),!1,function(d,f){d?h(d):f.isDirectory()?n.createFile(b,c,e,h):h(new a(w.ENOTDIR,l.dirname(b)+" is not a directory."))});case g.THROW_EXCEPTION:return h(new a(w.ENOENT,""+b+" doesn't exist."));default:return h(new a(w.EINVAL,"Invalid FileFlag object."))}else{if(k.isDirectory())return h(new a(w.EISDIR,
b+" is a directory."));switch(c.pathExistsAction()){case g.THROW_EXCEPTION:return h(new a(w.EEXIST,b+" already exists."));case g.TRUNCATE_FILE:return n.openFile(b,c,function(b,a){b?h(b):a.truncate(0,function(){a.sync(function(){h(null,a)})})});case g.NOP:return n.openFile(b,c,h);default:return h(new a(w.EINVAL,"Invalid FileFlag object."))}}})},c.prototype.rename=function(b,c,e){e(new a(w.ENOTSUP))},c.prototype.renameSync=function(b,c){throw new a(w.ENOTSUP);},c.prototype.stat=function(b,c,e){e(new a(w.ENOTSUP))},
c.prototype.statSync=function(b,c){throw new a(w.ENOTSUP);},c.prototype.openFileSync=function(b,c){throw new a(w.ENOTSUP);},c.prototype.createFileSync=function(b,c,e){throw new a(w.ENOTSUP);},c.prototype.openSync=function(b,c,e){var h;try{h=this.statSync(b,!1)}catch(n){switch(c.pathNotExistsAction()){case g.CREATE_FILE:if(!this.statSync(l.dirname(b),!1).isDirectory())throw new a(w.ENOTDIR,l.dirname(b)+" is not a directory.");return this.createFileSync(b,c,e);case g.THROW_EXCEPTION:throw new a(w.ENOENT,
""+b+" doesn't exist.");default:throw new a(w.EINVAL,"Invalid FileFlag object.");}}if(h.isDirectory())throw new a(w.EISDIR,b+" is a directory.");switch(c.pathExistsAction()){case g.THROW_EXCEPTION:throw new a(w.EEXIST,b+" already exists.");case g.TRUNCATE_FILE:return this.unlinkSync(b),this.createFileSync(b,c,h.mode);case g.NOP:return this.openFileSync(b,c);default:throw new a(w.EINVAL,"Invalid FileFlag object.");}},c.prototype.unlink=function(b,c){c(new a(w.ENOTSUP))},c.prototype.unlinkSync=function(b){throw new a(w.ENOTSUP);
},c.prototype.rmdir=function(b,c){c(new a(w.ENOTSUP))},c.prototype.rmdirSync=function(b){throw new a(w.ENOTSUP);},c.prototype.mkdir=function(b,c,e){e(new a(w.ENOTSUP))},c.prototype.mkdirSync=function(b,c){throw new a(w.ENOTSUP);},c.prototype.readdir=function(b,c){c(new a(w.ENOTSUP))},c.prototype.readdirSync=function(b){throw new a(w.ENOTSUP);},c.prototype.exists=function(b,a){this.stat(b,null,function(b){a(null==b)})},c.prototype.existsSync=function(b){try{return this.statSync(b,!0),!0}catch(a){return!1}},
c.prototype.realpath=function(b,c,e){if(this.supportsLinks()){c=b.split(l.sep);for(var h=0;h<c.length;h++){var g=c.slice(0,h+1);c[h]=l.join.apply(null,g)}}else this.exists(b,function(c){c?e(null,b):e(new a(w.ENOENT,"File "+b+" not found."))})},c.prototype.realpathSync=function(b,c){if(!this.supportsLinks()){if(this.existsSync(b))return b;throw new a(w.ENOENT,"File "+b+" not found.");}for(var e=b.split(l.sep),h=0;h<e.length;h++){var g=e.slice(0,h+1);e[h]=l.join.apply(null,g)}},c.prototype.truncate=
function(b,a,c){this.open(b,e.FileFlag.getFileFlag("r+"),420,function(b,e){return b?c(b):void e.truncate(a,function(b){e.close(function(a){c(b||a)})})})},c.prototype.truncateSync=function(b,a){var c=this.openSync(b,e.FileFlag.getFileFlag("r+"),420);try{c.truncateSync(a)}catch(h){throw h;}finally{c.closeSync()}},c.prototype.readFile=function(b,a,c,e){var g=e;this.open(b,c,420,function(b,c){return b?e(b):(e=function(b,a){c.close(function(c){return null==b&&(b=c),g(b,a)})},void c.stat(function(b,f){if(null!=
b)return e(b);var g=new h(f.size);c.read(g,0,f.size,0,function(b){if(null!=b)return e(b);if(null===a)return e(b,g);try{e(null,g.toString(a))}catch(d){e(d)}})}))})},c.prototype.readFileSync=function(b,a,c){b=this.openSync(b,c,420);try{var e=b.statSync(),g=new h(e.size);return b.readSync(g,0,e.size,0),b.closeSync(),null===a?g:g.toString(a)}finally{b.closeSync()}},c.prototype.writeFile=function(b,a,c,e,g,q){var k=q;this.open(b,e,420,function(b,f){if(null!=b)return q(b);q=function(b){f.close(function(a){k(null!=
b?b:a)})};try{"string"==typeof a&&(a=new h(a,c))}catch(e){return q(e)}f.write(a,0,a.length,0,q)})},c.prototype.writeFileSync=function(b,a,c,e,g){b=this.openSync(b,e,g);try{"string"==typeof a&&(a=new h(a,c)),b.writeSync(a,0,a.length,0)}finally{b.closeSync()}},c.prototype.appendFile=function(b,a,c,e,g,q){var k=q;this.open(b,e,g,function(b,f){return null!=b?q(b):(q=function(b){f.close(function(a){k(null!=b?b:a)})},"string"==typeof a&&(a=new h(a,c)),void f.write(a,0,a.length,null,q))})},c.prototype.appendFileSync=
function(b,a,c,e,g){b=this.openSync(b,e,g);try{"string"==typeof a&&(a=new h(a,c)),b.writeSync(a,0,a.length,null)}finally{b.closeSync()}},c.prototype.chmod=function(b,c,e,g){g(new a(w.ENOTSUP))},c.prototype.chmodSync=function(b,c,e){throw new a(w.ENOTSUP);},c.prototype.chown=function(b,c,e,g,h){h(new a(w.ENOTSUP))},c.prototype.chownSync=function(b,c,e,g){throw new a(w.ENOTSUP);},c.prototype.utimes=function(b,c,e,g){g(new a(w.ENOTSUP))},c.prototype.utimesSync=function(b,c,e){throw new a(w.ENOTSUP);
},c.prototype.link=function(b,c,e){e(new a(w.ENOTSUP))},c.prototype.linkSync=function(b,c){throw new a(w.ENOTSUP);},c.prototype.symlink=function(b,c,e,g){g(new a(w.ENOTSUP))},c.prototype.symlinkSync=function(b,c,e){throw new a(w.ENOTSUP);},c.prototype.readlink=function(b,c){c(new a(w.ENOTSUP))},c.prototype.readlinkSync=function(b){throw new a(w.ENOTSUP);},c}();p.BaseFileSystem=n;n=function(a){function b(){a.apply(this,arguments)}return v(b,a),b.prototype.supportsSynch=function(){return!0},b.prototype.rename=
function(b,a,c){try{this.renameSync(b,a),c()}catch(e){c(e)}},b.prototype.stat=function(b,a,c){try{c(null,this.statSync(b,a))}catch(e){c(e)}},b.prototype.open=function(b,a,c,e){try{e(null,this.openSync(b,a,c))}catch(g){e(g)}},b.prototype.unlink=function(b,a){try{this.unlinkSync(b),a()}catch(c){a(c)}},b.prototype.rmdir=function(b,a){try{this.rmdirSync(b),a()}catch(c){a(c)}},b.prototype.mkdir=function(b,a,c){try{this.mkdirSync(b,a),c()}catch(e){c(e)}},b.prototype.readdir=function(b,a){try{a(null,this.readdirSync(b))}catch(c){a(c)}},
b.prototype.chmod=function(b,a,c,e){try{this.chmodSync(b,a,c),e()}catch(g){e(g)}},b.prototype.chown=function(b,a,c,e,g){try{this.chownSync(b,a,c,e),g()}catch(k){g(k)}},b.prototype.utimes=function(b,a,c,e){try{this.utimesSync(b,a,c),e()}catch(g){e(g)}},b.prototype.link=function(b,a,c){try{this.linkSync(b,a),c()}catch(e){c(e)}},b.prototype.symlink=function(b,a,c,e){try{this.symlinkSync(b,a,c),e()}catch(g){e(g)}},b.prototype.readlink=function(b,a){try{a(null,this.readlinkSync(b))}catch(c){a(c)}},b}(n);
p.SynchronousFileSystem=n},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],24:[function(n,u,p){u.exports="undefined"!=typeof window?window:"undefined"!=typeof self?self:global},{}],25:[function(n,u,p){var v=this.__extends||function(a,e){function c(){this.constructor=a}for(var b in e)e.hasOwnProperty(b)&&(a[b]=e[b]);c.prototype=e.prototype;a.prototype=new c};u=n("./buffer");n=n("./api_error");var e=u.Buffer,l=n.ApiError,a=n.ErrorCode,w=function(){function a(g,c,b){this.data=g;this.encoding=
c;this.cb=b;this.size="string"!=typeof g?g.length:e.byteLength(g,null!=c?c:void 0);"string"!=typeof this.data&&(this.data=this.data.sliceCopy())}return a.prototype.getData=function(a){return null==a?"string"==typeof this.data?new e(this.data,null!=this.encoding?this.encoding:void 0):this.data:"string"==typeof this.data?a===this.encoding?this.data:(new e(this.data,null!=this.encoding?this.encoding:void 0)).toString(a):this.data.toString(a)},a}();n=function(){function a(){this._listeners={};this.maxListeners=
10}return a.prototype.addListener=function(a,c){return"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].push(c)>this.maxListeners&&process.stdout.write("Warning: Event "+a+" has more than "+this.maxListeners+" listeners.\n"),this.emit("newListener",a,c),this},a.prototype.on=function(a,c){return this.addListener(a,c)},a.prototype.once=function(a,c){var b=!1,e=function(){this.removeListener(a,e);b||(b=!0,c.apply(this,arguments))};return this.addListener(a,e)},a.prototype._emitRemoveListener=
function(a,c){var b;if(this._listeners.removeListener&&0<this._listeners.removeListener.length)for(b=0;b<c.length;b++)this.emit("removeListener",a,c[b])},a.prototype.removeListener=function(a,c){var b=this._listeners[a];if("undefined"!=typeof b){var e=b.indexOf(c);-1<e&&b.splice(e,1)}return this.emit("removeListener",a,c),this},a.prototype.removeAllListeners=function(a){var c;if("undefined"!=typeof a)c=this._listeners[a],this._listeners[a]=[],this._emitRemoveListener(a,c);else for(a=Object.keys(this._listeners),
c=0;c<a.length;c++)this.removeAllListeners(a[c]);return this},a.prototype.setMaxListeners=function(a){this.maxListeners=a},a.prototype.listeners=function(a){return"undefined"==typeof this._listeners[a]&&(this._listeners[a]=[]),this._listeners[a].slice(0)},a.prototype.emit=function(a){for(var c=[],b=1;b<arguments.length;b++)c[b-1]=arguments[b];var b=this._listeners[a],e=!1;if("undefined"!=typeof b){var h;for(h=0;h<b.length;h++)e=!0,b[h].apply(this,c)}return e},a}();p.AbstractEventEmitter=n;n=function(h){function g(a,
b){h.call(this);this.writable=a;this.readable=b;this.encoding=null;this.flowing=!1;this.buffer=[];this.endEvent=null;this.ended=!1;this.drained=!0}return v(g,h),g.prototype.addListener=function(a,b){var e=h.prototype.addListener.call(this,a,b),g=this;return"data"!==a||this.flowing?"readable"===a&&0<this.buffer.length&&setTimeout(function(){g.emit("readable")},0):this.resume(),e},g.prototype._processArgs=function(a,b,e){return"string"==typeof b?new w(a,b,e):new w(a,null,b)},g.prototype._processEvents=
function(){this.drained!==(0===this.buffer.length)&&this.drained&&this.emit("readable");this.flowing&&0!==this.buffer.length&&this.emit("data",this.read());this.drained=0===this.buffer.length},g.prototype.emitEvent=function(a,b){this.emit(a,b.getData(this.encoding));b.cb&&b.cb()},g.prototype.write=function(c,b,e){if(this.ended)throw new l(a.EPERM,"Cannot write to an ended stream.");c=this._processArgs(c,b,e);return this._push(c),this.flowing},g.prototype.end=function(c,b,e){if(this.ended)throw new l(a.EPERM,
"Stream is already closed.");c=this._processArgs(c,b,e);this.ended=!0;this.endEvent=c;this._processEvents()},g.prototype.read=function(a){var b,m,h,g=[],l=[],q=0;h=0;var k="number"!=typeof a;k&&(a=4294967295);for(h=0;h<this.buffer.length&&a>q;h++)b=this.buffer[h],g.push(b.getData()),b.cb&&l.push(b.cb),q+=b.size,b=b.cb;if(!k&&a>q)return null;if(this.buffer=this.buffer.slice(g.length),h=q>a?a:q,m=e.concat(g),q>a&&(b&&l.pop(),this._push(new w(m.slice(a),null,b))),0<l.length&&setTimeout(function(){var a;
for(a=0;a<l.length;a++)l[a]()},0),this.ended&&0===this.buffer.length&&null!==this.endEvent){var d=this.endEvent,f=this;this.endEvent=null;setTimeout(function(){f.emitEvent("end",d)},0)}return 0===g.length?(this.emit("_read"),null):null===this.encoding?m.slice(0,h):m.toString(this.encoding,0,h)},g.prototype.setEncoding=function(a){this.encoding=a},g.prototype.pause=function(){this.flowing=!1},g.prototype.resume=function(){this.flowing=!0;this._processEvents()},g.prototype.pipe=function(c,b){throw new l(a.EPERM,
"Unimplemented.");},g.prototype.unpipe=function(a){},g.prototype.unshift=function(c){if(this.ended)throw new l(a.EPERM,"Stream has ended.");this.buffer.unshift(new w(c,this.encoding));this._processEvents()},g.prototype._push=function(a){this.buffer.push(a);this._processEvents()},g.prototype.wrap=function(c){throw new l(a.EPERM,"Unimplemented.");},g}(n);p.AbstractDuplexStream=n},{"./api_error":14,"./buffer":16}],26:[function(n,u,p){function v(a,b){if("function"!=typeof a)throw new m(r.EINVAL,"Callback must be a function.");
switch("undefined"==typeof __numWaiting&&(__numWaiting=0),__numWaiting++,b){case 1:return function(b){setImmediate(function(){return __numWaiting--,a(b)})};case 2:return function(b,f){setImmediate(function(){return __numWaiting--,a(b,f)})};case 3:return function(b,f,c){setImmediate(function(){return __numWaiting--,a(b,f,c)})};default:throw Error("Invalid invocation of wrapCb.");}}function e(a){if("function"!=typeof a.write)throw new m(r.EBADF,"Invalid file descriptor.");}function l(a,b){switch(typeof a){case "number":return a;
case "string":var d=parseInt(a,8);if(NaN!==d)return d;default:return b}}function a(a){if(0<=a.indexOf("\x00"))throw new m(r.EINVAL,"Path must be a string without null bytes.");if(""===a)throw new m(r.EINVAL,"Path must not be empty.");return b.resolve(a)}function w(a,b,d,f){switch(typeof a){case "object":return{encoding:"undefined"!=typeof a.encoding?a.encoding:b,flag:"undefined"!=typeof a.flag?a.flag:d,mode:l(a.mode,f)};case "string":return{encoding:a,flag:d,mode:f};default:return{encoding:b,flag:d,
mode:f}}}function h(){}p=n("./api_error");var g=n("./file_flag"),c=n("./buffer"),b=n("./node_path"),m=p.ApiError,r=p.ErrorCode,z=g.FileFlag,A=c.Buffer;n=function(){function b(){}return b._initialize=function(a){if(!a.constructor.isAvailable())throw new m(r.EINVAL,"Tried to instantiate BrowserFS with an unavailable file system.");return b.root=a},b._toUnixTimestamp=function(b){if("number"==typeof b)return b;if(b instanceof Date)return b.getTime()/1E3;throw Error("Cannot parse time: "+b);},b.getRootFS=
function(){return b.root?b.root:null},b.rename=function(c,d,f){void 0===f&&(f=h);f=v(f,1);try{b.root.rename(a(c),a(d),f)}catch(e){f(e)}},b.renameSync=function(c,d){b.root.renameSync(a(c),a(d))},b.exists=function(c,d){void 0===d&&(d=h);var f=v(d,1);try{return b.root.exists(a(c),f)}catch(e){return f(!1)}},b.existsSync=function(c){try{return b.root.existsSync(a(c))}catch(d){return!1}},b.stat=function(c,d){void 0===d&&(d=h);var f=v(d,2);try{return b.root.stat(a(c),!1,f)}catch(e){return f(e,null)}},b.statSync=
function(c){return b.root.statSync(a(c),!1)},b.lstat=function(c,d){void 0===d&&(d=h);var f=v(d,2);try{return b.root.stat(a(c),!0,f)}catch(e){return f(e,null)}},b.lstatSync=function(c){return b.root.statSync(a(c),!0)},b.truncate=function(c,d,f){void 0===d&&(d=0);void 0===f&&(f=h);var e=0;"function"==typeof d?f=d:"number"==typeof d&&(e=d);d=v(f,1);try{if(0>e)throw new m(r.EINVAL);return b.root.truncate(a(c),e,d)}catch(g){return d(g)}},b.truncateSync=function(c,d){if(void 0===d&&(d=0),0>d)throw new m(r.EINVAL);
return b.root.truncateSync(a(c),d)},b.unlink=function(c,d){void 0===d&&(d=h);var f=v(d,1);try{return b.root.unlink(a(c),f)}catch(e){return f(e)}},b.unlinkSync=function(c){return b.root.unlinkSync(a(c))},b.open=function(c,d,f,e){void 0===e&&(e=h);var m=l(f,420);f=v("function"==typeof f?f:e,2);try{return b.root.open(a(c),z.getFileFlag(d),m,f)}catch(g){return f(g,null)}},b.openSync=function(c,d,f){return void 0===f&&(f=420),b.root.openSync(a(c),z.getFileFlag(d),f)},b.readFile=function(c,d,f){void 0===
d&&(d={});void 0===f&&(f=h);var e=w(d,null,"r",null);d=v("function"==typeof d?d:f,2);try{var g=z.getFileFlag(e.flag);return g.isReadable()?b.root.readFile(a(c),e.encoding,g,d):d(new m(r.EINVAL,"Flag passed to readFile must allow for reading."))}catch(l){return d(l,null)}},b.readFileSync=function(c,d){void 0===d&&(d={});var f=w(d,null,"r",null),e=z.getFileFlag(f.flag);if(!e.isReadable())throw new m(r.EINVAL,"Flag passed to readFile must allow for reading.");return b.root.readFileSync(a(c),f.encoding,
e)},b.writeFile=function(c,d,f,e){void 0===f&&(f={});void 0===e&&(e=h);var g=w(f,"utf8","w",420);f=v("function"==typeof f?f:e,1);try{var l=z.getFileFlag(g.flag);return l.isWriteable()?b.root.writeFile(a(c),d,g.encoding,l,g.mode,f):f(new m(r.EINVAL,"Flag passed to writeFile must allow for writing."))}catch(n){return f(n)}},b.writeFileSync=function(c,d,f){f=w(f,"utf8","w",420);var e=z.getFileFlag(f.flag);if(!e.isWriteable())throw new m(r.EINVAL,"Flag passed to writeFile must allow for writing.");return b.root.writeFileSync(a(c),
d,f.encoding,e,f.mode)},b.appendFile=function(c,d,f,e){void 0===e&&(e=h);var g=w(f,"utf8","a",420);f=v("function"==typeof f?f:e,1);try{var l=z.getFileFlag(g.flag);if(!l.isAppendable())return f(new m(r.EINVAL,"Flag passed to appendFile must allow for appending."));b.root.appendFile(a(c),d,g.encoding,l,g.mode,f)}catch(n){f(n)}},b.appendFileSync=function(c,d,f){f=w(f,"utf8","a",420);var e=z.getFileFlag(f.flag);if(!e.isAppendable())throw new m(r.EINVAL,"Flag passed to appendFile must allow for appending.");
return b.root.appendFileSync(a(c),d,f.encoding,e,f.mode)},b.fstat=function(b,a){void 0===a&&(a=h);var f=v(a,2);try{e(b),b.stat(f)}catch(c){f(c)}},b.fstatSync=function(b){return e(b),b.statSync()},b.close=function(b,a){void 0===a&&(a=h);var f=v(a,1);try{e(b),b.close(f)}catch(c){f(c)}},b.closeSync=function(b){return e(b),b.closeSync()},b.ftruncate=function(b,a,f){void 0===f&&(f=h);var c="number"==typeof a?a:0;a=v("function"==typeof a?a:f,1);try{if(e(b),0>c)throw new m(r.EINVAL);b.truncate(c,a)}catch(g){a(g)}},
b.ftruncateSync=function(b,a){return void 0===a&&(a=0),e(b),b.truncateSync(a)},b.fsync=function(b,a){void 0===a&&(a=h);var f=v(a,1);try{e(b),b.sync(f)}catch(c){f(c)}},b.fsyncSync=function(b){return e(b),b.syncSync()},b.fdatasync=function(b,a){void 0===a&&(a=h);var f=v(a,1);try{e(b),b.datasync(f)}catch(c){f(c)}},b.fdatasyncSync=function(b){e(b);b.datasyncSync()},b.write=function(b,a,f,c,g,l){void 0===l&&(l=h);var n=null;if("string"==typeof a){var q="utf8";switch(typeof f){case "function":l=f;break;
case "number":n=f;q="string"==typeof c?c:"utf8";l="function"==typeof g?g:l;break;default:return("function"==typeof c?c:"function"==typeof g?g:l)(new m(r.EINVAL,"Invalid arguments."))}a=new A(a,q);f=0;c=a.length}else n="number"==typeof g?g:null,l="function"==typeof g?g:l;g=v(l,3);try{e(b),null==n&&(n=b.getPos()),b.write(a,f,c,n,g)}catch(z){g(z)}},b.writeSync=function(b,a,c,m,g){var h=0;"string"==typeof a?(g="number"==typeof c?c:null,h=0,a=new A(a,"string"==typeof m?m:"utf8"),m=a.length):(h=c,g="number"==
typeof g?g:null);return e(b),null==g&&(g=b.getPos()),b.writeSync(a,h,m,g)},b.read=function(b,a,c,m,g,l){void 0===l&&(l=h);var r,n;"number"==typeof a?(l="function"==typeof g?g:l,r=0,n=new A(a),g=v(function(b,a,d){return b?l(b):void l(b,d.toString(m),a)},3)):(n=a,r=c,a=m,c=g,g=v(l,3));try{e(b),null==c&&(c=b.getPos()),b.read(n,r,a,c,g)}catch(q){g(q)}},b.readSync=function(b,a,c,m,g){var h,l=!1;if("number"==typeof a){h=a;g=c;var r=m;c=0;a=new A(h);l=!0}else h=m;e(b);null==g&&(g=b.getPos());b=b.readSync(a,
c,h,g);return l?[a.toString(r),b]:b},b.fchown=function(b,a,c,m){void 0===m&&(m=h);m=v(m,1);try{e(b),b.chown(a,c,m)}catch(g){m(g)}},b.fchownSync=function(b,a,c){return e(b),b.chownSync(a,c)},b.fchmod=function(b,a,c){void 0===c&&(c=h);c=v(c,1);try{a="string"==typeof a?parseInt(a,8):a,e(b),b.chmod(a,c)}catch(m){c(m)}},b.fchmodSync=function(b,a){return a="string"==typeof a?parseInt(a,8):a,e(b),b.chmodSync(a)},b.futimes=function(b,a,c,m){void 0===m&&(m=h);m=v(m,1);try{e(b),"number"==typeof a&&(a=new Date(1E3*
a)),"number"==typeof c&&(c=new Date(1E3*c)),b.utimes(a,c,m)}catch(g){m(g)}},b.futimesSync=function(b,a,c){return e(b),"number"==typeof a&&(a=new Date(1E3*a)),"number"==typeof c&&(c=new Date(1E3*c)),b.utimesSync(a,c)},b.rmdir=function(c,d){void 0===d&&(d=h);var f=v(d,1);try{c=a(c),b.root.rmdir(c,f)}catch(e){f(e)}},b.rmdirSync=function(c){return c=a(c),b.root.rmdirSync(c)},b.mkdir=function(c,d,f){void 0===f&&(f=h);"function"==typeof d&&(f=d,d=511);f=v(f,1);try{c=a(c),b.root.mkdir(c,d,f)}catch(e){f(e)}},
b.mkdirSync=function(c,d){return void 0===d&&(d=511),d="string"==typeof d?parseInt(d,8):d,c=a(c),b.root.mkdirSync(c,d)},b.readdir=function(c,d){void 0===d&&(d=h);var f=v(d,2);try{c=a(c),b.root.readdir(c,f)}catch(e){f(e)}},b.readdirSync=function(c){return c=a(c),b.root.readdirSync(c)},b.link=function(c,d,f){void 0===f&&(f=h);f=v(f,1);try{c=a(c),d=a(d),b.root.link(c,d,f)}catch(e){f(e)}},b.linkSync=function(c,d){return c=a(c),d=a(d),b.root.linkSync(c,d)},b.symlink=function(c,d,f,e){void 0===e&&(e=h);
var g="string"==typeof f?f:"file";f=v("function"==typeof f?f:e,1);try{if("file"!==g&&"dir"!==g)return f(new m(r.EINVAL,"Invalid type: "+g));c=a(c);d=a(d);b.root.symlink(c,d,g,f)}catch(l){f(l)}},b.symlinkSync=function(c,d,f){if(null==f)f="file";else if("file"!==f&&"dir"!==f)throw new m(r.EINVAL,"Invalid type: "+f);return c=a(c),d=a(d),b.root.symlinkSync(c,d,f)},b.readlink=function(c,d){void 0===d&&(d=h);var f=v(d,2);try{c=a(c),b.root.readlink(c,f)}catch(e){f(e)}},b.readlinkSync=function(c){return c=
a(c),b.root.readlinkSync(c)},b.chown=function(c,d,f,e){void 0===e&&(e=h);e=v(e,1);try{c=a(c),b.root.chown(c,!1,d,f,e)}catch(m){e(m)}},b.chownSync=function(c,d,f){c=a(c);b.root.chownSync(c,!1,d,f)},b.lchown=function(c,d,f,e){void 0===e&&(e=h);e=v(e,1);try{c=a(c),b.root.chown(c,!0,d,f,e)}catch(m){e(m)}},b.lchownSync=function(c,d,f){return c=a(c),b.root.chownSync(c,!0,d,f)},b.chmod=function(c,d,f){void 0===f&&(f=h);f=v(f,1);try{d="string"==typeof d?parseInt(d,8):d,c=a(c),b.root.chmod(c,!1,d,f)}catch(e){f(e)}},
b.chmodSync=function(c,d){return d="string"==typeof d?parseInt(d,8):d,c=a(c),b.root.chmodSync(c,!1,d)},b.lchmod=function(c,d,f){void 0===f&&(f=h);f=v(f,1);try{d="string"==typeof d?parseInt(d,8):d,c=a(c),b.root.chmod(c,!0,d,f)}catch(e){f(e)}},b.lchmodSync=function(c,d){return c=a(c),d="string"==typeof d?parseInt(d,8):d,b.root.chmodSync(c,!0,d)},b.utimes=function(c,d,f,e){void 0===e&&(e=h);e=v(e,1);try{c=a(c),"number"==typeof d&&(d=new Date(1E3*d)),"number"==typeof f&&(f=new Date(1E3*f)),b.root.utimes(c,
d,f,e)}catch(m){e(m)}},b.utimesSync=function(c,d,f){return c=a(c),"number"==typeof d&&(d=new Date(1E3*d)),"number"==typeof f&&(f=new Date(1E3*f)),b.root.utimesSync(c,d,f)},b.realpath=function(c,d,f){var e="object"==typeof d?d:{};f="function"==typeof d?d:h;d=v(f,2);try{c=a(c),b.root.realpath(c,e,d)}catch(m){d(m)}},b.realpathSync=function(c,d){return void 0===d&&(d={}),c=a(c),b.root.realpathSync(c,d)},b.root=null,b}();u.exports=n},{"./api_error":14,"./buffer":16,"./file_flag":22,"./node_path":28}],
27:[function(n,u,p){var v=n("./buffer").Buffer;!function(e){e[e.FILE=32768]="FILE";e[e.DIRECTORY=16384]="DIRECTORY";e[e.SYMLINK=40960]="SYMLINK"}(p.FileType||(p.FileType={}));var e=p.FileType;n=function(){function l(a,l,h,g,c,b){if(void 0===g&&(g=new Date),void 0===c&&(c=new Date),void 0===b&&(b=new Date),this.size=l,this.mode=h,this.atime=g,this.mtime=c,this.ctime=b,this.dev=0,this.ino=0,this.rdev=0,this.nlink=1,this.blksize=4096,this.uid=0,this.gid=0,null==this.mode)switch(a){case e.FILE:this.mode=
420;break;default:this.mode=511}this.blocks=Math.ceil(l/512);4096>this.mode&&(this.mode|=a)}return l.prototype.toBuffer=function(){var a=new v(32);return a.writeUInt32LE(this.size,0),a.writeUInt32LE(this.mode,4),a.writeDoubleLE(this.atime.getTime(),8),a.writeDoubleLE(this.mtime.getTime(),16),a.writeDoubleLE(this.ctime.getTime(),24),a},l.fromBuffer=function(a){var e=a.readUInt32LE(0),h=a.readUInt32LE(4),g=a.readDoubleLE(8),c=a.readDoubleLE(16);a=a.readDoubleLE(24);return new l(61440&h,e,4095&h,new Date(g),
new Date(c),new Date(a))},l.prototype.clone=function(){return new l(61440&this.mode,this.size,4095&this.mode,this.atime,this.mtime,this.ctime)},l.prototype.isFile=function(){return(61440&this.mode)===e.FILE},l.prototype.isDirectory=function(){return(61440&this.mode)===e.DIRECTORY},l.prototype.isSymbolicLink=function(){return(61440&this.mode)===e.SYMLINK},l.prototype.chmod=function(a){this.mode=61440&this.mode|a},l.prototype.isSocket=function(){return!1},l.prototype.isBlockDevice=function(){return!1},
l.prototype.isCharacterDevice=function(){return!1},l.prototype.isFIFO=function(){return!1},l}();p.Stats=n},{"./buffer":16}],28:[function(n,u,p){var v=n("./node_process").process;n=function(){function e(){}return e.normalize=function(l){""===l&&(l=".");var a=l.charAt(0)===e.sep;l=e._removeDuplicateSeps(l);for(var n=l.split(e.sep),h=[],g=0;g<n.length;g++){var c=n[g];"."!==c&&(".."===c&&(a||!a&&0<h.length&&".."!==h[0])?h.pop():h.push(c))}if(!a&&2>h.length)switch(h.length){case 1:""===h[0]&&h.unshift(".");
break;default:h.push(".")}return l=h.join(e.sep),a&&l.charAt(0)!==e.sep&&(l=e.sep+l),l},e.join=function(){for(var l=[],a=0;a<arguments.length;a++)l[a-0]=arguments[a];for(var a=[],n=0;n<l.length;n++){var h=l[n];if("string"!=typeof h)throw new TypeError("Invalid argument type to path.join: "+typeof h);""!==h&&a.push(h)}return e.normalize(a.join(e.sep))},e.resolve=function(){for(var l=[],a=0;a<arguments.length;a++)l[a-0]=arguments[a];for(var a=[],n=0;n<l.length;n++){var h=l[n];if("string"!=typeof h)throw new TypeError("Invalid argument type to path.join: "+
typeof h);""!==h&&(h.charAt(0)===e.sep&&(a=[]),a.push(h))}l=e.normalize(a.join(e.sep));if(1<l.length&&l.charAt(l.length-1)===e.sep)return l.substr(0,l.length-1);l.charAt(0)!==e.sep&&("."!==l.charAt(0)||1!==l.length&&l.charAt(1)!==e.sep||(l=1===l.length?"":l.substr(2)),a=v.cwd(),l=""!==l?this.normalize(a+("/"!==a?e.sep:"")+l):a);return l},e.relative=function(l,a){var n;l=e.resolve(l);a=e.resolve(a);var h=l.split(e.sep),g=a.split(e.sep);g.shift();h.shift();var c=0,b=[];for(n=0;n<h.length;n++)if(h[n]!==
g[n]){c=h.length-n;break}b=g.slice(n);1===h.length&&""===h[0]&&(c=0);c>h.length&&(c=h.length);h="";for(n=0;c>n;n++)h+="../";return h+=b.join(e.sep),1<h.length&&h.charAt(h.length-1)===e.sep&&(h=h.substr(0,h.length-1)),h},e.dirname=function(l){l=e._removeDuplicateSeps(l);var a=l.charAt(0)===e.sep;l=l.split(e.sep);return""===l.pop()&&0<l.length&&l.pop(),1<l.length||1===l.length&&!a?l.join(e.sep):a?e.sep:"."},e.basename=function(l,a){if(void 0===a&&(a=""),""===l)return l;l=e.normalize(l);var n=l.split(e.sep),
h=n[n.length-1];return""===h&&1<n.length?n[n.length-2]:0<a.length&&h.substr(h.length-a.length)===a?h.substr(0,h.length-a.length):h},e.extname=function(l){l=e.normalize(l);var a=l.split(e.sep);if(l=a.pop(),""===l&&0<a.length&&(l=a.pop()),".."===l)return"";a=l.lastIndexOf(".");return-1===a||0===a?"":l.substr(a)},e.isAbsolute=function(l){return 0<l.length&&l.charAt(0)===e.sep},e._makeLong=function(e){return e},e._removeDuplicateSeps=function(e){return e.replace(this._replaceRegex,this.sep)},e.sep="/",
e._replaceRegex=RegExp("//+","g"),e.delimiter=":",e}();u.exports=n},{"./node_process":29}],29:[function(n,u,p){var v=this.__extends||function(a,e){function h(){this.constructor=a}for(var g in e)e.hasOwnProperty(g)&&(a[g]=e[g]);h.prototype=e.prototype;a.prototype=new h},e=null,l=function(a){function e(){a.call(this,!0,!0);this.isRaw=!1;this.columns=80;this.rows=120;this.isTTY=!0}return v(e,a),e.prototype.setReadMode=function(a){this.isRaw!==a&&(this.isRaw=a,this.emit("modeChange"))},e.prototype.changeColumns=
function(a){a!==this.columns&&(this.columns=a,this.emit("resize"))},e.prototype.changeRows=function(a){a!==this.rows&&(this.rows=a,this.emit("resize"))},e.isatty=function(a){return a instanceof e},e}(n("./node_eventemitter").AbstractDuplexStream);p.TTY=l;u=function(){function a(){this.startTime=Date.now();this._cwd="/";this.platform="browser";this.argv=[];this.stdout=new l;this.stderr=new l;this.stdin=new l}return a.prototype.chdir=function(a){null===e&&(e=n("./node_path"));this._cwd=e.resolve(a)},
a.prototype.cwd=function(){return this._cwd},a.prototype.uptime=function(){return(Date.now()-this.startTime)/1E3|0},a}();p.Process=u;p.process=new u},{"./node_eventemitter":25,"./node_path":28}],30:[function(n,u,p){p.FindUtil=function(m){var r;a:switch(typeof m){case "object":r=""+m;break a;case "string":r=m;break a;default:throw Error("Invalid encoding argument specified");}switch(m=r,m=m.toLowerCase()){case "utf8":case "utf-8":return v;case "ascii":return e;case "binary":return a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return h;
case "hex":return g;case "base64":return w;case "binary_string":return c;case "binary_string_ie":return b;case "extended_ascii":return l;default:throw Error("Unknown encoding: "+m);}};var v=function(){function b(){}return b.str2byte=function(b,a){for(var c=0,e=0,m=a.length,d=0;c<b.length&&m>e;){var f=b.charCodeAt(c++),g=b.charCodeAt(c);if(55296<=f&&56319>=f&&56320<=g&&57343>=g){if(e+3>=m)break;d++;f=(1023&f|1024)<<10|1023&g;a.writeUInt8(f>>18|240,e++);a.writeUInt8(f>>12&63|128,e++);a.writeUInt8(f>>
6&63|128,e++);a.writeUInt8(63&f|128,e++);c++}else if(128>f)a.writeUInt8(f,e++),d++;else if(2048>f){if(e+1>=m)break;d++;a.writeUInt8(f>>6|192,e++);a.writeUInt8(63&f|128,e++)}else if(65536>f){if(e+2>=m)break;d++;a.writeUInt8(f>>12|224,e++);a.writeUInt8(f>>6&63|128,e++);a.writeUInt8(63&f|128,e++)}}return e},b.byte2str=function(b){for(var a=[],c=0;c<b.length;){var e=b.readUInt8(c++);if(128>e)a.push(String.fromCharCode(e));else{if(192>e)throw Error("Found incomplete part of character in string.");if(224>
e)a.push(String.fromCharCode((31&e)<<6|63&b.readUInt8(c++)));else if(240>e)a.push(String.fromCharCode((15&e)<<12|(63&b.readUInt8(c++))<<6|63&b.readUInt8(c++)));else{if(!(248>e))throw Error("Unable to represent UTF-8 string as UTF-16 JavaScript string.");var m=b.readUInt8(c+2);a.push(String.fromCharCode(1023&((7&e)<<8|(63&b.readUInt8(c++))<<2|(63&b.readUInt8(c++))>>4)|55296));a.push(String.fromCharCode((15&m)<<6|63&b.readUInt8(c++)|56320))}}}return a.join("")},b.byteLength=function(b){var a=encodeURIComponent(b).match(/%[89ABab]/g);
return b.length+(a?a.length:0)},b}();p.UTF8=v;var e=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,e=0;c>e;e++)a.writeUInt8(b.charCodeAt(e)%256,e);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(127&b.readUInt8(c));return a.join("")},b.byteLength=function(b){return b.length},b}();p.ASCII=e;var l=function(){function b(){}return b.str2byte=function(a,c){for(var e=a.length>c.length?c.length:
a.length,g=0;e>g;g++){var k=a.charCodeAt(g);if(127<k){var d=b.extendedChars.indexOf(a.charAt(g));-1<d&&(k=d+128)}c.writeUInt8(k,g)}return e},b.byte2str=function(a){for(var c=Array(a.length),e=0;e<a.length;e++){var g=a.readUInt8(e);127<g?c[e]=b.extendedChars[g-128]:c[e]=String.fromCharCode(g)}return c.join("")},b.byteLength=function(b){return b.length},b.extendedChars="\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb___\u00a6\u00a6\u00c1\u00c2\u00c0\u00a9\u00a6\u00a6++\u00a2\u00a5++--+-+\u00e3\u00c3++--\u00a6-+\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8i\u00cd\u00ce\u00cf++__\u00a6\u00cc_\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1_\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2_ ".split(""),
b}();p.ExtendedASCII=l;var a=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,e=0;c>e;e++)a.writeUInt8(255&b.charCodeAt(e),e);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(255&b.readUInt8(c));return a.join("")},b.byteLength=function(b){return b.length},b}();p.BINARY=a;var w=function(){function b(){}return b.byte2str=function(a){for(var c="",e=0;e<a.length;){var g=a.readUInt8(e++),k=e<a.length?
a.readUInt8(e++):NaN,d=e<a.length?a.readUInt8(e++):NaN,f=g>>2,g=(3&g)<<4|k>>4,h=(15&k)<<2|d>>6,l=63&d;isNaN(k)?h=l=64:isNaN(d)&&(l=64);c=c+b.num2b64[f]+b.num2b64[g]+b.num2b64[h]+b.num2b64[l]}return c},b.str2byte=function(a,c){var e=c.length,g="",k=0;a=a.replace(/[^A-Za-z0-9\+\/\=\-\_]/g,"");for(var d=0;k<a.length;){var f=b.b642num[a.charAt(k++)],h=b.b642num[a.charAt(k++)],l=b.b642num[a.charAt(k++)],n=b.b642num[a.charAt(k++)],y=(15&h)<<4|l>>2,t=(3&l)<<6|n;if(c.writeUInt8(f<<2|h>>4,d++),d===e)break;
if(64!==l&&(g+=c.writeUInt8(y,d++)),d===e)break;if(64!==n&&(g+=c.writeUInt8(t,d++)),d===e)break}return d},b.byteLength=function(b){return Math.floor(6*b.replace(/[^A-Za-z0-9\+\/\-\_]/g,"").length/8)},b.b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),b.num2b64=function(){for(var a=Array(b.b64chars.length),c=0;c<b.b64chars.length;c++)a[c]=b.b64chars[c];return a}(),b.b642num=function(){for(var a={},c=0;c<b.b64chars.length;c++)a[b.b64chars[c]]=c;return a["-"]=62,
a._=63,a}(),b}();p.BASE64=w;var h=function(){function b(){}return b.str2byte=function(b,a){var c=b.length;2*c>a.length&&(c=1===a.length%2?(a.length-1)/2:a.length/2);for(var e=0;c>e;e++)a.writeUInt16LE(b.charCodeAt(e),2*e);return 2*c},b.byte2str=function(b){if(0!==b.length%2)throw Error("Invalid UCS2 byte array.");for(var a=Array(b.length/2),c=0;c<b.length;c+=2)a[c/2]=String.fromCharCode(b.readUInt8(c)|b.readUInt8(c+1)<<8);return a.join("")},b.byteLength=function(b){return 2*b.length},b}();p.UCS2=
h;var g=function(){function b(){}return b.str2byte=function(b,a){if(1===b.length%2)throw Error("Invalid hex string");var c=b.length>>1;c>a.length&&(c=a.length);for(var e=0;c>e;e++){var k=this.hex2num[b.charAt(e<<1)],d=this.hex2num[b.charAt((e<<1)+1)];a.writeUInt8(k<<4|d,e)}return c},b.byte2str=function(b){for(var a=b.length,c=Array(a<<1),e=0,k=0;a>k;k++){var d=15&b.readUInt8(k),f=b.readUInt8(k)>>4;c[e++]=this.num2hex[f];c[e++]=this.num2hex[d]}return c.join("")},b.byteLength=function(b){return b.length>>
1},b.HEXCHARS="0123456789abcdef",b.num2hex=function(){for(var a=Array(b.HEXCHARS.length),c=0;c<b.HEXCHARS.length;c++)a[c]=b.HEXCHARS[c];return a}(),b.hex2num=function(){var a,c,e={};for(a=0;a<b.HEXCHARS.length;a++)c=b.HEXCHARS[a],e[c]=a;for(a=0;6>a;a++)c="ABCDEF"[a],e[c]=a+10;return e}(),b}();p.HEX=g;var c=function(){function b(){}return b.str2byte=function(a,c){if(0===a.length)return 0;var e=b.byteLength(a);e>c.length&&(e=c.length);var g=0,k=0,d=k+e,f=a.charCodeAt(g++);for(0!==f&&(c.writeUInt8(255&
f,0),k=1);d>k;k+=2)f=a.charCodeAt(g++),1===d-k&&c.writeUInt8(f>>8,k),2<=d-k&&c.writeUInt16BE(f,k);return e},b.byte2str=function(b){var a=b.length;if(0===a)return"";for(var c=Array((a>>1)+1),e=0,k=0;k<c.length;k++)0===k?1===a%2?c[k]=String.fromCharCode(256|b.readUInt8(e++)):c[k]=String.fromCharCode(0):c[k]=String.fromCharCode(b.readUInt8(e++)<<8|b.readUInt8(e++));return c.join("")},b.byteLength=function(b){if(0===b.length)return 0;var a=b.charCodeAt(0);b=b.length-1<<1;return 0!==a&&b++,b},b}();p.BINSTR=
c;var b=function(){function b(){}return b.str2byte=function(b,a){for(var c=b.length>a.length?a.length:b.length,e=0;c>e;e++)a.writeUInt8(b.charCodeAt(e)-32,e);return c},b.byte2str=function(b){for(var a=Array(b.length),c=0;c<b.length;c++)a[c]=String.fromCharCode(b.readUInt8(c)+32);return a.join("")},b.byteLength=function(b){return b.length},b}();p.BINSTRIE=b},{}],31:[function(n,u,p){p.isIE="undefined"!=typeof navigator&&(null!=/(msie) ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||-1!==navigator.userAgent.indexOf("Trident"));
p.isWebWorker="undefined"==typeof window},{}],32:[function(n,u,p){var v=n("../core/browserfs"),e=n("../core/node_fs");u=n("../core/buffer");n=n("../core/buffer_core_arraybuffer");var l=u.Buffer,a=n.BufferCoreArrayBuffer,w=function(){function g(a){this.fs=a;this.FS=a.getFS();this.PATH=a.getPATH();this.ERRNO_CODES=a.getERRNO_CODES()}return g.prototype.open=function(a){var b=this.fs.realPath(a.node),g=this.FS;try{g.isFile(a.node.mode)&&(a.nfd=e.openSync(b,this.fs.flagsToPermissionString(a.flags)))}catch(h){if(!h.code)throw h;
throw new g.ErrnoError(this.ERRNO_CODES[h.code]);}},g.prototype.close=function(a){var b=this.FS;try{b.isFile(a.node.mode)&&a.nfd&&e.closeSync(a.nfd)}catch(g){if(!g.code)throw g;throw new b.ErrnoError(this.ERRNO_CODES[g.code]);}},g.prototype.read=function(c,b,g,h,n){var p,q=new a(b.buffer);b=new l(q,b.byteOffset+g,b.byteOffset+g+h);try{p=e.readSync(c.nfd,b,0,h,n)}catch(k){throw new this.FS.ErrnoError(this.ERRNO_CODES[k.code]);}return p},g.prototype.write=function(c,b,g,h,n){var p,q=new a(b.buffer);
b=new l(q,b.byteOffset+g,b.byteOffset+g+h);try{p=e.writeSync(c.nfd,b,0,h,n)}catch(k){throw new this.FS.ErrnoError(this.ERRNO_CODES[k.code]);}return p},g.prototype.llseek=function(a,b,g){if(1===g)b+=a.position;else if(2===g&&this.FS.isFile(a.node.mode))try{var h=e.fstatSync(a.nfd);b+=h.size}catch(l){throw new this.FS.ErrnoError(this.ERRNO_CODES[l.code]);}if(0>b)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return a.position=b,b},g}(),h=function(){function a(c){this.fs=c;this.FS=c.getFS();this.PATH=
c.getPATH();this.ERRNO_CODES=c.getERRNO_CODES()}return a.prototype.getattr=function(a){var b;a=this.fs.realPath(a);try{b=e.lstatSync(a)}catch(g){if(!g.code)throw g;throw new this.FS.ErrnoError(this.ERRNO_CODES[g.code]);}return{dev:b.dev,ino:b.ino,mode:b.mode,nlink:b.nlink,uid:b.uid,gid:b.gid,rdev:b.rdev,size:b.size,atime:b.atime,mtime:b.mtime,ctime:b.ctime,blksize:b.blksize,blocks:b.blocks}},a.prototype.setattr=function(a,b){var g=this.fs.realPath(a);try{if(void 0!==b.mode&&(e.chmodSync(g,b.mode),
a.mode=b.mode),void 0!==b.timestamp){var h=new Date(b.timestamp);e.utimesSync(g,h,h)}}catch(l){if(!l.code)throw l;if("ENOTSUP"!==l.code)throw new this.FS.ErrnoError(this.ERRNO_CODES[l.code]);}if(void 0!==b.size)try{e.truncateSync(g,b.size)}catch(l){if(!l.code)throw l;throw new this.FS.ErrnoError(this.ERRNO_CODES[l.code]);}},a.prototype.lookup=function(a,b){var e=this.PATH.join2(this.fs.realPath(a),b),e=this.fs.getMode(e);return this.fs.createNode(a,b,e)},a.prototype.mknod=function(a,b,g,h){a=this.fs.createNode(a,
b,g,h);b=this.fs.realPath(a);try{this.FS.isDir(a.mode)?e.mkdirSync(b,a.mode):e.writeFileSync(b,"",{mode:a.mode})}catch(l){if(!l.code)throw l;throw new this.FS.ErrnoError(this.ERRNO_CODES[l.code]);}return a},a.prototype.rename=function(a,b,g){a=this.fs.realPath(a);b=this.PATH.join2(this.fs.realPath(b),g);try{e.renameSync(a,b)}catch(h){if(!h.code)throw h;throw new this.FS.ErrnoError(this.ERRNO_CODES[h.code]);}},a.prototype.unlink=function(a,b){var g=this.PATH.join2(this.fs.realPath(a),b);try{e.unlinkSync(g)}catch(h){if(!h.code)throw h;
throw new this.FS.ErrnoError(this.ERRNO_CODES[h.code]);}},a.prototype.rmdir=function(a,b){var g=this.PATH.join2(this.fs.realPath(a),b);try{e.rmdirSync(g)}catch(h){if(!h.code)throw h;throw new this.FS.ErrnoError(this.ERRNO_CODES[h.code]);}},a.prototype.readdir=function(a){a=this.fs.realPath(a);try{return e.readdirSync(a)}catch(b){if(!b.code)throw b;throw new this.FS.ErrnoError(this.ERRNO_CODES[b.code]);}},a.prototype.symlink=function(a,b,g){a=this.PATH.join2(this.fs.realPath(a),b);try{e.symlinkSync(g,
a)}catch(h){if(!h.code)throw h;throw new this.FS.ErrnoError(this.ERRNO_CODES[h.code]);}},a.prototype.readlink=function(a){a=this.fs.realPath(a);try{return e.readlinkSync(a)}catch(b){if(!b.code)throw b;throw new this.FS.ErrnoError(this.ERRNO_CODES[b.code]);}},a}();n=function(){function a(c,b,e){if(void 0===c&&(c=self.FS),void 0===b&&(b=self.PATH),void 0===e&&(e=self.ERRNO_CODES),this.flagsToPermissionStringMap={0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",
705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},"undefined"==typeof v)throw Error("BrowserFS is not loaded. Please load it before this library.");this.FS=c;this.PATH=b;this.ERRNO_CODES=e;this.node_ops=new h(this);this.stream_ops=new w(this)}return a.prototype.mount=function(a){return this.createNode(null,"/",this.getMode(a.opts.root),0)},a.prototype.createNode=function(a,b,e,g){g=this.FS;if(!g.isDir(e)&&!g.isFile(e)&&
!g.isLink(e))throw new g.ErrnoError(this.ERRNO_CODES.EINVAL);a=g.createNode(a,b,e);return a.node_ops=this.node_ops,a.stream_ops=this.stream_ops,a},a.prototype.getMode=function(a){var b;try{b=e.lstatSync(a)}catch(g){if(!g.code)throw g;throw new this.FS.ErrnoError(this.ERRNO_CODES[g.code]);}return b.mode},a.prototype.realPath=function(a){for(var b=[];a.parent!==a;)b.push(a.name),a=a.parent;return b.push(a.mount.opts.root),b.reverse(),this.PATH.join.apply(null,b)},a.prototype.flagsToPermissionString=
function(a){return a in this.flagsToPermissionStringMap?this.flagsToPermissionStringMap[a]:a},a.prototype.getFS=function(){return this.FS},a.prototype.getPATH=function(){return this.PATH},a.prototype.getERRNO_CODES=function(){return this.ERRNO_CODES},a}();p.BFSEmscriptenFS=n;v.EmscriptenFS=n},{"../core/browserfs":15,"../core/buffer":16,"../core/buffer_core_arraybuffer":19,"../core/node_fs":26}],33:[function(n,u,p){var v=n("../core/node_fs_stats"),e=n("../core/node_path"),l=v.Stats;n=function(){function h(){this._index=
{};this.addPath("/",new w)}return h.prototype._split_path=function(a){var c=e.dirname(a);a=a.substr(c.length+("/"===c?0:1));return[c,a]},h.prototype.fileIterator=function(a){for(var c in this._index)for(var b=this._index[c],e=b.getListing(),h=0;h<e.length;h++){var l=b.getItem(e[h]);l.isFile()&&a(l.getData())}},h.prototype.addPath=function(a,c){if(null==c)throw Error("Inode must be specified");if("/"!==a[0])throw Error("Path must be absolute, got: "+a);if(this._index.hasOwnProperty(a))return this._index[a]===
c;var b=this._split_path(a),e=b[0],b=b[1],h=this._index[e];return void 0===h&&"/"!==a&&(h=new w,!this.addPath(e,h))||"/"!==a&&!h.addItem(b,c)?!1:(c.isFile()||(this._index[a]=c),!0)},h.prototype.removePath=function(a){var c=this._split_path(a),b=this._index[c[0]];if(void 0===b)return null;c=b.remItem(c[1]);if(null===c)return null;if(!c.isFile()){for(var b=c.getListing(),e=0;e<b.length;e++)this.removePath(a+"/"+b[e]);"/"!==a&&delete this._index[a]}return c},h.prototype.ls=function(a){a=this._index[a];
return void 0===a?null:a.getListing()},h.prototype.getInode=function(a){var c=this._split_path(a),b=c[0],c=c[1],e=this._index[b];return void 0===e?null:b===a?e:e.getItem(c)},h.from_listing=function(e){var c=new h,b=new w;c._index["/"]=b;for(e=[["",e,b]];0<e.length;){var m,n=e.pop(),b=n[0],p=n[1],n=n[2],u;for(u in p){var q=p[u],k=""+b+"/"+u;null!=q?(c._index[k]=m=new w,e.push([k,q,m])):m=new a(new l(v.FileType.FILE,-1,365));null!=n&&(n._ls[u]=m)}}return c},h}();p.FileIndex=n;var a=function(){function a(e){this.data=
e}return a.prototype.isFile=function(){return!0},a.prototype.isDir=function(){return!1},a.prototype.getData=function(){return this.data},a.prototype.setData=function(a){this.data=a},a}();p.FileInode=a;var w=function(){function a(){this._ls={}}return a.prototype.isFile=function(){return!1},a.prototype.isDir=function(){return!0},a.prototype.getStats=function(){return new l(v.FileType.DIRECTORY,4096,365)},a.prototype.getListing=function(){return Object.keys(this._ls)},a.prototype.getItem=function(a){var c;
return null!=(c=this._ls[a])?c:null},a.prototype.addItem=function(a,c){return a in this._ls?!1:(this._ls[a]=c,!0)},a.prototype.remItem=function(a){var c=this._ls[a];return void 0===c?null:(delete this._ls[a],c)},a}();p.DirInode=w},{"../core/node_fs_stats":27,"../core/node_path":28}],34:[function(n,u,p){var v=n("../core/node_fs_stats"),e=n("../core/buffer");n=function(){function l(a,e,h,g,c,b){this.id=a;this.size=e;this.mode=h;this.atime=g;this.mtime=c;this.ctime=b}return l.prototype.toStats=function(){return new v.Stats((61440&
this.mode)===v.FileType.DIRECTORY?v.FileType.DIRECTORY:v.FileType.FILE,this.size,this.mode,new Date(this.atime),new Date(this.mtime),new Date(this.ctime))},l.prototype.getSize=function(){return 30+this.id.length},l.prototype.toBuffer=function(a){return void 0===a&&(a=new e.Buffer(this.getSize())),a.writeUInt32LE(this.size,0),a.writeUInt16LE(this.mode,4),a.writeDoubleLE(this.atime,6),a.writeDoubleLE(this.mtime,14),a.writeDoubleLE(this.ctime,22),a.write(this.id,30,this.id.length,"ascii"),a},l.prototype.update=
function(a){var e=!1;this.size!==a.size&&(this.size=a.size,e=!0);this.mode!==a.mode&&(this.mode=a.mode,e=!0);var h=a.atime.getTime();this.atime!==h&&(this.atime=h,e=!0);h=a.mtime.getTime();this.mtime!==h&&(this.mtime=h,e=!0);a=a.ctime.getTime();return this.ctime!==a&&(this.ctime=a,e=!0),e},l.fromBuffer=function(a){if(void 0===a)throw Error("NO");return new l(a.toString("ascii",30),a.readUInt32LE(0),a.readUInt16LE(4),a.readDoubleLE(6),a.readDoubleLE(14),a.readDoubleLE(22))},l.prototype.isFile=function(){return(61440&
this.mode)===v.FileType.FILE},l.prototype.isDirectory=function(){return(61440&this.mode)===v.FileType.DIRECTORY},l}();u.exports=n},{"../core/buffer":16,"../core/node_fs_stats":27}],35:[function(n,u,p){function v(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:3&b|8).toString(16)})}function e(a,b){return a?(b(a),!1):!0}function l(a,b,d){return a?(b.abort(function(){d(a)}),!1):!0}var a=this.__extends||function(a,b){function d(){this.constructor=
a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d};u=n("../core/file_system");var w=n("../core/api_error"),h=n("../core/node_fs_stats"),g=n("../core/node_path"),c=n("../generic/inode"),b=n("../core/buffer");n=n("../generic/preload_file");var m=w.ApiError,r=b.Buffer,b=function(){function a(b){this.store=b;this.originalData={};this.modifiedKeys=[]}return a.prototype.stashOldValue=function(a,b){this.originalData.hasOwnProperty(a)||(this.originalData[a]=b)},a.prototype.markModified=
function(a){-1===this.modifiedKeys.indexOf(a)&&(this.modifiedKeys.push(a),this.originalData.hasOwnProperty(a)||(this.originalData[a]=this.store.get(a)))},a.prototype.get=function(a){var b=this.store.get(a);return this.stashOldValue(a,b),b},a.prototype.put=function(a,b,c){return this.markModified(a),this.store.put(a,b,c)},a.prototype["delete"]=function(a){this.markModified(a);this.store["delete"](a)},a.prototype.commit=function(){},a.prototype.abort=function(){var a,b,c;for(a=0;a<this.modifiedKeys.length;a++)b=
this.modifiedKeys[a],c=this.originalData[b],null===c?this.store["delete"](b):this.store.put(b,c,!0)},a}();p.SimpleSyncRWTransaction=b;var z=function(b){function c(a,e,k,g,h){b.call(this,a,e,k,g,h)}return a(c,b),c.prototype.syncSync=function(){this.isDirty()&&(this._fs._syncSync(this.getPath(),this.getBuffer(),this.getStats()),this.resetDirty())},c.prototype.closeSync=function(){this.syncSync()},c}(n.PreloadFile);p.SyncKeyValueFile=z;b=function(b){function e(a){b.call(this);this.store=a.store;this.makeRootDirectory()}
return a(e,b),e.isAvailable=function(){return!0},e.prototype.getName=function(){return this.store.name()},e.prototype.isReadOnly=function(){return!1},e.prototype.supportsSymlinks=function(){return!1},e.prototype.supportsProps=function(){return!1},e.prototype.supportsSynch=function(){return!0},e.prototype.makeRootDirectory=function(){var a=this.store.beginTransaction("readwrite");if(void 0===a.get("/")){var b=(new Date).getTime(),b=new c(v(),4096,511|h.FileType.DIRECTORY,b,b,b);a.put(b.id,new r("{}"),
!1);a.put("/",b.toBuffer(),!1);a.commit()}},e.prototype._findINode=function(a,b,c){var e=this,k=function(k){k=e.getDirListing(a,b,k);if(k[c])return k[c];throw m.ENOENT(g.resolve(b,c));};return"/"===b?""===c?"/":k(this.getINode(a,b,"/")):k(this.getINode(a,b+g.sep+c,this._findINode(a,g.dirname(b),g.basename(b))))},e.prototype.findINode=function(a,b){return this.getINode(a,b,this._findINode(a,g.dirname(b),g.basename(b)))},e.prototype.getINode=function(a,b,e){a=a.get(e);if(void 0===a)throw m.ENOENT(b);
return c.fromBuffer(a)},e.prototype.getDirListing=function(a,b,c){if(!c.isDirectory())throw m.ENOTDIR(b);a=a.get(c.id);if(void 0===a)throw m.ENOENT(b);return JSON.parse(a.toString())},e.prototype.addNewNode=function(a,b){for(var c;;)try{return c=v(),a.put(c,b,!1),c}catch(e){}throw new m(w.ErrorCode.EIO,"Unable to commit data to key-value store.");},e.prototype.commitNewFile=function(a,b,e,k,h){var l=g.dirname(b),n=g.basename(b),q=this.findINode(a,l),l=this.getDirListing(a,l,q),p=(new Date).getTime();
if("/"===b)throw m.EEXIST(b);if(l[n])throw m.EEXIST(b);try{var w=this.addNewNode(a,h),v=new c(w,h.length,k|e,p,p,p),u=this.addNewNode(a,v.toBuffer());l[n]=u;a.put(q.id,new r(JSON.stringify(l)),!0)}catch(A){throw a.abort(),A;}return a.commit(),v},e.prototype.empty=function(){this.store.clear();this.makeRootDirectory()},e.prototype.renameSync=function(a,b){var c=this.store.beginTransaction("readwrite"),e=g.dirname(a),k=g.basename(a),h=g.dirname(b),l=g.basename(b),n=this.findINode(c,e),q=this.getDirListing(c,
e,n);if(!q[k])throw m.ENOENT(a);var p=q[k];if(delete q[k],0===(h+"/").indexOf(a+"/"))throw new m(w.ErrorCode.EBUSY,e);var v,u;if(h===e?(v=n,u=q):(v=this.findINode(c,h),u=this.getDirListing(c,h,v)),u[l]){e=this.getINode(c,b,u[l]);if(!e.isFile())throw m.EPERM(b);try{c["delete"](e.id),c["delete"](u[l])}catch(A){throw c.abort(),A;}}u[l]=p;try{c.put(n.id,new r(JSON.stringify(q)),!0),c.put(v.id,new r(JSON.stringify(u)),!0)}catch(A){throw c.abort(),A;}c.commit()},e.prototype.statSync=function(a,b){return this.findINode(this.store.beginTransaction("readonly"),
a).toStats()},e.prototype.createFileSync=function(a,b,c){var e=this.store.beginTransaction("readwrite"),k=new r(0);c=this.commitNewFile(e,a,h.FileType.FILE,c,k);return new z(this,a,b,c.toStats(),k)},e.prototype.openFileSync=function(a,b){var c=this.store.beginTransaction("readonly"),e=this.findINode(c,a),c=c.get(e.id);if(void 0===c)throw m.ENOENT(a);return new z(this,a,b,e.toStats(),c)},e.prototype.removeEntry=function(a,b){var c=this.store.beginTransaction("readwrite"),e=g.dirname(a),k=this.findINode(c,
e),e=this.getDirListing(c,e,k),h=g.basename(a);if(!e[h])throw m.ENOENT(a);var l=e[h];delete e[h];h=this.getINode(c,a,l);if(!b&&h.isDirectory())throw m.EISDIR(a);if(b&&!h.isDirectory())throw m.ENOTDIR(a);try{c["delete"](h.id),c["delete"](l),c.put(k.id,new r(JSON.stringify(e)),!0)}catch(n){throw c.abort(),n;}c.commit()},e.prototype.unlinkSync=function(a){this.removeEntry(a,!1)},e.prototype.rmdirSync=function(a){this.removeEntry(a,!0)},e.prototype.mkdirSync=function(a,b){var c=this.store.beginTransaction("readwrite"),
e=new r("{}");this.commitNewFile(c,a,h.FileType.DIRECTORY,b,e)},e.prototype.readdirSync=function(a){var b=this.store.beginTransaction("readonly");return Object.keys(this.getDirListing(b,a,this.findINode(b,a)))},e.prototype._syncSync=function(a,b,c){var e=this.store.beginTransaction("readwrite"),k=this._findINode(e,g.dirname(a),g.basename(a));a=this.getINode(e,a,k);c=a.update(c);try{e.put(a.id,b,!0),c&&e.put(k,a.toBuffer(),!0)}catch(h){throw e.abort(),h;}e.commit()},e}(u.SynchronousFileSystem);p.SyncKeyValueFileSystem=
b;var A=function(b){function c(a,e,k,g,h){b.call(this,a,e,k,g,h)}return a(c,b),c.prototype.sync=function(a){var b=this;this.isDirty()?this._fs._sync(this.getPath(),this.getBuffer(),this.getStats(),function(c){c||b.resetDirty();a(c)}):a()},c.prototype.close=function(a){this.sync(a)},c}(n.PreloadFile);p.AsyncKeyValueFile=A;u=function(b){function k(){b.apply(this,arguments)}return a(k,b),k.prototype.init=function(a,b){this.store=a;this.makeRootDirectory(b)},k.isAvailable=function(){return!0},k.prototype.getName=
function(){return this.store.name()},k.prototype.isReadOnly=function(){return!1},k.prototype.supportsSymlinks=function(){return!1},k.prototype.supportsProps=function(){return!1},k.prototype.supportsSynch=function(){return!1},k.prototype.makeRootDirectory=function(a){var b=this.store.beginTransaction("readwrite");b.get("/",function(e,k){if(e||void 0===k){var g=(new Date).getTime(),m=new c(v(),4096,511|h.FileType.DIRECTORY,g,g,g);b.put(m.id,new r("{}"),!1,function(c){l(c,b,a)&&b.put("/",m.toBuffer(),
!1,function(c){c?b.abort(function(){a(c)}):b.commit(a)})})}else b.commit(a)})},k.prototype._findINode=function(a,b,c,k){var h=this,l=function(a,d,e){a?k(a):e[c]?k(null,e[c]):k(m.ENOENT(g.resolve(b,c)))};"/"===b?""===c?k(null,"/"):this.getINode(a,b,"/",function(c,g){e(c,k)&&h.getDirListing(a,b,g,function(a,b){l(a,g,b)})}):this.findINodeAndDirListing(a,b,l)},k.prototype.findINode=function(a,b,c){var k=this;this._findINode(a,g.dirname(b),g.basename(b),function(g,h){e(g,c)&&k.getINode(a,b,h,c)})},k.prototype.getINode=
function(a,b,k,g){a.get(k,function(a,d){e(a,g)&&(void 0===d?g(m.ENOENT(b)):g(null,c.fromBuffer(d)))})},k.prototype.getDirListing=function(a,b,c,k){c.isDirectory()?a.get(c.id,function(a,c){if(e(a,k))try{k(null,JSON.parse(c.toString()))}catch(d){k(m.ENOENT(b))}}):k(m.ENOTDIR(b))},k.prototype.findINodeAndDirListing=function(a,b,c){var k=this;this.findINode(a,b,function(g,h){e(g,c)&&k.getDirListing(a,b,h,function(a,b){e(a,c)&&c(null,h,b)})})},k.prototype.addNewNode=function(a,b,c){var e,k=0,g=function(){5===
++k?c(new m(w.ErrorCode.EIO,"Unable to commit data to key-value store.")):(e=v(),a.put(e,b,!1,function(a,b){a||!b?g():c(null,e)}))};g()},k.prototype.commitNewFile=function(a,b,e,k,h,n){var q=this,p=g.dirname(b),w=g.basename(b),v=(new Date).getTime();return"/"===b?n(m.EEXIST(b)):void this.findINodeAndDirListing(a,p,function(g,p,u){l(g,a,n)&&(u[w]?a.abort(function(){n(m.EEXIST(b))}):q.addNewNode(a,h,function(b,f){if(l(b,a,n)){var g=new c(f,h.length,k|e,v,v,v);q.addNewNode(a,g.toBuffer(),function(b,
c){l(b,a,n)&&(u[w]=c,a.put(p.id,new r(JSON.stringify(u)),!0,function(b){l(b,a,n)&&a.commit(function(b){l(b,a,n)&&n(null,g)})}))})}}))})},k.prototype.empty=function(a){var b=this;this.store.clear(function(c){e(c,a)&&b.makeRootDirectory(a)})},k.prototype.rename=function(a,b,c){var e=this,k=this.store.beginTransaction("readwrite"),h=g.dirname(a),n=g.basename(a),q=g.dirname(b),p=g.basename(b),v={},u={},A=!1;if(0===(q+"/").indexOf(a+"/"))return c(new m(w.ErrorCode.EBUSY,h));var z=function(){if(!A&&u.hasOwnProperty(h)&&
u.hasOwnProperty(q)){var g=u[h],w=v[h],z=u[q],K=v[q];if(g[n]){var N=g[n];delete g[n];var U=function(){z[p]=N;k.put(w.id,new r(JSON.stringify(g)),!0,function(a){l(a,k,c)&&(h===q?k.commit(c):k.put(K.id,new r(JSON.stringify(z)),!0,function(a){l(a,k,c)&&k.commit(c)}))})};z[p]?e.getINode(k,b,z[p],function(a,d){l(a,k,c)&&(d.isFile()?k["delete"](d.id,function(a){l(a,k,c)&&k["delete"](z[p],function(a){l(a,k,c)&&U()})}):k.abort(function(a){c(m.EPERM(b))}))}):U()}else c(m.ENOENT(a))}},K=function(a){e.findINodeAndDirListing(k,
a,function(b,d,e){b?A||(A=!0,k.abort(function(){c(b)})):(v[a]=d,u[a]=e,z())})};K(h);h!==q&&K(q)},k.prototype.stat=function(a,b,c){b=this.store.beginTransaction("readonly");this.findINode(b,a,function(a,b){e(a,c)&&c(null,b.toStats())})},k.prototype.createFile=function(a,b,c,k){var g=this,m=this.store.beginTransaction("readwrite"),l=new r(0);this.commitNewFile(m,a,h.FileType.FILE,c,l,function(c,h){e(c,k)&&k(null,new A(g,a,b,h.toStats(),l))})},k.prototype.openFile=function(a,b,c){var k=this,g=this.store.beginTransaction("readonly");
this.findINode(g,a,function(h,l){e(h,c)&&g.get(l.id,function(g,h){e(g,c)&&(void 0===h?c(m.ENOENT(a)):c(null,new A(k,a,b,l.toStats(),h)))})})},k.prototype.removeEntry=function(a,b,c){var e=this,k=this.store.beginTransaction("readwrite"),h=g.dirname(a),n=g.basename(a);this.findINodeAndDirListing(k,h,function(g,h,q){if(l(g,k,c))if(q[n]){var p=q[n];delete q[n];e.getINode(k,a,p,function(e,g){l(e,k,c)&&(!b&&g.isDirectory()?k.abort(function(){c(m.EISDIR(a))}):b&&!g.isDirectory()?k.abort(function(){c(m.ENOTDIR(a))}):
k["delete"](g.id,function(a){l(a,k,c)&&k["delete"](p,function(a){l(a,k,c)&&k.put(h.id,new r(JSON.stringify(q)),!0,function(a){l(a,k,c)&&k.commit(c)})})}))})}else k.abort(function(){c(m.ENOENT(a))})})},k.prototype.unlink=function(a,b){this.removeEntry(a,!1,b)},k.prototype.rmdir=function(a,b){this.removeEntry(a,!0,b)},k.prototype.mkdir=function(a,b,c){var e=this.store.beginTransaction("readwrite"),k=new r("{}");this.commitNewFile(e,a,h.FileType.DIRECTORY,b,k,c)},k.prototype.readdir=function(a,b){var c=
this,k=this.store.beginTransaction("readonly");this.findINode(k,a,function(g,h){e(g,b)&&c.getDirListing(k,a,h,function(a,c){e(a,b)&&b(null,Object.keys(c))})})},k.prototype._sync=function(a,b,c,e){var k=this,h=this.store.beginTransaction("readwrite");this._findINode(h,g.dirname(a),g.basename(a),function(g,m){l(g,h,e)&&k.getINode(h,a,m,function(a,d){if(l(a,h,e)){var k=d.update(c);h.put(d.id,b,!0,function(a){l(a,h,e)&&(k?h.put(m,d.toBuffer(),!0,function(a){l(a,h,e)&&h.commit(e)}):h.commit(e))})}})})},
k}(u.BaseFileSystem);p.AsyncKeyValueFileSystem=u},{"../core/api_error":14,"../core/buffer":16,"../core/file_system":23,"../core/node_fs_stats":27,"../core/node_path":28,"../generic/inode":34,"../generic/preload_file":36}],36:[function(n,u,p){var v=this.__extends||function(a,b){function e(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);e.prototype=b.prototype;a.prototype=new e};u=n("../core/file");var e=n("../core/buffer"),l=n("../core/api_error"),a=n("../core/node_fs"),w=l.ApiError,
h=l.ErrorCode,g=e.Buffer;n=function(c){function b(a,b,e,h,l){if(c.call(this),this._pos=0,this._dirty=!1,this._fs=a,this._path=b,this._flag=e,this._stat=h,null!=l?this._buffer=l:this._buffer=new g(0),this._stat.size!==this._buffer.length&&this._flag.isReadable())throw Error("Invalid buffer: Buffer is "+this._buffer.length+" long, yet Stats object specifies that file is "+this._stat.size+" long.");}return v(b,c),b.prototype.isDirty=function(){return this._dirty},b.prototype.resetDirty=function(){this._dirty=
!1},b.prototype.getBuffer=function(){return this._buffer},b.prototype.getStats=function(){return this._stat},b.prototype.getFlag=function(){return this._flag},b.prototype.getPath=function(){return this._path},b.prototype.getPos=function(){return this._flag.isAppendable()?this._stat.size:this._pos},b.prototype.advancePos=function(a){return this._pos+=a},b.prototype.setPos=function(a){return this._pos=a},b.prototype.sync=function(a){try{this.syncSync(),a()}catch(b){a(b)}},b.prototype.syncSync=function(){throw new w(h.ENOTSUP);
},b.prototype.close=function(a){try{this.closeSync(),a()}catch(b){a(b)}},b.prototype.closeSync=function(){throw new w(h.ENOTSUP);},b.prototype.stat=function(a){try{a(null,this._stat.clone())}catch(b){a(b)}},b.prototype.statSync=function(){return this._stat.clone()},b.prototype.truncate=function(b,c){try{this.truncateSync(b),this._flag.isSynchronous()&&!a.getRootFS().supportsSynch()&&this.sync(c),c()}catch(e){return c(e)}},b.prototype.truncateSync=function(b){if(this._dirty=!0,!this._flag.isWriteable())throw new w(h.EPERM,
"File not opened with a writeable mode.");if(this._stat.mtime=new Date,b>this._buffer.length)return b=new g(b-this._buffer.length),b.fill(0),this.writeSync(b,0,b.length,this._buffer.length),void(this._flag.isSynchronous()&&a.getRootFS().supportsSynch()&&this.syncSync());this._stat.size=b;var c=new g(b);this._buffer.copy(c,0,0,b);this._buffer=c;this._flag.isSynchronous()&&a.getRootFS().supportsSynch()&&this.syncSync()},b.prototype.write=function(a,b,c,e,g){try{g(null,this.writeSync(a,b,c,e),a)}catch(k){g(k)}},
b.prototype.writeSync=function(a,b,c,e){if(this._dirty=!0,null==e&&(e=this.getPos()),!this._flag.isWriteable())throw new w(h.EPERM,"File not opened with a writeable mode.");var l=e+c;l>this._stat.size&&(this._stat.size=l,l>this._buffer.length)&&(l=new g(l),this._buffer.copy(l),this._buffer=l);a=a.copy(this._buffer,e,b,b+c);return this._stat.mtime=new Date,this._flag.isSynchronous()?(this.syncSync(),a):(this.setPos(e+a),a)},b.prototype.read=function(a,b,c,e,g){try{g(null,this.readSync(a,b,c,e),a)}catch(k){g(k)}},
b.prototype.readSync=function(a,b,c,e){if(!this._flag.isReadable())throw new w(h.EPERM,"File not opened with a readable mode.");null==e&&(e=this.getPos());e+c>this._stat.size&&(c=this._stat.size-e);a=this._buffer.copy(a,b,e,e+c);return this._stat.atime=new Date,this._pos=e+c,a},b.prototype.chmod=function(a,b){try{this.chmodSync(a),b()}catch(c){b(c)}},b.prototype.chmodSync=function(a){if(!this._fs.supportsProps())throw new w(h.ENOTSUP);this._dirty=!0;this._stat.chmod(a);this.syncSync()},b}(u.BaseFile);
p.PreloadFile=n;n=function(a){function b(b,e,g,h,l){a.call(this,b,e,g,h,l)}return v(b,a),b.prototype.sync=function(a){a()},b.prototype.syncSync=function(){},b.prototype.close=function(a){a()},b.prototype.closeSync=function(){},b}(n);p.NoSyncFile=n},{"../core/api_error":14,"../core/buffer":16,"../core/file":21,"../core/node_fs":26}],37:[function(n,u,p){function v(a){var b=IEBinaryToArray_ByteStr(a);a=IEBinaryToArray_ByteStr_Last(a);b=b.replace(/[\s\S]/g,function(a){a=a.charCodeAt(0);return String.fromCharCode(255&
a,a>>8)})+a;a=Array(b.length);for(var c=0;c<b.length;c++)a[c]=b.charCodeAt(c);return a}function e(a,b,c,d){switch(c){case "buffer":case "json":break;default:return d(new m(r.EINVAL,"Invalid download type: "+c))}var e=new XMLHttpRequest;e.open("GET",b,a);e.setRequestHeader("Accept-Charset","x-user-defined");e.onreadystatechange=function(a){var b;if(4===e.readyState){if(200!==e.status)return d(new m(e.status,"XHR error."));switch(c){case "buffer":return b=v(e.responseBody),d(null,new z(b));case "json":return d(null,
JSON.parse(e.responseText))}}};e.send()}function l(a,b,c){e(!0,a,b,c)}function a(a,b){var c;return e(!1,a,b,function(a,b){if(a)throw a;c=b}),c}function w(a,b,c){var d=new XMLHttpRequest;d.open("GET",a,!0);var e=!0;switch(b){case "buffer":d.responseType="arraybuffer";break;case "json":try{d.responseType="json",e="json"===d.responseType}catch(g){e=!1}break;default:return c(new m(r.EINVAL,"Invalid download type: "+b))}d.onreadystatechange=function(a){if(4===d.readyState){if(200!==d.status)return c(new m(d.status,
"XHR error."));switch(b){case "buffer":return c(null,new z(d.response?d.response:0));case "json":return e?c(null,d.response):c(null,JSON.parse(d.responseText))}}};d.send()}function h(a,b){var c=new XMLHttpRequest;c.open("GET",a,!1);var d=null,e=null;if(c.overrideMimeType("text/plain; charset=x-user-defined"),c.onreadystatechange=function(a){if(4===c.readyState){if(200!==c.status)return void(e=new m(c.status,"XHR error."));switch(b){case "buffer":a=c.responseText;d=new z(a.length);for(var g=0;g<a.length;g++)d.writeUInt8(a.charCodeAt(g),
g);break;case "json":return void(d=JSON.parse(c.responseText))}}},c.send(),e)throw e;return d}function g(a,b){var c=new XMLHttpRequest;switch(c.open("GET",a,!1),b){case "buffer":c.responseType="arraybuffer";break;case "json":break;default:throw new m(r.EINVAL,"Invalid download type: "+b);}var d,e;if(c.onreadystatechange=function(a){if(4===c.readyState)if(200===c.status)switch(b){case "buffer":d=new z(c.response);break;case "json":d=JSON.parse(c.response)}else e=new m(c.status,"XHR error.")},c.send(),
e)throw e;return d}function c(a,b,c){var d=new XMLHttpRequest;d.open("HEAD",b,a);d.onreadystatechange=function(a){if(4===d.readyState){if(200!=d.status)return c(new m(d.status,"XHR HEAD error."));try{return c(null,parseInt(d.getResponseHeader("Content-Length"),10))}catch(b){return c(new m(r.EIO,"XHR HEAD error: Could not read content-length."))}}};d.send()}u=n("../core/util");var b=n("../core/buffer");n=n("../core/api_error");var m=n.ApiError,r=n.ErrorCode,z=b.Buffer;p.asyncDownloadFile=u.isIE&&"undefined"==
typeof Blob?l:w;p.syncDownloadFile=u.isIE&&"undefined"==typeof Blob?a:u.isIE&&"undefined"!=typeof Blob?g:h;p.getFileSizeSync=function(a){var b;return c(!1,a,function(a,c){if(a)throw a;b=c}),b};p.getFileSizeAsync=function(a,b){c(!0,a,b)}},{"../core/api_error":14,"../core/buffer":16,"../core/util":31}],38:[function(n,u,p){var v=n("./core/global");if(Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),
Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),h="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),g=h.length;return function(c){if("object"!=typeof c&&("function"!=typeof c||null===c))throw new TypeError("Object.keys called on non-object");var b,l=[];for(b in c)a.call(c,b)&&l.push(b);if(e)for(b=0;g>b;b++)a.call(c,h[b])&&l.push(h[b]);return l}}()),"b"!=="ab".substr(-1)&&
(String.prototype.substr=function(a){return function(e,h){return 0>e&&(e=this.length+e),a.call(this,e,h)}}(String.prototype.substr)),Array.prototype.forEach||(Array.prototype.forEach=function(a,e){for(var h=0;h<this.length;++h)h in this&&a.call(e,this[h],h,this)}),"undefined"==typeof setImmediate){var e=[];if(function(){if("undefined"!=typeof v.importScripts||!v.postMessage)return!1;var a=!0,e=v.onmessage;return v.onmessage=function(){a=!1},v.postMessage("","*"),v.onmessage=e,a}())v.setImmediate=
function(a){e.push(a);v.postMessage("zero-timeout-message","*")},p=function(a){if(a.source===self&&"zero-timeout-message"===a.data&&(a.stopPropagation?a.stopPropagation():a.cancelBubble=!0,0<e.length))return e.shift()()},v.addEventListener?v.addEventListener("message",p,!0):v.attachEvent("onmessage",p);else if(v.MessageChannel){var l=new v.MessageChannel;l.port1.onmessage=function(a){return 0<e.length?e.shift()():void 0};v.setImmediate=function(a){e.push(a);l.port2.postMessage("")}}else v.setImmediate=
function(a){return setTimeout(a,0)}}Array.prototype.indexOf||(Array.prototype.indexOf=function(a,e){if(void 0===e&&(e=0),!this)throw new TypeError;var h=this.length;if(0===h||g>=h)return-1;var g=e;for(0>g&&(g=h+g);h>g;g++)if(this[g]===a)return g;return-1});Array.prototype.forEach||(Array.prototype.forEach=function(a,e){var h,g;h=0;for(g=this.length;g>h;++h)h in this&&a.call(e,this[h],h,this)});Array.prototype.map||(Array.prototype.map=function(a,e){var h,g,c;if(null==this)throw new TypeError(" this is null or not defined");
var b=Object(this),l=b.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");e&&(h=e);g=Array(l);for(c=0;l>c;){var n,p;c in b&&(n=b[c],p=a.call(h,n,c,b),g[c]=p);c++}return g});"undefined"!=typeof document&&void 0===window.chrome&&document.write("\x3c!-- IEBinaryToArray_ByteStr --\x3e\r\n<script type='text/vbscript'>\r\nFunction IEBinaryToArray_ByteStr(Binary)\r\n IEBinaryToArray_ByteStr = CStr(Binary)\r\nEnd Function\r\nFunction IEBinaryToArray_ByteStr_Last(Binary)\r\n Dim lastIndex\r\n lastIndex = LenB(Binary)\r\n if lastIndex mod 2 Then\r\n IEBinaryToArray_ByteStr_Last = Chr( AscB( MidB( Binary, lastIndex, 1 ) ) )\r\n Else\r\n IEBinaryToArray_ByteStr_Last = \"\"\r\n End If\r\nEnd Function\r\n\x3c/script>\r\n");
n("./generic/emscripten_fs");n("./backend/IndexedDB");n("./backend/XmlHttpRequest");n("./backend/async_mirror");n("./backend/dropbox");n("./backend/html5fs");n("./backend/in_memory");n("./backend/localStorage");n("./backend/mountable_file_system");n("./backend/overlay");n("./backend/workerfs");n("./backend/zipfs");u.exports=n("./core/browserfs")},{"./backend/IndexedDB":3,"./backend/XmlHttpRequest":4,"./backend/async_mirror":5,"./backend/dropbox":6,"./backend/html5fs":7,"./backend/in_memory":8,"./backend/localStorage":9,
"./backend/mountable_file_system":10,"./backend/overlay":11,"./backend/workerfs":12,"./backend/zipfs":13,"./core/browserfs":15,"./core/global":24,"./generic/emscripten_fs":32}]},{},[38])(38)});